var sT=(f,e)=>()=>(e||f((e={exports:{}}).exports,e),e.exports);var NR=sT(wu=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var Ug={exports:{}},md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function lT(){if(sy)return md;sy=1;var f=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var d in r)d!=="key"&&(o[d]=r[d])}else o=r;return r=o.ref,{$$typeof:f,type:n,key:u,ref:r!==void 0?r:null,props:o}}return md.Fragment=e,md.jsx=t,md.jsxs=t,md}var ly;function oT(){return ly||(ly=1,Ug.exports=lT()),Ug.exports}var ir=oT(),Bg={exports:{}},ca={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function uT(){if(oy)return ca;oy=1;var f=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),E=Symbol.iterator;function b(Pe){return Pe===null||typeof Pe!="object"?null:(Pe=E&&Pe[E]||Pe["@@iterator"],typeof Pe=="function"?Pe:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function O(Pe,Be,it){this.props=Pe,this.context=Be,this.refs=C,this.updater=it||A}O.prototype.isReactComponent={},O.prototype.setState=function(Pe,Be){if(typeof Pe!="object"&&typeof Pe!="function"&&Pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Pe,Be,"setState")},O.prototype.forceUpdate=function(Pe){this.updater.enqueueForceUpdate(this,Pe,"forceUpdate")};function te(){}te.prototype=O.prototype;function de(Pe,Be,it){this.props=Pe,this.context=Be,this.refs=C,this.updater=it||A}var fe=de.prototype=new te;fe.constructor=de,T(fe,O.prototype),fe.isPureReactComponent=!0;var De=Array.isArray,Oe={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function k(Pe,Be,it,gt,zt,Ce){return it=Ce.ref,{$$typeof:f,type:Pe,key:Be,ref:it!==void 0?it:null,props:Ce}}function ee(Pe,Be){return k(Pe.type,Be,void 0,void 0,void 0,Pe.props)}function Ee(Pe){return typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===f}function P(Pe){var Be={"=":"=0",":":"=2"};return"$"+Pe.replace(/[=:]/g,function(it){return Be[it]})}var xe=/\/+/g;function Ve(Pe,Be){return typeof Pe=="object"&&Pe!==null&&Pe.key!=null?P(""+Pe.key):Be.toString(36)}function be(){}function _t(Pe){switch(Pe.status){case"fulfilled":return Pe.value;case"rejected":throw Pe.reason;default:switch(typeof Pe.status=="string"?Pe.then(be,be):(Pe.status="pending",Pe.then(function(Be){Pe.status==="pending"&&(Pe.status="fulfilled",Pe.value=Be)},function(Be){Pe.status==="pending"&&(Pe.status="rejected",Pe.reason=Be)})),Pe.status){case"fulfilled":return Pe.value;case"rejected":throw Pe.reason}}throw Pe}function Ye(Pe,Be,it,gt,zt){var Ce=typeof Pe;(Ce==="undefined"||Ce==="boolean")&&(Pe=null);var Le=!1;if(Pe===null)Le=!0;else switch(Ce){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(Pe.$$typeof){case f:case e:Le=!0;break;case p:return Le=Pe._init,Ye(Le(Pe._payload),Be,it,gt,zt)}}if(Le)return zt=zt(Pe),Le=gt===""?"."+Ve(Pe,0):gt,De(zt)?(it="",Le!=null&&(it=Le.replace(xe,"$&/")+"/"),Ye(zt,Be,it,"",function(W){return W})):zt!=null&&(Ee(zt)&&(zt=ee(zt,it+(zt.key==null||Pe&&Pe.key===zt.key?"":(""+zt.key).replace(xe,"$&/")+"/")+Le)),Be.push(zt)),1;Le=0;var yt=gt===""?".":gt+":";if(De(Pe))for(var Y=0;Y<Pe.length;Y++)gt=Pe[Y],Ce=yt+Ve(gt,Y),Le+=Ye(gt,Be,it,Ce,zt);else if(Y=b(Pe),typeof Y=="function")for(Pe=Y.call(Pe),Y=0;!(gt=Pe.next()).done;)gt=gt.value,Ce=yt+Ve(gt,Y++),Le+=Ye(gt,Be,it,Ce,zt);else if(Ce==="object"){if(typeof Pe.then=="function")return Ye(_t(Pe),Be,it,gt,zt);throw Be=String(Pe),Error("Objects are not valid as a React child (found: "+(Be==="[object Object]"?"object with keys {"+Object.keys(Pe).join(", ")+"}":Be)+"). If you meant to render a collection of children, use an array instead.")}return Le}function _e(Pe,Be,it){if(Pe==null)return Pe;var gt=[],zt=0;return Ye(Pe,gt,"","",function(Ce){return Be.call(it,Ce,zt++)}),gt}function He(Pe){if(Pe._status===-1){var Be=Pe._result;Be=Be(),Be.then(function(it){(Pe._status===0||Pe._status===-1)&&(Pe._status=1,Pe._result=it)},function(it){(Pe._status===0||Pe._status===-1)&&(Pe._status=2,Pe._result=it)}),Pe._status===-1&&(Pe._status=0,Pe._result=Be)}if(Pe._status===1)return Pe._result.default;throw Pe._result}var nt=typeof reportError=="function"?reportError:function(Pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Pe=="object"&&Pe!==null&&typeof Pe.message=="string"?String(Pe.message):String(Pe),error:Pe});if(!window.dispatchEvent(Be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Pe);return}console.error(Pe)};function ut(){}return ca.Children={map:_e,forEach:function(Pe,Be,it){_e(Pe,function(){Be.apply(this,arguments)},it)},count:function(Pe){var Be=0;return _e(Pe,function(){Be++}),Be},toArray:function(Pe){return _e(Pe,function(Be){return Be})||[]},only:function(Pe){if(!Ee(Pe))throw Error("React.Children.only expected to receive a single React element child.");return Pe}},ca.Component=O,ca.Fragment=t,ca.Profiler=r,ca.PureComponent=de,ca.StrictMode=n,ca.Suspense=g,ca.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Oe,ca.__COMPILER_RUNTIME={__proto__:null,c:function(Pe){return Oe.H.useMemoCache(Pe)}},ca.cache=function(Pe){return function(){return Pe.apply(null,arguments)}},ca.cloneElement=function(Pe,Be,it){if(Pe==null)throw Error("The argument must be a React element, but you passed "+Pe+".");var gt=T({},Pe.props),zt=Pe.key,Ce=void 0;if(Be!=null)for(Le in Be.ref!==void 0&&(Ce=void 0),Be.key!==void 0&&(zt=""+Be.key),Be)!q.call(Be,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&Be.ref===void 0||(gt[Le]=Be[Le]);var Le=arguments.length-2;if(Le===1)gt.children=it;else if(1<Le){for(var yt=Array(Le),Y=0;Y<Le;Y++)yt[Y]=arguments[Y+2];gt.children=yt}return k(Pe.type,zt,void 0,void 0,Ce,gt)},ca.createContext=function(Pe){return Pe={$$typeof:u,_currentValue:Pe,_currentValue2:Pe,_threadCount:0,Provider:null,Consumer:null},Pe.Provider=Pe,Pe.Consumer={$$typeof:o,_context:Pe},Pe},ca.createElement=function(Pe,Be,it){var gt,zt={},Ce=null;if(Be!=null)for(gt in Be.key!==void 0&&(Ce=""+Be.key),Be)q.call(Be,gt)&&gt!=="key"&&gt!=="__self"&&gt!=="__source"&&(zt[gt]=Be[gt]);var Le=arguments.length-2;if(Le===1)zt.children=it;else if(1<Le){for(var yt=Array(Le),Y=0;Y<Le;Y++)yt[Y]=arguments[Y+2];zt.children=yt}if(Pe&&Pe.defaultProps)for(gt in Le=Pe.defaultProps,Le)zt[gt]===void 0&&(zt[gt]=Le[gt]);return k(Pe,Ce,void 0,void 0,null,zt)},ca.createRef=function(){return{current:null}},ca.forwardRef=function(Pe){return{$$typeof:d,render:Pe}},ca.isValidElement=Ee,ca.lazy=function(Pe){return{$$typeof:p,_payload:{_status:-1,_result:Pe},_init:He}},ca.memo=function(Pe,Be){return{$$typeof:h,type:Pe,compare:Be===void 0?null:Be}},ca.startTransition=function(Pe){var Be=Oe.T,it={};Oe.T=it;try{var gt=Pe(),zt=Oe.S;zt!==null&&zt(it,gt),typeof gt=="object"&&gt!==null&&typeof gt.then=="function"&&gt.then(ut,nt)}catch(Ce){nt(Ce)}finally{Oe.T=Be}},ca.unstable_useCacheRefresh=function(){return Oe.H.useCacheRefresh()},ca.use=function(Pe){return Oe.H.use(Pe)},ca.useActionState=function(Pe,Be,it){return Oe.H.useActionState(Pe,Be,it)},ca.useCallback=function(Pe,Be){return Oe.H.useCallback(Pe,Be)},ca.useContext=function(Pe){return Oe.H.useContext(Pe)},ca.useDebugValue=function(){},ca.useDeferredValue=function(Pe,Be){return Oe.H.useDeferredValue(Pe,Be)},ca.useEffect=function(Pe,Be,it){var gt=Oe.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return gt.useEffect(Pe,Be)},ca.useId=function(){return Oe.H.useId()},ca.useImperativeHandle=function(Pe,Be,it){return Oe.H.useImperativeHandle(Pe,Be,it)},ca.useInsertionEffect=function(Pe,Be){return Oe.H.useInsertionEffect(Pe,Be)},ca.useLayoutEffect=function(Pe,Be){return Oe.H.useLayoutEffect(Pe,Be)},ca.useMemo=function(Pe,Be){return Oe.H.useMemo(Pe,Be)},ca.useOptimistic=function(Pe,Be){return Oe.H.useOptimistic(Pe,Be)},ca.useReducer=function(Pe,Be,it){return Oe.H.useReducer(Pe,Be,it)},ca.useRef=function(Pe){return Oe.H.useRef(Pe)},ca.useState=function(Pe){return Oe.H.useState(Pe)},ca.useSyncExternalStore=function(Pe,Be,it){return Oe.H.useSyncExternalStore(Pe,Be,it)},ca.useTransition=function(){return Oe.H.useTransition()},ca.version="19.1.1",ca}var uy;function Mm(){return uy||(uy=1,Bg.exports=uT()),Bg.exports}var Qn=Mm(),jg={exports:{}},pd={},qg={exports:{}},Gg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function cT(){return cy||(cy=1,function(f){function e(_e,He){var nt=_e.length;_e.push(He);e:for(;0<nt;){var ut=nt-1>>>1,Pe=_e[ut];if(0<r(Pe,He))_e[ut]=He,_e[nt]=Pe,nt=ut;else break e}}function t(_e){return _e.length===0?null:_e[0]}function n(_e){if(_e.length===0)return null;var He=_e[0],nt=_e.pop();if(nt!==He){_e[0]=nt;e:for(var ut=0,Pe=_e.length,Be=Pe>>>1;ut<Be;){var it=2*(ut+1)-1,gt=_e[it],zt=it+1,Ce=_e[zt];if(0>r(gt,nt))zt<Pe&&0>r(Ce,gt)?(_e[ut]=Ce,_e[zt]=nt,ut=zt):(_e[ut]=gt,_e[it]=nt,ut=it);else if(zt<Pe&&0>r(Ce,nt))_e[ut]=Ce,_e[zt]=nt,ut=zt;else break e}}return He}function r(_e,He){var nt=_e.sortIndex-He.sortIndex;return nt!==0?nt:_e.id-He.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;f.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();f.unstable_now=function(){return u.now()-d}}var g=[],h=[],p=1,E=null,b=3,A=!1,T=!1,C=!1,O=!1,te=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function De(_e){for(var He=t(h);He!==null;){if(He.callback===null)n(h);else if(He.startTime<=_e)n(h),He.sortIndex=He.expirationTime,e(g,He);else break;He=t(h)}}function Oe(_e){if(C=!1,De(_e),!T)if(t(g)!==null)T=!0,q||(q=!0,Ve());else{var He=t(h);He!==null&&Ye(Oe,He.startTime-_e)}}var q=!1,k=-1,ee=5,Ee=-1;function P(){return O?!0:!(f.unstable_now()-Ee<ee)}function xe(){if(O=!1,q){var _e=f.unstable_now();Ee=_e;var He=!0;try{e:{T=!1,C&&(C=!1,de(k),k=-1),A=!0;var nt=b;try{t:{for(De(_e),E=t(g);E!==null&&!(E.expirationTime>_e&&P());){var ut=E.callback;if(typeof ut=="function"){E.callback=null,b=E.priorityLevel;var Pe=ut(E.expirationTime<=_e);if(_e=f.unstable_now(),typeof Pe=="function"){E.callback=Pe,De(_e),He=!0;break t}E===t(g)&&n(g),De(_e)}else n(g);E=t(g)}if(E!==null)He=!0;else{var Be=t(h);Be!==null&&Ye(Oe,Be.startTime-_e),He=!1}}break e}finally{E=null,b=nt,A=!1}He=void 0}}finally{He?Ve():q=!1}}}var Ve;if(typeof fe=="function")Ve=function(){fe(xe)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,_t=be.port2;be.port1.onmessage=xe,Ve=function(){_t.postMessage(null)}}else Ve=function(){te(xe,0)};function Ye(_e,He){k=te(function(){_e(f.unstable_now())},He)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(_e){_e.callback=null},f.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<_e?Math.floor(1e3/_e):5},f.unstable_getCurrentPriorityLevel=function(){return b},f.unstable_next=function(_e){switch(b){case 1:case 2:case 3:var He=3;break;default:He=b}var nt=b;b=He;try{return _e()}finally{b=nt}},f.unstable_requestPaint=function(){O=!0},f.unstable_runWithPriority=function(_e,He){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var nt=b;b=_e;try{return He()}finally{b=nt}},f.unstable_scheduleCallback=function(_e,He,nt){var ut=f.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ut+nt:ut):nt=ut,_e){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=nt+Pe,_e={id:p++,callback:He,priorityLevel:_e,startTime:nt,expirationTime:Pe,sortIndex:-1},nt>ut?(_e.sortIndex=nt,e(h,_e),t(g)===null&&_e===t(h)&&(C?(de(k),k=-1):C=!0,Ye(Oe,nt-ut))):(_e.sortIndex=Pe,e(g,_e),T||A||(T=!0,q||(q=!0,Ve()))),_e},f.unstable_shouldYield=P,f.unstable_wrapCallback=function(_e){var He=b;return function(){var nt=b;b=He;try{return _e.apply(this,arguments)}finally{b=nt}}}}(Gg)),Gg}var dy;function dT(){return dy||(dy=1,qg.exports=cT()),qg.exports}var Hg={exports:{}},Bi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function fT(){if(fy)return Bi;fy=1;var f=Mm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(g,h,p){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:h,implementation:p}}var u=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Bi.createPortal=function(g,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(g,h,null,p)},Bi.flushSync=function(g){var h=u.T,p=n.p;try{if(u.T=null,n.p=2,g)return g()}finally{u.T=h,n.p=p,n.d.f()}},Bi.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(g,h))},Bi.prefetchDNS=function(g){typeof g=="string"&&n.d.D(g)},Bi.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var p=h.as,E=d(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:A}):p==="script"&&n.d.X(g,{crossOrigin:E,integrity:b,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Bi.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);n.d.M(g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(g)},Bi.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,E=d(p,h.crossOrigin);n.d.L(g,p,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Bi.preloadModule=function(g,h){if(typeof g=="string")if(h){var p=d(h.as,h.crossOrigin);n.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(g)},Bi.requestFormReset=function(g){n.d.r(g)},Bi.unstable_batchedUpdates=function(g,h){return g(h)},Bi.useFormState=function(g,h,p){return u.H.useFormState(g,h,p)},Bi.useFormStatus=function(){return u.H.useHostTransitionStatus()},Bi.version="19.1.1",Bi}var hy;function hT(){if(hy)return Hg.exports;hy=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(e){console.error(e)}}return f(),Hg.exports=fT(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function gT(){if(gy)return pd;gy=1;var f=dT(),e=Mm(),t=hT();function n(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,c=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(c=l.return),i=l.return;while(i)}return l.tag===3?c:null}function u(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function g(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(n(188));return l!==i?null:i}for(var c=i,m=l;;){var R=c.return;if(R===null)break;var N=R.alternate;if(N===null){if(m=R.return,m!==null){c=m;continue}break}if(R.child===N.child){for(N=R.child;N;){if(N===c)return d(R),i;if(N===m)return d(R),l;N=N.sibling}throw Error(n(188))}if(c.return!==m.return)c=R,m=N;else{for(var Re=!1,Ne=R.child;Ne;){if(Ne===c){Re=!0,c=R,m=N;break}if(Ne===m){Re=!0,m=R,c=N;break}Ne=Ne.sibling}if(!Re){for(Ne=N.child;Ne;){if(Ne===c){Re=!0,c=N,m=R;break}if(Ne===m){Re=!0,m=N,c=R;break}Ne=Ne.sibling}if(!Re)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:l}function h(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=h(i),l!==null)return l;i=i.sibling}return null}var p=Object.assign,E=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),de=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),Ee=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function Ve(i){return i===null||typeof i!="object"?null:(i=xe&&i[xe]||i["@@iterator"],typeof i=="function"?i:null)}var be=Symbol.for("react.client.reference");function _t(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===be?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case Oe:return"Suspense";case q:return"SuspenseList";case Ee:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case fe:return(i.displayName||"Context")+".Provider";case de:return(i._context.displayName||"Context")+".Consumer";case De:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return l=i.displayName||null,l!==null?l:_t(i.type)||"Memo";case ee:l=i._payload,i=i._init;try{return _t(i(l))}catch{}}return null}var Ye=Array.isArray,_e=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},ut=[],Pe=-1;function Be(i){return{current:i}}function it(i){0>Pe||(i.current=ut[Pe],ut[Pe]=null,Pe--)}function gt(i,l){Pe++,ut[Pe]=i.current,i.current=l}var zt=Be(null),Ce=Be(null),Le=Be(null),yt=Be(null);function Y(i,l){switch(gt(Le,l),gt(Ce,i),gt(zt,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?Mp(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=Mp(l),i=Op(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}it(zt),gt(zt,i)}function W(){it(zt),it(Ce),it(Le)}function L(i){i.memoizedState!==null&&gt(yt,i);var l=zt.current,c=Op(l,i.type);l!==c&&(gt(Ce,i),gt(zt,c))}function j(i){Ce.current===i&&(it(zt),it(Ce)),yt.current===i&&(it(yt),cd._currentValue=nt)}var me=Object.prototype.hasOwnProperty,ae=f.unstable_scheduleCallback,Ue=f.unstable_cancelCallback,rt=f.unstable_shouldYield,qe=f.unstable_requestPaint,$e=f.unstable_now,Ge=f.unstable_getCurrentPriorityLevel,Je=f.unstable_ImmediatePriority,Et=f.unstable_UserBlockingPriority,ct=f.unstable_NormalPriority,Mt=f.unstable_LowPriority,yn=f.unstable_IdlePriority,tn=f.log,fn=f.unstable_setDisableYieldValue,Bt=null,kn=null;function Wn(i){if(typeof tn=="function"&&fn(i),kn&&typeof kn.setStrictMode=="function")try{kn.setStrictMode(Bt,i)}catch{}}var ta=Math.clz32?Math.clz32:qa,Ha=Math.log,La=Math.LN2;function qa(i){return i>>>=0,i===0?32:31-(Ha(i)/La|0)|0}var Jt=256,Ht=4194304;function Ft(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function wt(i,l,c){var m=i.pendingLanes;if(m===0)return 0;var R=0,N=i.suspendedLanes,Re=i.pingedLanes;i=i.warmLanes;var Ne=m&134217727;return Ne!==0?(m=Ne&~N,m!==0?R=Ft(m):(Re&=Ne,Re!==0?R=Ft(Re):c||(c=Ne&~i,c!==0&&(R=Ft(c))))):(Ne=m&~N,Ne!==0?R=Ft(Ne):Re!==0?R=Ft(Re):c||(c=m&~i,c!==0&&(R=Ft(c)))),R===0?0:l!==0&&l!==R&&(l&N)===0&&(N=R&-R,c=l&-l,N>=c||N===32&&(c&4194048)!==0)?l:R}function nn(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function We(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kt(){var i=Jt;return Jt<<=1,(Jt&4194048)===0&&(Jt=256),i}function jt(){var i=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),i}function It(i){for(var l=[],c=0;31>c;c++)l.push(i);return l}function Ot(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function on(i,l,c,m,R,N){var Re=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var Ne=i.entanglements,Xe=i.expirationTimes,Dt=i.hiddenUpdates;for(c=Re&~c;0<c;){var en=31-ta(c),hn=1<<en;Ne[en]=0,Xe[en]=-1;var Nt=Dt[en];if(Nt!==null)for(Dt[en]=null,en=0;en<Nt.length;en++){var Pt=Nt[en];Pt!==null&&(Pt.lane&=-536870913)}c&=~hn}m!==0&&Hn(i,m,0),N!==0&&R===0&&i.tag!==0&&(i.suspendedLanes|=N&~(Re&~l))}function Hn(i,l,c){i.pendingLanes|=l,i.suspendedLanes&=~l;var m=31-ta(l);i.entangledLanes|=l,i.entanglements[m]=i.entanglements[m]|1073741824|c&4194090}function Wt(i,l){var c=i.entangledLanes|=l;for(i=i.entanglements;c;){var m=31-ta(c),R=1<<m;R&l|i[m]&l&&(i[m]|=l),c&=~R}}function Rn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Dn(){var i=He.p;return i!==0?i:(i=window.event,i===void 0?32:ey(i.type))}function Fn(i,l){var c=He.p;try{return He.p=i,l()}finally{He.p=c}}var Kn=Math.random().toString(36).slice(2),bn="__reactFiber$"+Kn,At="__reactProps$"+Kn,dt="__reactContainer$"+Kn,cn="__reactEvents$"+Kn,mn="__reactListeners$"+Kn,On="__reactHandles$"+Kn,ra="__reactResources$"+Kn,ga="__reactMarker$"+Kn;function sa(i){delete i[bn],delete i[At],delete i[cn],delete i[mn],delete i[On]}function ba(i){var l=i[bn];if(l)return l;for(var c=i.parentNode;c;){if(l=c[dt]||c[bn]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(i=Up(i);i!==null;){if(c=i[bn])return c;i=Up(i)}return l}i=c,c=i.parentNode}return null}function Na(i){if(i=i[bn]||i[dt]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function Da(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(n(33))}function gi(i){var l=i[ra];return l||(l=i[ra]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ra(i){i[ga]=!0}var pr=new Set,ui={};function Ka(i,l){$a(i,l),$a(i+"Capture",l)}function $a(i,l){for(ui[i]=l,i=0;i<l.length;i++)pr.add(l[i])}var So=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},jl={};function _o(i){return me.call(jl,i)?!0:me.call(Bl,i)?!1:So.test(i)?jl[i]=!0:(Bl[i]=!0,!1)}function Lr(i,l,c){if(_o(l))if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+c)}}function Qr(i,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+c)}}function Vt(i,l,c,m){if(m===null)i.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(l,c,""+m)}}var Tn,Mn;function ia(i){if(Tn===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Tn=l&&l[1]||"",Mn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tn+i+Mn}var ea=!1;function Ga(i,l){if(!i||ea)return"";ea=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var hn=function(){throw Error()};if(Object.defineProperty(hn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(hn,[])}catch(Pt){var Nt=Pt}Reflect.construct(i,[],hn)}else{try{hn.call()}catch(Pt){Nt=Pt}i.call(hn.prototype)}}else{try{throw Error()}catch(Pt){Nt=Pt}(hn=i())&&typeof hn.catch=="function"&&hn.catch(function(){})}}catch(Pt){if(Pt&&Nt&&typeof Pt.stack=="string")return[Pt.stack,Nt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=m.DetermineComponentFrameRoot(),Re=N[0],Ne=N[1];if(Re&&Ne){var Xe=Re.split(`
`),Dt=Ne.split(`
`);for(R=m=0;m<Xe.length&&!Xe[m].includes("DetermineComponentFrameRoot");)m++;for(;R<Dt.length&&!Dt[R].includes("DetermineComponentFrameRoot");)R++;if(m===Xe.length||R===Dt.length)for(m=Xe.length-1,R=Dt.length-1;1<=m&&0<=R&&Xe[m]!==Dt[R];)R--;for(;1<=m&&0<=R;m--,R--)if(Xe[m]!==Dt[R]){if(m!==1||R!==1)do if(m--,R--,0>R||Xe[m]!==Dt[R]){var en=`
`+Xe[m].replace(" at new "," at ");return i.displayName&&en.includes("<anonymous>")&&(en=en.replace("<anonymous>",i.displayName)),en}while(1<=m&&0<=R);break}}}finally{ea=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ia(c):""}function Ca(i){switch(i.tag){case 26:case 27:case 5:return ia(i.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 15:return Ga(i.type,!1);case 11:return Ga(i.type.render,!1);case 1:return Ga(i.type,!0);case 31:return ia("Activity");default:return""}}function fa(i){try{var l="";do l+=Ca(i),i=i.return;while(i);return l}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function $n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function da(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ia(i){var l=da(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),m=""+i[l];if(!i.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var R=c.get,N=c.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return R.call(this)},set:function(Re){m=""+Re,N.call(this,Re)}}),Object.defineProperty(i,l,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(Re){m=""+Re},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Gi(i){i._valueTracker||(i._valueTracker=Ia(i))}function ci(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var c=l.getValue(),m="";return i&&(m=da(i)?i.checked?"true":"false":i.value),i=m,i!==c?(l.setValue(i),!0):!1}function sr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Zr=/[\n"\\]/g;function xi(i){return i.replace(Zr,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Jr(i,l,c,m,R,N,Re,Ne){i.name="",Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"?i.type=Re:i.removeAttribute("type"),l!=null?Re==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+$n(l)):i.value!==""+$n(l)&&(i.value=""+$n(l)):Re!=="submit"&&Re!=="reset"||i.removeAttribute("value"),l!=null?yr(i,Re,$n(l)):c!=null?yr(i,Re,$n(c)):m!=null&&i.removeAttribute("value"),R==null&&N!=null&&(i.defaultChecked=!!N),R!=null&&(i.checked=R&&typeof R!="function"&&typeof R!="symbol"),Ne!=null&&typeof Ne!="function"&&typeof Ne!="symbol"&&typeof Ne!="boolean"?i.name=""+$n(Ne):i.removeAttribute("name")}function Mi(i,l,c,m,R,N,Re,Ne){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.type=N),l!=null||c!=null){if(!(N!=="submit"&&N!=="reset"||l!=null))return;c=c!=null?""+$n(c):"",l=l!=null?""+$n(l):c,Ne||l===i.value||(i.value=l),i.defaultValue=l}m=m??R,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=Ne?i.checked:!!m,i.defaultChecked=!!m,Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"&&(i.name=Re)}function yr(i,l,c){l==="number"&&sr(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Nr(i,l,c,m){if(i=i.options,l){l={};for(var R=0;R<c.length;R++)l["$"+c[R]]=!0;for(c=0;c<i.length;c++)R=l.hasOwnProperty("$"+i[c].value),i[c].selected!==R&&(i[c].selected=R),R&&m&&(i[c].defaultSelected=!0)}else{for(c=""+$n(c),l=null,R=0;R<i.length;R++){if(i[R].value===c){i[R].selected=!0,m&&(i[R].defaultSelected=!0);return}l!==null||i[R].disabled||(l=i[R])}l!==null&&(l.selected=!0)}}function Hi(i,l,c){if(l!=null&&(l=""+$n(l),l!==i.value&&(i.value=l),c==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=c!=null?""+$n(c):""}function ql(i,l,c,m){if(l==null){if(m!=null){if(c!=null)throw Error(n(92));if(Ye(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),l=c}c=$n(l),i.defaultValue=c,m=i.textContent,m===c&&m!==""&&m!==null&&(i.value=m)}function Er(i,l){if(l){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=l;return}}i.textContent=l}var Gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ws(i,l,c){var m=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":m?i.setProperty(l,c):typeof c!="number"||c===0||Gl.has(l)?l==="float"?i.cssFloat=c:i[l]=(""+c).trim():i[l]=c+"px"}function Hl(i,l,c){if(l!=null&&typeof l!="object")throw Error(n(62));if(i=i.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var R in l)m=l[R],l.hasOwnProperty(R)&&c[R]!==m&&Ws(i,R,m)}else for(var N in l)l.hasOwnProperty(N)&&Ws(i,N,l[N])}function Xs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ao=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sa(i){return Ao.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Mr=null;function Vi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yi=null,Or=null;function wi(i){var l=Na(i);if(l&&(i=l.stateNode)){var c=i[At]||null;e:switch(i=l.stateNode,l.type){case"input":if(Jr(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+xi(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var m=c[l];if(m!==i&&m.form===i.form){var R=m[At]||null;if(!R)throw Error(n(90));Jr(m,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(l=0;l<c.length;l++)m=c[l],m.form===i.form&&ci(m)}break e;case"textarea":Hi(i,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Nr(i,!!c.multiple,l,!1)}}}var Qs=!1;function Ki(i,l,c){if(Qs)return i(l,c);Qs=!0;try{var m=i(l);return m}finally{if(Qs=!1,(Yi!==null||Or!==null)&&(Ff(),Yi&&(l=Yi,i=Or,Or=Yi=null,wi(l),i)))for(l=0;l<i.length;l++)wi(i[l])}}function Zs(i,l){var c=i.stateNode;if(c===null)return null;var m=c[At]||null;if(m===null)return null;c=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,l,typeof c));return c}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=!1;if(lr)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Yl=!1}var or=null,el=null,Ro=null;function Ou(){if(Ro)return Ro;var i,l=el,c=l.length,m,R="value"in or?or.value:or.textContent,N=R.length;for(i=0;i<c&&l[i]===R[i];i++);var Re=c-i;for(m=1;m<=Re&&l[c-m]===R[N-m];m++);return Ro=R.slice(i,1<m?1-m:void 0)}function Io(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function tl(){return!0}function Pu(){return!1}function Oi(i){function l(c,m,R,N,Re){this._reactName=c,this._targetInst=R,this.type=m,this.nativeEvent=N,this.target=Re,this.currentTarget=null;for(var Ne in i)i.hasOwnProperty(Ne)&&(c=i[Ne],this[Ne]=c?c(N):N[Ne]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?tl:Pu,this.isPropagationStopped=Pu,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),l}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=Oi(vs),nl=p({},vs,{view:0,detail:0}),Dd=Oi(nl),Ss,xo,es,xa=p({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==es&&(es&&i.type==="mousemove"?(Ss=i.screenX-es.screenX,xo=i.screenY-es.screenY):xo=Ss=0,es=i),Ss)},movementY:function(i){return"movementY"in i?i.movementY:xo}}),$l=Oi(xa),vi=p({},xa,{dataTransfer:0}),zu=Oi(vi),Cd=p({},nl,{relatedTarget:0}),wo=Oi(Cd),Ld=p({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Nd=Oi(Ld),Md=p({},vs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Fu=Oi(Md),Od=p({},vs,{data:0}),Uu=Oi(Od),qh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bu(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Hh[i])?!!l[i]:!1}function ju(){return Bu}var Pd=p({},nl,{key:function(i){if(i.key){var l=qh[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Gh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(i){return i.type==="keypress"?Io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),zd=Oi(Pd),Fd=p({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=Oi(Fd),Vh=p({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),Ud=Oi(Vh),Bd=p({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),jd=Oi(Bd),qd=p({},xa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Gu=Oi(qd),Hu=p({},vs,{newState:0,oldState:0}),Gd=Oi(Hu),Yh=[9,13,27,32],ko=lr&&"CompositionEvent"in window,al=null;lr&&"documentMode"in document&&(al=document.documentMode);var Hd=lr&&"TextEvent"in window&&!al,_s=lr&&(!ko||al&&8<al&&11>=al),Vd=" ",Vu=!1;function Yd(i,l){switch(i){case"keyup":return Yh.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var il=!1;function Kh(i,l){switch(i){case"compositionend":return Yu(l);case"keypress":return l.which!==32?null:(Vu=!0,Vd);case"textInput":return i=l.data,i===Vd&&Vu?null:i;default:return null}}function $h(i,l){if(il)return i==="compositionend"||!ko&&Yd(i,l)?(i=Ou(),Ro=el=or=null,il=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return _s&&l.locale!=="ko"?null:l.data;default:return null}}var Ku={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!Ku[i.type]:l==="textarea"}function $u(i,l,c,m){Yi?Or?Or.push(m):Or=[m]:Yi=m,l=Hf(l,"onChange"),0<l.length&&(c=new Kl("onChange","change",null,c,m),i.push({event:c,listeners:l}))}var Wl=null,Pr=null;function Wu(i){kp(i,0)}function Xl(i){var l=Da(i);if(ci(l))return i}function Ql(i,l){if(i==="change")return l}var Xu=!1;if(lr){var Qu;if(lr){var Do="oninput"in document;if(!Do){var $d=document.createElement("div");$d.setAttribute("oninput","return;"),Do=typeof $d.oninput=="function"}Qu=Do}else Qu=!1;Xu=Qu&&(!document.documentMode||9<document.documentMode)}function Zu(){Wl&&(Wl.detachEvent("onpropertychange",Co),Pr=Wl=null)}function Co(i){if(i.propertyName==="value"&&Xl(Pr)){var l=[];$u(l,Pr,i,Vi(i)),Ki(Wu,l)}}function Wh(i,l,c){i==="focusin"?(Zu(),Wl=l,Pr=c,Wl.attachEvent("onpropertychange",Co)):i==="focusout"&&Zu()}function Wd(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Xl(Pr)}function Xh(i,l){if(i==="click")return Xl(l)}function Qh(i,l){if(i==="input"||i==="change")return Xl(l)}function Zh(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Pi=typeof Object.is=="function"?Object.is:Zh;function As(i,l){if(Pi(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var c=Object.keys(i),m=Object.keys(l);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var R=c[m];if(!me.call(l,R)||!Pi(i[R],l[R]))return!1}return!0}function Ju(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Xd(i,l){var c=Ju(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=l&&m>=l)return{node:c,offset:l-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ju(c)}}function ec(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?ec(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function tc(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=sr(i.document);l instanceof i.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)i=l.contentWindow;else break;l=sr(i.document)}return l}function Zl(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var nc=lr&&"documentMode"in document&&11>=document.documentMode,rl=null,Lo=null,Jl=null,No=!1;function Qd(i,l,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;No||rl==null||rl!==sr(m)||(m=rl,"selectionStart"in m&&Zl(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Jl&&As(Jl,m)||(Jl=m,m=Hf(Lo,"onSelect"),0<m.length&&(l=new Kl("onSelect","select",null,l,c),i.push({event:l,listeners:m}),l.target=rl)))}function Xi(i,l){var c={};return c[i.toLowerCase()]=l.toLowerCase(),c["Webkit"+i]="webkit"+l,c["Moz"+i]="moz"+l,c}var Rs={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Mo={},ac={};lr&&(ac=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function ts(i){if(Mo[i])return Mo[i];if(!Rs[i])return i;var l=Rs[i],c;for(c in l)if(l.hasOwnProperty(c)&&c in ac)return Mo[i]=l[c];return i}var ic=ts("animationend"),Zd=ts("animationiteration"),rc=ts("animationstart"),Jh=ts("transitionrun"),eg=ts("transitionstart"),Jd=ts("transitioncancel"),sc=ts("transitionend"),lc=new Map,oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oc.push("scrollEnd");function mi(i,l){lc.set(i,l),Ka(l,[i])}var ki=new WeakMap;function pi(i,l){if(typeof i=="object"&&i!==null){var c=ki.get(i);return c!==void 0?c:(l={value:i,source:l,stack:fa(l)},ki.set(i,l),l)}return{value:i,source:l,stack:fa(l)}}var di=[],sl=0,Oo=0;function Po(){for(var i=sl,l=Oo=sl=0;l<i;){var c=di[l];di[l++]=null;var m=di[l];di[l++]=null;var R=di[l];di[l++]=null;var N=di[l];if(di[l++]=null,m!==null&&R!==null){var Re=m.pending;Re===null?R.next=R:(R.next=Re.next,Re.next=R),m.pending=R}N!==0&&cc(c,R,N)}}function ur(i,l,c,m){di[sl++]=i,di[sl++]=l,di[sl++]=c,di[sl++]=m,Oo|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function uc(i,l,c,m){return ur(i,l,c,m),ll(i)}function ns(i,l){return ur(i,null,null,l),ll(i)}function cc(i,l,c){i.lanes|=c;var m=i.alternate;m!==null&&(m.lanes|=c);for(var R=!1,N=i.return;N!==null;)N.childLanes|=c,m=N.alternate,m!==null&&(m.childLanes|=c),N.tag===22&&(i=N.stateNode,i===null||i._visibility&1||(R=!0)),i=N,N=N.return;return i.tag===3?(N=i.stateNode,R&&l!==null&&(R=31-ta(c),i=N.hiddenUpdates,m=i[R],m===null?i[R]=[l]:m.push(l),l.lane=c|536870912),N):null}function ll(i){if(50<nd)throw nd=0,ug=null,Error(n(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var br={};function dc(i,l,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(i,l,c,m){return new dc(i,l,c,m)}function ol(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,l){var c=i.alternate;return c===null?(c=Si(i.tag,l,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=l,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,l=i.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function eo(i,l){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,l=c.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function zo(i,l,c,m,R,N){var Re=0;if(m=i,typeof i=="function")ol(i)&&(Re=1);else if(typeof i=="string")Re=K0(i,c,zt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Ee:return i=Si(31,c,l,R),i.elementType=Ee,i.lanes=N,i;case T:return as(c.children,R,N,l);case C:Re=8,R|=24;break;case O:return i=Si(12,c,l,R|2),i.elementType=O,i.lanes=N,i;case Oe:return i=Si(13,c,l,R),i.elementType=Oe,i.lanes=N,i;case q:return i=Si(19,c,l,R),i.elementType=q,i.lanes=N,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case te:case fe:Re=10;break e;case de:Re=9;break e;case De:Re=11;break e;case k:Re=14;break e;case ee:Re=16,m=null;break e}Re=29,c=Error(n(130,i===null?"null":typeof i,"")),m=null}return l=Si(Re,c,l,R),l.elementType=i,l.type=m,l.lanes=N,l}function as(i,l,c,m){return i=Si(7,i,m,l),i.lanes=c,i}function Fo(i,l,c){return i=Si(6,i,null,l),i.lanes=c,i}function fc(i,l,c){return l=Si(4,i.children!==null?i.children:[],i.key,l),l.lanes=c,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var ul=[],Is=0,cl=null,dl=0,$i=[],Zi=0,Tr=null,vr=1,Sr="";function xs(i,l){ul[Is++]=dl,ul[Is++]=cl,cl=i,dl=l}function hc(i,l,c){$i[Zi++]=vr,$i[Zi++]=Sr,$i[Zi++]=Tr,Tr=i;var m=vr;i=Sr;var R=32-ta(m)-1;m&=~(1<<R),c+=1;var N=32-ta(l)+R;if(30<N){var Re=R-R%5;N=(m&(1<<Re)-1).toString(32),m>>=Re,R-=Re,vr=1<<32-ta(l)+R|c<<R|m,Sr=N+i}else vr=1<<N|c<<R|m,Sr=i}function gc(i){i.return!==null&&(xs(i,1),hc(i,1,0))}function Uo(i){for(;i===cl;)cl=ul[--Is],ul[Is]=null,dl=ul[--Is],ul[Is]=null;for(;i===Tr;)Tr=$i[--Zi],$i[Zi]=null,Sr=$i[--Zi],$i[Zi]=null,vr=$i[--Zi],$i[Zi]=null}var Di=null,Va=null,_a=!1,is=null,_r=!1,Bo=Error(n(519));function ws(i){var l=Error(n(418,""));throw no(pi(l,i)),Bo}function mc(i){var l=i.stateNode,c=i.type,m=i.memoizedProps;switch(l[bn]=i,l[At]=m,c){case"dialog":Ea("cancel",l),Ea("close",l);break;case"iframe":case"object":case"embed":Ea("load",l);break;case"video":case"audio":for(c=0;c<id.length;c++)Ea(id[c],l);break;case"source":Ea("error",l);break;case"img":case"image":case"link":Ea("error",l),Ea("load",l);break;case"details":Ea("toggle",l);break;case"input":Ea("invalid",l),Mi(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Gi(l);break;case"select":Ea("invalid",l);break;case"textarea":Ea("invalid",l),ql(l,m.value,m.defaultValue,m.children),Gi(l)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||m.suppressHydrationWarning===!0||Np(l.textContent,c)?(m.popover!=null&&(Ea("beforetoggle",l),Ea("toggle",l)),m.onScroll!=null&&Ea("scroll",l),m.onScrollEnd!=null&&Ea("scrollend",l),m.onClick!=null&&(l.onclick=Vf),l=!0):l=!1,l||ws(i)}function pc(i){for(Di=i.return;Di;)switch(Di.tag){case 5:case 13:_r=!1;return;case 27:case 3:_r=!0;return;default:Di=Di.return}}function to(i){if(i!==Di)return!1;if(!_a)return pc(i),_a=!0,!1;var l=i.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Rg(i.type,i.memoizedProps)),c=!c),c&&Va&&ws(i),pc(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(l===0){Va=Yr(i.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++;i=i.nextSibling}Va=null}}else l===27?(l=Va,wl(i.type)?(i=kg,kg=null,Va=i):Va=l):Va=Di?Yr(i.stateNode.nextSibling):null;return!0}function Ar(){Va=Di=null,_a=!1}function yc(){var i=is;return i!==null&&(Ei===null?Ei=i:Ei.push.apply(Ei,i),is=null),i}function no(i){is===null?is=[i]:is.push(i)}var jo=Be(null),ks=null,Ji=null;function zr(i,l,c){gt(jo,l._currentValue),l._currentValue=c}function Fr(i){i._currentValue=jo.current,it(jo)}function qo(i,l,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),i===c)break;i=i.return}}function Ec(i,l,c,m){var R=i.child;for(R!==null&&(R.return=i);R!==null;){var N=R.dependencies;if(N!==null){var Re=R.child;N=N.firstContext;e:for(;N!==null;){var Ne=N;N=R;for(var Xe=0;Xe<l.length;Xe++)if(Ne.context===l[Xe]){N.lanes|=c,Ne=N.alternate,Ne!==null&&(Ne.lanes|=c),qo(N.return,c,i),m||(Re=null);break e}N=Ne.next}}else if(R.tag===18){if(Re=R.return,Re===null)throw Error(n(341));Re.lanes|=c,N=Re.alternate,N!==null&&(N.lanes|=c),qo(Re,c,i),Re=null}else Re=R.child;if(Re!==null)Re.return=R;else for(Re=R;Re!==null;){if(Re===i){Re=null;break}if(R=Re.sibling,R!==null){R.return=Re.return,Re=R;break}Re=Re.return}R=Re}}function ao(i,l,c,m){i=null;for(var R=l,N=!1;R!==null;){if(!N){if((R.flags&524288)!==0)N=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var Re=R.alternate;if(Re===null)throw Error(n(387));if(Re=Re.memoizedProps,Re!==null){var Ne=R.type;Pi(R.pendingProps.value,Re.value)||(i!==null?i.push(Ne):i=[Ne])}}else if(R===yt.current){if(Re=R.alternate,Re===null)throw Error(n(387));Re.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(i!==null?i.push(cd):i=[cd])}R=R.return}i!==null&&Ec(l,i,c,m),l.flags|=262144}function Go(i){for(i=i.firstContext;i!==null;){if(!Pi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ds(i){ks=i,Ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function _i(i){return Cs(ks,i)}function Ho(i,l){return ks===null&&Ds(i),Cs(i,l)}function Cs(i,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},Ji===null){if(i===null)throw Error(n(308));Ji=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Ji=Ji.next=l;return c}var tg=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(c,m){i.push(m)}};this.abort=function(){l.aborted=!0,i.forEach(function(c){return c()})}},ng=f.unstable_scheduleCallback,ef=f.unstable_NormalPriority,ni={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bc(){return{controller:new tg,data:new Map,refCount:0}}function fl(i){i.refCount--,i.refCount===0&&ng(ef,function(){i.controller.abort()})}var hl=null,Tc=0,Ls=0,gl=null;function tf(i,l){if(hl===null){var c=hl=[];Tc=0,Ls=pg(),gl={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Tc++,l.then(nf,nf),l}function nf(){if(--Tc===0&&hl!==null){gl!==null&&(gl.status="fulfilled");var i=hl;hl=null,Ls=0,gl=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function af(i,l){var c=[],m={status:"pending",value:null,reason:null,then:function(R){c.push(R)}};return i.then(function(){m.status="fulfilled",m.value=l;for(var R=0;R<c.length;R++)(0,c[R])(l)},function(R){for(m.status="rejected",m.reason=R,R=0;R<c.length;R++)(0,c[R])(void 0)}),m}var rf=_e.S;_e.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&tf(i,l),rf!==null&&rf(i,l)};var rs=Be(null);function Vo(){var i=rs.current;return i!==null?i:va.pooledCache}function Yo(i,l){l===null?gt(rs,rs.current):gt(rs,l.pool)}function sf(){var i=Vo();return i===null?null:{parent:ni._currentValue,pool:i}}var ml=Error(n(460)),lf=Error(n(474)),io=Error(n(542)),vc={then:function(){}};function Sc(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ko(){}function pl(i,l,c){switch(c=i[c],c===void 0?i.push(l):c!==l&&(l.then(Ko,Ko),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,ya(i),i;default:if(typeof l.status=="string")l.then(Ko,Ko);else{if(i=va,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=l,i.status="pending",i.then(function(m){if(l.status==="pending"){var R=l;R.status="fulfilled",R.value=m}},function(m){if(l.status==="pending"){var R=l;R.status="rejected",R.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,ya(i),i}throw Ns=l,ml}}var Ns=null;function ro(){if(Ns===null)throw Error(n(459));var i=Ns;return Ns=null,i}function ya(i){if(i===ml||i===io)throw Error(n(483))}var Ur=!1;function $o(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wo(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ss(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Br(i,l,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Zn&2)!==0){var R=m.pending;return R===null?l.next=l:(l.next=R.next,R.next=l),m.pending=l,l=ll(i),cc(i,null,c),l}return ur(i,m,l,c),ll(i)}function so(i,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var m=l.lanes;m&=i.pendingLanes,c|=m,l.lanes=c,Wt(i,c)}}function Xo(i,l){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var R=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var Re={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};N===null?R=N=Re:N=N.next=Re,c=c.next}while(c!==null);N===null?R=N=l:N=N.next=l}else R=N=l;c={baseState:m.baseState,firstBaseUpdate:R,lastBaseUpdate:N,shared:m.shared,callbacks:m.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=l:i.next=l,c.lastBaseUpdate=l}var _c=!1;function yl(){if(_c){var i=gl;if(i!==null)throw i}}function lo(i,l,c,m){_c=!1;var R=i.updateQueue;Ur=!1;var N=R.firstBaseUpdate,Re=R.lastBaseUpdate,Ne=R.shared.pending;if(Ne!==null){R.shared.pending=null;var Xe=Ne,Dt=Xe.next;Xe.next=null,Re===null?N=Dt:Re.next=Dt,Re=Xe;var en=i.alternate;en!==null&&(en=en.updateQueue,Ne=en.lastBaseUpdate,Ne!==Re&&(Ne===null?en.firstBaseUpdate=Dt:Ne.next=Dt,en.lastBaseUpdate=Xe))}if(N!==null){var hn=R.baseState;Re=0,en=Dt=Xe=null,Ne=N;do{var Nt=Ne.lane&-536870913,Pt=Nt!==Ne.lane;if(Pt?(oa&Nt)===Nt:(m&Nt)===Nt){Nt!==0&&Nt===Ls&&(_c=!0),en!==null&&(en=en.next={lane:0,tag:Ne.tag,payload:Ne.payload,callback:null,next:null});e:{var Xn=i,Vn=Ne;Nt=l;var Pa=c;switch(Vn.tag){case 1:if(Xn=Vn.payload,typeof Xn=="function"){hn=Xn.call(Pa,hn,Nt);break e}hn=Xn;break e;case 3:Xn.flags=Xn.flags&-65537|128;case 0:if(Xn=Vn.payload,Nt=typeof Xn=="function"?Xn.call(Pa,hn,Nt):Xn,Nt==null)break e;hn=p({},hn,Nt);break e;case 2:Ur=!0}}Nt=Ne.callback,Nt!==null&&(i.flags|=64,Pt&&(i.flags|=8192),Pt=R.callbacks,Pt===null?R.callbacks=[Nt]:Pt.push(Nt))}else Pt={lane:Nt,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null},en===null?(Dt=en=Pt,Xe=hn):en=en.next=Pt,Re|=Nt;if(Ne=Ne.next,Ne===null){if(Ne=R.shared.pending,Ne===null)break;Pt=Ne,Ne=Pt.next,Pt.next=null,R.lastBaseUpdate=Pt,R.shared.pending=null}}while(!0);en===null&&(Xe=hn),R.baseState=Xe,R.firstBaseUpdate=Dt,R.lastBaseUpdate=en,N===null&&(R.shared.lanes=0),Ci|=Re,i.lanes=Re,i.memoizedState=hn}}function jr(i,l){if(typeof i!="function")throw Error(n(191,i));i.call(l)}function oo(i,l){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)jr(c[i],l)}var ls=Be(null),qr=Be(0);function Ac(i,l){i=nr,gt(qr,i),gt(ls,l),nr=i|l.baseLanes}function Qo(){gt(qr,nr),gt(ls,ls.current)}function El(){nr=qr.current,it(ls),it(qr)}var cr=0,la=null,Aa=null,Xa=null,Zo=!1,Ms=!1,Os=!1,Jo=0,bl=0,Tl=null,of=0;function Qa(){throw Error(n(321))}function eu(i,l){if(l===null)return!1;for(var c=0;c<l.length&&c<i.length;c++)if(!Pi(i[c],l[c]))return!1;return!0}function Rc(i,l,c,m,R,N){return cr=N,la=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,_e.H=i===null||i.memoizedState===null?cu:kf,Os=!1,N=c(m,R),Os=!1,Ms&&(N=Ic(l,c,m,R)),tu(i),N}function tu(i){_e.H=Us;var l=Aa!==null&&Aa.next!==null;if(cr=0,Xa=Aa=la=null,Zo=!1,bl=0,Tl=null,l)throw Error(n(300));i===null||ai||(i=i.dependencies,i!==null&&Go(i)&&(ai=!0))}function Ic(i,l,c,m){la=i;var R=0;do{if(Ms&&(Tl=null),bl=0,Ms=!1,25<=R)throw Error(n(301));if(R+=1,Xa=Aa=null,i.updateQueue!=null){var N=i.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}_e.H=lg,N=l(c,m)}while(Ms);return N}function ag(){var i=_e.H,l=i.useState()[0];return l=typeof l.then=="function"?Ps(l):l,i=i.useState()[0],(Aa!==null?Aa.memoizedState:null)!==i&&(la.flags|=1024),l}function nu(){var i=Jo!==0;return Jo=0,i}function au(i,l,c){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~c}function iu(i){if(Zo){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Zo=!1}cr=0,Xa=Aa=la=null,Ms=!1,bl=Jo=0,Tl=null}function zi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xa===null?la.memoizedState=Xa=i:Xa=Xa.next=i,Xa}function Za(){if(Aa===null){var i=la.alternate;i=i!==null?i.memoizedState:null}else i=Aa.next;var l=Xa===null?la.memoizedState:Xa.next;if(l!==null)Xa=l,Aa=i;else{if(i===null)throw la.alternate===null?Error(n(467)):Error(n(310));Aa=i,i={memoizedState:Aa.memoizedState,baseState:Aa.baseState,baseQueue:Aa.baseQueue,queue:Aa.queue,next:null},Xa===null?la.memoizedState=Xa=i:Xa=Xa.next=i}return Xa}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ps(i){var l=bl;return bl+=1,Tl===null&&(Tl=[]),i=pl(Tl,i,l),l=la,(Xa===null?l.memoizedState:Xa.next)===null&&(l=l.alternate,_e.H=l===null||l.memoizedState===null?cu:kf),i}function uo(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ps(i);if(i.$$typeof===fe)return _i(i)}throw Error(n(438,String(i)))}function ru(i){var l=null,c=la.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var m=la.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(R){return R.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=xc(),la.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(i),m=0;m<i;m++)c[m]=P;return l.index++,c}function Gr(i,l){return typeof l=="function"?l(i):l}function co(i){var l=Za();return wc(l,Aa,i)}function wc(i,l,c){var m=i.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=c;var R=i.baseQueue,N=m.pending;if(N!==null){if(R!==null){var Re=R.next;R.next=N.next,N.next=Re}l.baseQueue=R=N,m.pending=null}if(N=i.baseState,R===null)i.memoizedState=N;else{l=R.next;var Ne=Re=null,Xe=null,Dt=l,en=!1;do{var hn=Dt.lane&-536870913;if(hn!==Dt.lane?(oa&hn)===hn:(cr&hn)===hn){var Nt=Dt.revertLane;if(Nt===0)Xe!==null&&(Xe=Xe.next={lane:0,revertLane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),hn===Ls&&(en=!0);else if((cr&Nt)===Nt){Dt=Dt.next,Nt===Ls&&(en=!0);continue}else hn={lane:0,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Xe===null?(Ne=Xe=hn,Re=N):Xe=Xe.next=hn,la.lanes|=Nt,Ci|=Nt;hn=Dt.action,Os&&c(N,hn),N=Dt.hasEagerState?Dt.eagerState:c(N,hn)}else Nt={lane:hn,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Xe===null?(Ne=Xe=Nt,Re=N):Xe=Xe.next=Nt,la.lanes|=hn,Ci|=hn;Dt=Dt.next}while(Dt!==null&&Dt!==l);if(Xe===null?Re=N:Xe.next=Ne,!Pi(N,i.memoizedState)&&(ai=!0,en&&(c=gl,c!==null)))throw c;i.memoizedState=N,i.baseState=Re,i.baseQueue=Xe,m.lastRenderedState=N}return R===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function kc(i){var l=Za(),c=l.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var m=c.dispatch,R=c.pending,N=l.memoizedState;if(R!==null){c.pending=null;var Re=R=R.next;do N=i(N,Re.action),Re=Re.next;while(Re!==R);Pi(N,l.memoizedState)||(ai=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),c.lastRenderedState=N}return[N,m]}function Dc(i,l,c){var m=la,R=Za(),N=_a;if(N){if(c===void 0)throw Error(n(407));c=c()}else c=l();var Re=!Pi((Aa||R).memoizedState,c);Re&&(R.memoizedState=c,ai=!0),R=R.queue;var Ne=Lc.bind(null,m,R,i);if(Fs(2048,8,Ne,[i]),R.getSnapshot!==l||Re||Xa!==null&&Xa.memoizedState.tag&1){if(m.flags|=2048,vl(9,fo(),zs.bind(null,m,R,c,l),null),va===null)throw Error(n(349));N||(cr&124)!==0||Cc(m,l,c)}return c}function Cc(i,l,c){i.flags|=16384,i={getSnapshot:l,value:c},l=la.updateQueue,l===null?(l=xc(),la.updateQueue=l,l.stores=[i]):(c=l.stores,c===null?l.stores=[i]:c.push(i))}function zs(i,l,c,m){l.value=c,l.getSnapshot=m,Nc(l)&&Mc(i)}function Lc(i,l,c){return c(function(){Nc(l)&&Mc(i)})}function Nc(i){var l=i.getSnapshot;i=i.value;try{var c=l();return!Pi(i,c)}catch{return!0}}function Mc(i){var l=ns(i,2);l!==null&&fr(l,i,2)}function Oc(i){var l=zi();if(typeof i=="function"){var c=i;if(i=c(),Os){Wn(!0);try{c()}finally{Wn(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:i},l}function uf(i,l,c,m){return i.baseState=c,wc(i,Aa,typeof m=="function"?m:Gr)}function cf(i,l,c,m,R){if(Fi(i))throw Error(n(485));if(i=l.action,i!==null){var N={payload:R,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Re){N.listeners.push(Re)}};_e.T!==null?c(!0):N.isTransition=!1,m(N),c=l.pending,c===null?(N.next=l.pending=N,df(l,N)):(N.next=c.next,l.pending=c.next=N)}}function df(i,l){var c=l.action,m=l.payload,R=i.state;if(l.isTransition){var N=_e.T,Re={};_e.T=Re;try{var Ne=c(R,m),Xe=_e.S;Xe!==null&&Xe(Re,Ne),Pc(i,l,Ne)}catch(Dt){su(i,l,Dt)}finally{_e.T=N}}else try{N=c(R,m),Pc(i,l,N)}catch(Dt){su(i,l,Dt)}}function Pc(i,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){zc(i,l,m)},function(m){return su(i,l,m)}):zc(i,l,c)}function zc(i,l,c){l.status="fulfilled",l.value=c,ff(l),i.state=c,l=i.pending,l!==null&&(c=l.next,c===l?i.pending=null:(c=c.next,l.next=c,df(i,c)))}function su(i,l,c){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=c,ff(l),l=l.next;while(l!==m)}i.action=null}function ff(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Fc(i,l){return l}function hf(i,l){if(_a){var c=va.formState;if(c!==null){e:{var m=la;if(_a){if(Va){t:{for(var R=Va,N=_r;R.nodeType!==8;){if(!N){R=null;break t}if(R=Yr(R.nextSibling),R===null){R=null;break t}}N=R.data,R=N==="F!"||N==="F"?R:null}if(R){Va=Yr(R.nextSibling),m=R.data==="F!";break e}}ws(m)}m=!1}m&&(l=c[0])}}return c=zi(),c.memoizedState=c.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:l},c.queue=m,c=Yc.bind(null,la,m),m.dispatch=c,m=Oc(!1),N=ou.bind(null,la,!1,m.queue),m=zi(),R={state:l,dispatch:null,action:i,pending:null},m.queue=R,c=cf.bind(null,la,R,N,c),R.dispatch=c,m.memoizedState=i,[l,c,!1]}function lu(i){var l=Za();return Uc(l,Aa,i)}function Uc(i,l,c){if(l=wc(i,l,Fc)[0],i=co(Gr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Ps(l)}catch(Re){throw Re===ml?io:Re}else m=l;l=Za();var R=l.queue,N=R.dispatch;return c!==l.memoizedState&&(la.flags|=2048,vl(9,fo(),ig.bind(null,R,c),null)),[m,N,i]}function ig(i,l){i.action=l}function gf(i){var l=Za(),c=Aa;if(c!==null)return Uc(l,c,i);Za(),l=l.memoizedState,c=Za();var m=c.queue.dispatch;return c.memoizedState=i,[l,m,!1]}function vl(i,l,c,m){return i={tag:i,create:c,deps:m,inst:l,next:null},l=la.updateQueue,l===null&&(l=xc(),la.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,l.lastEffect=i),i}function fo(){return{destroy:void 0,resource:void 0}}function mf(){return Za().memoizedState}function Wi(i,l,c,m){var R=zi();m=m===void 0?null:m,la.flags|=i,R.memoizedState=vl(1|l,fo(),c,m)}function Fs(i,l,c,m){var R=Za();m=m===void 0?null:m;var N=R.memoizedState.inst;Aa!==null&&m!==null&&eu(m,Aa.memoizedState.deps)?R.memoizedState=vl(l,N,c,m):(la.flags|=i,R.memoizedState=vl(1|l,N,c,m))}function pf(i,l){Wi(8390656,8,i,l)}function Bc(i,l){Fs(2048,8,i,l)}function yf(i,l){return Fs(4,2,i,l)}function Ef(i,l){return Fs(4,4,i,l)}function bf(i,l){if(typeof l=="function"){i=i();var c=l(i);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function jc(i,l,c){c=c!=null?c.concat([i]):null,Fs(4,4,bf.bind(null,l,i),c)}function qc(){}function Tf(i,l){var c=Za();l=l===void 0?null:l;var m=c.memoizedState;return l!==null&&eu(l,m[1])?m[0]:(c.memoizedState=[i,l],i)}function vf(i,l){var c=Za();l=l===void 0?null:l;var m=c.memoizedState;if(l!==null&&eu(l,m[1]))return m[0];if(m=i(),Os){Wn(!0);try{i()}finally{Wn(!1)}}return c.memoizedState=[m,l],m}function Gc(i,l,c){return c===void 0||(cr&1073741824)!==0?i.memoizedState=l:(i.memoizedState=c,i=sp(),la.lanes|=i,Ci|=i,c)}function Sf(i,l,c,m){return Pi(c,l)?c:ls.current!==null?(i=Gc(i,c,m),Pi(i,l)||(ai=!0),i):(cr&42)===0?(ai=!0,i.memoizedState=c):(i=sp(),la.lanes|=i,Ci|=i,l)}function _f(i,l,c,m,R){var N=He.p;He.p=N!==0&&8>N?N:8;var Re=_e.T,Ne={};_e.T=Ne,ou(i,!1,l,c);try{var Xe=R(),Dt=_e.S;if(Dt!==null&&Dt(Ne,Xe),Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var en=af(Xe,m);ho(i,l,en,dr(i))}else ho(i,l,m,dr(i))}catch(hn){ho(i,l,{then:function(){},status:"rejected",reason:hn},dr())}finally{He.p=N,_e.T=Re}}function rg(){}function Hc(i,l,c,m){if(i.tag!==5)throw Error(n(476));var R=Af(i).queue;_f(i,R,l,nt,c===null?rg:function(){return Rf(i),c(m)})}function Af(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:nt},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:c},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function Rf(i){var l=Af(i).next.queue;ho(i,l,{},dr())}function Vc(){return _i(cd)}function If(){return Za().memoizedState}function xf(){return Za().memoizedState}function wf(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var c=dr();i=ss(c);var m=Br(l,i,c);m!==null&&(fr(m,l,c),so(m,l,c)),l={cache:bc()},i.payload=l;return}l=l.return}}function sg(i,l,c){var m=dr();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Fi(i)?uu(l,c):(c=uc(i,l,c,m),c!==null&&(fr(c,i,m),Sl(c,l,m)))}function Yc(i,l,c){var m=dr();ho(i,l,c,m)}function ho(i,l,c,m){var R={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Fi(i))uu(l,R);else{var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var Re=l.lastRenderedState,Ne=N(Re,c);if(R.hasEagerState=!0,R.eagerState=Ne,Pi(Ne,Re))return ur(i,l,R,0),va===null&&Po(),!1}catch{}finally{}if(c=uc(i,l,R,m),c!==null)return fr(c,i,m),Sl(c,l,m),!0}return!1}function ou(i,l,c,m){if(m={lane:2,revertLane:pg(),action:m,hasEagerState:!1,eagerState:null,next:null},Fi(i)){if(l)throw Error(n(479))}else l=uc(i,c,m,2),l!==null&&fr(l,i,2)}function Fi(i){var l=i.alternate;return i===la||l!==null&&l===la}function uu(i,l){Ms=Zo=!0;var c=i.pending;c===null?l.next=l:(l.next=c.next,c.next=l),i.pending=l}function Sl(i,l,c){if((c&4194048)!==0){var m=l.lanes;m&=i.pendingLanes,c|=m,l.lanes=c,Wt(i,c)}}var Us={readContext:_i,use:uo,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa},cu={readContext:_i,use:uo,useCallback:function(i,l){return zi().memoizedState=[i,l===void 0?null:l],i},useContext:_i,useEffect:pf,useImperativeHandle:function(i,l,c){c=c!=null?c.concat([i]):null,Wi(4194308,4,bf.bind(null,l,i),c)},useLayoutEffect:function(i,l){return Wi(4194308,4,i,l)},useInsertionEffect:function(i,l){Wi(4,2,i,l)},useMemo:function(i,l){var c=zi();l=l===void 0?null:l;var m=i();if(Os){Wn(!0);try{i()}finally{Wn(!1)}}return c.memoizedState=[m,l],m},useReducer:function(i,l,c){var m=zi();if(c!==void 0){var R=c(l);if(Os){Wn(!0);try{c(l)}finally{Wn(!1)}}}else R=l;return m.memoizedState=m.baseState=R,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:R},m.queue=i,i=i.dispatch=sg.bind(null,la,i),[m.memoizedState,i]},useRef:function(i){var l=zi();return i={current:i},l.memoizedState=i},useState:function(i){i=Oc(i);var l=i.queue,c=Yc.bind(null,la,l);return l.dispatch=c,[i.memoizedState,c]},useDebugValue:qc,useDeferredValue:function(i,l){var c=zi();return Gc(c,i,l)},useTransition:function(){var i=Oc(!1);return i=_f.bind(null,la,i.queue,!0,!1),zi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,c){var m=la,R=zi();if(_a){if(c===void 0)throw Error(n(407));c=c()}else{if(c=l(),va===null)throw Error(n(349));(oa&124)!==0||Cc(m,l,c)}R.memoizedState=c;var N={value:c,getSnapshot:l};return R.queue=N,pf(Lc.bind(null,m,N,i),[i]),m.flags|=2048,vl(9,fo(),zs.bind(null,m,N,c,l),null),c},useId:function(){var i=zi(),l=va.identifierPrefix;if(_a){var c=Sr,m=vr;c=(m&~(1<<32-ta(m)-1)).toString(32)+c,l=""+l+"R"+c,c=Jo++,0<c&&(l+="H"+c.toString(32)),l+=""}else c=of++,l=""+l+"r"+c.toString(32)+"";return i.memoizedState=l},useHostTransitionStatus:Vc,useFormState:hf,useActionState:hf,useOptimistic:function(i){var l=zi();l.memoizedState=l.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=ou.bind(null,la,!0,c),c.dispatch=l,[i,l]},useMemoCache:ru,useCacheRefresh:function(){return zi().memoizedState=wf.bind(null,la)}},kf={readContext:_i,use:uo,useCallback:Tf,useContext:_i,useEffect:Bc,useImperativeHandle:jc,useInsertionEffect:yf,useLayoutEffect:Ef,useMemo:vf,useReducer:co,useRef:mf,useState:function(){return co(Gr)},useDebugValue:qc,useDeferredValue:function(i,l){var c=Za();return Sf(c,Aa.memoizedState,i,l)},useTransition:function(){var i=co(Gr)[0],l=Za().memoizedState;return[typeof i=="boolean"?i:Ps(i),l]},useSyncExternalStore:Dc,useId:If,useHostTransitionStatus:Vc,useFormState:lu,useActionState:lu,useOptimistic:function(i,l){var c=Za();return uf(c,Aa,i,l)},useMemoCache:ru,useCacheRefresh:xf},lg={readContext:_i,use:uo,useCallback:Tf,useContext:_i,useEffect:Bc,useImperativeHandle:jc,useInsertionEffect:yf,useLayoutEffect:Ef,useMemo:vf,useReducer:kc,useRef:mf,useState:function(){return kc(Gr)},useDebugValue:qc,useDeferredValue:function(i,l){var c=Za();return Aa===null?Gc(c,i,l):Sf(c,Aa.memoizedState,i,l)},useTransition:function(){var i=kc(Gr)[0],l=Za().memoizedState;return[typeof i=="boolean"?i:Ps(i),l]},useSyncExternalStore:Dc,useId:If,useHostTransitionStatus:Vc,useFormState:gf,useActionState:gf,useOptimistic:function(i,l){var c=Za();return Aa!==null?uf(c,Aa,i,l):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:ru,useCacheRefresh:xf},_l=null,Ui=0;function Al(i){var l=Ui;return Ui+=1,_l===null&&(_l=[]),pl(_l,i,l)}function go(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function du(i,l){throw l.$$typeof===E?Error(n(525)):(i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function Kc(i){var l=i._init;return l(i._payload)}function Df(i){function l(mt,st){if(i){var Rt=mt.deletions;Rt===null?(mt.deletions=[st],mt.flags|=16):Rt.push(st)}}function c(mt,st){if(!i)return null;for(;st!==null;)l(mt,st),st=st.sibling;return null}function m(mt){for(var st=new Map;mt!==null;)mt.key!==null?st.set(mt.key,mt):st.set(mt.index,mt),mt=mt.sibling;return st}function R(mt,st){return mt=Qi(mt,st),mt.index=0,mt.sibling=null,mt}function N(mt,st,Rt){return mt.index=Rt,i?(Rt=mt.alternate,Rt!==null?(Rt=Rt.index,Rt<st?(mt.flags|=67108866,st):Rt):(mt.flags|=67108866,st)):(mt.flags|=1048576,st)}function Re(mt){return i&&mt.alternate===null&&(mt.flags|=67108866),mt}function Ne(mt,st,Rt,un){return st===null||st.tag!==6?(st=Fo(Rt,mt.mode,un),st.return=mt,st):(st=R(st,Rt),st.return=mt,st)}function Xe(mt,st,Rt,un){var Pn=Rt.type;return Pn===T?en(mt,st,Rt.props.children,un,Rt.key):st!==null&&(st.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===ee&&Kc(Pn)===st.type)?(st=R(st,Rt.props),go(st,Rt),st.return=mt,st):(st=zo(Rt.type,Rt.key,Rt.props,null,mt.mode,un),go(st,Rt),st.return=mt,st)}function Dt(mt,st,Rt,un){return st===null||st.tag!==4||st.stateNode.containerInfo!==Rt.containerInfo||st.stateNode.implementation!==Rt.implementation?(st=fc(Rt,mt.mode,un),st.return=mt,st):(st=R(st,Rt.children||[]),st.return=mt,st)}function en(mt,st,Rt,un,Pn){return st===null||st.tag!==7?(st=as(Rt,mt.mode,un,Pn),st.return=mt,st):(st=R(st,Rt),st.return=mt,st)}function hn(mt,st,Rt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=Fo(""+st,mt.mode,Rt),st.return=mt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case b:return Rt=zo(st.type,st.key,st.props,null,mt.mode,Rt),go(Rt,st),Rt.return=mt,Rt;case A:return st=fc(st,mt.mode,Rt),st.return=mt,st;case ee:var un=st._init;return st=un(st._payload),hn(mt,st,Rt)}if(Ye(st)||Ve(st))return st=as(st,mt.mode,Rt,null),st.return=mt,st;if(typeof st.then=="function")return hn(mt,Al(st),Rt);if(st.$$typeof===fe)return hn(mt,Ho(mt,st),Rt);du(mt,st)}return null}function Nt(mt,st,Rt,un){var Pn=st!==null?st.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Pn!==null?null:Ne(mt,st,""+Rt,un);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case b:return Rt.key===Pn?Xe(mt,st,Rt,un):null;case A:return Rt.key===Pn?Dt(mt,st,Rt,un):null;case ee:return Pn=Rt._init,Rt=Pn(Rt._payload),Nt(mt,st,Rt,un)}if(Ye(Rt)||Ve(Rt))return Pn!==null?null:en(mt,st,Rt,un,null);if(typeof Rt.then=="function")return Nt(mt,st,Al(Rt),un);if(Rt.$$typeof===fe)return Nt(mt,st,Ho(mt,Rt),un);du(mt,Rt)}return null}function Pt(mt,st,Rt,un,Pn){if(typeof un=="string"&&un!==""||typeof un=="number"||typeof un=="bigint")return mt=mt.get(Rt)||null,Ne(st,mt,""+un,Pn);if(typeof un=="object"&&un!==null){switch(un.$$typeof){case b:return mt=mt.get(un.key===null?Rt:un.key)||null,Xe(st,mt,un,Pn);case A:return mt=mt.get(un.key===null?Rt:un.key)||null,Dt(st,mt,un,Pn);case ee:var ma=un._init;return un=ma(un._payload),Pt(mt,st,Rt,un,Pn)}if(Ye(un)||Ve(un))return mt=mt.get(Rt)||null,en(st,mt,un,Pn,null);if(typeof un.then=="function")return Pt(mt,st,Rt,Al(un),Pn);if(un.$$typeof===fe)return Pt(mt,st,Rt,Ho(st,un),Pn);du(st,un)}return null}function Xn(mt,st,Rt,un){for(var Pn=null,ma=null,Gn=st,Yn=st=0,Ri=null;Gn!==null&&Yn<Rt.length;Yn++){Gn.index>Yn?(Ri=Gn,Gn=null):Ri=Gn.sibling;var ka=Nt(mt,Gn,Rt[Yn],un);if(ka===null){Gn===null&&(Gn=Ri);break}i&&Gn&&ka.alternate===null&&l(mt,Gn),st=N(ka,st,Yn),ma===null?Pn=ka:ma.sibling=ka,ma=ka,Gn=Ri}if(Yn===Rt.length)return c(mt,Gn),_a&&xs(mt,Yn),Pn;if(Gn===null){for(;Yn<Rt.length;Yn++)Gn=hn(mt,Rt[Yn],un),Gn!==null&&(st=N(Gn,st,Yn),ma===null?Pn=Gn:ma.sibling=Gn,ma=Gn);return _a&&xs(mt,Yn),Pn}for(Gn=m(Gn);Yn<Rt.length;Yn++)Ri=Pt(Gn,mt,Yn,Rt[Yn],un),Ri!==null&&(i&&Ri.alternate!==null&&Gn.delete(Ri.key===null?Yn:Ri.key),st=N(Ri,st,Yn),ma===null?Pn=Ri:ma.sibling=Ri,ma=Ri);return i&&Gn.forEach(function(Nl){return l(mt,Nl)}),_a&&xs(mt,Yn),Pn}function Vn(mt,st,Rt,un){if(Rt==null)throw Error(n(151));for(var Pn=null,ma=null,Gn=st,Yn=st=0,Ri=null,ka=Rt.next();Gn!==null&&!ka.done;Yn++,ka=Rt.next()){Gn.index>Yn?(Ri=Gn,Gn=null):Ri=Gn.sibling;var Nl=Nt(mt,Gn,ka.value,un);if(Nl===null){Gn===null&&(Gn=Ri);break}i&&Gn&&Nl.alternate===null&&l(mt,Gn),st=N(Nl,st,Yn),ma===null?Pn=Nl:ma.sibling=Nl,ma=Nl,Gn=Ri}if(ka.done)return c(mt,Gn),_a&&xs(mt,Yn),Pn;if(Gn===null){for(;!ka.done;Yn++,ka=Rt.next())ka=hn(mt,ka.value,un),ka!==null&&(st=N(ka,st,Yn),ma===null?Pn=ka:ma.sibling=ka,ma=ka);return _a&&xs(mt,Yn),Pn}for(Gn=m(Gn);!ka.done;Yn++,ka=Rt.next())ka=Pt(Gn,mt,Yn,ka.value,un),ka!==null&&(i&&ka.alternate!==null&&Gn.delete(ka.key===null?Yn:ka.key),st=N(ka,st,Yn),ma===null?Pn=ka:ma.sibling=ka,ma=ka);return i&&Gn.forEach(function(rT){return l(mt,rT)}),_a&&xs(mt,Yn),Pn}function Pa(mt,st,Rt,un){if(typeof Rt=="object"&&Rt!==null&&Rt.type===T&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case b:e:{for(var Pn=Rt.key;st!==null;){if(st.key===Pn){if(Pn=Rt.type,Pn===T){if(st.tag===7){c(mt,st.sibling),un=R(st,Rt.props.children),un.return=mt,mt=un;break e}}else if(st.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===ee&&Kc(Pn)===st.type){c(mt,st.sibling),un=R(st,Rt.props),go(un,Rt),un.return=mt,mt=un;break e}c(mt,st);break}else l(mt,st);st=st.sibling}Rt.type===T?(un=as(Rt.props.children,mt.mode,un,Rt.key),un.return=mt,mt=un):(un=zo(Rt.type,Rt.key,Rt.props,null,mt.mode,un),go(un,Rt),un.return=mt,mt=un)}return Re(mt);case A:e:{for(Pn=Rt.key;st!==null;){if(st.key===Pn)if(st.tag===4&&st.stateNode.containerInfo===Rt.containerInfo&&st.stateNode.implementation===Rt.implementation){c(mt,st.sibling),un=R(st,Rt.children||[]),un.return=mt,mt=un;break e}else{c(mt,st);break}else l(mt,st);st=st.sibling}un=fc(Rt,mt.mode,un),un.return=mt,mt=un}return Re(mt);case ee:return Pn=Rt._init,Rt=Pn(Rt._payload),Pa(mt,st,Rt,un)}if(Ye(Rt))return Xn(mt,st,Rt,un);if(Ve(Rt)){if(Pn=Ve(Rt),typeof Pn!="function")throw Error(n(150));return Rt=Pn.call(Rt),Vn(mt,st,Rt,un)}if(typeof Rt.then=="function")return Pa(mt,st,Al(Rt),un);if(Rt.$$typeof===fe)return Pa(mt,st,Ho(mt,Rt),un);du(mt,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint"?(Rt=""+Rt,st!==null&&st.tag===6?(c(mt,st.sibling),un=R(st,Rt),un.return=mt,mt=un):(c(mt,st),un=Fo(Rt,mt.mode,un),un.return=mt,mt=un),Re(mt)):c(mt,st)}return function(mt,st,Rt,un){try{Ui=0;var Pn=Pa(mt,st,Rt,un);return _l=null,Pn}catch(Gn){if(Gn===ml||Gn===io)throw Gn;var ma=Si(29,Gn,null,mt.mode);return ma.lanes=un,ma.return=mt,ma}finally{}}}var Rl=Df(!0),Cf=Df(!1),er=Be(null),Rr=null;function os(i){var l=i.alternate;gt(Ja,Ja.current&1),gt(er,i),Rr===null&&(l===null||ls.current!==null||l.memoizedState!==null)&&(Rr=i)}function $c(i){if(i.tag===22){if(gt(Ja,Ja.current),gt(er,i),Rr===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(Rr=i)}}else us()}function us(){gt(Ja,Ja.current),gt(er,er.current)}function Hr(i){it(er),Rr===i&&(Rr=null),it(Ja)}var Ja=Be(0);function fu(i){for(var l=i;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||wg(c)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function hu(i,l,c,m){l=i.memoizedState,c=c(m,l),c=c==null?l:p({},l,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Wc={enqueueSetState:function(i,l,c){i=i._reactInternals;var m=dr(),R=ss(m);R.payload=l,c!=null&&(R.callback=c),l=Br(i,R,m),l!==null&&(fr(l,i,m),so(l,i,m))},enqueueReplaceState:function(i,l,c){i=i._reactInternals;var m=dr(),R=ss(m);R.tag=1,R.payload=l,c!=null&&(R.callback=c),l=Br(i,R,m),l!==null&&(fr(l,i,m),so(l,i,m))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var c=dr(),m=ss(c);m.tag=2,l!=null&&(m.callback=l),l=Br(i,m,c),l!==null&&(fr(l,i,c),so(l,i,c))}};function Xc(i,l,c,m,R,N,Re){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,N,Re):l.prototype&&l.prototype.isPureReactComponent?!As(c,m)||!As(R,N):!0}function Lf(i,l,c,m){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,m),l.state!==i&&Wc.enqueueReplaceState(l,l.state,null)}function cs(i,l){var c=l;if("ref"in l){c={};for(var m in l)m!=="ref"&&(c[m]=l[m])}if(i=i.defaultProps){c===l&&(c=p({},c));for(var R in i)c[R]===void 0&&(c[R]=i[R])}return c}var gu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Qc(i){gu(i)}function Nf(i){console.error(i)}function Zc(i){gu(i)}function mu(i,l){try{var c=i.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function Jc(i,l,c){try{var m=i.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function ed(i,l,c){return c=ss(c),c.tag=3,c.payload={element:null},c.callback=function(){mu(i,l)},c}function td(i){return i=ss(i),i.tag=3,i}function Mf(i,l,c,m){var R=c.type.getDerivedStateFromError;if(typeof R=="function"){var N=m.value;i.payload=function(){return R(N)},i.callback=function(){Jc(l,c,m)}}var Re=c.stateNode;Re!==null&&typeof Re.componentDidCatch=="function"&&(i.callback=function(){Jc(l,c,m),typeof R!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var Ne=m.stack;this.componentDidCatch(m.value,{componentStack:Ne!==null?Ne:""})})}function Of(i,l,c,m,R){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=c.alternate,l!==null&&ao(l,c,R,!0),c=er.current,c!==null){switch(c.tag){case 13:return Rr===null?dg():c.alternate===null&&Ua===0&&(Ua=3),c.flags&=-257,c.flags|=65536,c.lanes=R,m===vc?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([m]):l.add(m),hg(i,m,R)),!1;case 22:return c.flags|=65536,m===vc?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([m]):c.add(m)),hg(i,m,R)),!1}throw Error(n(435,c.tag))}return hg(i,m,R),dg(),!1}if(_a)return l=er.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=R,m!==Bo&&(i=Error(n(422),{cause:m}),no(pi(i,c)))):(m!==Bo&&(l=Error(n(423),{cause:m}),no(pi(l,c))),i=i.current.alternate,i.flags|=65536,R&=-R,i.lanes|=R,m=pi(m,c),R=ed(i.stateNode,m,R),Xo(i,R),Ua!==4&&(Ua=2)),!1;var N=Error(n(520),{cause:m});if(N=pi(N,c),Il===null?Il=[N]:Il.push(N),Ua!==4&&(Ua=2),l===null)return!0;m=pi(m,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,i=R&-R,c.lanes|=i,i=ed(c.stateNode,m,i),Xo(c,i),!1;case 1:if(l=c.type,N=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Un===null||!Un.has(N))))return c.flags|=65536,R&=-R,c.lanes|=R,R=td(R),Mf(R,i,c,m),Xo(c,R),!1}c=c.return}while(c!==null);return!1}var Pf=Error(n(461)),ai=!1;function ii(i,l,c,m){l.child=i===null?Cf(l,null,c,m):Rl(l,i.child,c,m)}function zf(i,l,c,m,R){c=c.render;var N=l.ref;if("ref"in m){var Re={};for(var Ne in m)Ne!=="ref"&&(Re[Ne]=m[Ne])}else Re=m;return Ds(l),m=Rc(i,l,c,Re,N,R),Ne=nu(),i!==null&&!ai?(au(i,l,R),oe(i,l,R)):(_a&&Ne&&gc(l),l.flags|=1,ii(i,l,m,R),l.child)}function S(i,l,c,m,R){if(i===null){var N=c.type;return typeof N=="function"&&!ol(N)&&N.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=N,y(i,l,N,m,R)):(i=zo(c.type,null,m,l,l.mode,R),i.ref=l.ref,i.return=l,l.child=i)}if(N=i.child,!Ae(i,R)){var Re=N.memoizedProps;if(c=c.compare,c=c!==null?c:As,c(Re,m)&&i.ref===l.ref)return oe(i,l,R)}return l.flags|=1,i=Qi(N,m),i.ref=l.ref,i.return=l,l.child=i}function y(i,l,c,m,R){if(i!==null){var N=i.memoizedProps;if(As(N,m)&&i.ref===l.ref)if(ai=!1,l.pendingProps=m=N,Ae(i,R))(i.flags&131072)!==0&&(ai=!0);else return l.lanes=i.lanes,oe(i,l,R)}return w(i,l,c,m,R)}function v(i,l,c){var m=l.pendingProps,R=m.children,N=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=N!==null?N.baseLanes|c:c,i!==null){for(R=l.child=i.child,N=0;R!==null;)N=N|R.lanes|R.childLanes,R=R.sibling;l.childLanes=N&~m}else l.childLanes=0,l.child=null;return _(i,l,m,c)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&Yo(l,N!==null?N.cachePool:null),N!==null?Ac(l,N):Qo(),$c(l);else return l.lanes=l.childLanes=536870912,_(i,l,N!==null?N.baseLanes|c:c,c)}else N!==null?(Yo(l,N.cachePool),Ac(l,N),us(),l.memoizedState=null):(i!==null&&Yo(l,null),Qo(),us());return ii(i,l,R,c),l.child}function _(i,l,c,m){var R=Vo();return R=R===null?null:{parent:ni._currentValue,pool:R},l.memoizedState={baseLanes:c,cachePool:R},i!==null&&Yo(l,null),Qo(),$c(l),i!==null&&ao(i,l,m,!0),null}function I(i,l){var c=l.ref;if(c===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(l.flags|=4194816)}}function w(i,l,c,m,R){return Ds(l),c=Rc(i,l,c,m,void 0,R),m=nu(),i!==null&&!ai?(au(i,l,R),oe(i,l,R)):(_a&&m&&gc(l),l.flags|=1,ii(i,l,c,R),l.child)}function z(i,l,c,m,R,N){return Ds(l),l.updateQueue=null,c=Ic(l,m,c,R),tu(i),m=nu(),i!==null&&!ai?(au(i,l,N),oe(i,l,N)):(_a&&m&&gc(l),l.flags|=1,ii(i,l,c,N),l.child)}function F(i,l,c,m,R){if(Ds(l),l.stateNode===null){var N=br,Re=c.contextType;typeof Re=="object"&&Re!==null&&(N=_i(Re)),N=new c(m,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Wc,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=m,N.state=l.memoizedState,N.refs={},$o(l),Re=c.contextType,N.context=typeof Re=="object"&&Re!==null?_i(Re):br,N.state=l.memoizedState,Re=c.getDerivedStateFromProps,typeof Re=="function"&&(hu(l,c,Re,m),N.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(Re=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),Re!==N.state&&Wc.enqueueReplaceState(N,N.state,null),lo(l,m,N,R),yl(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(i===null){N=l.stateNode;var Ne=l.memoizedProps,Xe=cs(c,Ne);N.props=Xe;var Dt=N.context,en=c.contextType;Re=br,typeof en=="object"&&en!==null&&(Re=_i(en));var hn=c.getDerivedStateFromProps;en=typeof hn=="function"||typeof N.getSnapshotBeforeUpdate=="function",Ne=l.pendingProps!==Ne,en||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Ne||Dt!==Re)&&Lf(l,N,m,Re),Ur=!1;var Nt=l.memoizedState;N.state=Nt,lo(l,m,N,R),yl(),Dt=l.memoizedState,Ne||Nt!==Dt||Ur?(typeof hn=="function"&&(hu(l,c,hn,m),Dt=l.memoizedState),(Xe=Ur||Xc(l,c,Xe,m,Nt,Dt,Re))?(en||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Dt),N.props=m,N.state=Dt,N.context=Re,m=Xe):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{N=l.stateNode,Wo(i,l),Re=l.memoizedProps,en=cs(c,Re),N.props=en,hn=l.pendingProps,Nt=N.context,Dt=c.contextType,Xe=br,typeof Dt=="object"&&Dt!==null&&(Xe=_i(Dt)),Ne=c.getDerivedStateFromProps,(Dt=typeof Ne=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Re!==hn||Nt!==Xe)&&Lf(l,N,m,Xe),Ur=!1,Nt=l.memoizedState,N.state=Nt,lo(l,m,N,R),yl();var Pt=l.memoizedState;Re!==hn||Nt!==Pt||Ur||i!==null&&i.dependencies!==null&&Go(i.dependencies)?(typeof Ne=="function"&&(hu(l,c,Ne,m),Pt=l.memoizedState),(en=Ur||Xc(l,c,en,m,Nt,Pt,Xe)||i!==null&&i.dependencies!==null&&Go(i.dependencies))?(Dt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,Pt,Xe),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,Pt,Xe)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||Re===i.memoizedProps&&Nt===i.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Re===i.memoizedProps&&Nt===i.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Pt),N.props=m,N.state=Pt,N.context=Xe,m=en):(typeof N.componentDidUpdate!="function"||Re===i.memoizedProps&&Nt===i.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Re===i.memoizedProps&&Nt===i.memoizedState||(l.flags|=1024),m=!1)}return N=m,I(i,l),m=(l.flags&128)!==0,N||m?(N=l.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,i!==null&&m?(l.child=Rl(l,i.child,null,R),l.child=Rl(l,null,c,R)):ii(i,l,c,R),l.memoizedState=N.state,i=l.child):i=oe(i,l,R),i}function x(i,l,c,m){return Ar(),l.flags|=256,ii(i,l,c,m),l.child}var H={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G(i){return{baseLanes:i,cachePool:sf()}}function D(i,l,c){return i=i!==null?i.childLanes&~c:0,l&&(i|=Ai),i}function M(i,l,c){var m=l.pendingProps,R=!1,N=(l.flags&128)!==0,Re;if((Re=N)||(Re=i!==null&&i.memoizedState===null?!1:(Ja.current&2)!==0),Re&&(R=!0,l.flags&=-129),Re=(l.flags&32)!==0,l.flags&=-33,i===null){if(_a){if(R?os(l):us(),_a){var Ne=Va,Xe;if(Xe=Ne){e:{for(Xe=Ne,Ne=_r;Xe.nodeType!==8;){if(!Ne){Ne=null;break e}if(Xe=Yr(Xe.nextSibling),Xe===null){Ne=null;break e}}Ne=Xe}Ne!==null?(l.memoizedState={dehydrated:Ne,treeContext:Tr!==null?{id:vr,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},Xe=Si(18,null,null,0),Xe.stateNode=Ne,Xe.return=l,l.child=Xe,Di=l,Va=null,Xe=!0):Xe=!1}Xe||ws(l)}if(Ne=l.memoizedState,Ne!==null&&(Ne=Ne.dehydrated,Ne!==null))return wg(Ne)?l.lanes=32:l.lanes=536870912,null;Hr(l)}return Ne=m.children,m=m.fallback,R?(us(),R=l.mode,Ne=Z({mode:"hidden",children:Ne},R),m=as(m,R,c,null),Ne.return=l,m.return=l,Ne.sibling=m,l.child=Ne,R=l.child,R.memoizedState=G(c),R.childLanes=D(i,Re,c),l.memoizedState=H,m):(os(l),B(l,Ne))}if(Xe=i.memoizedState,Xe!==null&&(Ne=Xe.dehydrated,Ne!==null)){if(N)l.flags&256?(os(l),l.flags&=-257,l=ne(i,l,c)):l.memoizedState!==null?(us(),l.child=i.child,l.flags|=128,l=null):(us(),R=m.fallback,Ne=l.mode,m=Z({mode:"visible",children:m.children},Ne),R=as(R,Ne,c,null),R.flags|=2,m.return=l,R.return=l,m.sibling=R,l.child=m,Rl(l,i.child,null,c),m=l.child,m.memoizedState=G(c),m.childLanes=D(i,Re,c),l.memoizedState=H,l=R);else if(os(l),wg(Ne)){if(Re=Ne.nextSibling&&Ne.nextSibling.dataset,Re)var Dt=Re.dgst;Re=Dt,m=Error(n(419)),m.stack="",m.digest=Re,no({value:m,source:null,stack:null}),l=ne(i,l,c)}else if(ai||ao(i,l,c,!1),Re=(c&i.childLanes)!==0,ai||Re){if(Re=va,Re!==null&&(m=c&-c,m=(m&42)!==0?1:Rn(m),m=(m&(Re.suspendedLanes|c))!==0?0:m,m!==0&&m!==Xe.retryLane))throw Xe.retryLane=m,ns(i,m),fr(Re,i,m),Pf;Ne.data==="$?"||dg(),l=ne(i,l,c)}else Ne.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=Xe.treeContext,Va=Yr(Ne.nextSibling),Di=l,_a=!0,is=null,_r=!1,i!==null&&($i[Zi++]=vr,$i[Zi++]=Sr,$i[Zi++]=Tr,vr=i.id,Sr=i.overflow,Tr=l),l=B(l,m.children),l.flags|=4096);return l}return R?(us(),R=m.fallback,Ne=l.mode,Xe=i.child,Dt=Xe.sibling,m=Qi(Xe,{mode:"hidden",children:m.children}),m.subtreeFlags=Xe.subtreeFlags&65011712,Dt!==null?R=Qi(Dt,R):(R=as(R,Ne,c,null),R.flags|=2),R.return=l,m.return=l,m.sibling=R,l.child=m,m=R,R=l.child,Ne=i.child.memoizedState,Ne===null?Ne=G(c):(Xe=Ne.cachePool,Xe!==null?(Dt=ni._currentValue,Xe=Xe.parent!==Dt?{parent:Dt,pool:Dt}:Xe):Xe=sf(),Ne={baseLanes:Ne.baseLanes|c,cachePool:Xe}),R.memoizedState=Ne,R.childLanes=D(i,Re,c),l.memoizedState=H,m):(os(l),c=i.child,i=c.sibling,c=Qi(c,{mode:"visible",children:m.children}),c.return=l,c.sibling=null,i!==null&&(Re=l.deletions,Re===null?(l.deletions=[i],l.flags|=16):Re.push(i)),l.child=c,l.memoizedState=null,c)}function B(i,l){return l=Z({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Z(i,l){return i=Si(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ne(i,l,c){return Rl(l,i.child,null,c),i=B(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function ie(i,l,c){i.lanes|=l;var m=i.alternate;m!==null&&(m.lanes|=l),qo(i.return,l,c)}function re(i,l,c,m,R){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:R}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=m,N.tail=c,N.tailMode=R)}function se(i,l,c){var m=l.pendingProps,R=m.revealOrder,N=m.tail;if(ii(i,l,m.children,c),m=Ja.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ie(i,c,l);else if(i.tag===19)ie(i,c,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(gt(Ja,m),R){case"forwards":for(c=l.child,R=null;c!==null;)i=c.alternate,i!==null&&fu(i)===null&&(R=c),c=c.sibling;c=R,c===null?(R=l.child,l.child=null):(R=c.sibling,c.sibling=null),re(l,!1,R,c,N);break;case"backwards":for(c=null,R=l.child,l.child=null;R!==null;){if(i=R.alternate,i!==null&&fu(i)===null){l.child=R;break}i=R.sibling,R.sibling=c,c=R,R=i}re(l,!0,c,null,N);break;case"together":re(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function oe(i,l,c){if(i!==null&&(l.dependencies=i.dependencies),Ci|=l.lanes,(c&l.childLanes)===0)if(i!==null){if(ao(i,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,c=Qi(i,i.pendingProps),l.child=c,c.return=l;i.sibling!==null;)i=i.sibling,c=c.sibling=Qi(i,i.pendingProps),c.return=l;c.sibling=null}return l.child}function Ae(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&Go(i)))}function Q(i,l,c){switch(l.tag){case 3:Y(l,l.stateNode.containerInfo),zr(l,ni,i.memoizedState.cache),Ar();break;case 27:case 5:L(l);break;case 4:Y(l,l.stateNode.containerInfo);break;case 10:zr(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(os(l),l.flags|=128,null):(c&l.child.childLanes)!==0?M(i,l,c):(os(l),i=oe(i,l,c),i!==null?i.sibling:null);os(l);break;case 19:var R=(i.flags&128)!==0;if(m=(c&l.childLanes)!==0,m||(ao(i,l,c,!1),m=(c&l.childLanes)!==0),R){if(m)return se(i,l,c);l.flags|=128}if(R=l.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),gt(Ja,Ja.current),m)break;return null;case 22:case 23:return l.lanes=0,v(i,l,c);case 24:zr(l,ni,i.memoizedState.cache)}return oe(i,l,c)}function U(i,l,c){if(i!==null)if(i.memoizedProps!==l.pendingProps)ai=!0;else{if(!Ae(i,c)&&(l.flags&128)===0)return ai=!1,Q(i,l,c);ai=(i.flags&131072)!==0}else ai=!1,_a&&(l.flags&1048576)!==0&&hc(l,dl,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var m=l.elementType,R=m._init;if(m=R(m._payload),l.type=m,typeof m=="function")ol(m)?(i=cs(m,i),l.tag=1,l=F(null,l,m,i,c)):(l.tag=0,l=w(null,l,m,i,c));else{if(m!=null){if(R=m.$$typeof,R===De){l.tag=11,l=zf(null,l,m,i,c);break e}else if(R===k){l.tag=14,l=S(null,l,m,i,c);break e}}throw l=_t(m)||m,Error(n(306,l,""))}}return l;case 0:return w(i,l,l.type,l.pendingProps,c);case 1:return m=l.type,R=cs(m,l.pendingProps),F(i,l,m,R,c);case 3:e:{if(Y(l,l.stateNode.containerInfo),i===null)throw Error(n(387));m=l.pendingProps;var N=l.memoizedState;R=N.element,Wo(i,l),lo(l,m,null,c);var Re=l.memoizedState;if(m=Re.cache,zr(l,ni,m),m!==N.cache&&Ec(l,[ni],c,!0),yl(),m=Re.element,N.isDehydrated)if(N={element:m,isDehydrated:!1,cache:Re.cache},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){l=x(i,l,m,c);break e}else if(m!==R){R=pi(Error(n(424)),l),no(R),l=x(i,l,m,c);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Va=Yr(i.firstChild),Di=l,_a=!0,is=null,_r=!0,c=Cf(l,null,m,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ar(),m===R){l=oe(i,l,c);break e}ii(i,l,m,c)}l=l.child}return l;case 26:return I(i,l),i===null?(c=Gp(l.type,null,l.pendingProps,null))?l.memoizedState=c:_a||(c=l.type,i=l.pendingProps,m=Yf(Le.current).createElement(c),m[bn]=l,m[At]=i,Li(m,c,i),Ra(m),l.stateNode=m):l.memoizedState=Gp(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return L(l),i===null&&_a&&(m=l.stateNode=Bp(l.type,l.pendingProps,Le.current),Di=l,_r=!0,R=Va,wl(l.type)?(kg=R,Va=Yr(m.firstChild)):Va=R),ii(i,l,l.pendingProps.children,c),I(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&_a&&((R=m=Va)&&(m=M0(m,l.type,l.pendingProps,_r),m!==null?(l.stateNode=m,Di=l,Va=Yr(m.firstChild),_r=!1,R=!0):R=!1),R||ws(l)),L(l),R=l.type,N=l.pendingProps,Re=i!==null?i.memoizedProps:null,m=N.children,Rg(R,N)?m=null:Re!==null&&Rg(R,Re)&&(l.flags|=32),l.memoizedState!==null&&(R=Rc(i,l,ag,null,null,c),cd._currentValue=R),I(i,l),ii(i,l,m,c),l.child;case 6:return i===null&&_a&&((i=c=Va)&&(c=O0(c,l.pendingProps,_r),c!==null?(l.stateNode=c,Di=l,Va=null,i=!0):i=!1),i||ws(l)),null;case 13:return M(i,l,c);case 4:return Y(l,l.stateNode.containerInfo),m=l.pendingProps,i===null?l.child=Rl(l,null,m,c):ii(i,l,m,c),l.child;case 11:return zf(i,l,l.type,l.pendingProps,c);case 7:return ii(i,l,l.pendingProps,c),l.child;case 8:return ii(i,l,l.pendingProps.children,c),l.child;case 12:return ii(i,l,l.pendingProps.children,c),l.child;case 10:return m=l.pendingProps,zr(l,l.type,m.value),ii(i,l,m.children,c),l.child;case 9:return R=l.type._context,m=l.pendingProps.children,Ds(l),R=_i(R),m=m(R),l.flags|=1,ii(i,l,m,c),l.child;case 14:return S(i,l,l.type,l.pendingProps,c);case 15:return y(i,l,l.type,l.pendingProps,c);case 19:return se(i,l,c);case 31:return m=l.pendingProps,c=l.mode,m={mode:m.mode,children:m.children},i===null?(c=Z(m,c),c.ref=l.ref,l.child=c,c.return=l,l=c):(c=Qi(i.child,m),c.ref=l.ref,l.child=c,c.return=l,l=c),l;case 22:return v(i,l,c);case 24:return Ds(l),m=_i(ni),i===null?(R=Vo(),R===null&&(R=va,N=bc(),R.pooledCache=N,N.refCount++,N!==null&&(R.pooledCacheLanes|=c),R=N),l.memoizedState={parent:m,cache:R},$o(l),zr(l,ni,R)):((i.lanes&c)!==0&&(Wo(i,l),lo(l,null,null,c),yl()),R=i.memoizedState,N=l.memoizedState,R.parent!==m?(R={parent:m,cache:m},l.memoizedState=R,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=R),zr(l,ni,m)):(m=N.cache,zr(l,ni,m),m!==R.cache&&Ec(l,[ni],c,!0))),ii(i,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function V(i){i.flags|=4}function $(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!$p(l)){if(l=er.current,l!==null&&((oa&4194048)===oa?Rr!==null:(oa&62914560)!==oa&&(oa&536870912)===0||l!==Rr))throw Ns=vc,lf;i.flags|=8192}}function ce(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?jt():536870912,i.lanes|=l,Vr|=l)}function Te(i,l){if(!_a)switch(i.tailMode){case"hidden":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function ge(i){var l=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(l)for(var R=i.child;R!==null;)c|=R.lanes|R.childLanes,m|=R.subtreeFlags&65011712,m|=R.flags&65011712,R.return=i,R=R.sibling;else for(R=i.child;R!==null;)c|=R.lanes|R.childLanes,m|=R.subtreeFlags,m|=R.flags,R.return=i,R=R.sibling;return i.subtreeFlags|=m,i.childLanes=c,l}function ve(i,l,c){var m=l.pendingProps;switch(Uo(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(l),null;case 1:return ge(l),null;case 3:return c=l.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Fr(ni),W(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(to(l)?V(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,yc())),ge(l),null;case 26:return c=l.memoizedState,i===null?(V(l),c!==null?(ge(l),$(l,c)):(ge(l),l.flags&=-16777217)):c?c!==i.memoizedState?(V(l),ge(l),$(l,c)):(ge(l),l.flags&=-16777217):(i.memoizedProps!==m&&V(l),ge(l),l.flags&=-16777217),null;case 27:j(l),c=Le.current;var R=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==m&&V(l);else{if(!m){if(l.stateNode===null)throw Error(n(166));return ge(l),null}i=zt.current,to(l)?mc(l):(i=Bp(R,m,c),l.stateNode=i,V(l))}return ge(l),null;case 5:if(j(l),c=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==m&&V(l);else{if(!m){if(l.stateNode===null)throw Error(n(166));return ge(l),null}if(i=zt.current,to(l))mc(l);else{switch(R=Yf(Le.current),i){case 1:i=R.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=R.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=R.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=R.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=R.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?R.createElement("select",{is:m.is}):R.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?R.createElement(c,{is:m.is}):R.createElement(c)}}i[bn]=l,i[At]=m;e:for(R=l.child;R!==null;){if(R.tag===5||R.tag===6)i.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===l)break e;for(;R.sibling===null;){if(R.return===null||R.return===l)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}l.stateNode=i;e:switch(Li(i,c,m),c){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&V(l)}}return ge(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==m&&V(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(i=Le.current,to(l)){if(i=l.stateNode,c=l.memoizedProps,m=null,R=Di,R!==null)switch(R.tag){case 27:case 5:m=R.memoizedProps}i[bn]=l,i=!!(i.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||Np(i.nodeValue,c)),i||ws(l)}else i=Yf(i).createTextNode(m),i[bn]=l,l.stateNode=i}return ge(l),null;case 13:if(m=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(R=to(l),m!==null&&m.dehydrated!==null){if(i===null){if(!R)throw Error(n(318));if(R=l.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[bn]=l}else Ar(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ge(l),R=!1}else R=yc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=R),R=!0;if(!R)return l.flags&256?(Hr(l),l):(Hr(l),null)}if(Hr(l),(l.flags&128)!==0)return l.lanes=c,l;if(c=m!==null,i=i!==null&&i.memoizedState!==null,c){m=l.child,R=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(R=m.alternate.memoizedState.cachePool.pool);var N=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),N!==R&&(m.flags|=2048)}return c!==i&&c&&(l.child.flags|=8192),ce(l,l.updateQueue),ge(l),null;case 4:return W(),i===null&&Tg(l.stateNode.containerInfo),ge(l),null;case 10:return Fr(l.type),ge(l),null;case 19:if(it(Ja),R=l.memoizedState,R===null)return ge(l),null;if(m=(l.flags&128)!==0,N=R.rendering,N===null)if(m)Te(R,!1);else{if(Ua!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(N=fu(i),N!==null){for(l.flags|=128,Te(R,!1),i=N.updateQueue,l.updateQueue=i,ce(l,i),l.subtreeFlags=0,i=c,c=l.child;c!==null;)eo(c,i),c=c.sibling;return gt(Ja,Ja.current&1|2),l.child}i=i.sibling}R.tail!==null&&$e()>En&&(l.flags|=128,m=!0,Te(R,!1),l.lanes=4194304)}else{if(!m)if(i=fu(N),i!==null){if(l.flags|=128,m=!0,i=i.updateQueue,l.updateQueue=i,ce(l,i),Te(R,!0),R.tail===null&&R.tailMode==="hidden"&&!N.alternate&&!_a)return ge(l),null}else 2*$e()-R.renderingStartTime>En&&c!==536870912&&(l.flags|=128,m=!0,Te(R,!1),l.lanes=4194304);R.isBackwards?(N.sibling=l.child,l.child=N):(i=R.last,i!==null?i.sibling=N:l.child=N,R.last=N)}return R.tail!==null?(l=R.tail,R.rendering=l,R.tail=l.sibling,R.renderingStartTime=$e(),l.sibling=null,i=Ja.current,gt(Ja,m?i&1|2:i&1),l):(ge(l),null);case 22:case 23:return Hr(l),El(),m=l.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(c&536870912)!==0&&(l.flags&128)===0&&(ge(l),l.subtreeFlags&6&&(l.flags|=8192)):ge(l),c=l.updateQueue,c!==null&&ce(l,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==c&&(l.flags|=2048),i!==null&&it(rs),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Fr(ni),ge(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function Me(i,l){switch(Uo(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Fr(ni),W(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return j(l),null;case 13:if(Hr(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Ar()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return it(Ja),null;case 4:return W(),null;case 10:return Fr(l.type),null;case 22:case 23:return Hr(l),El(),i!==null&&it(rs),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Fr(ni),null;case 25:return null;default:return null}}function ze(i,l){switch(Uo(l),l.tag){case 3:Fr(ni),W();break;case 26:case 27:case 5:j(l);break;case 4:W();break;case 13:Hr(l);break;case 19:it(Ja);break;case 10:Fr(l.type);break;case 22:case 23:Hr(l),El(),i!==null&&it(rs);break;case 24:Fr(ni)}}function K(i,l){try{var c=l.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var R=m.next;c=R;do{if((c.tag&i)===i){m=void 0;var N=c.create,Re=c.inst;m=N(),Re.destroy=m}c=c.next}while(c!==R)}}catch(Ne){Ba(l,l.return,Ne)}}function X(i,l,c){try{var m=l.updateQueue,R=m!==null?m.lastEffect:null;if(R!==null){var N=R.next;m=N;do{if((m.tag&i)===i){var Re=m.inst,Ne=Re.destroy;if(Ne!==void 0){Re.destroy=void 0,R=l;var Xe=c,Dt=Ne;try{Dt()}catch(en){Ba(R,Xe,en)}}}m=m.next}while(m!==N)}}catch(en){Ba(l,l.return,en)}}function Se(i){var l=i.updateQueue;if(l!==null){var c=i.stateNode;try{oo(l,c)}catch(m){Ba(i,i.return,m)}}}function ye(i,l,c){c.props=cs(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(m){Ba(i,l,m)}}function J(i,l){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof c=="function"?i.refCleanup=c(m):c.current=m}}catch(R){Ba(i,l,R)}}function ue(i,l){var c=i.ref,m=i.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(R){Ba(i,l,R)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(R){Ba(i,l,R)}else c.current=null}function he(i){var l=i.type,c=i.memoizedProps,m=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(R){Ba(i,i.return,R)}}function le(i,l,c){try{var m=i.stateNode;k0(m,i.type,c,l),m[At]=l}catch(R){Ba(i,i.return,R)}}function Ie(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&wl(i.type)||i.tag===4}function we(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ie(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&wl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Fe(i,l,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(i),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Vf));else if(m!==4&&(m===27&&wl(i.type)&&(c=i.stateNode,l=null),i=i.child,i!==null))for(Fe(i,l,c),i=i.sibling;i!==null;)Fe(i,l,c),i=i.sibling}function je(i,l,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?c.insertBefore(i,l):c.appendChild(i);else if(m!==4&&(m===27&&wl(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(je(i,l,c),i=i.sibling;i!==null;)je(i,l,c),i=i.sibling}function at(i){var l=i.stateNode,c=i.memoizedProps;try{for(var m=i.type,R=l.attributes;R.length;)l.removeAttributeNode(R[0]);Li(l,m,c),l[bn]=i,l[At]=c}catch(N){Ba(i,i.return,N)}}var lt=!1,ot=!1,qt=!1,Kt=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function In(i,l){if(i=i.containerInfo,_g=Zf,i=tc(i),Zl(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var R=m.anchorOffset,N=m.focusNode;m=m.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var Re=0,Ne=-1,Xe=-1,Dt=0,en=0,hn=i,Nt=null;t:for(;;){for(var Pt;hn!==c||R!==0&&hn.nodeType!==3||(Ne=Re+R),hn!==N||m!==0&&hn.nodeType!==3||(Xe=Re+m),hn.nodeType===3&&(Re+=hn.nodeValue.length),(Pt=hn.firstChild)!==null;)Nt=hn,hn=Pt;for(;;){if(hn===i)break t;if(Nt===c&&++Dt===R&&(Ne=Re),Nt===N&&++en===m&&(Xe=Re),(Pt=hn.nextSibling)!==null)break;hn=Nt,Nt=hn.parentNode}hn=Pt}c=Ne===-1||Xe===-1?null:{start:Ne,end:Xe}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ag={focusedElem:i,selectionRange:c},Zf=!1,Xt=l;Xt!==null;)if(l=Xt,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,Xt=i;else for(;Xt!==null;){switch(l=Xt,N=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&N!==null){i=void 0,c=l,R=N.memoizedProps,N=N.memoizedState,m=c.stateNode;try{var Xn=cs(c.type,R,c.elementType===c.type);i=m.getSnapshotBeforeUpdate(Xn,N),m.__reactInternalSnapshotBeforeUpdate=i}catch(Vn){Ba(c,c.return,Vn)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,c=i.nodeType,c===9)xg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=l.sibling,i!==null){i.return=l.return,Xt=i;break}Xt=l.return}}function Lt(i,l,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:$t(i,c),m&4&&K(5,c);break;case 1:if($t(i,c),m&4)if(i=c.stateNode,l===null)try{i.componentDidMount()}catch(Re){Ba(c,c.return,Re)}else{var R=cs(c.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(R,l,i.__reactInternalSnapshotBeforeUpdate)}catch(Re){Ba(c,c.return,Re)}}m&64&&Se(c),m&512&&J(c,c.return);break;case 3:if($t(i,c),m&64&&(i=c.updateQueue,i!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{oo(i,l)}catch(Re){Ba(c,c.return,Re)}}break;case 27:l===null&&m&4&&at(c);case 26:case 5:$t(i,c),l===null&&m&4&&he(c),m&512&&J(c,c.return);break;case 12:$t(i,c);break;case 13:$t(i,c),m&4&&bt(i,c),m&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=E0.bind(null,c),P0(i,c))));break;case 22:if(m=c.memoizedState!==null||lt,!m){l=l!==null&&l.memoizedState!==null||ot,R=lt;var N=ot;lt=m,(ot=l)&&!N?et(i,c,(c.subtreeFlags&8772)!==0):$t(i,c),lt=R,ot=N}break;case 30:break;default:$t(i,c)}}function gn(i){var l=i.alternate;l!==null&&(i.alternate=null,gn(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&sa(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vn=null,Cn=!1;function Nn(i,l,c){for(c=c.child;c!==null;)Ke(i,l,c),c=c.sibling}function Ke(i,l,c){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Bt,c)}catch{}switch(c.tag){case 26:ot||ue(c,l),Nn(i,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ot||ue(c,l);var m=vn,R=Cn;wl(c.type)&&(vn=c.stateNode,Cn=!1),Nn(i,l,c),sd(c.stateNode),vn=m,Cn=R;break;case 5:ot||ue(c,l);case 6:if(m=vn,R=Cn,vn=null,Nn(i,l,c),vn=m,Cn=R,vn!==null)if(Cn)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(c.stateNode)}catch(N){Ba(c,l,N)}else try{vn.removeChild(c.stateNode)}catch(N){Ba(c,l,N)}break;case 18:vn!==null&&(Cn?(i=vn,Fp(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),gd(i)):Fp(vn,c.stateNode));break;case 4:m=vn,R=Cn,vn=c.stateNode.containerInfo,Cn=!0,Nn(i,l,c),vn=m,Cn=R;break;case 0:case 11:case 14:case 15:ot||X(2,c,l),ot||X(4,c,l),Nn(i,l,c);break;case 1:ot||(ue(c,l),m=c.stateNode,typeof m.componentWillUnmount=="function"&&ye(c,l,m)),Nn(i,l,c);break;case 21:Nn(i,l,c);break;case 22:ot=(m=ot)||c.memoizedState!==null,Nn(i,l,c),ot=m;break;default:Nn(i,l,c)}}function bt(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{gd(i)}catch(c){Ba(l,l.return,c)}}function ht(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new Kt),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new Kt),l;default:throw Error(n(435,i.tag))}}function St(i,l){var c=ht(i);l.forEach(function(m){var R=b0.bind(null,i,m);c.has(m)||(c.add(m),m.then(R,R))})}function ln(i,l){var c=l.deletions;if(c!==null)for(var m=0;m<c.length;m++){var R=c[m],N=i,Re=l,Ne=Re;e:for(;Ne!==null;){switch(Ne.tag){case 27:if(wl(Ne.type)){vn=Ne.stateNode,Cn=!1;break e}break;case 5:vn=Ne.stateNode,Cn=!1;break e;case 3:case 4:vn=Ne.stateNode.containerInfo,Cn=!0;break e}Ne=Ne.return}if(vn===null)throw Error(n(160));Ke(N,Re,R),vn=null,Cn=!1,N=R.alternate,N!==null&&(N.return=null),R.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)ft(l,i),l=l.sibling}var Sn=null;function ft(i,l){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ln(l,i),Gt(i),m&4&&(X(3,i,i.return),K(3,i),X(5,i,i.return));break;case 1:ln(l,i),Gt(i),m&512&&(ot||c===null||ue(c,c.return)),m&64&&lt&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var R=Sn;if(ln(l,i),Gt(i),m&512&&(ot||c===null||ue(c,c.return)),m&4){var N=c!==null?c.memoizedState:null;if(m=i.memoizedState,c===null)if(m===null)if(i.stateNode===null){e:{m=i.type,c=i.memoizedProps,R=R.ownerDocument||R;t:switch(m){case"title":N=R.getElementsByTagName("title")[0],(!N||N[ga]||N[bn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=R.createElement(m),R.head.insertBefore(N,R.querySelector("head > title"))),Li(N,m,c),N[bn]=i,Ra(N),m=N;break e;case"link":var Re=Yp("link","href",R).get(m+(c.href||""));if(Re){for(var Ne=0;Ne<Re.length;Ne++)if(N=Re[Ne],N.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&N.getAttribute("rel")===(c.rel==null?null:c.rel)&&N.getAttribute("title")===(c.title==null?null:c.title)&&N.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){Re.splice(Ne,1);break t}}N=R.createElement(m),Li(N,m,c),R.head.appendChild(N);break;case"meta":if(Re=Yp("meta","content",R).get(m+(c.content||""))){for(Ne=0;Ne<Re.length;Ne++)if(N=Re[Ne],N.getAttribute("content")===(c.content==null?null:""+c.content)&&N.getAttribute("name")===(c.name==null?null:c.name)&&N.getAttribute("property")===(c.property==null?null:c.property)&&N.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&N.getAttribute("charset")===(c.charSet==null?null:c.charSet)){Re.splice(Ne,1);break t}}N=R.createElement(m),Li(N,m,c),R.head.appendChild(N);break;default:throw Error(n(468,m))}N[bn]=i,Ra(N),m=N}i.stateNode=m}else Kp(R,i.type,i.stateNode);else i.stateNode=Vp(R,m,i.memoizedProps);else N!==m?(N===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):N.count--,m===null?Kp(R,i.type,i.stateNode):Vp(R,m,i.memoizedProps)):m===null&&i.stateNode!==null&&le(i,i.memoizedProps,c.memoizedProps)}break;case 27:ln(l,i),Gt(i),m&512&&(ot||c===null||ue(c,c.return)),c!==null&&m&4&&le(i,i.memoizedProps,c.memoizedProps);break;case 5:if(ln(l,i),Gt(i),m&512&&(ot||c===null||ue(c,c.return)),i.flags&32){R=i.stateNode;try{Er(R,"")}catch(Pt){Ba(i,i.return,Pt)}}m&4&&i.stateNode!=null&&(R=i.memoizedProps,le(i,R,c!==null?c.memoizedProps:R)),m&1024&&(qt=!0);break;case 6:if(ln(l,i),Gt(i),m&4){if(i.stateNode===null)throw Error(n(162));m=i.memoizedProps,c=i.stateNode;try{c.nodeValue=m}catch(Pt){Ba(i,i.return,Pt)}}break;case 3:if(Wf=null,R=Sn,Sn=Kf(l.containerInfo),ln(l,i),Sn=R,Gt(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{gd(l.containerInfo)}catch(Pt){Ba(i,i.return,Pt)}qt&&(qt=!1,dn(i));break;case 4:m=Sn,Sn=Kf(i.stateNode.containerInfo),ln(l,i),Gt(i),Sn=m;break;case 12:ln(l,i),Gt(i);break;case 13:ln(l,i),Gt(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yt=$e()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,St(i,m)));break;case 22:R=i.memoizedState!==null;var Xe=c!==null&&c.memoizedState!==null,Dt=lt,en=ot;if(lt=Dt||R,ot=en||Xe,ln(l,i),ot=en,lt=Dt,Gt(i),m&8192)e:for(l=i.stateNode,l._visibility=R?l._visibility&-2:l._visibility|1,R&&(c===null||Xe||lt||ot||an(i)),c=null,l=i;;){if(l.tag===5||l.tag===26){if(c===null){Xe=c=l;try{if(N=Xe.stateNode,R)Re=N.style,typeof Re.setProperty=="function"?Re.setProperty("display","none","important"):Re.display="none";else{Ne=Xe.stateNode;var hn=Xe.memoizedProps.style,Nt=hn!=null&&hn.hasOwnProperty("display")?hn.display:null;Ne.style.display=Nt==null||typeof Nt=="boolean"?"":(""+Nt).trim()}}catch(Pt){Ba(Xe,Xe.return,Pt)}}}else if(l.tag===6){if(c===null){Xe=l;try{Xe.stateNode.nodeValue=R?"":Xe.memoizedProps}catch(Pt){Ba(Xe,Xe.return,Pt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=i.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,St(i,c))));break;case 19:ln(l,i),Gt(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,St(i,m)));break;case 30:break;case 21:break;default:ln(l,i),Gt(i)}}function Gt(i){var l=i.flags;if(l&2){try{for(var c,m=i.return;m!==null;){if(Ie(m)){c=m;break}m=m.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var R=c.stateNode,N=we(i);je(i,N,R);break;case 5:var Re=c.stateNode;c.flags&32&&(Er(Re,""),c.flags&=-33);var Ne=we(i);je(i,Ne,Re);break;case 3:case 4:var Xe=c.stateNode.containerInfo,Dt=we(i);Fe(i,Dt,Xe);break;default:throw Error(n(161))}}catch(en){Ba(i,i.return,en)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function dn(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;dn(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function $t(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Lt(i,l.alternate,l),l=l.sibling}function an(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:X(4,l,l.return),an(l);break;case 1:ue(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&ye(l,l.return,c),an(l);break;case 27:sd(l.stateNode);case 26:case 5:ue(l,l.return),an(l);break;case 22:l.memoizedState===null&&an(l);break;case 30:an(l);break;default:an(l)}i=i.sibling}}function et(i,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,R=i,N=l,Re=N.flags;switch(N.tag){case 0:case 11:case 15:et(R,N,c),K(4,N);break;case 1:if(et(R,N,c),m=N,R=m.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Dt){Ba(m,m.return,Dt)}if(m=N,R=m.updateQueue,R!==null){var Ne=m.stateNode;try{var Xe=R.shared.hiddenCallbacks;if(Xe!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Xe.length;R++)jr(Xe[R],Ne)}catch(Dt){Ba(m,m.return,Dt)}}c&&Re&64&&Se(N),J(N,N.return);break;case 27:at(N);case 26:case 5:et(R,N,c),c&&m===null&&Re&4&&he(N),J(N,N.return);break;case 12:et(R,N,c);break;case 13:et(R,N,c),c&&Re&4&&bt(R,N);break;case 22:N.memoizedState===null&&et(R,N,c),J(N,N.return);break;case 30:break;default:et(R,N,c)}l=l.sibling}}function Ct(i,l){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&fl(c))}function rn(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&fl(i))}function Qt(i,l,c,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)pt(i,l,c,m),l=l.sibling}function pt(i,l,c,m){var R=l.flags;switch(l.tag){case 0:case 11:case 15:Qt(i,l,c,m),R&2048&&K(9,l);break;case 1:Qt(i,l,c,m);break;case 3:Qt(i,l,c,m),R&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&fl(i)));break;case 12:if(R&2048){Qt(i,l,c,m),i=l.stateNode;try{var N=l.memoizedProps,Re=N.id,Ne=N.onPostCommit;typeof Ne=="function"&&Ne(Re,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Xe){Ba(l,l.return,Xe)}}else Qt(i,l,c,m);break;case 13:Qt(i,l,c,m);break;case 23:break;case 22:N=l.stateNode,Re=l.alternate,l.memoizedState!==null?N._visibility&2?Qt(i,l,c,m):Qe(i,l):N._visibility&2?Qt(i,l,c,m):(N._visibility|=2,ke(i,l,c,m,(l.subtreeFlags&10256)!==0)),R&2048&&Ct(Re,l);break;case 24:Qt(i,l,c,m),R&2048&&rn(l.alternate,l);break;default:Qt(i,l,c,m)}}function ke(i,l,c,m,R){for(R=R&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var N=i,Re=l,Ne=c,Xe=m,Dt=Re.flags;switch(Re.tag){case 0:case 11:case 15:ke(N,Re,Ne,Xe,R),K(8,Re);break;case 23:break;case 22:var en=Re.stateNode;Re.memoizedState!==null?en._visibility&2?ke(N,Re,Ne,Xe,R):Qe(N,Re):(en._visibility|=2,ke(N,Re,Ne,Xe,R)),R&&Dt&2048&&Ct(Re.alternate,Re);break;case 24:ke(N,Re,Ne,Xe,R),R&&Dt&2048&&rn(Re.alternate,Re);break;default:ke(N,Re,Ne,Xe,R)}l=l.sibling}}function Qe(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=i,m=l,R=m.flags;switch(m.tag){case 22:Qe(c,m),R&2048&&Ct(m.alternate,m);break;case 24:Qe(c,m),R&2048&&rn(m.alternate,m);break;default:Qe(c,m)}l=l.sibling}}var Tt=8192;function Ze(i){if(i.subtreeFlags&Tt)for(i=i.child;i!==null;)Ut(i),i=i.sibling}function Ut(i){switch(i.tag){case 26:Ze(i),i.flags&Tt&&i.memoizedState!==null&&W0(Sn,i.memoizedState,i.memoizedProps);break;case 5:Ze(i);break;case 3:case 4:var l=Sn;Sn=Kf(i.stateNode.containerInfo),Ze(i),Sn=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=Tt,Tt=16777216,Ze(i),Tt=l):Ze(i));break;default:Ze(i)}}function Zt(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function _n(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var m=l[c];Xt=m,Ta(m,i)}Zt(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ln(i),i=i.sibling}function Ln(i){switch(i.tag){case 0:case 11:case 15:_n(i),i.flags&2048&&X(9,i,i.return);break;case 3:_n(i);break;case 12:_n(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,xn(i)):_n(i);break;default:_n(i)}}function xn(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var m=l[c];Xt=m,Ta(m,i)}Zt(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:X(8,l,l.return),xn(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,xn(l));break;default:xn(l)}i=i.sibling}}function Ta(i,l){for(;Xt!==null;){var c=Xt;switch(c.tag){case 0:case 11:case 15:X(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:fl(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,Xt=m;else e:for(c=i;Xt!==null;){m=Xt;var R=m.sibling,N=m.return;if(gn(m),m===c){Xt=null;break e}if(R!==null){R.return=N,Xt=R;break e}Xt=N}}}var Wa={getCacheForType:function(i){var l=_i(ni),c=l.data.get(i);return c===void 0&&(c=i(),l.data.set(i,c)),c}},tr=typeof WeakMap=="function"?WeakMap:Map,Zn=0,va=null,na=null,oa=0,ua=0,ri=null,ei=!1,yi=!1,Ir=!1,nr=0,Ua=0,Ci=0,si=0,ds=0,Ai=0,Vr=0,Il=null,Ei=null,tt=!1,Yt=0,En=1/0,An=null,Un=null,qn=0,wa=null,fi=null,Bs=0,mo=0,og=null,rp=null,nd=0,ug=null;function dr(){if((Zn&2)!==0&&oa!==0)return oa&-oa;if(_e.T!==null){var i=Ls;return i!==0?i:pg()}return Dn()}function sp(){Ai===0&&(Ai=(oa&536870912)===0||_a?kt():536870912);var i=er.current;return i!==null&&(i.flags|=32),Ai}function fr(i,l,c){(i===va&&(ua===2||ua===9)||i.cancelPendingCommit!==null)&&(pu(i,0),xl(i,oa,Ai,!1)),Ot(i,c),((Zn&2)===0||i!==va)&&(i===va&&((Zn&2)===0&&(si|=c),Ua===4&&xl(i,oa,Ai,!1)),fs(i))}function lp(i,l,c){if((Zn&6)!==0)throw Error(n(327));var m=!c&&(l&124)===0&&(l&i.expiredLanes)===0||nn(i,l),R=m?m0(i,l):fg(i,l,!0),N=m;do{if(R===0){yi&&!m&&xl(i,l,0,!1);break}else{if(c=i.current.alternate,N&&!h0(c)){R=fg(i,l,!1),N=!1;continue}if(R===2){if(N=l,i.errorRecoveryDisabledLanes&N)var Re=0;else Re=i.pendingLanes&-536870913,Re=Re!==0?Re:Re&536870912?536870912:0;if(Re!==0){l=Re;e:{var Ne=i;R=Il;var Xe=Ne.current.memoizedState.isDehydrated;if(Xe&&(pu(Ne,Re).flags|=256),Re=fg(Ne,Re,!1),Re!==2){if(Ir&&!Xe){Ne.errorRecoveryDisabledLanes|=N,si|=N,R=4;break e}N=Ei,Ei=R,N!==null&&(Ei===null?Ei=N:Ei.push.apply(Ei,N))}R=Re}if(N=!1,R!==2)continue}}if(R===1){pu(i,0),xl(i,l,0,!0);break}e:{switch(m=i,N=R,N){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:xl(m,l,Ai,!ei);break e;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(R=Yt+300-$e(),10<R)){if(xl(m,l,Ai,!ei),wt(m,0,!0)!==0)break e;m.timeoutHandle=Pp(op.bind(null,m,c,Ei,An,tt,l,Ai,si,Vr,ei,N,2,-0,0),R);break e}op(m,c,Ei,An,tt,l,Ai,si,Vr,ei,N,0,-0,0)}}break}while(!0);fs(i)}function op(i,l,c,m,R,N,Re,Ne,Xe,Dt,en,hn,Nt,Pt){if(i.timeoutHandle=-1,hn=l.subtreeFlags,(hn&8192||(hn&16785408)===16785408)&&(ud={stylesheets:null,count:0,unsuspend:$0},Ut(l),hn=X0(),hn!==null)){i.cancelPendingCommit=hn(mp.bind(null,i,l,N,c,m,R,Re,Ne,Xe,en,1,Nt,Pt)),xl(i,N,Re,!Dt);return}mp(i,l,N,c,m,R,Re,Ne,Xe)}function h0(i){for(var l=i;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var R=c[m],N=R.getSnapshot;R=R.value;try{if(!Pi(N(),R))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function xl(i,l,c,m){l&=~ds,l&=~si,i.suspendedLanes|=l,i.pingedLanes&=~l,m&&(i.warmLanes|=l),m=i.expirationTimes;for(var R=l;0<R;){var N=31-ta(R),Re=1<<N;m[N]=-1,R&=~Re}c!==0&&Hn(i,c,l)}function Ff(){return(Zn&6)===0?(ad(0),!1):!0}function cg(){if(na!==null){if(ua===0)var i=na.return;else i=na,Ji=ks=null,iu(i),_l=null,Ui=0,i=na;for(;i!==null;)ze(i.alternate,i),i=i.return;na=null}}function pu(i,l){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,C0(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),cg(),va=i,na=c=Qi(i.current,null),oa=l,ua=0,ri=null,ei=!1,yi=nn(i,l),Ir=!1,Vr=Ai=ds=si=Ci=Ua=0,Ei=Il=null,tt=!1,(l&8)!==0&&(l|=l&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=l;0<m;){var R=31-ta(m),N=1<<R;l|=i[R],m&=~N}return nr=l,Po(),c}function up(i,l){la=null,_e.H=Us,l===ml||l===io?(l=ro(),ua=3):l===lf?(l=ro(),ua=4):ua=l===Pf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ri=l,na===null&&(Ua=1,mu(i,pi(l,i.current)))}function cp(){var i=_e.H;return _e.H=Us,i===null?Us:i}function dp(){var i=_e.A;return _e.A=Wa,i}function dg(){Ua=4,ei||(oa&4194048)!==oa&&er.current!==null||(yi=!0),(Ci&134217727)===0&&(si&134217727)===0||va===null||xl(va,oa,Ai,!1)}function fg(i,l,c){var m=Zn;Zn|=2;var R=cp(),N=dp();(va!==i||oa!==l)&&(An=null,pu(i,l)),l=!1;var Re=Ua;e:do try{if(ua!==0&&na!==null){var Ne=na,Xe=ri;switch(ua){case 8:cg(),Re=6;break e;case 3:case 2:case 9:case 6:er.current===null&&(l=!0);var Dt=ua;if(ua=0,ri=null,yu(i,Ne,Xe,Dt),c&&yi){Re=0;break e}break;default:Dt=ua,ua=0,ri=null,yu(i,Ne,Xe,Dt)}}g0(),Re=Ua;break}catch(en){up(i,en)}while(!0);return l&&i.shellSuspendCounter++,Ji=ks=null,Zn=m,_e.H=R,_e.A=N,na===null&&(va=null,oa=0,Po()),Re}function g0(){for(;na!==null;)fp(na)}function m0(i,l){var c=Zn;Zn|=2;var m=cp(),R=dp();va!==i||oa!==l?(An=null,En=$e()+500,pu(i,l)):yi=nn(i,l);e:do try{if(ua!==0&&na!==null){l=na;var N=ri;t:switch(ua){case 1:ua=0,ri=null,yu(i,l,N,1);break;case 2:case 9:if(Sc(N)){ua=0,ri=null,hp(l);break}l=function(){ua!==2&&ua!==9||va!==i||(ua=7),fs(i)},N.then(l,l);break e;case 3:ua=7;break e;case 4:ua=5;break e;case 7:Sc(N)?(ua=0,ri=null,hp(l)):(ua=0,ri=null,yu(i,l,N,7));break;case 5:var Re=null;switch(na.tag){case 26:Re=na.memoizedState;case 5:case 27:var Ne=na;if(!Re||$p(Re)){ua=0,ri=null;var Xe=Ne.sibling;if(Xe!==null)na=Xe;else{var Dt=Ne.return;Dt!==null?(na=Dt,Uf(Dt)):na=null}break t}}ua=0,ri=null,yu(i,l,N,5);break;case 6:ua=0,ri=null,yu(i,l,N,6);break;case 8:cg(),Ua=6;break e;default:throw Error(n(462))}}p0();break}catch(en){up(i,en)}while(!0);return Ji=ks=null,_e.H=m,_e.A=R,Zn=c,na!==null?0:(va=null,oa=0,Po(),Ua)}function p0(){for(;na!==null&&!rt();)fp(na)}function fp(i){var l=U(i.alternate,i,nr);i.memoizedProps=i.pendingProps,l===null?Uf(i):na=l}function hp(i){var l=i,c=l.alternate;switch(l.tag){case 15:case 0:l=z(c,l,l.pendingProps,l.type,void 0,oa);break;case 11:l=z(c,l,l.pendingProps,l.type.render,l.ref,oa);break;case 5:iu(l);default:ze(c,l),l=na=eo(l,nr),l=U(c,l,nr)}i.memoizedProps=i.pendingProps,l===null?Uf(i):na=l}function yu(i,l,c,m){Ji=ks=null,iu(l),_l=null,Ui=0;var R=l.return;try{if(Of(i,R,l,c,oa)){Ua=1,mu(i,pi(c,i.current)),na=null;return}}catch(N){if(R!==null)throw na=R,N;Ua=1,mu(i,pi(c,i.current)),na=null;return}l.flags&32768?(_a||m===1?i=!0:yi||(oa&536870912)!==0?i=!1:(ei=i=!0,(m===2||m===9||m===3||m===6)&&(m=er.current,m!==null&&m.tag===13&&(m.flags|=16384))),gp(l,i)):Uf(l)}function Uf(i){var l=i;do{if((l.flags&32768)!==0){gp(l,ei);return}i=l.return;var c=ve(l.alternate,l,nr);if(c!==null){na=c;return}if(l=l.sibling,l!==null){na=l;return}na=l=i}while(l!==null);Ua===0&&(Ua=5)}function gp(i,l){do{var c=Me(i.alternate,i);if(c!==null){c.flags&=32767,na=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(i=i.sibling,i!==null)){na=i;return}na=i=c}while(i!==null);Ua=6,na=null}function mp(i,l,c,m,R,N,Re,Ne,Xe){i.cancelPendingCommit=null;do Bf();while(qn!==0);if((Zn&6)!==0)throw Error(n(327));if(l!==null){if(l===i.current)throw Error(n(177));if(N=l.lanes|l.childLanes,N|=Oo,on(i,c,N,Re,Ne,Xe),i===va&&(na=va=null,oa=0),fi=l,wa=i,Bs=c,mo=N,og=R,rp=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,T0(ct,function(){return Tp(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=_e.T,_e.T=null,R=He.p,He.p=2,Re=Zn,Zn|=4;try{In(i,l,c)}finally{Zn=Re,He.p=R,_e.T=m}}qn=1,pp(),yp(),Ep()}}function pp(){if(qn===1){qn=0;var i=wa,l=fi,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=_e.T,_e.T=null;var m=He.p;He.p=2;var R=Zn;Zn|=4;try{ft(l,i);var N=Ag,Re=tc(i.containerInfo),Ne=N.focusedElem,Xe=N.selectionRange;if(Re!==Ne&&Ne&&Ne.ownerDocument&&ec(Ne.ownerDocument.documentElement,Ne)){if(Xe!==null&&Zl(Ne)){var Dt=Xe.start,en=Xe.end;if(en===void 0&&(en=Dt),"selectionStart"in Ne)Ne.selectionStart=Dt,Ne.selectionEnd=Math.min(en,Ne.value.length);else{var hn=Ne.ownerDocument||document,Nt=hn&&hn.defaultView||window;if(Nt.getSelection){var Pt=Nt.getSelection(),Xn=Ne.textContent.length,Vn=Math.min(Xe.start,Xn),Pa=Xe.end===void 0?Vn:Math.min(Xe.end,Xn);!Pt.extend&&Vn>Pa&&(Re=Pa,Pa=Vn,Vn=Re);var mt=Xd(Ne,Vn),st=Xd(Ne,Pa);if(mt&&st&&(Pt.rangeCount!==1||Pt.anchorNode!==mt.node||Pt.anchorOffset!==mt.offset||Pt.focusNode!==st.node||Pt.focusOffset!==st.offset)){var Rt=hn.createRange();Rt.setStart(mt.node,mt.offset),Pt.removeAllRanges(),Vn>Pa?(Pt.addRange(Rt),Pt.extend(st.node,st.offset)):(Rt.setEnd(st.node,st.offset),Pt.addRange(Rt))}}}}for(hn=[],Pt=Ne;Pt=Pt.parentNode;)Pt.nodeType===1&&hn.push({element:Pt,left:Pt.scrollLeft,top:Pt.scrollTop});for(typeof Ne.focus=="function"&&Ne.focus(),Ne=0;Ne<hn.length;Ne++){var un=hn[Ne];un.element.scrollLeft=un.left,un.element.scrollTop=un.top}}Zf=!!_g,Ag=_g=null}finally{Zn=R,He.p=m,_e.T=c}}i.current=l,qn=2}}function yp(){if(qn===2){qn=0;var i=wa,l=fi,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=_e.T,_e.T=null;var m=He.p;He.p=2;var R=Zn;Zn|=4;try{Lt(i,l.alternate,l)}finally{Zn=R,He.p=m,_e.T=c}}qn=3}}function Ep(){if(qn===4||qn===3){qn=0,qe();var i=wa,l=fi,c=Bs,m=rp;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?qn=5:(qn=0,fi=wa=null,bp(i,i.pendingLanes));var R=i.pendingLanes;if(R===0&&(Un=null),Bn(c),l=l.stateNode,kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Bt,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=_e.T,R=He.p,He.p=2,_e.T=null;try{for(var N=i.onRecoverableError,Re=0;Re<m.length;Re++){var Ne=m[Re];N(Ne.value,{componentStack:Ne.stack})}}finally{_e.T=l,He.p=R}}(Bs&3)!==0&&Bf(),fs(i),R=i.pendingLanes,(c&4194090)!==0&&(R&42)!==0?i===ug?nd++:(nd=0,ug=i):nd=0,ad(0)}}function bp(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,fl(l)))}function Bf(i){return pp(),yp(),Ep(),Tp()}function Tp(){if(qn!==5)return!1;var i=wa,l=mo;mo=0;var c=Bn(Bs),m=_e.T,R=He.p;try{He.p=32>c?32:c,_e.T=null,c=og,og=null;var N=wa,Re=Bs;if(qn=0,fi=wa=null,Bs=0,(Zn&6)!==0)throw Error(n(331));var Ne=Zn;if(Zn|=4,Ln(N.current),pt(N,N.current,Re,c),Zn=Ne,ad(0,!1),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Bt,N)}catch{}return!0}finally{He.p=R,_e.T=m,bp(i,l)}}function vp(i,l,c){l=pi(c,l),l=ed(i.stateNode,l,2),i=Br(i,l,2),i!==null&&(Ot(i,2),fs(i))}function Ba(i,l,c){if(i.tag===3)vp(i,i,c);else for(;l!==null;){if(l.tag===3){vp(l,i,c);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Un===null||!Un.has(m))){i=pi(c,i),c=td(2),m=Br(l,c,2),m!==null&&(Mf(c,m,l,i),Ot(m,2),fs(m));break}}l=l.return}}function hg(i,l,c){var m=i.pingCache;if(m===null){m=i.pingCache=new tr;var R=new Set;m.set(l,R)}else R=m.get(l),R===void 0&&(R=new Set,m.set(l,R));R.has(c)||(Ir=!0,R.add(c),i=y0.bind(null,i,l,c),l.then(i,i))}function y0(i,l,c){var m=i.pingCache;m!==null&&m.delete(l),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,va===i&&(oa&c)===c&&(Ua===4||Ua===3&&(oa&62914560)===oa&&300>$e()-Yt?(Zn&2)===0&&pu(i,0):ds|=c,Vr===oa&&(Vr=0)),fs(i)}function Sp(i,l){l===0&&(l=jt()),i=ns(i,l),i!==null&&(Ot(i,l),fs(i))}function E0(i){var l=i.memoizedState,c=0;l!==null&&(c=l.retryLane),Sp(i,c)}function b0(i,l){var c=0;switch(i.tag){case 13:var m=i.stateNode,R=i.memoizedState;R!==null&&(c=R.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(l),Sp(i,c)}function T0(i,l){return ae(i,l)}var jf=null,Eu=null,gg=!1,qf=!1,mg=!1,po=0;function fs(i){i!==Eu&&i.next===null&&(Eu===null?jf=Eu=i:Eu=Eu.next=i),qf=!0,gg||(gg=!0,S0())}function ad(i,l){if(!mg&&qf){mg=!0;do for(var c=!1,m=jf;m!==null;){if(i!==0){var R=m.pendingLanes;if(R===0)var N=0;else{var Re=m.suspendedLanes,Ne=m.pingedLanes;N=(1<<31-ta(42|i)+1)-1,N&=R&~(Re&~Ne),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(c=!0,Ip(m,N))}else N=oa,N=wt(m,m===va?N:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(N&3)===0||nn(m,N)||(c=!0,Ip(m,N));m=m.next}while(c);mg=!1}}function v0(){_p()}function _p(){qf=gg=!1;var i=0;po!==0&&(D0()&&(i=po),po=0);for(var l=$e(),c=null,m=jf;m!==null;){var R=m.next,N=Ap(m,l);N===0?(m.next=null,c===null?jf=R:c.next=R,R===null&&(Eu=c)):(c=m,(i!==0||(N&3)!==0)&&(qf=!0)),m=R}ad(i)}function Ap(i,l){for(var c=i.suspendedLanes,m=i.pingedLanes,R=i.expirationTimes,N=i.pendingLanes&-62914561;0<N;){var Re=31-ta(N),Ne=1<<Re,Xe=R[Re];Xe===-1?((Ne&c)===0||(Ne&m)!==0)&&(R[Re]=We(Ne,l)):Xe<=l&&(i.expiredLanes|=Ne),N&=~Ne}if(l=va,c=oa,c=wt(i,i===l?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,c===0||i===l&&(ua===2||ua===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Ue(m),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||nn(i,c)){if(l=c&-c,l===i.callbackPriority)return l;switch(m!==null&&Ue(m),Bn(c)){case 2:case 8:c=Et;break;case 32:c=ct;break;case 268435456:c=yn;break;default:c=ct}return m=Rp.bind(null,i),c=ae(c,m),i.callbackPriority=l,i.callbackNode=c,l}return m!==null&&m!==null&&Ue(m),i.callbackPriority=2,i.callbackNode=null,2}function Rp(i,l){if(qn!==0&&qn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Bf()&&i.callbackNode!==c)return null;var m=oa;return m=wt(i,i===va?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(lp(i,m,l),Ap(i,$e()),i.callbackNode!=null&&i.callbackNode===c?Rp.bind(null,i):null)}function Ip(i,l){if(Bf())return null;lp(i,l,!0)}function S0(){L0(function(){(Zn&6)!==0?ae(Je,v0):_p()})}function pg(){return po===0&&(po=kt()),po}function xp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Sa(""+i)}function wp(i,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,i.id&&c.setAttribute("form",i.id),l.parentNode.insertBefore(c,l),i=new FormData(i),c.parentNode.removeChild(c),i}function _0(i,l,c,m,R){if(l==="submit"&&c&&c.stateNode===R){var N=xp((R[At]||null).action),Re=m.submitter;Re&&(l=(l=Re[At]||null)?xp(l.formAction):Re.getAttribute("formAction"),l!==null&&(N=l,Re=null));var Ne=new Kl("action","action",null,m,R);i.push({event:Ne,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(po!==0){var Xe=Re?wp(R,Re):new FormData(R);Hc(c,{pending:!0,data:Xe,method:R.method,action:N},null,Xe)}}else typeof N=="function"&&(Ne.preventDefault(),Xe=Re?wp(R,Re):new FormData(R),Hc(c,{pending:!0,data:Xe,method:R.method,action:N},N,Xe))},currentTarget:R}]})}}for(var yg=0;yg<oc.length;yg++){var Eg=oc[yg],A0=Eg.toLowerCase(),R0=Eg[0].toUpperCase()+Eg.slice(1);mi(A0,"on"+R0)}mi(ic,"onAnimationEnd"),mi(Zd,"onAnimationIteration"),mi(rc,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Jh,"onTransitionRun"),mi(eg,"onTransitionStart"),mi(Jd,"onTransitionCancel"),mi(sc,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(id));function kp(i,l){l=(l&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],R=m.event;m=m.listeners;e:{var N=void 0;if(l)for(var Re=m.length-1;0<=Re;Re--){var Ne=m[Re],Xe=Ne.instance,Dt=Ne.currentTarget;if(Ne=Ne.listener,Xe!==N&&R.isPropagationStopped())break e;N=Ne,R.currentTarget=Dt;try{N(R)}catch(en){gu(en)}R.currentTarget=null,N=Xe}else for(Re=0;Re<m.length;Re++){if(Ne=m[Re],Xe=Ne.instance,Dt=Ne.currentTarget,Ne=Ne.listener,Xe!==N&&R.isPropagationStopped())break e;N=Ne,R.currentTarget=Dt;try{N(R)}catch(en){gu(en)}R.currentTarget=null,N=Xe}}}}function Ea(i,l){var c=l[cn];c===void 0&&(c=l[cn]=new Set);var m=i+"__bubble";c.has(m)||(Dp(l,i,2,!1),c.add(m))}function bg(i,l,c){var m=0;l&&(m|=4),Dp(c,i,m,l)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function Tg(i){if(!i[Gf]){i[Gf]=!0,pr.forEach(function(c){c!=="selectionchange"&&(I0.has(c)||bg(c,!1,i),bg(c,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Gf]||(l[Gf]=!0,bg("selectionchange",!1,l))}}function Dp(i,l,c,m){switch(ey(l)){case 2:var R=J0;break;case 8:R=eT;break;default:R=Mg}c=R.bind(null,l,c,i),R=void 0,!Yl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(R=!0),m?R!==void 0?i.addEventListener(l,c,{capture:!0,passive:R}):i.addEventListener(l,c,!0):R!==void 0?i.addEventListener(l,c,{passive:R}):i.addEventListener(l,c,!1)}function vg(i,l,c,m,R){var N=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var Re=m.tag;if(Re===3||Re===4){var Ne=m.stateNode.containerInfo;if(Ne===R)break;if(Re===4)for(Re=m.return;Re!==null;){var Xe=Re.tag;if((Xe===3||Xe===4)&&Re.stateNode.containerInfo===R)return;Re=Re.return}for(;Ne!==null;){if(Re=ba(Ne),Re===null)return;if(Xe=Re.tag,Xe===5||Xe===6||Xe===26||Xe===27){m=N=Re;continue e}Ne=Ne.parentNode}}m=m.return}Ki(function(){var Dt=N,en=Vi(c),hn=[];e:{var Nt=lc.get(i);if(Nt!==void 0){var Pt=Kl,Xn=i;switch(i){case"keypress":if(Io(c)===0)break e;case"keydown":case"keyup":Pt=zd;break;case"focusin":Xn="focus",Pt=wo;break;case"focusout":Xn="blur",Pt=wo;break;case"beforeblur":case"afterblur":Pt=wo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=Ud;break;case ic:case Zd:case rc:Pt=Nd;break;case sc:Pt=jd;break;case"scroll":case"scrollend":Pt=Dd;break;case"wheel":Pt=Gu;break;case"copy":case"cut":case"paste":Pt=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=qu;break;case"toggle":case"beforetoggle":Pt=Gd}var Vn=(l&4)!==0,Pa=!Vn&&(i==="scroll"||i==="scrollend"),mt=Vn?Nt!==null?Nt+"Capture":null:Nt;Vn=[];for(var st=Dt,Rt;st!==null;){var un=st;if(Rt=un.stateNode,un=un.tag,un!==5&&un!==26&&un!==27||Rt===null||mt===null||(un=Zs(st,mt),un!=null&&Vn.push(rd(st,un,Rt))),Pa)break;st=st.return}0<Vn.length&&(Nt=new Pt(Nt,Xn,null,c,en),hn.push({event:Nt,listeners:Vn}))}}if((l&7)===0){e:{if(Nt=i==="mouseover"||i==="pointerover",Pt=i==="mouseout"||i==="pointerout",Nt&&c!==Mr&&(Xn=c.relatedTarget||c.fromElement)&&(ba(Xn)||Xn[dt]))break e;if((Pt||Nt)&&(Nt=en.window===en?en:(Nt=en.ownerDocument)?Nt.defaultView||Nt.parentWindow:window,Pt?(Xn=c.relatedTarget||c.toElement,Pt=Dt,Xn=Xn?ba(Xn):null,Xn!==null&&(Pa=o(Xn),Vn=Xn.tag,Xn!==Pa||Vn!==5&&Vn!==27&&Vn!==6)&&(Xn=null)):(Pt=null,Xn=Dt),Pt!==Xn)){if(Vn=$l,un="onMouseLeave",mt="onMouseEnter",st="mouse",(i==="pointerout"||i==="pointerover")&&(Vn=qu,un="onPointerLeave",mt="onPointerEnter",st="pointer"),Pa=Pt==null?Nt:Da(Pt),Rt=Xn==null?Nt:Da(Xn),Nt=new Vn(un,st+"leave",Pt,c,en),Nt.target=Pa,Nt.relatedTarget=Rt,un=null,ba(en)===Dt&&(Vn=new Vn(mt,st+"enter",Xn,c,en),Vn.target=Rt,Vn.relatedTarget=Pa,un=Vn),Pa=un,Pt&&Xn)t:{for(Vn=Pt,mt=Xn,st=0,Rt=Vn;Rt;Rt=bu(Rt))st++;for(Rt=0,un=mt;un;un=bu(un))Rt++;for(;0<st-Rt;)Vn=bu(Vn),st--;for(;0<Rt-st;)mt=bu(mt),Rt--;for(;st--;){if(Vn===mt||mt!==null&&Vn===mt.alternate)break t;Vn=bu(Vn),mt=bu(mt)}Vn=null}else Vn=null;Pt!==null&&Cp(hn,Nt,Pt,Vn,!1),Xn!==null&&Pa!==null&&Cp(hn,Pa,Xn,Vn,!0)}}e:{if(Nt=Dt?Da(Dt):window,Pt=Nt.nodeName&&Nt.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&Nt.type==="file")var Pn=Ql;else if(Kd(Nt))if(Xu)Pn=Qh;else{Pn=Wd;var ma=Wh}else Pt=Nt.nodeName,!Pt||Pt.toLowerCase()!=="input"||Nt.type!=="checkbox"&&Nt.type!=="radio"?Dt&&Xs(Dt.elementType)&&(Pn=Ql):Pn=Xh;if(Pn&&(Pn=Pn(i,Dt))){$u(hn,Pn,c,en);break e}ma&&ma(i,Nt,Dt),i==="focusout"&&Dt&&Nt.type==="number"&&Dt.memoizedProps.value!=null&&yr(Nt,"number",Nt.value)}switch(ma=Dt?Da(Dt):window,i){case"focusin":(Kd(ma)||ma.contentEditable==="true")&&(rl=ma,Lo=Dt,Jl=null);break;case"focusout":Jl=Lo=rl=null;break;case"mousedown":No=!0;break;case"contextmenu":case"mouseup":case"dragend":No=!1,Qd(hn,c,en);break;case"selectionchange":if(nc)break;case"keydown":case"keyup":Qd(hn,c,en)}var Gn;if(ko)e:{switch(i){case"compositionstart":var Yn="onCompositionStart";break e;case"compositionend":Yn="onCompositionEnd";break e;case"compositionupdate":Yn="onCompositionUpdate";break e}Yn=void 0}else il?Yd(i,c)&&(Yn="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Yn="onCompositionStart");Yn&&(_s&&c.locale!=="ko"&&(il||Yn!=="onCompositionStart"?Yn==="onCompositionEnd"&&il&&(Gn=Ou()):(or=en,el="value"in or?or.value:or.textContent,il=!0)),ma=Hf(Dt,Yn),0<ma.length&&(Yn=new Uu(Yn,i,null,c,en),hn.push({event:Yn,listeners:ma}),Gn?Yn.data=Gn:(Gn=Yu(c),Gn!==null&&(Yn.data=Gn)))),(Gn=Hd?Kh(i,c):$h(i,c))&&(Yn=Hf(Dt,"onBeforeInput"),0<Yn.length&&(ma=new Uu("onBeforeInput","beforeinput",null,c,en),hn.push({event:ma,listeners:Yn}),ma.data=Gn)),_0(hn,i,Dt,c,en)}kp(hn,l)})}function rd(i,l,c){return{instance:i,listener:l,currentTarget:c}}function Hf(i,l){for(var c=l+"Capture",m=[];i!==null;){var R=i,N=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||N===null||(R=Zs(i,c),R!=null&&m.unshift(rd(i,R,N)),R=Zs(i,l),R!=null&&m.push(rd(i,R,N))),i.tag===3)return m;i=i.return}return[]}function bu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Cp(i,l,c,m,R){for(var N=l._reactName,Re=[];c!==null&&c!==m;){var Ne=c,Xe=Ne.alternate,Dt=Ne.stateNode;if(Ne=Ne.tag,Xe!==null&&Xe===m)break;Ne!==5&&Ne!==26&&Ne!==27||Dt===null||(Xe=Dt,R?(Dt=Zs(c,N),Dt!=null&&Re.unshift(rd(c,Dt,Xe))):R||(Dt=Zs(c,N),Dt!=null&&Re.push(rd(c,Dt,Xe)))),c=c.return}Re.length!==0&&i.push({event:l,listeners:Re})}var x0=/\r\n?/g,w0=/\u0000|\uFFFD/g;function Lp(i){return(typeof i=="string"?i:""+i).replace(x0,`
`).replace(w0,"")}function Np(i,l){return l=Lp(l),Lp(i)===l}function Vf(){}function Oa(i,l,c,m,R,N){switch(c){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Er(i,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Er(i,""+m);break;case"className":Qr(i,"class",m);break;case"tabIndex":Qr(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(i,c,m);break;case"style":Hl(i,m,N);break;case"data":if(l!=="object"){Qr(i,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||c!=="href")){i.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=Sa(""+m),i.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(c==="formAction"?(l!=="input"&&Oa(i,l,"name",R.name,R,null),Oa(i,l,"formEncType",R.formEncType,R,null),Oa(i,l,"formMethod",R.formMethod,R,null),Oa(i,l,"formTarget",R.formTarget,R,null)):(Oa(i,l,"encType",R.encType,R,null),Oa(i,l,"method",R.method,R,null),Oa(i,l,"target",R.target,R,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=Sa(""+m),i.setAttribute(c,m);break;case"onClick":m!=null&&(i.onclick=Vf);break;case"onScroll":m!=null&&Ea("scroll",i);break;case"onScrollEnd":m!=null&&Ea("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(R.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}c=Sa(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""+m):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":m===!0?i.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,m):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(c,m):i.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(c):i.setAttribute(c,m);break;case"popover":Ea("beforetoggle",i),Ea("toggle",i),Lr(i,"popover",m);break;case"xlinkActuate":Vt(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Vt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Vt(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Vt(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Vt(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Vt(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Vt(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Vt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Vt(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Lr(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Vl.get(c)||c,Lr(i,c,m))}}function Sg(i,l,c,m,R,N){switch(c){case"style":Hl(i,m,N);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(c=m.__html,c!=null){if(R.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof m=="string"?Er(i,m):(typeof m=="number"||typeof m=="bigint")&&Er(i,""+m);break;case"onScroll":m!=null&&Ea("scroll",i);break;case"onScrollEnd":m!=null&&Ea("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ui.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(R=c.endsWith("Capture"),l=c.slice(2,R?c.length-7:void 0),N=i[At]||null,N=N!=null?N[c]:null,typeof N=="function"&&i.removeEventListener(l,N,R),typeof m=="function")){typeof N!="function"&&N!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(l,m,R);break e}c in i?i[c]=m:m===!0?i.setAttribute(c,""):Lr(i,c,m)}}}function Li(i,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ea("error",i),Ea("load",i);var m=!1,R=!1,N;for(N in c)if(c.hasOwnProperty(N)){var Re=c[N];if(Re!=null)switch(N){case"src":m=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Oa(i,l,N,Re,c,null)}}R&&Oa(i,l,"srcSet",c.srcSet,c,null),m&&Oa(i,l,"src",c.src,c,null);return;case"input":Ea("invalid",i);var Ne=N=Re=R=null,Xe=null,Dt=null;for(m in c)if(c.hasOwnProperty(m)){var en=c[m];if(en!=null)switch(m){case"name":R=en;break;case"type":Re=en;break;case"checked":Xe=en;break;case"defaultChecked":Dt=en;break;case"value":N=en;break;case"defaultValue":Ne=en;break;case"children":case"dangerouslySetInnerHTML":if(en!=null)throw Error(n(137,l));break;default:Oa(i,l,m,en,c,null)}}Mi(i,N,Ne,Xe,Dt,Re,R,!1),Gi(i);return;case"select":Ea("invalid",i),m=Re=N=null;for(R in c)if(c.hasOwnProperty(R)&&(Ne=c[R],Ne!=null))switch(R){case"value":N=Ne;break;case"defaultValue":Re=Ne;break;case"multiple":m=Ne;default:Oa(i,l,R,Ne,c,null)}l=N,c=Re,i.multiple=!!m,l!=null?Nr(i,!!m,l,!1):c!=null&&Nr(i,!!m,c,!0);return;case"textarea":Ea("invalid",i),N=R=m=null;for(Re in c)if(c.hasOwnProperty(Re)&&(Ne=c[Re],Ne!=null))switch(Re){case"value":m=Ne;break;case"defaultValue":R=Ne;break;case"children":N=Ne;break;case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(n(91));break;default:Oa(i,l,Re,Ne,c,null)}ql(i,m,R,N),Gi(i);return;case"option":for(Xe in c)if(c.hasOwnProperty(Xe)&&(m=c[Xe],m!=null))switch(Xe){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Oa(i,l,Xe,m,c,null)}return;case"dialog":Ea("beforetoggle",i),Ea("toggle",i),Ea("cancel",i),Ea("close",i);break;case"iframe":case"object":Ea("load",i);break;case"video":case"audio":for(m=0;m<id.length;m++)Ea(id[m],i);break;case"image":Ea("error",i),Ea("load",i);break;case"details":Ea("toggle",i);break;case"embed":case"source":case"link":Ea("error",i),Ea("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Dt in c)if(c.hasOwnProperty(Dt)&&(m=c[Dt],m!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Oa(i,l,Dt,m,c,null)}return;default:if(Xs(l)){for(en in c)c.hasOwnProperty(en)&&(m=c[en],m!==void 0&&Sg(i,l,en,m,c,void 0));return}}for(Ne in c)c.hasOwnProperty(Ne)&&(m=c[Ne],m!=null&&Oa(i,l,Ne,m,c,null))}function k0(i,l,c,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,N=null,Re=null,Ne=null,Xe=null,Dt=null,en=null;for(Pt in c){var hn=c[Pt];if(c.hasOwnProperty(Pt)&&hn!=null)switch(Pt){case"checked":break;case"value":break;case"defaultValue":Xe=hn;default:m.hasOwnProperty(Pt)||Oa(i,l,Pt,null,m,hn)}}for(var Nt in m){var Pt=m[Nt];if(hn=c[Nt],m.hasOwnProperty(Nt)&&(Pt!=null||hn!=null))switch(Nt){case"type":N=Pt;break;case"name":R=Pt;break;case"checked":Dt=Pt;break;case"defaultChecked":en=Pt;break;case"value":Re=Pt;break;case"defaultValue":Ne=Pt;break;case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(n(137,l));break;default:Pt!==hn&&Oa(i,l,Nt,Pt,m,hn)}}Jr(i,Re,Ne,Xe,Dt,en,N,R);return;case"select":Pt=Re=Ne=Nt=null;for(N in c)if(Xe=c[N],c.hasOwnProperty(N)&&Xe!=null)switch(N){case"value":break;case"multiple":Pt=Xe;default:m.hasOwnProperty(N)||Oa(i,l,N,null,m,Xe)}for(R in m)if(N=m[R],Xe=c[R],m.hasOwnProperty(R)&&(N!=null||Xe!=null))switch(R){case"value":Nt=N;break;case"defaultValue":Ne=N;break;case"multiple":Re=N;default:N!==Xe&&Oa(i,l,R,N,m,Xe)}l=Ne,c=Re,m=Pt,Nt!=null?Nr(i,!!c,Nt,!1):!!m!=!!c&&(l!=null?Nr(i,!!c,l,!0):Nr(i,!!c,c?[]:"",!1));return;case"textarea":Pt=Nt=null;for(Ne in c)if(R=c[Ne],c.hasOwnProperty(Ne)&&R!=null&&!m.hasOwnProperty(Ne))switch(Ne){case"value":break;case"children":break;default:Oa(i,l,Ne,null,m,R)}for(Re in m)if(R=m[Re],N=c[Re],m.hasOwnProperty(Re)&&(R!=null||N!=null))switch(Re){case"value":Nt=R;break;case"defaultValue":Pt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:R!==N&&Oa(i,l,Re,R,m,N)}Hi(i,Nt,Pt);return;case"option":for(var Xn in c)if(Nt=c[Xn],c.hasOwnProperty(Xn)&&Nt!=null&&!m.hasOwnProperty(Xn))switch(Xn){case"selected":i.selected=!1;break;default:Oa(i,l,Xn,null,m,Nt)}for(Xe in m)if(Nt=m[Xe],Pt=c[Xe],m.hasOwnProperty(Xe)&&Nt!==Pt&&(Nt!=null||Pt!=null))switch(Xe){case"selected":i.selected=Nt&&typeof Nt!="function"&&typeof Nt!="symbol";break;default:Oa(i,l,Xe,Nt,m,Pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vn in c)Nt=c[Vn],c.hasOwnProperty(Vn)&&Nt!=null&&!m.hasOwnProperty(Vn)&&Oa(i,l,Vn,null,m,Nt);for(Dt in m)if(Nt=m[Dt],Pt=c[Dt],m.hasOwnProperty(Dt)&&Nt!==Pt&&(Nt!=null||Pt!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(n(137,l));break;default:Oa(i,l,Dt,Nt,m,Pt)}return;default:if(Xs(l)){for(var Pa in c)Nt=c[Pa],c.hasOwnProperty(Pa)&&Nt!==void 0&&!m.hasOwnProperty(Pa)&&Sg(i,l,Pa,void 0,m,Nt);for(en in m)Nt=m[en],Pt=c[en],!m.hasOwnProperty(en)||Nt===Pt||Nt===void 0&&Pt===void 0||Sg(i,l,en,Nt,m,Pt);return}}for(var mt in c)Nt=c[mt],c.hasOwnProperty(mt)&&Nt!=null&&!m.hasOwnProperty(mt)&&Oa(i,l,mt,null,m,Nt);for(hn in m)Nt=m[hn],Pt=c[hn],!m.hasOwnProperty(hn)||Nt===Pt||Nt==null&&Pt==null||Oa(i,l,hn,Nt,m,Pt)}var _g=null,Ag=null;function Yf(i){return i.nodeType===9?i:i.ownerDocument}function Mp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Op(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Rg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ig=null;function D0(){var i=window.event;return i&&i.type==="popstate"?i===Ig?!1:(Ig=i,!0):(Ig=null,!1)}var Pp=typeof setTimeout=="function"?setTimeout:void 0,C0=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,L0=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(i){return zp.resolve(null).then(i).catch(N0)}:Pp;function N0(i){setTimeout(function(){throw i})}function wl(i){return i==="head"}function Fp(i,l){var c=l,m=0,R=0;do{var N=c.nextSibling;if(i.removeChild(c),N&&N.nodeType===8)if(c=N.data,c==="/$"){if(0<m&&8>m){c=m;var Re=i.ownerDocument;if(c&1&&sd(Re.documentElement),c&2&&sd(Re.body),c&4)for(c=Re.head,sd(c),Re=c.firstChild;Re;){var Ne=Re.nextSibling,Xe=Re.nodeName;Re[ga]||Xe==="SCRIPT"||Xe==="STYLE"||Xe==="LINK"&&Re.rel.toLowerCase()==="stylesheet"||c.removeChild(Re),Re=Ne}}if(R===0){i.removeChild(N),gd(l);return}R--}else c==="$"||c==="$?"||c==="$!"?R++:m=c.charCodeAt(0)-48;else m=0;c=N}while(c);gd(l)}function xg(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":xg(c),sa(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function M0(i,l,c,m){for(;i.nodeType===1;){var R=c;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[ga])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(N=i.getAttribute("rel"),N==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(N!==R.rel||i.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||i.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||i.getAttribute("title")!==(R.title==null?null:R.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(N=i.getAttribute("src"),(N!==(R.src==null?null:R.src)||i.getAttribute("type")!==(R.type==null?null:R.type)||i.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&N&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var N=R.name==null?null:""+R.name;if(R.type==="hidden"&&i.getAttribute("name")===N)return i}else return i;if(i=Yr(i.nextSibling),i===null)break}return null}function O0(i,l,c){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Yr(i.nextSibling),i===null))return null;return i}function wg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function P0(i,l){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")l();else{var m=function(){l(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Yr(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var kg=null;function Up(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return i;l--}else c==="/$"&&l++}i=i.previousSibling}return null}function Bp(i,l,c){switch(l=Yf(c),i){case"html":if(i=l.documentElement,!i)throw Error(n(452));return i;case"head":if(i=l.head,!i)throw Error(n(453));return i;case"body":if(i=l.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function sd(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);sa(i)}var xr=new Map,jp=new Set;function Kf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var js=He.d;He.d={f:z0,r:F0,D:U0,C:B0,L:j0,m:q0,X:H0,S:G0,M:V0};function z0(){var i=js.f(),l=Ff();return i||l}function F0(i){var l=Na(i);l!==null&&l.tag===5&&l.type==="form"?Rf(l):js.r(i)}var Tu=typeof document>"u"?null:document;function qp(i,l,c){var m=Tu;if(m&&typeof l=="string"&&l){var R=xi(l);R='link[rel="'+i+'"][href="'+R+'"]',typeof c=="string"&&(R+='[crossorigin="'+c+'"]'),jp.has(R)||(jp.add(R),i={rel:i,crossOrigin:c,href:l},m.querySelector(R)===null&&(l=m.createElement("link"),Li(l,"link",i),Ra(l),m.head.appendChild(l)))}}function U0(i){js.D(i),qp("dns-prefetch",i,null)}function B0(i,l){js.C(i,l),qp("preconnect",i,l)}function j0(i,l,c){js.L(i,l,c);var m=Tu;if(m&&i&&l){var R='link[rel="preload"][as="'+xi(l)+'"]';l==="image"&&c&&c.imageSrcSet?(R+='[imagesrcset="'+xi(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(R+='[imagesizes="'+xi(c.imageSizes)+'"]')):R+='[href="'+xi(i)+'"]';var N=R;switch(l){case"style":N=vu(i);break;case"script":N=Su(i)}xr.has(N)||(i=p({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:i,as:l},c),xr.set(N,i),m.querySelector(R)!==null||l==="style"&&m.querySelector(ld(N))||l==="script"&&m.querySelector(od(N))||(l=m.createElement("link"),Li(l,"link",i),Ra(l),m.head.appendChild(l)))}}function q0(i,l){js.m(i,l);var c=Tu;if(c&&i){var m=l&&typeof l.as=="string"?l.as:"script",R='link[rel="modulepreload"][as="'+xi(m)+'"][href="'+xi(i)+'"]',N=R;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Su(i)}if(!xr.has(N)&&(i=p({rel:"modulepreload",href:i},l),xr.set(N,i),c.querySelector(R)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(od(N)))return}m=c.createElement("link"),Li(m,"link",i),Ra(m),c.head.appendChild(m)}}}function G0(i,l,c){js.S(i,l,c);var m=Tu;if(m&&i){var R=gi(m).hoistableStyles,N=vu(i);l=l||"default";var Re=R.get(N);if(!Re){var Ne={loading:0,preload:null};if(Re=m.querySelector(ld(N)))Ne.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":l},c),(c=xr.get(N))&&Dg(i,c);var Xe=Re=m.createElement("link");Ra(Xe),Li(Xe,"link",i),Xe._p=new Promise(function(Dt,en){Xe.onload=Dt,Xe.onerror=en}),Xe.addEventListener("load",function(){Ne.loading|=1}),Xe.addEventListener("error",function(){Ne.loading|=2}),Ne.loading|=4,$f(Re,l,m)}Re={type:"stylesheet",instance:Re,count:1,state:Ne},R.set(N,Re)}}}function H0(i,l){js.X(i,l);var c=Tu;if(c&&i){var m=gi(c).hoistableScripts,R=Su(i),N=m.get(R);N||(N=c.querySelector(od(R)),N||(i=p({src:i,async:!0},l),(l=xr.get(R))&&Cg(i,l),N=c.createElement("script"),Ra(N),Li(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(R,N))}}function V0(i,l){js.M(i,l);var c=Tu;if(c&&i){var m=gi(c).hoistableScripts,R=Su(i),N=m.get(R);N||(N=c.querySelector(od(R)),N||(i=p({src:i,async:!0,type:"module"},l),(l=xr.get(R))&&Cg(i,l),N=c.createElement("script"),Ra(N),Li(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(R,N))}}function Gp(i,l,c,m){var R=(R=Le.current)?Kf(R):null;if(!R)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=vu(c.href),c=gi(R).hoistableStyles,m=c.get(l),m||(m={type:"style",instance:null,count:0,state:null},c.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=vu(c.href);var N=gi(R).hoistableStyles,Re=N.get(i);if(Re||(R=R.ownerDocument||R,Re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(i,Re),(N=R.querySelector(ld(i)))&&!N._p&&(Re.instance=N,Re.state.loading=5),xr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},xr.set(i,c),N||Y0(R,i,c,Re.state))),l&&m===null)throw Error(n(528,""));return Re}if(l&&m!==null)throw Error(n(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Su(c),c=gi(R).hoistableScripts,m=c.get(l),m||(m={type:"script",instance:null,count:0,state:null},c.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function vu(i){return'href="'+xi(i)+'"'}function ld(i){return'link[rel="stylesheet"]['+i+"]"}function Hp(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function Y0(i,l,c,m){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=i.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Li(l,"link",c),Ra(l),i.head.appendChild(l))}function Su(i){return'[src="'+xi(i)+'"]'}function od(i){return"script[async]"+i}function Vp(i,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var m=i.querySelector('style[data-href~="'+xi(c.href)+'"]');if(m)return l.instance=m,Ra(m),m;var R=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Ra(m),Li(m,"style",R),$f(m,c.precedence,i),l.instance=m;case"stylesheet":R=vu(c.href);var N=i.querySelector(ld(R));if(N)return l.state.loading|=4,l.instance=N,Ra(N),N;m=Hp(c),(R=xr.get(R))&&Dg(m,R),N=(i.ownerDocument||i).createElement("link"),Ra(N);var Re=N;return Re._p=new Promise(function(Ne,Xe){Re.onload=Ne,Re.onerror=Xe}),Li(N,"link",m),l.state.loading|=4,$f(N,c.precedence,i),l.instance=N;case"script":return N=Su(c.src),(R=i.querySelector(od(N)))?(l.instance=R,Ra(R),R):(m=c,(R=xr.get(N))&&(m=p({},c),Cg(m,R)),i=i.ownerDocument||i,R=i.createElement("script"),Ra(R),Li(R,"link",m),i.head.appendChild(R),l.instance=R);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,$f(m,c.precedence,i));return l.instance}function $f(i,l,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=m.length?m[m.length-1]:null,N=R,Re=0;Re<m.length;Re++){var Ne=m[Re];if(Ne.dataset.precedence===l)N=Ne;else if(N!==R)break}N?N.parentNode.insertBefore(i,N.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(i,l.firstChild))}function Dg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Cg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Wf=null;function Yp(i,l,c){if(Wf===null){var m=new Map,R=Wf=new Map;R.set(c,m)}else R=Wf,m=R.get(c),m||(m=new Map,R.set(c,m));if(m.has(i))return m;for(m.set(i,null),c=c.getElementsByTagName(i),R=0;R<c.length;R++){var N=c[R];if(!(N[ga]||N[bn]||i==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var Re=N.getAttribute(l)||"";Re=i+Re;var Ne=m.get(Re);Ne?Ne.push(N):m.set(Re,[N])}}return m}function Kp(i,l,c){i=i.ownerDocument||i,i.head.insertBefore(c,l==="title"?i.querySelector("head > title"):null)}function K0(i,l,c){if(c===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function $p(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var ud=null;function $0(){}function W0(i,l,c){if(ud===null)throw Error(n(475));var m=ud;if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var R=vu(c.href),N=i.querySelector(ld(R));if(N){i=N._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=Xf.bind(m),i.then(m,m)),l.state.loading|=4,l.instance=N,Ra(N);return}N=i.ownerDocument||i,c=Hp(c),(R=xr.get(R))&&Dg(c,R),N=N.createElement("link"),Ra(N);var Re=N;Re._p=new Promise(function(Ne,Xe){Re.onload=Ne,Re.onerror=Xe}),Li(N,"link",c),l.instance=N}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Xf.bind(m),i.addEventListener("load",l),i.addEventListener("error",l))}}function X0(){if(ud===null)throw Error(n(475));var i=ud;return i.stylesheets&&i.count===0&&Lg(i,i.stylesheets),0<i.count?function(l){var c=setTimeout(function(){if(i.stylesheets&&Lg(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Xf(){if(this.count--,this.count===0){if(this.stylesheets)Lg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Qf=null;function Lg(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Qf=new Map,l.forEach(Q0,i),Qf=null,Xf.call(i))}function Q0(i,l){if(!(l.state.loading&4)){var c=Qf.get(i);if(c)var m=c.get(null);else{c=new Map,Qf.set(i,c);for(var R=i.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<R.length;N++){var Re=R[N];(Re.nodeName==="LINK"||Re.getAttribute("media")!=="not all")&&(c.set(Re.dataset.precedence,Re),m=Re)}m&&c.set(null,m)}R=l.instance,Re=R.getAttribute("data-precedence"),N=c.get(Re)||m,N===m&&c.set(null,R),c.set(Re,R),this.count++,m=Xf.bind(this),R.addEventListener("load",m),R.addEventListener("error",m),N?N.parentNode.insertBefore(R,N.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(R,i.firstChild)),l.state.loading|=4}}var cd={$$typeof:fe,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function Z0(i,l,c,m,R,N,Re,Ne){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=m,this.onUncaughtError=R,this.onCaughtError=N,this.onRecoverableError=Re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ne,this.incompleteTransitions=new Map}function Wp(i,l,c,m,R,N,Re,Ne,Xe,Dt,en,hn){return i=new Z0(i,l,c,Re,Ne,Xe,Dt,hn),l=1,N===!0&&(l|=24),N=Si(3,null,null,l),i.current=N,N.stateNode=i,l=bc(),l.refCount++,i.pooledCache=l,l.refCount++,N.memoizedState={element:m,isDehydrated:c,cache:l},$o(N),i}function Xp(i){return i?(i=br,i):br}function Qp(i,l,c,m,R,N){R=Xp(R),m.context===null?m.context=R:m.pendingContext=R,m=ss(l),m.payload={element:c},N=N===void 0?null:N,N!==null&&(m.callback=N),c=Br(i,m,l),c!==null&&(fr(c,i,l),so(c,i,l))}function Zp(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<l?c:l}}function Ng(i,l){Zp(i,l),(i=i.alternate)&&Zp(i,l)}function Jp(i){if(i.tag===13){var l=ns(i,67108864);l!==null&&fr(l,i,67108864),Ng(i,67108864)}}var Zf=!0;function J0(i,l,c,m){var R=_e.T;_e.T=null;var N=He.p;try{He.p=2,Mg(i,l,c,m)}finally{He.p=N,_e.T=R}}function eT(i,l,c,m){var R=_e.T;_e.T=null;var N=He.p;try{He.p=8,Mg(i,l,c,m)}finally{He.p=N,_e.T=R}}function Mg(i,l,c,m){if(Zf){var R=Og(m);if(R===null)vg(i,l,m,Jf,c),ty(i,m);else if(nT(R,i,l,c,m))m.stopPropagation();else if(ty(i,m),l&4&&-1<tT.indexOf(i)){for(;R!==null;){var N=Na(R);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var Re=Ft(N.pendingLanes);if(Re!==0){var Ne=N;for(Ne.pendingLanes|=2,Ne.entangledLanes|=2;Re;){var Xe=1<<31-ta(Re);Ne.entanglements[1]|=Xe,Re&=~Xe}fs(N),(Zn&6)===0&&(En=$e()+500,ad(0))}}break;case 13:Ne=ns(N,2),Ne!==null&&fr(Ne,N,2),Ff(),Ng(N,2)}if(N=Og(m),N===null&&vg(i,l,m,Jf,c),N===R)break;R=N}R!==null&&m.stopPropagation()}else vg(i,l,m,null,c)}}function Og(i){return i=Vi(i),Pg(i)}var Jf=null;function Pg(i){if(Jf=null,i=ba(i),i!==null){var l=o(i);if(l===null)i=null;else{var c=l.tag;if(c===13){if(i=u(l),i!==null)return i;i=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return Jf=i,null}function ey(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Je:return 2;case Et:return 8;case ct:case Mt:return 32;case yn:return 268435456;default:return 32}default:return 32}}var zg=!1,kl=null,Dl=null,Cl=null,dd=new Map,fd=new Map,Ll=[],tT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ty(i,l){switch(i){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":dd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":fd.delete(l.pointerId)}}function hd(i,l,c,m,R,N){return i===null||i.nativeEvent!==N?(i={blockedOn:l,domEventName:c,eventSystemFlags:m,nativeEvent:N,targetContainers:[R]},l!==null&&(l=Na(l),l!==null&&Jp(l)),i):(i.eventSystemFlags|=m,l=i.targetContainers,R!==null&&l.indexOf(R)===-1&&l.push(R),i)}function nT(i,l,c,m,R){switch(l){case"focusin":return kl=hd(kl,i,l,c,m,R),!0;case"dragenter":return Dl=hd(Dl,i,l,c,m,R),!0;case"mouseover":return Cl=hd(Cl,i,l,c,m,R),!0;case"pointerover":var N=R.pointerId;return dd.set(N,hd(dd.get(N)||null,i,l,c,m,R)),!0;case"gotpointercapture":return N=R.pointerId,fd.set(N,hd(fd.get(N)||null,i,l,c,m,R)),!0}return!1}function ny(i){var l=ba(i.target);if(l!==null){var c=o(l);if(c!==null){if(l=c.tag,l===13){if(l=u(c),l!==null){i.blockedOn=l,Fn(i.priority,function(){if(c.tag===13){var m=dr();m=Rn(m);var R=ns(c,m);R!==null&&fr(R,c,m),Ng(c,m)}});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function eh(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var c=Og(i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);Mr=m,c.target.dispatchEvent(m),Mr=null}else return l=Na(c),l!==null&&Jp(l),i.blockedOn=c,!1;l.shift()}return!0}function ay(i,l,c){eh(i)&&c.delete(l)}function aT(){zg=!1,kl!==null&&eh(kl)&&(kl=null),Dl!==null&&eh(Dl)&&(Dl=null),Cl!==null&&eh(Cl)&&(Cl=null),dd.forEach(ay),fd.forEach(ay)}function th(i,l){i.blockedOn===l&&(i.blockedOn=null,zg||(zg=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,aT)))}var nh=null;function iy(i){nh!==i&&(nh=i,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){nh===i&&(nh=null);for(var l=0;l<i.length;l+=3){var c=i[l],m=i[l+1],R=i[l+2];if(typeof m!="function"){if(Pg(m||c)===null)continue;break}var N=Na(c);N!==null&&(i.splice(l,3),l-=3,Hc(N,{pending:!0,data:R,method:c.method,action:m},m,R))}}))}function gd(i){function l(Xe){return th(Xe,i)}kl!==null&&th(kl,i),Dl!==null&&th(Dl,i),Cl!==null&&th(Cl,i),dd.forEach(l),fd.forEach(l);for(var c=0;c<Ll.length;c++){var m=Ll[c];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Ll.length&&(c=Ll[0],c.blockedOn===null);)ny(c),c.blockedOn===null&&Ll.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var R=c[m],N=c[m+1],Re=R[At]||null;if(typeof N=="function")Re||iy(c);else if(Re){var Ne=null;if(N&&N.hasAttribute("formAction")){if(R=N,Re=N[At]||null)Ne=Re.formAction;else if(Pg(R)!==null)continue}else Ne=Re.action;typeof Ne=="function"?c[m+1]=Ne:(c.splice(m,3),m-=3),iy(c)}}}function Fg(i){this._internalRoot=i}ah.prototype.render=Fg.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));var c=l.current,m=dr();Qp(c,m,i,l,null,null)},ah.prototype.unmount=Fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Qp(i.current,2,null,i,null,null),Ff(),l[dt]=null}};function ah(i){this._internalRoot=i}ah.prototype.unstable_scheduleHydration=function(i){if(i){var l=Dn();i={blockedOn:null,target:i,priority:l};for(var c=0;c<Ll.length&&l!==0&&l<Ll[c].priority;c++);Ll.splice(c,0,i),c===0&&ny(i)}};var ry=e.version;if(ry!=="19.1.1")throw Error(n(527,ry,"19.1.1"));He.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=g(l),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var iT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:_e,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{Bt=ih.inject(iT),kn=ih}catch{}}return pd.createRoot=function(i,l){if(!r(i))throw Error(n(299));var c=!1,m="",R=Qc,N=Nf,Re=Zc,Ne=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(R=l.onUncaughtError),l.onCaughtError!==void 0&&(N=l.onCaughtError),l.onRecoverableError!==void 0&&(Re=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Ne=l.unstable_transitionCallbacks)),l=Wp(i,1,!1,null,null,c,m,R,N,Re,Ne,null),i[dt]=l.current,Tg(i),new Fg(l)},pd.hydrateRoot=function(i,l,c){if(!r(i))throw Error(n(299));var m=!1,R="",N=Qc,Re=Nf,Ne=Zc,Xe=null,Dt=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(R=c.identifierPrefix),c.onUncaughtError!==void 0&&(N=c.onUncaughtError),c.onCaughtError!==void 0&&(Re=c.onCaughtError),c.onRecoverableError!==void 0&&(Ne=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Xe=c.unstable_transitionCallbacks),c.formState!==void 0&&(Dt=c.formState)),l=Wp(i,1,!0,l,c??null,m,R,N,Re,Ne,Xe,Dt),l.context=Xp(null),c=l.current,m=dr(),m=Rn(m),R=ss(m),R.callback=null,Br(c,R,m),c=m,l.current.lanes=c,Ot(l,c),fs(l),i[dt]=l.current,Tg(i),new ah(l)},pd.version="19.1.1",pd}var my;function mT(){if(my)return jg.exports;my=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(e){console.error(e)}}return f(),jg.exports=gT(),jg.exports}var pT=mT(),py={exports:{}},yd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function yT(){if(yy)return yd;yy=1;var f=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var d in r)d!=="key"&&(o[d]=r[d])}else o=r;return r=o.ref,{$$typeof:f,type:n,key:u,ref:r!==void 0?r:null,props:o}}return yd.Fragment=e,yd.jsx=t,yd.jsxs=t,yd}var Ey;function ET(){return Ey||(Ey=1,py.exports=yT()),py.exports}var pn=ET();function bT(){return pn.jsxs(pn.Fragment,{children:[pn.jsx("div",{className:"spinner"}),pn.jsx("style",{children:`
          .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f97316;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: auto;
          }
  
          @keyframes spin {
            to {
              transform: rotate(360deg);
            }
          }
        `})]})}function TT(f){let e="";const t=f?.split(`
`);let n,r=!1,o,u="";for(const d in t){const g=t[d].trim();g==""&&n&&(e+=o?.replace(/,/g,".")+`
`,e+=u+`
`,u="",r=!1,n=!1),n&&(u+=g+`
`),r&&(o=g,n=!0,r=!1),!isNaN(Number(g))&&g!=""&&!r&&(r=!0)}return e}function vT(f){const e=TT(f),t=new Blob([`WEBVTT - https://${window.location.href}

`+e],{type:"text/vtt;charset=UTF-8"});return URL.createObjectURL(t)}const by=f=>{const e=Math.floor(f/3600),t=Math.floor(f%3600/60),n=Math.floor(f%60);return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},Ty=({progress:f,fref:e,isDragging:t,width:n,onClick:r,onDrag:o})=>{const u=Qn.useRef(!1);return t||(t=u),Qn.useEffect(()=>{const d=()=>{t.current=!1};return document.addEventListener("mouseup",d),()=>document.removeEventListener("mouseup",d)},[t]),pn.jsxs("div",{style:n?{width:n}:{},className:"playercc-progress-container",ref:e,onClick:r,onMouseDown:()=>t.current=!0,onMouseUp:()=>t.current=!1,onMouseMove:d=>t?.current&&o(d),onTouchStart:()=>t.current=!0,onTouchEnd:()=>t.current=!1,onTouchMove:d=>t?.current&&o(d),children:[pn.jsx("div",{className:"playercc-progress-bar",style:{width:`${f}%`}}),pn.jsx("div",{className:"playercc-container-bullet",style:{left:`calc(${f}%)`}})]})},ST={Settings:"","Rewind 10 seconds":"   ","Forward 10 seconds":"   ",Subtitles:" ","Select Subtitle":" ","Advance Subtitles":"  ","Delay Subtitles":"  ","Move Subtitles Down":"  ","Move Subtitles Up":"  ","Subtitle Alignment":"  ","Play from First":"  "},_T={play:"Play"},AT={fa:ST,en:_T};function OE(f){return e=>AT[f]?.[e]||e}const ji={play:pn.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-play-icon lucide-play",children:pn.jsx("path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"})}),pause:pn.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-square-icon lucide-square",children:pn.jsx("rect",{width:18,height:18,x:3,y:3,rx:2})}),subtitle:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-closed-caption-icon lucide-closed-caption",children:[pn.jsx("path",{d:"M10 9.17a3 3 0 1 0 0 5.66"}),pn.jsx("path",{d:"M17 9.17a3 3 0 1 0 0 5.66"}),pn.jsx("rect",{x:2,y:5,width:20,height:14,rx:2})]}),sound:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-volume2-icon lucide-volume-2",children:[pn.jsx("path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}),pn.jsx("path",{d:"M16 9a5 5 0 0 1 0 6"}),pn.jsx("path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"})]}),muted:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-volume-off-icon lucide-volume-off",children:[pn.jsx("path",{d:"M16 9a5 5 0 0 1 .95 2.293"}),pn.jsx("path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96"}),pn.jsx("path",{d:"m2 2 20 20"}),pn.jsx("path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11"}),pn.jsx("path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686"})]}),fullscreen:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-fullscreen-icon lucide-fullscreen",children:[pn.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),pn.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),pn.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),pn.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),pn.jsx("rect",{width:10,height:8,x:7,y:8,rx:1})]}),settings:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-settings-icon lucide-settings",children:[pn.jsx("path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}),pn.jsx("circle",{cx:12,cy:12,r:3})]}),seekBackward:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-backward",children:[pn.jsx("path",{d:"m9 17-5-5 5-5"}),pn.jsx("path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"})]}),seekForward:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-forward-icon lucide-forward",children:[pn.jsx("path",{d:"m15 17 5-5-5-5"}),pn.jsx("path",{d:"M4 18v-2a4 4 0 0 1 4-4h12"})]}),rightAlignment:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-align-left-icon lucide-align-left",children:[pn.jsx("path",{d:"M15 12H3"}),pn.jsx("path",{d:"M17 18H3"}),pn.jsx("path",{d:"M21 6H3"})]}),leftAlignment:pn.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-align-right-icon lucide-align-right",children:[pn.jsx("path",{d:"M21 12H9"}),pn.jsx("path",{d:"M21 18H7"}),pn.jsx("path",{d:"M21 6H3"})]}),moveUp:pn.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pn.jsx("path",{d:"M7 14L12 9L17 14",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),moveDown:pn.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:pn.jsx("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),delaySubtitles:pn.jsx("svg",{fill:"currentColor",width:24,height:24,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:pn.jsx("path",{d:"M31.218 15.838c-0.007-0.058-0.018-0.109-0.031-0.159l0.002 0.008c-0.051-0.223-0.158-0.416-0.305-0.571l0 0.001-5-5c-0.226-0.227-0.539-0.367-0.885-0.367-0.691 0-1.251 0.56-1.251 1.251 0 0.345 0.14 0.658 0.366 0.884v0l2.867 2.866h-18.982c-0.69 0-1.25 0.56-1.25 1.25s0.56 1.25 1.25 1.25v0h18.981l-2.866 2.865c-0.226 0.226-0.366 0.539-0.366 0.884 0 0.691 0.56 1.251 1.251 1.251 0.345 0 0.658-0.14 0.884-0.366l5-5.001c0.012-0.012 0.016-0.029 0.027-0.041 0.099-0.103 0.18-0.223 0.239-0.356l0.003-0.008 0-0.003c0.051-0.13 0.080-0.28 0.080-0.437 0-0.071-0.006-0.141-0.017-0.208l0.001 0.007zM2 0.75c-0.69 0-1.25 0.56-1.25 1.25v0 28c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0-28c0-0.69-0.56-1.25-1.25-1.25v0z"})}),advanceSubtitles:pn.jsx("svg",{fill:"currentColor",width:24,height:24,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:pn.jsx("path",{d:"M24 14.75h-18.982l2.866-2.866c0.225-0.226 0.363-0.537 0.363-0.881 0-0.69-0.56-1.25-1.25-1.25-0.344 0-0.655 0.139-0.881 0.363l-5 5c-0.011 0.011-0.015 0.027-0.026 0.039-0.1 0.104-0.183 0.225-0.243 0.359l-0.003 0.008-0 0.004c-0.050 0.129-0.079 0.279-0.079 0.435 0 0.072 0.006 0.142 0.018 0.21l-0.001-0.007c0.007 0.058 0.018 0.108 0.031 0.158l-0.002-0.008c0.051 0.223 0.158 0.417 0.306 0.571l-0-0 5 5.001c0.226 0.226 0.539 0.366 0.884 0.366 0.691 0 1.251-0.56 1.251-1.251 0-0.346-0.14-0.658-0.367-0.885l-2.866-2.865h18.982c0.69 0 1.25-0.56 1.25-1.25s-0.56-1.25-1.25-1.25v0zM30 0.75c-0.69 0-1.25 0.56-1.25 1.25v28c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0-28c-0-0.69-0.56-1.25-1.25-1.25h-0z"})})};class RT{video;constructor(e){this.video=e}load(e){this.video.src=e}play(){this.video.play()}pause(){this.video.pause()}destroy(){this.video.src=""}}const IT=({subtitle:f,activeSubtitle:e,lang:t,selectSubtitle:n})=>{const[r,o]=Qn.useState(""),u=OE(t);return pn.jsx("li",{children:pn.jsx("button",{"aria-label":u("Subtitle"),className:e===f?.id?"text-primary":`text-${r}`,onClick:async d=>{d.preventDefault(),n(f),o("success")},children:f?.title})})};function Vg({alert:f,children:e,id:t,src:n,subtitles:r,lang:o="en",playerClass:u=RT,onPlay:d,onPause:g,onLoad:h,onFullScreen:p}){const E=OE(o),b=Qn.useRef(null),A=Qn.useRef(null),T=Qn.useRef(null),C=Qn.useRef(null),O=Qn.useRef(null),te=Qn.useRef(null),de=Qn.useRef(0),fe=Qn.useRef(null),[De,Oe]=Qn.useState(""),[q,k]=Qn.useState(0),[ee,Ee]=Qn.useState(0),[P,xe]=Qn.useState(0),[Ve,be]=Qn.useState(0),[_t,Ye]=Qn.useState(0),[_e,He]=Qn.useState(!1),nt=Qn.useRef(!1),[ut,Pe]=Qn.useState(!1),[Be,it]=Qn.useState(!1),[gt,zt]=Qn.useState(!1),Ce=Qn.useRef(null),Le=Qn.useRef(!1),[yt,Y]=Qn.useState(!1),[W,L]=Qn.useState(!0);let j=20;typeof localStorage<"u"&&localStorage.getItem("subtitleMargin")&&(j=parseInt(localStorage?.getItem("subtitleMargin")||"0"));const[me,ae]=Qn.useState(j),[Ue,rt]=Qn.useState("ltr"),qe=Qn.useRef(!1),[$e,Ge]=Qn.useState(!1),Je=Qn.useRef(null);Qn.useEffect(()=>(b.current&&(Je.current=new u(b.current),Je.current.load(n)),()=>Je.current?.destroy()),[u,n]);const Et=()=>{const We=b.current?.textTracks[0];We&&(We.mode="hidden",We.oncuechange=()=>{const kt=We.activeCues?.[0];Oe(kt&&kt?kt?.text:"")})};Qn.useEffect(()=>{const We=b.current;Et();const kt=()=>{qe.current&&We.requestVideoFrameCallback(()=>{Le?.current||(Ee(We.currentTime/We.duration*100),xe(We.currentTime),be(We.duration)),kt()})};We.addEventListener("loadedmetadata",()=>{be(We.duration)}),We.addEventListener("play",()=>{qe.current=!0,kt()}),We.addEventListener("pause",()=>{qe.current=!1}),We.addEventListener("ended",()=>{qe.current=!1}),We.addEventListener("timeupdate",()=>{Math.abs(We.currentTime-de.current)>=5&&(localStorage.setItem(`video-progress-${t}`,String(We.currentTime)),de.current=We.currentTime)}),We.addEventListener("ended",()=>{localStorage.removeItem(`video-progress-${t}`)}),We.addEventListener("loadedmetadata",()=>{const Ot=`video-progress-${t}`,on=parseFloat(localStorage.getItem(Ot)||"0");!isNaN(on)&&on<We.duration-10&&on>0&&(zt(!0),We.currentTime=on,Ee(We.currentTime/We.duration*100),xe(We.currentTime),be(We.duration))});const jt=()=>Pe(!0),It=()=>Pe(!1);return We.addEventListener("waiting",jt),We.addEventListener("seeking",jt),We.addEventListener("canplay",It),We.addEventListener("playing",It),We.addEventListener("ended",It),()=>{We.removeEventListener("waiting",jt),We.removeEventListener("seeking",jt),We.removeEventListener("canplay",It),We.removeEventListener("playing",It),We.removeEventListener("ended",It)}},[De,t,Le,yt]);const ct=We=>{const kt=O.current.getBoundingClientRect(),jt=(We-kt.left)/kt.width;return Ee(jt*100),jt},Mt=We=>{const kt=ct(We.clientX),jt=b.current;try{jt.currentTime=kt*jt.duration}catch(It){console.log(It)}},yn=We=>{let kt=0;"touches"in We?kt=We.touches[0].clientX:kt=We.clientX;const jt=ct(kt),It=b.current;try{It.currentTime=jt*It.duration}catch(Ot){console.log(Ot)}},tn=()=>{const We=C.current;document.fullscreenElement===We?(p&&p(!1),Y(!1),document.exitFullscreen()):(p&&p(!0),Y(!0),We.requestFullscreen()),b?.current?.focus(),nt.current=!0},fn=()=>{if(!b?.current)return;const We=b?.current,kt=We?.src!==""&&We?.src!==document.location.href;_e?(g&&g(b,yt),kt&&Je.current?.pause()):(d&&d(b,yt),kt&&Je.current?.play()),kt&&He(!_e)},[Bt,kn]=Qn.useState(100);Qn.useEffect(()=>{if(b.current){const We=Bt/100;b.current.volume=We>1?1:We}},[Bt]);const Wn=We=>{const kt=te.current.getBoundingClientRect();return(We-kt.left)/kt.width},ta=We=>{let kt=0;"touches"in We?kt=We.touches[0].clientX:kt=We.clientX;const jt=Wn(kt);jt>1||jt<0||(kn(jt*100),b.current&&(b.current.volume=jt))},Ha=Qn.useCallback(async We=>{if(!T.current)return;Ge(!1);const kt=await(await fetch(We.link)).text();return T.current&&(T.current.src=vT(kt)),Et(),k(We?.id),kt},[]);Qn.useEffect(()=>{h&&h(Ha)},[h,Ha]);const La=Qn.useCallback(()=>{yt&&C?.current&&(clearTimeout(fe.current),fe.current=setTimeout(()=>{L(!1),document.body.style.cursor="none"},5e3))},[yt]),qa=Qn.useCallback(()=>{const We=b.current;We&&(Ee(We.currentTime/We.duration*100),xe(We.currentTime),be(We.duration),L(!0),La())},[La]),Jt=Qn.useCallback(()=>{const We=b.current;We&&(We.currentTime=Math.min(We.currentTime+10,We.duration),qa())},[qa]),Ht=Qn.useCallback(()=>{const We=b.current;We&&(We.currentTime=Math.max(We.currentTime-10,0),qa())},[qa]);Qn.useEffect(()=>{const We=kt=>{nt?.current&&(kt.key==="ArrowLeft"?Ht():kt.key==="ArrowRight"&&Jt())};return gt&&setTimeout(()=>{zt(!1)},1e4),window.addEventListener("keydown",We),()=>window.removeEventListener("keydown",We)},[gt,nt,Ht,Jt]);const Ft='video/x-matroska; codecs="theora, vorbis"';Qn.useEffect(()=>()=>{clearTimeout(fe.current),document.body.style.cursor="default"},[]),Qn.useEffect(()=>{const We=()=>{document.fullscreenElement?(p&&p(!0),Y(!0)):(p&&p(!1),Y(!1))};return document.addEventListener("fullscreenchange",We),()=>{document.removeEventListener("fullscreenchange",We)}},[p]),Qn.useEffect(()=>{const We=kt=>{if(nt?.current&&kt.key==="Enter"){const jt=b.current;jt&&(W?jt.paused?(Je.current?.play(),He(!0)):(Je.current?.pause(),He(!1)):(L(!0),La()))}};return window.addEventListener("keydown",We),()=>{window.removeEventListener("keydown",We)}},[W,La]),Qn.useEffect(()=>{const We=()=>{document.body.style.cursor="default"};return document.addEventListener("mousemove",We),()=>document.removeEventListener("mousemove",We)},[]);const wt=(We=.5)=>{const kt=b?.current;return kt&&Array.from(kt.textTracks).forEach(jt=>{if(jt.cues)return Array.from(jt.cues).forEach(It=>{Ye(_t+We),It.startTime+=We,It.endTime+=We}),!0}),!1},nn=(We=.5)=>{const kt=b?.current;return kt&&Array.from(kt.textTracks).forEach(jt=>{if(jt.cues)return Array.from(jt.cues).forEach(It=>{Ye(_t-We),It.startTime-=We,It.endTime-=We}),!0}),!1};return Qn.useEffect(()=>{r?.map(We=>{We?.default&&Ha(We)})},[Ha,r]),pn.jsxs("div",{ref:C,onMouseMove:()=>{W||(L(!0),document.body.style.cursor="default"),La()},className:"playercc-container"+(yt?" playercc-fullscreen":""),children:[pn.jsx("video",{preload:"none",type:Ft,tabIndex:0,autoFocus:!0,onClick:()=>{Ce.current||(Ce.current=setTimeout(()=>{Ge(!1),$e||fn(),Ce.current=null},200))},onDoubleClick:We=>{Ce.current&&(clearTimeout(Ce.current),Ce.current=null);const{clientX:kt}=We,{width:jt,left:It}=We.currentTarget.getBoundingClientRect();kt-It<jt/2?Ht():Jt(),Je.current?.play(),He(!0)},onMouseEnter:()=>nt.current=!0,onMouseLeave:()=>nt.current=!1,ref:b,src:n,style:{width:"100%",height:"100%"},children:pn.jsx("track",{ref:T,label:"Subtitle",kind:"subtitles",srcLang:"en",src:"/subtitle.vtt",default:!0})}),ut&&pn.jsx("div",{className:"playercc-title",children:pn.jsx(bT,{})}),!ut&&!_e&&pn.jsxs("div",{className:"playercc-title playercc-title-no-background",onClick:()=>{Ge(!1),$e||fn()},children:[pn.jsx("div",{className:"playercc-play-icon",children:pn.jsx("i",{children:ji.play})}),f]}),pn.jsxs("div",{className:"playercc-bar-wrapper",ref:A,children:[e,De!==""&&pn.jsx("div",{className:"playercc-subtitle",style:{marginBottom:me},dir:Ue,dangerouslySetInnerHTML:{__html:De}}),pn.jsxs("div",{className:"playercc-bars"+(W?"":" v-none"),children:[pn.jsxs("div",{className:"playercc-bar",children:[gt&&pn.jsx("button",{"aria-label":E("Play From First"),onClick:()=>{const We=b?.current;if(We){We.currentTime=0,Ee(We.currentTime/We.duration*100),xe(We.currentTime),be(We.duration);const kt=`video-progress-${t}`;localStorage.removeItem(kt),zt(!1),Je.current?.play()}},className:"playercc-fromfirst",children:pn.jsx("h5",{children:E("Play from First")})}),pn.jsx("button",{onClick:()=>{it(!Be)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Settings"),className:"playercc-btn",children:ji.settings}),pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Rewind 10 seconds"),className:"playercc-btn",onClick:Ht,children:ji.seekBackward}),pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Forward 10 seconds"),className:"playercc-btn",onClick:Jt,children:ji?.seekForward}),!!Be&&pn.jsxs("div",{className:"playercc-settings",children:[pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Subtitle Alignment"),className:"playercc-btn",onClick:()=>{rt(We=>We==="rtl"?"ltr":"rtl")},children:Ue==="rtl"?ji.rightAlignment:ji.leftAlignment}),pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Move Subtitles Up"),className:"playercc-btn",onClick:()=>{ae(me+5),localStorage.setItem("subtitleMargin",(me+5).toString())},children:ji.moveUp}),pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Move Subtitles Down"),className:"playercc-btn",onClick:()=>{ae(me-5),localStorage.setItem("subtitleMargin",(me-5).toString())},children:ji.moveDown}),pn.jsx("div",{className:"text-white",children:pn.jsx("span",{className:"playercc-badge playercc-bg-primary",children:me})}),pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Delay Subtitles"),className:"playercc-btn",onClick:()=>{wt()},children:ji.delaySubtitles}),pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Advance Subtitles"),className:"playercc-btn",onClick:()=>{nn()},children:ji.advanceSubtitles}),pn.jsx("div",{className:"text-white",children:pn.jsx("span",{className:"playercc-badge playercc-bg-primary",children:_t})})]})]}),pn.jsx(Ty,{fref:O,onClick:Mt,isDragging:Le,progress:ee,onDrag:yn}),pn.jsxs("div",{className:"playercc-bar",children:[pn.jsx("button",{"aria-label":E("Play or Pause"),"data-bs-toggle":"tooltip","data-bs-placement":"top",className:"playercc-btn",onClick:fn,children:_e?ji.pause:ji.play}),r&&r?.length>0&&pn.jsx("button",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:E("Subtitles"),className:"playercc-btn",onClick:()=>Ge(!$e),children:ji.subtitle}),pn.jsxs("div",{className:"playercc-right-side",children:[pn.jsxs("div",{className:"playercc-sound-wrapper",children:[Bt>0?pn.jsx("button",{className:"playercc-btn","aria-label":E("Mute"),onClick:()=>kn(0),children:ji?.sound}):pn.jsx("button",{className:"playercc-btn","aria-label":E("Unmute"),onClick:()=>kn(100),children:ji?.muted}),pn.jsx(Ty,{fref:te,progress:Bt,onClick:We=>{const kt=Wn(We.clientX);kn(kt*100),b.current&&(b.current.volume=kt)},onDrag:ta,width:100})]}),pn.jsxs("span",{className:"playercc-time",children:[by(P)," - ",by(Ve)]}),pn.jsx("button",{className:"playercc-btn",onClick:tn,"aria-label":E("Fullscreen"),children:ji.fullscreen})]})]})]})]}),pn.jsxs("div",{className:`playercc-subtitles ${$e?"":"d-none"}`,children:[pn.jsx("strong",{children:E("Select Subtitle")}),pn.jsx("ul",{children:r?.map(We=>pn.jsx(IT,{lang:o,subtitle:We,selectSubtitle:Ha,activeSubtitle:q},We?.id))})]})]})}const wn=Number.isFinite||function(f){return typeof f=="number"&&isFinite(f)},xT=Number.isSafeInteger||function(f){return typeof f=="number"&&Math.abs(f)<=wT},wT=Number.MAX_SAFE_INTEGER||9007199254740991;let jn=function(f){return f.NETWORK_ERROR="networkError",f.MEDIA_ERROR="mediaError",f.KEY_SYSTEM_ERROR="keySystemError",f.MUX_ERROR="muxError",f.OTHER_ERROR="otherError",f}({}),xt=function(f){return f.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",f.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",f.KEY_SYSTEM_NO_SESSION="keySystemNoSession",f.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",f.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",f.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",f.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",f.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",f.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",f.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",f.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",f.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",f.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",f.MANIFEST_LOAD_ERROR="manifestLoadError",f.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",f.MANIFEST_PARSING_ERROR="manifestParsingError",f.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",f.LEVEL_EMPTY_ERROR="levelEmptyError",f.LEVEL_LOAD_ERROR="levelLoadError",f.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",f.LEVEL_PARSING_ERROR="levelParsingError",f.LEVEL_SWITCH_ERROR="levelSwitchError",f.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",f.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",f.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",f.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",f.FRAG_LOAD_ERROR="fragLoadError",f.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",f.FRAG_DECRYPT_ERROR="fragDecryptError",f.FRAG_PARSING_ERROR="fragParsingError",f.FRAG_GAP="fragGap",f.REMUX_ALLOC_ERROR="remuxAllocError",f.KEY_LOAD_ERROR="keyLoadError",f.KEY_LOAD_TIMEOUT="keyLoadTimeOut",f.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",f.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",f.BUFFER_APPEND_ERROR="bufferAppendError",f.BUFFER_APPENDING_ERROR="bufferAppendingError",f.BUFFER_STALLED_ERROR="bufferStalledError",f.BUFFER_FULL_ERROR="bufferFullError",f.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",f.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",f.ASSET_LIST_LOAD_ERROR="assetListLoadError",f.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",f.ASSET_LIST_PARSING_ERROR="assetListParsingError",f.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",f.INTERNAL_EXCEPTION="internalException",f.INTERNAL_ABORTED="aborted",f.ATTACH_MEDIA_ERROR="attachMediaError",f.UNKNOWN="unknown",f}({}),pe=function(f){return f.MEDIA_ATTACHING="hlsMediaAttaching",f.MEDIA_ATTACHED="hlsMediaAttached",f.MEDIA_DETACHING="hlsMediaDetaching",f.MEDIA_DETACHED="hlsMediaDetached",f.MEDIA_ENDED="hlsMediaEnded",f.STALL_RESOLVED="hlsStallResolved",f.BUFFER_RESET="hlsBufferReset",f.BUFFER_CODECS="hlsBufferCodecs",f.BUFFER_CREATED="hlsBufferCreated",f.BUFFER_APPENDING="hlsBufferAppending",f.BUFFER_APPENDED="hlsBufferAppended",f.BUFFER_EOS="hlsBufferEos",f.BUFFERED_TO_END="hlsBufferedToEnd",f.BUFFER_FLUSHING="hlsBufferFlushing",f.BUFFER_FLUSHED="hlsBufferFlushed",f.MANIFEST_LOADING="hlsManifestLoading",f.MANIFEST_LOADED="hlsManifestLoaded",f.MANIFEST_PARSED="hlsManifestParsed",f.LEVEL_SWITCHING="hlsLevelSwitching",f.LEVEL_SWITCHED="hlsLevelSwitched",f.LEVEL_LOADING="hlsLevelLoading",f.LEVEL_LOADED="hlsLevelLoaded",f.LEVEL_UPDATED="hlsLevelUpdated",f.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",f.LEVELS_UPDATED="hlsLevelsUpdated",f.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",f.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",f.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",f.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",f.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",f.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",f.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",f.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",f.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",f.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",f.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",f.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",f.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",f.CUES_PARSED="hlsCuesParsed",f.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",f.INIT_PTS_FOUND="hlsInitPtsFound",f.FRAG_LOADING="hlsFragLoading",f.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",f.FRAG_LOADED="hlsFragLoaded",f.FRAG_DECRYPTED="hlsFragDecrypted",f.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",f.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",f.FRAG_PARSING_METADATA="hlsFragParsingMetadata",f.FRAG_PARSED="hlsFragParsed",f.FRAG_BUFFERED="hlsFragBuffered",f.FRAG_CHANGED="hlsFragChanged",f.FPS_DROP="hlsFpsDrop",f.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",f.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",f.ERROR="hlsError",f.DESTROYING="hlsDestroying",f.KEY_LOADING="hlsKeyLoading",f.KEY_LOADED="hlsKeyLoaded",f.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",f.BACK_BUFFER_REACHED="hlsBackBufferReached",f.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",f.ASSET_LIST_LOADING="hlsAssetListLoading",f.ASSET_LIST_LOADED="hlsAssetListLoaded",f.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",f.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",f.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",f.INTERSTITIAL_STARTED="hlsInterstitialStarted",f.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",f.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",f.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",f.INTERSTITIAL_ENDED="hlsInterstitialEnded",f.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",f.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",f.EVENT_CUE_ENTER="hlsEventCueEnter",f}({});var pa={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},zn={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class _u{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class kT{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new _u(e),this.fast_=new _u(t),this.defaultTTFB_=r,this.ttfb_=new _u(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:o}=this;n.halfLife!==e&&(this.slow_=new _u(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new _u(t,r.getEstimate(),r.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new _u(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,r=e/1e3,o=n/r;this.fast_.sample(r,o),this.slow_.sample(r,o)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function DT(f,e,t){return(e=LT(e))in f?Object.defineProperty(f,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):f[e]=t,f}function Fa(){return Fa=Object.assign?Object.assign.bind():function(f){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Fa.apply(null,arguments)}function vy(f,e){var t=Object.keys(f);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(f);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(f,r).enumerable})),t.push.apply(t,n)}return t}function za(f){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vy(Object(t),!0).forEach(function(n){DT(f,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(t)):vy(Object(t)).forEach(function(n){Object.defineProperty(f,n,Object.getOwnPropertyDescriptor(t,n))})}return f}function CT(f,e){if(typeof f!="object"||!f)return f;var t=f[Symbol.toPrimitive];if(t!==void 0){var n=t.call(f,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(f)}function LT(f){var e=CT(f,"string");return typeof e=="symbol"?e:e+""}class Xr{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Pl,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const Pl=function(){},NT={trace:Pl,debug:Pl,log:Pl,warn:Pl,info:Pl,error:Pl};function mm(){return Fa({},NT)}function MT(f,e){const t=self.console[f];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${f}] >`):Pl}function Sy(f,e,t){return e[f]?e[f].bind(e):MT(f,t)}const pm=mm();function OT(f,e,t){const n=mm();if(typeof console=="object"&&f===!0||typeof f=="object"){const r=["debug","log","info","warn","error"];r.forEach(o=>{n[o]=Sy(o,f,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.9`)}catch{return mm()}r.forEach(o=>{pm[o]=Sy(o,f)})}else Fa(pm,n);return n}const Ma=pm;function Fl(f=!0){return typeof self>"u"?void 0:(f||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function PT(f){return typeof self<"u"&&f===self.ManagedMediaSource}function PE(f,e){const t=Object.keys(f),n=Object.keys(e),r=t.length,o=n.length;return!r||!o||r===o&&!t.some(u=>n.indexOf(u)===-1)}function mr(f,e=!1){if(typeof TextDecoder<"u"){const h=new TextDecoder("utf-8").decode(f);if(e){const p=h.indexOf("\0");return p!==-1?h.substring(0,p):h}return h.replace(/\0/g,"")}const t=f.length;let n,r,o,u="",d=0;for(;d<t;){if(n=f[d++],n===0&&e)return u;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(n);break;case 12:case 13:r=f[d++],u+=String.fromCharCode((n&31)<<6|r&63);break;case 14:r=f[d++],o=f[d++],u+=String.fromCharCode((n&15)<<12|(r&63)<<6|(o&63)<<0);break}}return u}const Vs={hexDump:function(f){let e="";for(let t=0;t<f.length;t++){let n=f[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}};function zE(f){return Uint8Array.from(f.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function zT(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Yg={exports:{}},_y;function FT(){return _y||(_y=1,function(f,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d={buildAbsoluteURL:function(g,h,p){if(p=p||{},g=g.trim(),h=h.trim(),!h){if(!p.alwaysNormalize)return g;var E=d.parseURL(g);if(!E)throw new Error("Error trying to parse base URL.");return E.path=d.normalizePath(E.path),d.buildURLFromParts(E)}var b=d.parseURL(h);if(!b)throw new Error("Error trying to parse relative URL.");if(b.scheme)return p.alwaysNormalize?(b.path=d.normalizePath(b.path),d.buildURLFromParts(b)):h;var A=d.parseURL(g);if(!A)throw new Error("Error trying to parse base URL.");if(!A.netLoc&&A.path&&A.path[0]!=="/"){var T=r.exec(A.path);A.netLoc=T[1],A.path=T[2]}A.netLoc&&!A.path&&(A.path="/");var C={scheme:A.scheme,netLoc:b.netLoc,path:null,params:b.params,query:b.query,fragment:b.fragment};if(!b.netLoc&&(C.netLoc=A.netLoc,b.path[0]!=="/"))if(!b.path)C.path=A.path,b.params||(C.params=A.params,b.query||(C.query=A.query));else{var O=A.path,te=O.substring(0,O.lastIndexOf("/")+1)+b.path;C.path=d.normalizePath(te)}return C.path===null&&(C.path=p.alwaysNormalize?d.normalizePath(b.path):b.path),d.buildURLFromParts(C)},parseURL:function(g){var h=n.exec(g);return h?{scheme:h[1]||"",netLoc:h[2]||"",path:h[3]||"",params:h[4]||"",query:h[5]||"",fragment:h[6]||""}:null},normalizePath:function(g){for(g=g.split("").reverse().join("").replace(o,"");g.length!==(g=g.replace(u,"")).length;);return g.split("").reverse().join("")},buildURLFromParts:function(g){return g.scheme+g.netLoc+g.path+g.params+g.query+g.fragment}};f.exports=d})()}(Yg)),Yg.exports}var Om=FT();class Pm{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ja={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class FE{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,BT(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let r;n.length===1?r=t?.byteRangeEndOffset||0:r=parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[ja.AUDIO]:null,[ja.VIDEO]:null,[ja.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Pm),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Om.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[ja.AUDIO]=null,e[ja.VIDEO]=null,e[ja.AUDIOVIDEO]=null}}function hi(f){return f.sn!=="initSegment"}class Kg extends FE{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(wn(e)&&wn(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1){const r=this._decryptdata=this.levelkeys[n[0]]||null;if(r)return r.getDecryptData(this.sn)}}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=wn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!wn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return hi(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,r,o,u=!1){const{elementaryStreams:d}=this,g=d[e];if(!g){d[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:o,partial:u};return}g.startPTS=Math.min(g.startPTS,t),g.endPTS=Math.max(g.endPTS,n),g.startDTS=Math.min(g.startDTS,r),g.endDTS=Math.max(g.endDTS,o)}}class UT extends FE{constructor(e,t,n,r,o){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const u=e.enumeratedString("BYTERANGE");u&&this.setByteRange(u,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function UE(f,e){const t=Object.getPrototypeOf(f);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||UE(t,e)}}function BT(f,e){const t=UE(f,e);t&&(t.enumerable=!0,Object.defineProperty(f,e,t))}const Ay=Math.pow(2,32)-1,jT=[].push,BE={video:1,audio:2,id3:3,text:4};function bi(f){return String.fromCharCode.apply(null,f)}function jE(f,e){const t=f[e]<<8|f[e+1];return t<0?65536+t:t}function Jn(f,e){const t=qE(f,e);return t<0?4294967296+t:t}function Ry(f,e){let t=Jn(f,e);return t*=Math.pow(2,32),t+=Jn(f,e+4),t}function qE(f,e){return f[e]<<24|f[e+1]<<16|f[e+2]<<8|f[e+3]}function qT(f){const e=f.byteLength;for(let t=0;t<e;){const n=Jn(f,t);if(n>8&&f[t+4]===109&&f[t+5]===111&&f[t+6]===111&&f[t+7]===102)return!0;t=n>1?t+n:e}return!1}function ha(f,e){const t=[];if(!e.length)return t;const n=f.byteLength;for(let r=0;r<n;){const o=Jn(f,r),u=bi(f.subarray(r+4,r+8)),d=o>1?r+o:n;if(u===e[0])if(e.length===1)t.push(f.subarray(r+8,d));else{const g=ha(f.subarray(r+8,d),e.slice(1));g.length&&jT.apply(t,g)}r=d}return t}function GT(f){const e=[],t=f[0];let n=8;const r=Jn(f,n);n+=4;let o=0,u=0;t===0?(o=Jn(f,n),u=Jn(f,n+4),n+=8):(o=Ry(f,n),u=Ry(f,n+8),n+=16),n+=2;let d=f.length+u;const g=jE(f,n);n+=2;for(let h=0;h<g;h++){let p=n;const E=Jn(f,p);p+=4;const b=E&2147483647;if((E&2147483648)>>>31===1)return Ma.warn("SIDX has hierarchical references (not supported)"),null;const T=Jn(f,p);p+=4,e.push({referenceSize:b,subsegmentDuration:T,info:{duration:T/r,start:d,end:d+b-1}}),d+=b,p+=4,n=p}return{earliestPresentationTime:o,timescale:r,version:t,referencesCount:g,references:e}}function GE(f){const e=[],t=ha(f,["moov","trak"]);for(let r=0;r<t.length;r++){const o=t[r],u=ha(o,["tkhd"])[0];if(u){let d=u[0];const g=Jn(u,d===0?12:20),h=ha(o,["mdia","mdhd"])[0];if(h){d=h[0];const p=Jn(h,d===0?12:20),E=ha(o,["mdia","hdlr"])[0];if(E){const b=bi(E.subarray(8,12)),A={soun:ja.AUDIO,vide:ja.VIDEO}[b],T=ha(o,["mdia","minf","stbl","stsd"])[0],C=HT(T);A?(e[g]={timescale:p,type:A,stsd:C},e[A]=za({timescale:p,id:g},C)):e[g]={timescale:p,type:b,stsd:C}}}}}return ha(f,["moov","mvex","trex"]).forEach(r=>{const o=Jn(r,4),u=e[o];u&&(u.default={duration:Jn(r,12),flags:Jn(r,20)})}),e}function HT(f){const e=f.subarray(8),t=e.subarray(86),n=bi(e.subarray(4,8));let r=n,o;const u=n==="enca"||n==="encv";if(u){const h=ha(e,[n])[0].subarray(n==="enca"?28:78);ha(h,["sinf"]).forEach(E=>{const b=ha(E,["schm"])[0];if(b){const A=bi(b.subarray(4,8));if(A==="cbcs"||A==="cenc"){const T=ha(E,["frma"])[0];T&&(r=bi(T))}}})}const d=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const g=ha(t,["avcC"])[0];g&&g.length>3&&(r+="."+sh(g[1])+sh(g[2])+sh(g[3]),o=rh(d==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const g=ha(e,[n])[0],h=ha(g.subarray(28),["esds"])[0];if(h&&h.length>7){let p=4;if(h[p++]!==3)break;p=$g(h,p),p+=2;const E=h[p++];if(E&128&&(p+=2),E&64&&(p+=h[p++]),h[p++]!==4)break;p=$g(h,p);const b=h[p++];if(b===64)r+="."+sh(b);else break;if(p+=12,h[p++]!==5)break;p=$g(h,p);const A=h[p++];let T=(A&248)>>3;T===31&&(T+=1+((A&7)<<3)+((h[p]&224)>>5)),r+="."+T}break}case"hvc1":case"hev1":{const g=ha(t,["hvcC"])[0];if(g&&g.length>12){const h=g[1],p=["","A","B","C"][h>>6],E=h&31,b=Jn(g,2),A=(h&32)>>5?"H":"L",T=g[12],C=g.subarray(6,12);r+="."+p+E,r+="."+VT(b).toString(16).toUpperCase(),r+="."+A+T;let O="";for(let te=C.length;te--;){const de=C[te];(de||O)&&(O="."+de.toString(16).toUpperCase()+O)}r+=O}o=rh(d=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=rh(r,t)||r;break}case"vp09":{const g=ha(t,["vpcC"])[0];if(g&&g.length>6){const h=g[4],p=g[5],E=g[6]>>4&15;r+="."+ms(h)+"."+ms(p)+"."+ms(E)}break}case"av01":{const g=ha(t,["av1C"])[0];if(g&&g.length>2){const h=g[1]>>>5,p=g[1]&31,E=g[2]>>>7?"H":"M",b=(g[2]&64)>>6,A=(g[2]&32)>>5,T=h===2&&b?A?12:10:b?10:8,C=(g[2]&16)>>4,O=(g[2]&8)>>3,te=(g[2]&4)>>2,de=g[2]&3;r+="."+h+"."+ms(p)+E+"."+ms(T)+"."+C+"."+O+te+de+"."+ms(1)+"."+ms(1)+"."+ms(1)+"."+0,o=rh("dav1",t)}break}}return{codec:r,encrypted:u,supplemental:o}}function rh(f,e){const t=ha(e,["dvvC"]),n=t.length?t[0]:ha(e,["dvcC"])[0];if(n){const r=n[2]>>1&127,o=n[2]<<5&32|n[3]>>3&31;return f+"."+ms(r)+"."+ms(o)}}function VT(f){let e=0;for(let t=0;t<32;t++)e|=(f>>t&1)<<31-t;return e>>>0}function $g(f,e){const t=e+5;for(;f[e++]&128&&e<t;);return e}function sh(f){return("0"+f.toString(16).toUpperCase()).slice(-2)}function ms(f){return(f<10?"0":"")+f}function YT(f,e){if(!f||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&ha(f,["moov","trak"]).forEach(r=>{const u=ha(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let d=ha(u,["enca"]);const g=d.length>0;g||(d=ha(u,["encv"])),d.forEach(h=>{const p=g?h.subarray(28):h.subarray(78);ha(p,["sinf"]).forEach(b=>{const A=HE(b);if(A){const T=A.subarray(8,24);T.some(C=>C!==0)||(Ma.log(`[eme] Patching keyId in 'enc${g?"a":"v"}>sinf>>tenc' box: ${Vs.hexDump(T)} -> ${Vs.hexDump(t)}`),A.set(t,8))}})})})}function HE(f){const e=ha(f,["schm"])[0];if(e){const t=bi(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return ha(f,["schi","tenc"])[0]}return null}function KT(f,e,t){const n={},r=ha(f,["moof","traf"]);for(let o=0;o<r.length;o++){const u=r[o],d=ha(u,["tfhd"])[0],g=Jn(d,4),h=e[g];if(!h)continue;n[g]||(n[g]={start:NaN,duration:0,sampleCount:0,timescale:h.timescale,type:h.type});const p=n[g],E=ha(u,["tfdt"])[0];if(E){const fe=E[0];let De=Jn(E,4);fe===1&&(De===Ay?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(De*=Ay+1,De+=Jn(E,8))),wn(De)&&(!wn(p.start)||De<p.start)&&(p.start=De)}const b=h.default,A=Jn(d,0)|b?.flags;let T=b?.duration||0;A&8&&(A&2?T=Jn(d,12):T=Jn(d,8));const C=ha(u,["trun"]);let O=p.start||0,te=0,de=T;for(let fe=0;fe<C.length;fe++){const De=C[fe],Oe=Jn(De,4),q=p.sampleCount;p.sampleCount+=Oe;const k=De[3]&1,ee=De[3]&4,Ee=De[2]&1,P=De[2]&2,xe=De[2]&4,Ve=De[2]&8;let be=8,_t=Oe;for(k&&(be+=4),ee&&Oe&&(!(De[be+1]&1)&&p.keyFrameIndex===void 0&&(p.keyFrameIndex=q),be+=4,Ee?(de=Jn(De,be),be+=4):de=T,P&&(be+=4),Ve&&(be+=4),O+=de,te+=de,_t--);_t--;)Ee?(de=Jn(De,be),be+=4):de=T,P&&(be+=4),xe&&(De[be+1]&1||p.keyFrameIndex===void 0&&(p.keyFrameIndex=p.sampleCount-(_t+1),p.keyFrameStart=O),be+=4),Ve&&(be+=4),O+=de,te+=de;!te&&T&&(te+=T*Oe)}p.duration+=te}if(!Object.keys(n).some(o=>n[o].duration)){let o=1/0,u=0;const d=ha(f,["sidx"]);for(let g=0;g<d.length;g++){const h=GT(d[g]);if(h!=null&&h.references){o=Math.min(o,h.earliestPresentationTime/h.timescale);const p=h.references.reduce((E,b)=>E+b.info.duration||0,0);u=Math.max(u,p+h.earliestPresentationTime/h.timescale)}}u&&wn(u)&&Object.keys(n).forEach(g=>{n[g].duration||(n[g].duration=u*n[g].timescale-n[g].start)})}return n}function $T(f){const e={valid:null,remainder:null},t=ha(f,["moof"]);if(t.length<2)return e.remainder=f,e;const n=t[t.length-1];return e.valid=f.slice(0,n.byteOffset-8),e.remainder=f.slice(n.byteOffset-8),e}function Cr(f,e){const t=new Uint8Array(f.length+e.length);return t.set(f),t.set(e,f.length),t}function Iy(f,e){const t=[],n=e.samples,r=e.timescale,o=e.id;let u=!1;return ha(n,["moof"]).map(g=>{const h=g.byteOffset-8;ha(g,["traf"]).map(E=>{const b=ha(E,["tfdt"]).map(A=>{const T=A[0];let C=Jn(A,4);return T===1&&(C*=Math.pow(2,32),C+=Jn(A,8)),C/r})[0];return b!==void 0&&(f=b),ha(E,["tfhd"]).map(A=>{const T=Jn(A,4),C=Jn(A,0)&16777215,O=(C&1)!==0,te=(C&2)!==0,de=(C&8)!==0;let fe=0;const De=(C&16)!==0;let Oe=0;const q=(C&32)!==0;let k=8;T===o&&(O&&(k+=8),te&&(k+=4),de&&(fe=Jn(A,k),k+=4),De&&(Oe=Jn(A,k),k+=4),q&&(k+=4),e.type==="video"&&(u=Fh(e.codec)),ha(E,["trun"]).map(ee=>{const Ee=ee[0],P=Jn(ee,0)&16777215,xe=(P&1)!==0;let Ve=0;const be=(P&4)!==0,_t=(P&256)!==0;let Ye=0;const _e=(P&512)!==0;let He=0;const nt=(P&1024)!==0,ut=(P&2048)!==0;let Pe=0;const Be=Jn(ee,4);let it=8;xe&&(Ve=Jn(ee,it),it+=4),be&&(it+=4);let gt=Ve+h;for(let zt=0;zt<Be;zt++){if(_t?(Ye=Jn(ee,it),it+=4):Ye=fe,_e?(He=Jn(ee,it),it+=4):He=Oe,nt&&(it+=4),ut&&(Ee===0?Pe=Jn(ee,it):Pe=qE(ee,it),it+=4),e.type===ja.VIDEO){let Ce=0;for(;Ce<He;){const Le=Jn(n,gt);if(gt+=4,WT(u,n[gt])){const yt=n.subarray(gt,gt+Le);zm(yt,u?2:1,f+Pe/r,t)}gt+=Le,Ce+=Le+4}}f+=Ye/r}}))})})}),t}function Fh(f){if(!f)return!1;const e=f.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function WT(f,e){if(f){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function zm(f,e,t,n){const r=VE(f);let o=0;o+=e;let u=0,d=0,g=0;for(;o<r.length;){u=0;do{if(o>=r.length)break;g=r[o++],u+=g}while(g===255);d=0;do{if(o>=r.length)break;g=r[o++],d+=g}while(g===255);const h=r.length-o;let p=o;if(d<h)o+=d;else if(d>h){Ma.error(`Malformed SEI payload. ${d} is too small, only ${h} bytes left to parse.`);break}if(u===4){if(r[p++]===181){const b=jE(r,p);if(p+=2,b===49){const A=Jn(r,p);if(p+=4,A===1195456820){const T=r[p++];if(T===3){const C=r[p++],O=31&C,te=64&C,de=te?2+O*3:0,fe=new Uint8Array(de);if(te){fe[0]=C;for(let De=1;De<de;De++)fe[De]=r[p++]}n.push({type:T,payloadType:u,pts:t,bytes:fe})}}}}}else if(u===5&&d>16){const E=[];for(let T=0;T<16;T++){const C=r[p++].toString(16);E.push(C.length==1?"0"+C:C),(T===3||T===5||T===7||T===9)&&E.push("-")}const b=d-16,A=new Uint8Array(b);for(let T=0;T<b;T++)A[T]=r[p++];n.push({payloadType:u,pts:t,uuid:E.join(""),userData:mr(A),userDataBytes:A})}}}function VE(f){const e=f.byteLength,t=[];let n=1;for(;n<e-2;)f[n]===0&&f[n+1]===0&&f[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return f;const r=e-t.length,o=new Uint8Array(r);let u=0;for(n=0;n<r;u++,n++)u===t[0]&&(u++,t.shift()),o[n]=f[u];return o}function XT(f){const e=f[0];let t="",n="",r=0,o=0,u=0,d=0,g=0,h=0;if(e===0){for(;bi(f.subarray(h,h+1))!=="\0";)t+=bi(f.subarray(h,h+1)),h+=1;for(t+=bi(f.subarray(h,h+1)),h+=1;bi(f.subarray(h,h+1))!=="\0";)n+=bi(f.subarray(h,h+1)),h+=1;n+=bi(f.subarray(h,h+1)),h+=1,r=Jn(f,12),o=Jn(f,16),d=Jn(f,20),g=Jn(f,24),h=28}else if(e===1){h+=4,r=Jn(f,h),h+=4;const E=Jn(f,h);h+=4;const b=Jn(f,h);for(h+=4,u=2**32*E+b,xT(u)||(u=Number.MAX_SAFE_INTEGER,Ma.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),d=Jn(f,h),h+=4,g=Jn(f,h),h+=4;bi(f.subarray(h,h+1))!=="\0";)t+=bi(f.subarray(h,h+1)),h+=1;for(t+=bi(f.subarray(h,h+1)),h+=1;bi(f.subarray(h,h+1))!=="\0";)n+=bi(f.subarray(h,h+1)),h+=1;n+=bi(f.subarray(h,h+1)),h+=1}const p=f.subarray(h,f.byteLength);return{schemeIdUri:t,value:n,timeScale:r,presentationTime:u,presentationTimeDelta:o,eventDuration:d,id:g,payload:p}}function QT(f,...e){const t=e.length;let n=8,r=t;for(;r--;)n+=e[r].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(f,4),r=0,n=8;r<t;r++)o.set(e[r],n),n+=e[r].byteLength;return o}function ZT(f,e,t){if(f.byteLength!==16)throw new RangeError("Invalid system id");let n,r;n=0,r=new Uint8Array;let o;n>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const u=new Uint8Array(4);return t.byteLength>0&&new DataView(u.buffer).setUint32(0,t.byteLength,!1),QT([112,115,115,104],new Uint8Array([n,0,0,0]),f,o,r,u,t)}const YE=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Nu={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Fm(f,e){const t=Nu[e];return!!t&&!!t[f.slice(0,4)]}function ym(f,e,t=!0){return!f.split(",").some(n=>!Um(n,e,t))}function Um(f,e,t=!0){var n;const r=Fl(t);return(n=r?.isTypeSupported(_d(f,e)))!=null?n:!1}function _d(f,e){return`${e}/mp4;codecs=${f}`}function xy(f){if(f){const e=f.substring(0,4);return Nu.video[e]}return 2}function wh(f){const e=YE();return f.split(",").reduce((t,n)=>{const o=e&&Fh(n)?9:Nu.video[n];return o?(o*2+t)/(t?3:2):(Nu.audio[n]+t)/(t?2:1)},0)}const Wg={};function JT(f,e=!0){if(Wg[f])return Wg[f];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[f];for(let r=0;r<t.length;r++){var n;if(Um(t[r],"audio",e))return Wg[f]=t[r],t[r];if(t[r]==="mp3"&&(n=Fl(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return f}const ev=/flac|opus|mp4a\.40\.34/i;function kh(f,e=!0){return f.replace(ev,t=>JT(t.toLowerCase(),e))}function tv(f,e){const t=[];if(f){const n=f.split(",");for(let r=0;r<n.length;r++)Fm(n[r],"video")||t.push(n[r])}return e&&t.push(e),t.join(",")}function bh(f,e){if(f&&(f.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(f)!==-1)&&(wy(f,"audio")||wy(f,"video")))return f;if(e){const t=e.split(",");if(t.length>1){if(f){for(let n=t.length;n--;)if(t[n].substring(0,4)===f.substring(0,4))return t[n]}return t[0]}}return e||f}function wy(f,e){return Fm(f,e)&&Um(f,e)}function nv(f){const e=f.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function av(f){if(f.startsWith("av01.")){const e=f.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return f}function ky(f){const e=Fl(f)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Em(f){return f.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const KE={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function $E(f,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:f}}function iv(f,e,t,n,r,o){const u=f.videoCodec,d=f.audioCodec?f.audioGroups:null,g=o?.audioCodec,h=o?.channels,p=h?parseInt(h):g?1/0:2;let E=null;if(d!=null&&d.length)try{d.length===1&&d[0]?E=e.groups[d[0]].channels:E=d.reduce((b,A)=>{if(A){const T=e.groups[A];if(!T)throw new Error(`Audio track group ${A} not found`);Object.keys(T.channels).forEach(C=>{b[C]=(b[C]||0)+T.channels[C]})}return b},{2:0})}catch{return!0}return u!==void 0&&(u.split(",").some(b=>Fh(b))||f.width>1920&&f.height>1088||f.height>1920&&f.width>1088||f.frameRate>Math.max(n,30)||f.videoRange!=="SDR"&&f.videoRange!==t||f.bitrate>Math.max(r,8e6))||!!E&&wn(p)&&Object.keys(E).some(b=>parseInt(b)>p)}function WE(f,e,t,n={}){const r=f.videoCodec;if(!r&&!f.audioCodec||!t)return Promise.resolve(KE);const o=[],u=rv(f),d=u.length,g=sv(f,e,d>0),h=g.length;for(let p=d||1*h||1;p--;){const E={type:"media-source"};if(d&&(E.video=u[p%d]),h){E.audio=g[p%h];const b=E.audio.bitrate;E.video&&b&&(E.video.bitrate-=b)}o.push(E)}if(r){const p=navigator.userAgent;if(r.split(",").some(E=>Fh(E))&&YE())return Promise.resolve($E(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${p})`),o))}return Promise.all(o.map(p=>{const E=ov(p);return n[E]||(n[E]=t.decodingInfo(p))})).then(p=>({supported:!p.some(E=>!E.supported),configurations:o,decodingInfoResults:p})).catch(p=>({supported:!1,configurations:o,decodingInfoResults:[],error:p}))}function rv(f){var e;const t=(e=f.videoCodec)==null?void 0:e.split(","),n=XE(f),r=f.width||640,o=f.height||480,u=f.frameRate||30,d=f.videoRange.toLowerCase();return t?t.map(g=>{const h={contentType:_d(av(g),"video"),width:r,height:o,bitrate:n,framerate:u};return d!=="sdr"&&(h.transferFunction=d),h}):[]}function sv(f,e,t){var n;const r=(n=f.audioCodec)==null?void 0:n.split(","),o=XE(f);return r&&f.audioGroups?f.audioGroups.reduce((u,d)=>{var g;const h=d?(g=e.groups[d])==null?void 0:g.tracks:null;return h?h.reduce((p,E)=>{if(E.groupId===d){const b=parseFloat(E.channels||"");r.forEach(A=>{const T={contentType:_d(A,"audio"),bitrate:t?lv(A,o):o};b&&(T.channels=""+b),p.push(T)})}return p},u):u},[]):[]}function lv(f,e){if(e<=1)return 1;let t=128e3;return f==="ec-3"?t=768e3:f==="ac-3"&&(t=64e4),Math.min(e/2,t)}function XE(f){return Math.ceil(Math.max(f.bitrate*.9,f.averageBitrate)/1e3)*1e3||1}function ov(f){let e="";const{audio:t,video:n}=f;if(n){const r=Em(n.contentType);e+=`${r}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const r=Em(t.contentType);e+=`${n?"_":""}${r}_c${t.channels}`}return e}const bm=["NONE","TYPE-0","TYPE-1",null];function uv(f){return bm.indexOf(f)>-1}const Dh=["SDR","PQ","HLG"];function cv(f){return!!f&&Dh.indexOf(f)>-1}var Th={No:"",Yes:"YES",v2:"v2"};function Dy(f){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=f,r=n<e/2;return e&&r?t?Th.v2:Th.Yes:Th.No}class Cy{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Ad{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Ly(this._audioGroups,e)}hasSubtitleGroup(e){return Ly(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function Ly(f,e){return!e||!f?!1:f.indexOf(e)!==-1}function dv(){if(typeof matchMedia=="function"){const f=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(f.media!==e.media)return f.matches===!0}return!1}function fv(f,e){let t=!1,n=[];if(f&&(t=f!=="SDR",n=[f]),e){n=e.allowedVideoRanges||Dh.slice(0);const r=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:r&&dv(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const hv=f=>{const e=new WeakSet;return(t,n)=>{if(f&&(n=f(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Ya=(f,e)=>JSON.stringify(f,hv(e));function gv(f,e,t,n,r){const o=Object.keys(f),u=n?.channels,d=n?.audioCodec,g=r?.videoCodec,h=u&&parseInt(u)===2;let p=!1,E=!1,b=1/0,A=1/0,T=1/0,C=1/0,O=0,te=[];const{preferHDR:de,allowedVideoRanges:fe}=fv(e,r);for(let ee=o.length;ee--;){const Ee=f[o[ee]];p||(p=Ee.channels[2]>0),b=Math.min(b,Ee.minHeight),A=Math.min(A,Ee.minFramerate),T=Math.min(T,Ee.minBitrate),fe.filter(xe=>Ee.videoRanges[xe]>0).length>0&&(E=!0)}b=wn(b)?b:0,A=wn(A)?A:0;const De=Math.max(1080,b),Oe=Math.max(30,A);T=wn(T)?T:t,t=Math.max(T,t),E||(e=void 0);const q=o.length>1;return{codecSet:o.reduce((ee,Ee)=>{const P=f[Ee];if(Ee===ee)return ee;if(te=E?fe.filter(xe=>P.videoRanges[xe]>0):[],q){if(P.minBitrate>t)return hs(Ee,`min bitrate of ${P.minBitrate} > current estimate of ${t}`),ee;if(!P.hasDefaultAudio)return hs(Ee,"no renditions with default or auto-select sound found"),ee;if(d&&Ee.indexOf(d.substring(0,4))%5!==0)return hs(Ee,`audio codec preference "${d}" not found`),ee;if(u&&!h){if(!P.channels[u])return hs(Ee,`no renditions with ${u} channel sound found (channels options: ${Object.keys(P.channels)})`),ee}else if((!d||h)&&p&&P.channels[2]===0)return hs(Ee,"no renditions with stereo sound found"),ee;if(P.minHeight>De)return hs(Ee,`min resolution of ${P.minHeight} > maximum of ${De}`),ee;if(P.minFramerate>Oe)return hs(Ee,`min framerate of ${P.minFramerate} > maximum of ${Oe}`),ee;if(!te.some(xe=>P.videoRanges[xe]>0))return hs(Ee,`no variants with VIDEO-RANGE of ${Ya(te)} found`),ee;if(g&&Ee.indexOf(g.substring(0,4))%5!==0)return hs(Ee,`video codec preference "${g}" not found`),ee;if(P.maxScore<O)return hs(Ee,`max score of ${P.maxScore} < selected max of ${O}`),ee}return ee&&(wh(Ee)>=wh(ee)||P.fragmentError>f[ee].fragmentError)?ee:(C=P.minIndex,O=P.maxScore,Ee)},void 0),videoRanges:te,preferHDR:de,minFramerate:A,minBitrate:T,minIndex:C}}function hs(f,e){Ma.log(`[abr] start candidates with "${f}" ignored because ${e}`)}function QE(f){return f.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function mv(f,e,t,n){return f.slice(t,n+1).reduce((r,o,u)=>{if(!o.codecSet)return r;const d=o.audioGroups;let g=r[o.codecSet];g||(r[o.codecSet]=g={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:u,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!d,fragmentError:0}),g.minBitrate=Math.min(g.minBitrate,o.bitrate);const h=Math.min(o.height,o.width);return g.minHeight=Math.min(g.minHeight,h),g.minFramerate=Math.min(g.minFramerate,o.frameRate),g.minIndex=Math.min(g.minIndex,u),g.maxScore=Math.max(g.maxScore,o.score),g.fragmentError+=o.fragmentError,g.videoRanges[o.videoRange]=(g.videoRanges[o.videoRange]||0)+1,d&&d.forEach(p=>{if(!p)return;const E=e.groups[p];E&&(g.hasDefaultAudio=g.hasDefaultAudio||e.hasDefaultAudio?E.hasDefault:E.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(E.channels).forEach(b=>{g.channels[b]=(g.channels[b]||0)+E.channels[b]}))}),r},{})}function Ny(f){if(!f)return f;const{lang:e,assocLang:t,characteristics:n,channels:r,audioCodec:o}=f;return{lang:e,assocLang:t,characteristics:n,channels:r,audioCodec:o}}function ys(f,e,t){if("attrs"in f){const n=e.indexOf(f);if(n!==-1)return n}for(let n=0;n<e.length;n++){const r=e[n];if(To(f,r,t))return n}return-1}function To(f,e,t){const{groupId:n,name:r,lang:o,assocLang:u,default:d}=f,g=f.forced;return(n===void 0||e.groupId===n)&&(r===void 0||e.name===r)&&(o===void 0||pv(o,e.lang))&&(o===void 0||e.assocLang===u)&&(d===void 0||e.default===d)&&(g===void 0||e.forced===g)&&(!("characteristics"in f)||yv(f.characteristics||"",e.characteristics))&&(t===void 0||t(f,e))}function pv(f,e="--"){return f.length===e.length?f===e:f.startsWith(e)||e.startsWith(f)}function yv(f,e=""){const t=f.split(","),n=e.split(",");return t.length===n.length&&!t.some(r=>n.indexOf(r)===-1)}function bo(f,e){const{audioCodec:t,channels:n}=f;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function Ev(f,e,t,n,r){const o=e[n],d=e.reduce((b,A,T)=>{const C=A.uri;return(b[C]||(b[C]=[])).push(T),b},{})[o.uri];d.length>1&&(n=Math.max.apply(Math,d));const g=o.videoRange,h=o.frameRate,p=o.codecSet.substring(0,4),E=My(e,n,b=>{if(b.videoRange!==g||b.frameRate!==h||b.codecSet.substring(0,4)!==p)return!1;const A=b.audioGroups,T=t.filter(C=>!A||A.indexOf(C.groupId)!==-1);return ys(f,T,r)>-1});return E>-1?E:My(e,n,b=>{const A=b.audioGroups,T=t.filter(C=>!A||A.indexOf(C.groupId)!==-1);return ys(f,T,r)>-1})}function My(f,e,t){for(let n=e;n>-1;n--)if(t(f[n]))return n;for(let n=e+1;n<f.length;n++)if(t(f[n]))return n;return-1}function Ch(f,e){var t;return!!f&&f!==((t=e.loadLevelObj)==null?void 0:t.uri)}class bv extends Xr{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:r,partCurrent:o,hls:u}=this,{autoLevelEnabled:d,media:g}=u;if(!r||!g)return;const h=performance.now(),p=o?o.stats:r.stats,E=o?o.duration:r.duration,b=h-p.loading.start,A=u.minAutoLevel,T=r.level,C=this._nextAutoLevel;if(p.aborted||p.loaded&&p.loaded===p.total||T<=A){this.clearTimer(),this._nextAutoLevel=-1;return}if(!d)return;const O=C>-1&&C!==T,te=!!t||O;if(!te&&(g.paused||!g.playbackRate||!g.readyState))return;const de=u.mainForwardBufferInfo;if(!te&&de===null)return;const fe=this.bwEstimator.getEstimateTTFB(),De=Math.abs(g.playbackRate);if(b<=Math.max(fe,1e3*(E/(De*2))))return;const Oe=de?de.len/De:0,q=p.loading.first?p.loading.first-p.loading.start:-1,k=p.loaded&&q>-1,ee=this.getBwEstimate(),Ee=u.levels,P=Ee[T],xe=Math.max(p.loaded,Math.round(E*(r.bitrate||P.averageBitrate)/8));let Ve=k?b-q:b;Ve<1&&k&&(Ve=Math.min(b,p.loaded*8/ee));const be=k?p.loaded*1e3/Ve:0,_t=fe/1e3,Ye=be?(xe-p.loaded)/be:xe*8/ee+_t;if(Ye<=Oe)return;const _e=be?be*8:ee,He=((n=t?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,nt=this.hls.config.abrBandWidthUpFactor;let ut=Number.POSITIVE_INFINITY,Pe;for(Pe=T-1;Pe>A;Pe--){const zt=Ee[Pe].maxBitrate,Ce=!Ee[Pe].details||He;if(ut=this.getTimeToLoadFrag(_t,_e,E*zt,Ce),ut<Math.min(Oe,E+_t))break}if(ut>=Ye||ut>E*10)return;k?this.bwEstimator.sample(b-Math.min(fe,q),p.loaded):this.bwEstimator.sampleTTFB(b);const Be=Ee[Pe].maxBitrate;this.getBwEstimate()*nt>Be&&this.resetEstimator(Be);const it=this.findBestLevel(Be,A,Pe,0,Oe,1,1);it>-1&&(Pe=it),this.warn(`Fragment ${r.sn}${o?" part "+o.index:""} of level ${T} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${Oe.toFixed(3)} s
      Estimated load time for current fragment: ${Ye.toFixed(3)} s
      Estimated load time for down switch fragment: ${ut.toFixed(3)} s
      TTFB estimate: ${q|0} ms
      Current BW estimate: ${wn(ee)?ee|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Pe} @ ${Be|0} bps`),u.nextLoadLevel=u.nextAutoLevel=Pe,this.clearTimer();const gt=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===Pe&&Pe>0){const zt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Pe>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${zt.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,Pe>A){let Ce=this.findBestLevel(this.hls.levels[A].bitrate,A,Pe,0,zt,1,1);Ce===-1&&(Ce=A),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Ce,this.resetEstimator(this.hls.levels[Ce].bitrate)}}};O||Ye>ut*2?gt():this.timer=self.setInterval(gt,ut*1e3),u.trigger(pe.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:o,stats:p})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new kT(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(pe.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var r;this.fragCurrent=n,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case xt.BUFFER_ADD_CODEC_ERROR:case xt.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case xt.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:r,partCurrent:o}=this;if(n&&r&&n.sn===r.sn&&n.level===r.level){const u=performance.now(),d=o?o.stats:n.stats,g=u-d.loading.start,h=d.loading.first?d.loading.first-d.loading.start:-1;if(d.loaded&&h>-1){const E=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(g-Math.min(E,h),d.loaded)}else this.bwEstimator.sampleTTFB(g)}break}}}getTimeToLoadFrag(e,t,n,r){const o=e+n/t,u=r?e+this.lastLevelLoadSec:0;return o+u}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,o=r.end-r.first;wn(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===zn.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=n?n.duration:t.duration,u=this.hls.levels[t.level],d=(u.loaded?u.loaded.bytes:0)+r.loaded,g=(u.loaded?u.loaded.duration:0)+o;u.loaded={bytes:d,duration:g},u.realBitrate=Math.round(8*d/g)}if(t.bitrateTest){const o={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(pe.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,o=r!=null&&r.stats.loaded?r.stats:n.stats;if(o.aborted||this.ignoreFragment(n))return;const u=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(u,o.loaded),o.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=u/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==zn.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,o=this.findBestLevel(n,t,e,0,r,1,1);if(o>-1)return o;const u=this.hls.firstLevel,d=Math.min(Math.max(u,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${u} clamped to ${d}`),d}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=n&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const u=this.hls.levels;if(u.length>Math.max(e,o)&&u[e].loadError<=u[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:o,minAutoLevel:u}=n,d=t?t.duration:e?e.duration:0,g=this.getBwEstimate(),h=this.getStarvationDelay();let p=o.abrBandWidthFactor,E=o.abrBandWidthUpFactor;if(h){const O=this.findBestLevel(g,u,r,h,0,p,E);if(O>=0)return this.rebufferNotice=-1,O}let b=d?Math.min(d,o.maxStarvationDelay):o.maxStarvationDelay;if(!h){const O=this.bitrateTestDelay;O&&(b=(d?Math.min(d,o.maxLoadingDelay):o.maxLoadingDelay)-O,this.info(`bitrate test took ${Math.round(1e3*O)}ms, set first fragment max fetchDuration to ${Math.round(1e3*b)} ms`),p=E=1)}const A=this.findBestLevel(g,u,r,h,b,p,E);if(this.rebufferNotice!==A&&(this.rebufferNotice=A,this.info(`${h?"rebuffering expected":"buffer is empty"}, optimal quality level ${A}`)),A>-1)return A;const T=n.levels[u],C=n.loadLevelObj;return C&&T?.bitrate<C.bitrate?u:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,o,u,d){var g;const h=r+o,p=this.lastLoadedFragLevel,E=p===-1?this.hls.firstLevel:p,{fragCurrent:b,partCurrent:A}=this,{levels:T,allAudioTracks:C,loadLevel:O,config:te}=this.hls;if(T.length===1)return 0;const de=T[E],fe=!!((g=this.hls.latestLevelDetails)!=null&&g.live),De=O===-1||p===-1;let Oe,q="SDR",k=de?.frameRate||0;const{audioPreference:ee,videoPreference:Ee}=te,P=this.audioTracksByGroup||(this.audioTracksByGroup=QE(C));let xe=-1;if(De){if(this.firstSelection!==-1)return this.firstSelection;const _e=this.codecTiers||(this.codecTiers=mv(T,P,t,n)),He=gv(_e,q,e,ee,Ee),{codecSet:nt,videoRanges:ut,minFramerate:Pe,minBitrate:Be,minIndex:it,preferHDR:gt}=He;xe=it,Oe=nt,q=gt?ut[ut.length-1]:ut[0],k=Pe,e=Math.max(e,Be),this.log(`picked start tier ${Ya(He)}`)}else Oe=de?.codecSet,q=de?.videoRange;const Ve=A?A.duration:b?b.duration:0,be=this.bwEstimator.getEstimateTTFB()/1e3,_t=[];for(let _e=n;_e>=t;_e--){var Ye;const He=T[_e],nt=_e>E;if(!He)continue;if(te.useMediaCapabilities&&!He.supportedResult&&!He.supportedPromise){const Ce=navigator.mediaCapabilities;typeof Ce?.decodingInfo=="function"&&iv(He,P,q,k,e,ee)?(He.supportedPromise=WE(He,P,Ce,this.supportedCache),He.supportedPromise.then(Le=>{if(!this.hls)return;He.supportedResult=Le;const yt=this.hls.levels,Y=yt.indexOf(He);Le.error?this.warn(`MediaCapabilities decodingInfo error: "${Le.error}" for level ${Y} ${Ya(Le)}`):Le.supported?Le.decodingInfoResults.some(W=>W.smooth===!1||W.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Y} not smooth or powerEfficient: ${Ya(Le)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Y} ${Ya(Le)}`),Y>-1&&yt.length>1&&(this.log(`Removing unsupported level ${Y}`),this.hls.removeLevel(Y),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):He.supportedResult=KE}if((Oe&&He.codecSet!==Oe||q&&He.videoRange!==q||nt&&k>He.frameRate||!nt&&k>0&&k<He.frameRate||(Ye=He.supportedResult)!=null&&(Ye=Ye.decodingInfoResults)!=null&&Ye.some(Ce=>Ce.smooth===!1))&&(!De||_e!==xe)){_t.push(_e);continue}const ut=He.details,Pe=(A?ut?.partTarget:ut?.averagetargetduration)||Ve;let Be;nt?Be=d*e:Be=u*e;const it=Ve&&r>=Ve*2&&o===0?He.averageBitrate:He.maxBitrate,gt=this.getTimeToLoadFrag(be,Be,it*Pe,ut===void 0);if(Be>=it&&(_e===p||He.loadError===0&&He.fragmentError===0)&&(gt<=be||!wn(gt)||fe&&!this.bitrateTestDelay||gt<h)){const Ce=this.forcedAutoLevel;return _e!==O&&(Ce===-1||Ce!==O)&&(_t.length&&this.trace(`Skipped level(s) ${_t.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${T[_t[0]].codecs}" ${T[_t[0]].videoRange}; not compatible with "${Oe}" ${q}`),this.info(`switch candidate:${E}->${_e} adjustedbw(${Math.round(Be)})-bitrate=${Math.round(Be-it)} ttfb:${be.toFixed(1)} avgDuration:${Pe.toFixed(1)} maxFetchDuration:${h.toFixed(1)} fetchDuration:${gt.toFixed(1)} firstSelection:${De} codecSet:${He.codecSet} videoRange:${He.videoRange} hls.loadLevel:${O}`)),De&&(this.firstSelection=_e),_e}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const ZE={search:function(f,e){let t=0,n=f.length-1,r=null,o=null;for(;t<=n;){r=(t+n)/2|0,o=f[r];const u=e(o);if(u>0)t=r+1;else if(u<0)n=r-1;else return o}return null}};function Tv(f,e,t){if(e===null||!Array.isArray(f)||!f.length||!wn(e))return null;const n=f[0].programDateTime;if(e<(n||0))return null;const r=f[f.length-1].endProgramDateTime;if(e>=(r||0))return null;for(let o=0;o<f.length;++o){const u=f[o];if(Sv(e,t,u))return u}return null}function vo(f,e,t=0,n=0,r=.005){let o=null;if(f){o=e[1+f.sn-e[0].sn]||null;const d=f.endDTS-t;d>0&&d<15e-7&&(t+=15e-7),o&&f.level!==o.level&&o.end<=f.end&&(o=e[2+f.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!f||f.level===o.level)&&Oy(t,n,o)===0||vv(o,f,Math.min(r,n))))return o;const u=ZE.search(e,Oy.bind(null,t,n));return u&&(u!==f||!o)?u:o}function vv(f,e,t){if(e&&e.start===0&&e.level<f.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((r,o)=>(o[0]==="INF"&&(r+=parseFloat(o[1])),r),t);return f.start<=n}return!1}function Oy(f=0,e=0,t){if(t.start<=f&&t.start+t.duration>f)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=f?1:t.start-n>f&&t.start?-1:0}function Sv(f,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>f}function JE(f,e,t){if(f&&f.startCC<=e&&f.endCC>=e){let n=f.fragments;const{fragmentHint:r}=f;r&&(n=n.concat(r));let o;return ZE.search(n,u=>u.cc<e?1:u.cc>e?-1:(o=u,u.end<=t?1:u.start>t?-1:0)),o||null}return null}function Lh(f){switch(f.details){case xt.FRAG_LOAD_TIMEOUT:case xt.KEY_LOAD_TIMEOUT:case xt.LEVEL_LOAD_TIMEOUT:case xt.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Py(f,e){const t=Lh(e);return f.default[`${t?"timeout":"error"}Retry`]}function Bm(f,e){const t=f.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*f.retryDelayMs,f.maxRetryDelayMs)}function zy(f){return za(za({},f),{errorRetry:null,timeoutRetry:null})}function Nh(f,e,t,n){if(!f)return!1;const r=n?.code,o=e<f.maxNumRetry&&(_v(r)||!!t);return f.shouldRetry?f.shouldRetry(f,e,t,n,o):o}function _v(f){return f===0&&navigator.onLine===!1||!!f&&(f<400||f>499)}var qi={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},$r={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class Av extends Xr{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(pe.ERROR,this.onError,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(pe.ERROR,this.onError,this),e.off(pe.ERROR,this.onErrorOut,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===zn.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,o=t.context;switch(t.details){case xt.FRAG_LOAD_ERROR:case xt.FRAG_LOAD_TIMEOUT:case xt.KEY_LOAD_ERROR:case xt.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case xt.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=Rd();return}case xt.FRAG_GAP:case xt.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=qi.SendAlternateToPenaltyBox;return}case xt.LEVEL_EMPTY_ERROR:case xt.LEVEL_PARSING_ERROR:{var u;const g=t.parent===zn.MAIN?t.level:r.loadLevel;t.details===xt.LEVEL_EMPTY_ERROR&&((u=t.context)!=null&&(u=u.levelDetails)!=null&&u.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,g):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,g))}return;case xt.LEVEL_LOAD_ERROR:case xt.LEVEL_LOAD_TIMEOUT:typeof o?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case xt.AUDIO_TRACK_LOAD_ERROR:case xt.AUDIO_TRACK_LOAD_TIMEOUT:case xt.SUBTITLE_LOAD_ERROR:case xt.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const g=r.loadLevelObj;if(g&&(o.type===pa.AUDIO_TRACK&&g.hasAudioGroup(o.groupId)||o.type===pa.SUBTITLE_TRACK&&g.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=qi.SendAlternateToPenaltyBox,t.errorAction.flags=$r.MoveAllAlternatesMatchingHost;return}}return;case xt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const g=r.loadLevelObj,h=g?.attrs["HDCP-LEVEL"];h?t.errorAction={action:qi.SendAlternateToPenaltyBox,flags:$r.MoveAllAlternatesMatchingHDCP,hdcpLevel:h}:this.keySystemError(t)}return;case xt.BUFFER_ADD_CODEC_ERROR:case xt.REMUX_ALLOC_ERROR:case xt.BUFFER_APPEND_ERROR:if(!t.errorAction){var d;t.errorAction=this.getLevelSwitchAction(t,(d=t.level)!=null?d:r.loadLevel)}return;case xt.INTERNAL_EXCEPTION:case xt.BUFFER_APPENDING_ERROR:case xt.BUFFER_FULL_ERROR:case xt.LEVEL_SWITCH_ERROR:case xt.BUFFER_STALLED_ERROR:case xt.BUFFER_SEEK_OVER_HOLE:case xt.BUFFER_NUDGE_ON_STALL:t.errorAction=Rd();return}t.type===jn.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,r=Py(n.config.playlistLoadPolicy,e),o=this.playlistError++;if(Nh(r,o,Lh(e),e.response))return{action:qi.RetryRequest,flags:$r.None,retryConfig:r,retryCount:o};const d=this.getLevelSwitchAction(e,t);return r&&(d.retryConfig=r,d.retryCount=o),d}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:o,keyLoadPolicy:u}=t.config,d=Py(e.details.startsWith("key")?u:o,e),g=t.levels.reduce((p,E)=>p+E.fragmentError,0);if(r&&(e.details!==xt.FRAG_GAP&&r.fragmentError++,Nh(d,g,Lh(e),e.response)))return{action:qi.RetryRequest,flags:$r.None,retryConfig:d,retryCount:g};const h=this.getLevelSwitchAction(e,n);return d&&(h.retryConfig=d,h.retryCount=g),h}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var o,u;const h=e.details;r.loadError++,h===xt.BUFFER_APPEND_ERROR&&r.fragmentError++;let p=-1;const{levels:E,loadLevel:b,minAutoLevel:A,maxAutoLevel:T}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const C=(o=e.frag)==null?void 0:o.type,te=(C===zn.AUDIO&&h===xt.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(h===xt.BUFFER_ADD_CODEC_ERROR||h===xt.BUFFER_APPEND_ERROR))&&E.some(({audioCodec:q})=>r.audioCodec!==q),fe=e.sourceBufferName==="video"&&(h===xt.BUFFER_ADD_CODEC_ERROR||h===xt.BUFFER_APPEND_ERROR)&&E.some(({codecSet:q,audioCodec:k})=>r.codecSet!==q&&r.audioCodec===k),{type:De,groupId:Oe}=(u=e.context)!=null?u:{};for(let q=E.length;q--;){const k=(q+b)%E.length;if(k!==b&&k>=A&&k<=T&&E[k].loadError===0){var d,g;const ee=E[k];if(h===xt.FRAG_GAP&&C===zn.MAIN&&e.frag){const Ee=E[k].details;if(Ee){const P=vo(e.frag,Ee.fragments,e.frag.start);if(P!=null&&P.gap)continue}}else{if(De===pa.AUDIO_TRACK&&ee.hasAudioGroup(Oe)||De===pa.SUBTITLE_TRACK&&ee.hasSubtitleGroup(Oe))continue;if(C===zn.AUDIO&&(d=r.audioGroups)!=null&&d.some(Ee=>ee.hasAudioGroup(Ee))||C===zn.SUBTITLE&&(g=r.subtitleGroups)!=null&&g.some(Ee=>ee.hasSubtitleGroup(Ee))||te&&r.audioCodec===ee.audioCodec||fe&&r.codecSet===ee.codecSet||!te&&r.codecSet!==ee.codecSet)continue}p=k;break}}if(p>-1&&n.loadLevel!==p)return e.levelRetry=!0,this.playlistError=0,{action:qi.SendAlternateToPenaltyBox,flags:$r.None,nextAutoLevel:p}}return{action:qi.SendAlternateToPenaltyBox,flags:$r.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case qi.DoNothing:break;case qi.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==xt.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:o,nextAutoLevel:u}=n;switch(r){case $r.None:this.switchLevel(e,u);break;case $r.MoveAllAlternatesMatchingHDCP:o&&(t.maxHdcpLevel=bm[bm.indexOf(o)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,u)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===xt.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=Em(e.mimeType),r=this.hls.levels;for(let o=r.length;o--;)r[o][`${e.sourceBufferName}Codec`]===n&&this.hls.removeLevel(o)}}}function Rd(f){const e={action:qi.DoNothing,flags:$r.None};return f&&(e.resolved=!0),e}var Ti={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Rv{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const o=n[r];if(!o)break;if(o.start<=e&&e<=o.end&&o.loaded)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:r}=this,o=Object.keys(r);for(let u=o.length;u--;){const d=r[o[u]];if(d?.body.type===t&&(!n||d.buffered)){const g=d.body;if(g.start<=e&&e<=g.end)return g}}return null}detectEvictedFragments(e,t,n,r,o){this.timeRanges&&(this.timeRanges[e]=t);const u=r?.fragment.sn||-1;Object.keys(this.fragments).forEach(d=>{const g=this.fragments[d];if(!g||u>=g.body.sn)return;if(!g.buffered&&(!g.loaded||o)){g.body.type===n&&this.removeFragment(g.body);return}const h=g.range[e];if(h){if(h.time.length===0){this.removeFragment(g.body);return}h.time.some(p=>{const E=!this.isTimeBuffered(p.startPTS,p.endPTS,t);return E&&this.removeFragment(g.body),E})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,r=Au(n),o=this.fragments[r];if(!o||o.buffered&&n.gap)return;const u=!n.relurl;Object.keys(t).forEach(d=>{const g=n.elementaryStreams[d];if(!g)return;const h=t[d],p=u||g.partial===!0;o.range[d]=this.getBufferedTimes(n,e.part,p,h)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=n.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),lh(o)||this.removeParts(n.sn-1,n.type)):this.removeFragment(o.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=Fy(n,r=>r.fragment.sn>=e))}fragBuffered(e,t){const n=Au(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const o={time:[],partial:n},u=e.start,d=e.end,g=e.minEndPTS||d,h=e.maxStartPTS||u;for(let p=0;p<r.length;p++){const E=r.start(p)-this.bufferPadding,b=r.end(p)+this.bufferPadding;if(h>=E&&g<=b){o.time.push({startPTS:Math.max(u,r.start(p)),endPTS:Math.min(d,r.end(p))});break}else if(u<b&&d>E){const A=Math.max(u,r.start(p)),T=Math.min(d,r.end(p));T>A&&(o.partial=!0,o.time.push({startPTS:A,endPTS:T}))}else if(d<=E)break}return o}getPartialFragment(e){let t=null,n,r,o,u=0;const{bufferPadding:d,fragments:g}=this;return Object.keys(g).forEach(h=>{const p=g[h];p&&lh(p)&&(r=p.body.start-d,o=p.body.end+d,e>=r&&e<=o&&(n=Math.min(e-r,o-e),u<=n&&(t=p.body,u=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||lh(t))}getState(e){const t=Au(e),n=this.fragments[t];return n?n.buffered?lh(n)?Ti.PARTIAL:Ti.OK:Ti.APPENDING:Ti.NOT_LOADED}isTimeBuffered(e,t,n){let r,o;for(let u=0;u<n.length;u++){if(r=n.start(u)-this.bufferPadding,o=n.end(u)+this.bufferPadding,e>=r&&t<=o)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,r=t.part?null:t,o=Au(n);this.fragments[o]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:o,type:u}=t;if(n.sn==="initSegment")return;const d=n.type;if(r){let h=this.activePartLists[d];h||(this.activePartLists[d]=h=[]),h.push(r)}this.timeRanges=o;const g=o[u];this.detectEvictedFragments(u,g,d,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Au(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let r=n.length;r--;){const o=t[n[r]];if(o?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,r,o){r&&!this.hasGaps||Object.keys(this.fragments).forEach(u=>{const d=this.fragments[u];if(!d)return;const g=d.body;g.type!==n||r&&!g.gap||g.start<t&&g.end>e&&(d.buffered||o)&&this.removeFragment(g)})}removeFragment(e){const t=Au(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const r=e.sn;this.activePartLists[e.type]=Fy(n,o=>o.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function lh(f){var e,t,n;return f.buffered&&!!(f.body.gap||(e=f.range.video)!=null&&e.partial||(t=f.range.audio)!=null&&t.partial||(n=f.range.audiovideo)!=null&&n.partial)}function Au(f){return`${f.type}_${f.level}_${f.sn}`}function Fy(f,e){return f.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var Ul={cbc:0,ctr:1};class Iv{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case Ul.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Ul.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function xv(f){const e=f.byteLength,t=e&&new DataView(f.buffer).getUint8(e-1);return t?f.slice(0,e-t):f}class wv{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(r*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],o=n[1],u=n[2],d=n[3],g=this.invSubMix,h=g[0],p=g[1],E=g[2],b=g[3],A=new Uint32Array(256);let T=0,C=0,O=0;for(O=0;O<256;O++)O<128?A[O]=O<<1:A[O]=O<<1^283;for(O=0;O<256;O++){let te=C^C<<1^C<<2^C<<3^C<<4;te=te>>>8^te&255^99,e[T]=te,t[te]=T;const de=A[T],fe=A[de],De=A[fe];let Oe=A[te]*257^te*16843008;r[T]=Oe<<24|Oe>>>8,o[T]=Oe<<16|Oe>>>16,u[T]=Oe<<8|Oe>>>24,d[T]=Oe,Oe=De*16843009^fe*65537^de*257^T*16843008,h[te]=Oe<<24|Oe>>>8,p[te]=Oe<<16|Oe>>>16,E[te]=Oe<<8|Oe>>>24,b[te]=Oe,T?(T=de^A[A[A[De^de]]],C^=A[A[C]]):T=C=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const u=this.ksRows=(o+6+1)*4;let d,g;const h=this.keySchedule=new Uint32Array(u),p=this.invKeySchedule=new Uint32Array(u),E=this.sBox,b=this.rcon,A=this.invSubMix,T=A[0],C=A[1],O=A[2],te=A[3];let de,fe;for(d=0;d<u;d++){if(d<o){de=h[d]=t[d];continue}fe=de,d%o===0?(fe=fe<<8|fe>>>24,fe=E[fe>>>24]<<24|E[fe>>>16&255]<<16|E[fe>>>8&255]<<8|E[fe&255],fe^=b[d/o|0]<<24):o>6&&d%o===4&&(fe=E[fe>>>24]<<24|E[fe>>>16&255]<<16|E[fe>>>8&255]<<8|E[fe&255]),h[d]=de=(h[d-o]^fe)>>>0}for(g=0;g<u;g++)d=u-g,g&3?fe=h[d]:fe=h[d-4],g<4||d<=4?p[g]=fe:p[g]=T[E[fe>>>24]]^C[E[fe>>>16&255]]^O[E[fe>>>8&255]]^te[E[fe&255]],p[g]=p[g]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,o=this.invKeySchedule,u=this.invSBox,d=this.invSubMix,g=d[0],h=d[1],p=d[2],E=d[3],b=this.uint8ArrayToUint32Array_(n);let A=b[0],T=b[1],C=b[2],O=b[3];const te=new Int32Array(e),de=new Int32Array(te.length);let fe,De,Oe,q,k,ee,Ee,P,xe,Ve,be,_t,Ye,_e;const He=this.networkToHostOrderSwap;for(;t<te.length;){for(xe=He(te[t]),Ve=He(te[t+1]),be=He(te[t+2]),_t=He(te[t+3]),k=xe^o[0],ee=_t^o[1],Ee=be^o[2],P=Ve^o[3],Ye=4,_e=1;_e<r;_e++)fe=g[k>>>24]^h[ee>>16&255]^p[Ee>>8&255]^E[P&255]^o[Ye],De=g[ee>>>24]^h[Ee>>16&255]^p[P>>8&255]^E[k&255]^o[Ye+1],Oe=g[Ee>>>24]^h[P>>16&255]^p[k>>8&255]^E[ee&255]^o[Ye+2],q=g[P>>>24]^h[k>>16&255]^p[ee>>8&255]^E[Ee&255]^o[Ye+3],k=fe,ee=De,Ee=Oe,P=q,Ye=Ye+4;fe=u[k>>>24]<<24^u[ee>>16&255]<<16^u[Ee>>8&255]<<8^u[P&255]^o[Ye],De=u[ee>>>24]<<24^u[Ee>>16&255]<<16^u[P>>8&255]<<8^u[k&255]^o[Ye+1],Oe=u[Ee>>>24]<<24^u[P>>16&255]<<16^u[k>>8&255]<<8^u[ee&255]^o[Ye+2],q=u[P>>>24]<<24^u[k>>16&255]<<16^u[ee>>8&255]<<8^u[Ee&255]^o[Ye+3],de[t]=He(fe^A),de[t+1]=He(q^T),de[t+2]=He(Oe^C),de[t+3]=He(De^O),A=xe,T=Ve,C=be,O=_t,t=t+4}return de.buffer}}class kv{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=Dv(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Dv(f){switch(f){case Ul.cbc:return"AES-CBC";case Ul.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${f}`)}}const Cv=16;class jm{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?xv(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((o,u)=>{const d=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(d,t,n,r);const g=this.flush();g?o(g.buffer):u(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:o,currentResult:u,remainderData:d}=this;if(r!==Ul.cbc||t.byteLength!==16)return Ma.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),d&&(e=Cr(d,e),this.remainderData=null);const g=this.getValidChunk(e);if(!g.length)return null;o&&(n=o);let h=this.softwareDecrypter;h||(h=this.softwareDecrypter=new wv),h.expandKey(t);const p=u;return this.currentResult=h.decrypt(g.buffer,0,n),this.currentIV=g.slice(-16).buffer,p||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new kv(this.subtle,t,r)}return this.fastAesKey.expandKey().then(o=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Iv(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,o)):Promise.reject(new Error("web crypto not initialized"))).catch(o=>(Ma.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${o.name}: ${o.message}`),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const o=this.enableSoftwareAES;if(o){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const u=this.flush();if(u)return u.buffer}throw new Error("WebCrypto"+(o?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%Cv;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Ma.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Uy=Math.pow(2,17);class Lv{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Ys({type:jn.NETWORK_ERROR,details:xt.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,o=r.fLoader,u=r.loader;return new Promise((d,g)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(T=>T[0]==="GAP")){g(jy(e));return}else e.gap=!1;const h=this.loader=o?new o(r):new u(r),p=By(e);e.loader=h;const E=zy(r.fragLoadPolicy.default),b={loadPolicy:E,timeout:E.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Uy};e.stats=h.stats;const A={onSuccess:(T,C,O,te)=>{this.resetLoader(e,h);let de=T.data;O.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(de.slice(0,16)),de=de.slice(16)),d({frag:e,part:null,payload:de,networkDetails:te})},onError:(T,C,O,te)=>{this.resetLoader(e,h),g(new Ys({type:jn.NETWORK_ERROR,details:xt.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:za({url:n,data:void 0},T),error:new Error(`HTTP Error ${T.code} ${T.text}`),networkDetails:O,stats:te}))},onAbort:(T,C,O)=>{this.resetLoader(e,h),g(new Ys({type:jn.NETWORK_ERROR,details:xt.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:O,stats:T}))},onTimeout:(T,C,O)=>{this.resetLoader(e,h),g(new Ys({type:jn.NETWORK_ERROR,details:xt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${b.timeout}ms`),networkDetails:O,stats:T}))}};t&&(A.onProgress=(T,C,O,te)=>t({frag:e,part:null,payload:O,networkDetails:te})),h.load(p,b,A)})}loadPart(e,t,n){this.abort();const r=this.config,o=r.fLoader,u=r.loader;return new Promise((d,g)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){g(jy(e,t));return}const h=this.loader=o?new o(r):new u(r),p=By(e,t);e.loader=h;const E=zy(r.fragLoadPolicy.default),b={loadPolicy:E,timeout:E.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Uy};t.stats=h.stats,h.load(p,b,{onSuccess:(A,T,C,O)=>{this.resetLoader(e,h),this.updateStatsFromPart(e,t);const te={frag:e,part:t,payload:A.data,networkDetails:O};n(te),d(te)},onError:(A,T,C,O)=>{this.resetLoader(e,h),g(new Ys({type:jn.NETWORK_ERROR,details:xt.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:za({url:p.url,data:void 0},A),error:new Error(`HTTP Error ${A.code} ${A.text}`),networkDetails:C,stats:O}))},onAbort:(A,T,C)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,h),g(new Ys({type:jn.NETWORK_ERROR,details:xt.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:C,stats:A}))},onTimeout:(A,T,C)=>{this.resetLoader(e,h),g(new Ys({type:jn.NETWORK_ERROR,details:xt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${b.timeout}ms`),networkDetails:C,stats:A}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,o=r.total;if(n.loaded+=r.loaded,o){const g=Math.round(e.duration/t.duration),h=Math.min(Math.round(n.loaded/o),g),E=(g-h)*Math.round(n.loaded/h);n.total=n.loaded+E}else n.total=Math.max(n.loaded,n.total);const u=n.loading,d=r.loading;u.start?u.first+=d.first-d.start:(u.start=d.start,u.first=d.first),u.end=d.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function By(f,e=null){const t=e||f,n={frag:f,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(wn(r)&&wn(o)){var u;let d=r,g=o;if(f.sn==="initSegment"&&Nv((u=f.decryptdata)==null?void 0:u.method)){const h=o-r;h%16&&(g=o+(16-h%16)),r!==0&&(n.resetIV=!0,d=r-16)}n.rangeStart=d,n.rangeEnd=g}return n}function jy(f,e){const t=new Error(`GAP ${f.gap?"tag":"attribute"} found`),n={type:jn.MEDIA_ERROR,details:xt.FRAG_GAP,fatal:!1,frag:f,error:t,networkDetails:null};return e&&(n.part=e),(e||f).stats.aborted=!0,new Ys(n)}function Nv(f){return f==="AES-128"||f==="AES-256"}class Ys extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class eb extends Xr{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class qm{constructor(e,t,n,r=0,o=-1,u=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=oh(),this.buffering={audio:oh(),video:oh(),audiovideo:oh()},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=o,this.partial=u}}function oh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const qy={length:0,start:()=>0,end:()=>0};class aa{static isBuffered(e,t){if(e){const n=aa.getBuffered(e);for(let r=n.length;r--;)if(t>=n.start(r)&&t<=n.end(r))return!0}return!1}static bufferedRanges(e){if(e){const t=aa.getBuffered(e);return aa.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=aa.bufferedRanges(e);if(r.length)return aa.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((p,E)=>p.start-E.start||E.end-p.end);let r=-1,o=[];if(n)for(let p=0;p<e.length;p++){t>=e[p].start&&t<=e[p].end&&(r=p);const E=o.length;if(E){const b=o[E-1].end;e[p].start-b<n?e[p].end>b&&(o[E-1].end=e[p].end):o.push(e[p])}else o.push(e[p])}else o=e;let u=0,d,g=t,h=t;for(let p=0;p<o.length;p++){const E=o[p].start,b=o[p].end;if(r===-1&&t>=E&&t<=b&&(r=p),t+n>=E&&t<b)g=E,h=b,u=h-t;else if(t+n<E){d=E;break}}return{len:u,start:g||0,end:h||0,nextStart:d,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||qy}catch(t){return Ma.log("failed to get media.buffered",t),qy}}}const tb=/\{\$([a-zA-Z0-9-_]+)\}/g;function Gy(f){return tb.test(f)}function Tm(f,e){if(f.variableList!==null||f.hasVariableRefs){const t=f.variableList;return e.replace(tb,n=>{const r=n.substring(2,n.length-1),o=t?.[r];return o===void 0?(f.playlistParsingError||(f.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),n):o})}return e}function Hy(f,e,t){let n=f.variableList;n||(f.variableList=n={});let r,o;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const u=new self.URL(t).searchParams;if(u.has(r))o=u.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(u){f.playlistParsingError||(f.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${u.message}`))}}else r=e.NAME,o=e.VALUE;r in n?f.playlistParsingError||(f.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):n[r]=o||""}function Mv(f,e,t){const n=e.IMPORT;if(t&&n in t){let r=f.variableList;r||(f.variableList=r={}),r[n]=t[n]}else f.playlistParsingError||(f.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const Ov=/^(\d+)x(\d+)$/,Vy=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ti{constructor(e,t){typeof e=="string"&&(e=ti.parseAttrList(e,t)),Fa(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(r*2,r*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((r,o)=>(r[o.toLowerCase()]=!0,r),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=Ov.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={};for(Vy.lastIndex=0;(n=Vy.exec(e))!==null;){const u=n[1].trim();let d=n[2];const g=d.indexOf('"')===0&&d.lastIndexOf('"')===d.length-1;let h=!1;if(g)d=d.slice(1,-1);else switch(u){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":h=!0}if(t&&(g||h))d=Tm(t,d);else if(!h&&!g)switch(u){case"CLOSED-CAPTIONS":if(d==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ma.warn(`${e}: attribute ${u} is missing quotes`)}r[u]=d}return r}}const Pv="com.apple.hls.interstitial";function zv(f){return f!=="ID"&&f!=="CLASS"&&f!=="CUE"&&f!=="START-DATE"&&f!=="DURATION"&&f!=="END-DATE"&&f!=="END-ON-NEXT"}function Fv(f){return f==="SCTE35-OUT"||f==="SCTE35-IN"||f==="SCTE35-CMD"}class nb{constructor(e,t,n=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(r=t?.tagOrder)!=null?r:n,t){const o=t.attr;for(const u in o)if(Object.prototype.hasOwnProperty.call(e,u)&&e[u]!==o[u]){Ma.warn(`DATERANGE tag attribute: "${u}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=u;break}e=Fa(new ti({}),o,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const o=t?.endDate||new Date(this.attr["END-DATE"]);wn(o.getTime())&&(this._endDate=o)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ma.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(wn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Pv}get isValid(){return!!this.id&&!this._badValueForSameId&&wn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Uv=10;class Bv{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?wn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Uv}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Du(f){return f==="AES-128"||f==="AES-256"||f==="AES-256-CTR"}function Gm(f){switch(f){case"AES-128":case"AES-256":return Ul.cbc;case"AES-256-CTR":return Ul.ctr;default:throw new Error(`invalid full segment method ${f}`)}}function Hm(f){return Uint8Array.from(atob(f),e=>e.charCodeAt(0))}function vm(f){return Uint8Array.from(unescape(encodeURIComponent(f)),e=>e.charCodeAt(0))}function jv(f){const e=vm(f).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function qv(f){const e=function(n,r,o){const u=n[r];n[r]=n[o],n[o]=u};e(f,0,3),e(f,1,2),e(f,4,5),e(f,6,7)}function Gv(f){const e=f.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),r=n[n.length-1].split(",");if(r.length===2){const o=r[0]==="base64",u=r[1];o?(n.splice(-1,1),t=Hm(u)):t=jv(u)}}return t}const Mh=typeof self<"u"?self:void 0;var oi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},rr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function vh(f){switch(f){case rr.FAIRPLAY:return oi.FAIRPLAY;case rr.PLAYREADY:return oi.PLAYREADY;case rr.WIDEVINE:return oi.WIDEVINE;case rr.CLEARKEY:return oi.CLEARKEY}}function Xg(f){switch(f){case oi.FAIRPLAY:return rr.FAIRPLAY;case oi.PLAYREADY:return rr.PLAYREADY;case oi.WIDEVINE:return rr.WIDEVINE;case oi.CLEARKEY:return rr.CLEARKEY}}function bd(f){const{drmSystems:e,widevineLicenseUrl:t}=f,n=e?[oi.FAIRPLAY,oi.WIDEVINE,oi.PLAYREADY,oi.CLEARKEY].filter(r=>!!e[r]):[];return!n[oi.WIDEVINE]&&t&&n.push(oi.WIDEVINE),n}const ab=function(f){return Mh!=null&&(f=Mh.navigator)!=null&&f.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Hv(f,e,t,n){let r;switch(f){case oi.FAIRPLAY:r=["cenc","sinf"];break;case oi.WIDEVINE:case oi.PLAYREADY:r=["cenc"];break;case oi.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${f}`)}return Vv(r,e,t,n)}function Vv(f,e,t,n){return[{initDataTypes:f,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs=${o}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs=${o}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Yv(f){var e;return f.sessionType==="persistent-license"||!!((e=f.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function Kv(f){const e=new Uint16Array(f.buffer,f.byteOffset,f.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),u=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(u){const d=u.childNodes[0]?u.childNodes[0].nodeValue:u.getAttribute("VALUE");if(d){const g=Hm(d).subarray(0,16);return qv(g),g}}return null}let uh={};class Uh{static clearKeyUriToKeyIdMap(){uh={}}constructor(e,t,n,r=[1],o=null,u){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Du(e),u!=null&&u.startsWith("0x")&&(this.keyId=new Uint8Array(zE(u)))}matches(e){var t,n;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((t=e.iv)==null?void 0:t.join(","))===((n=this.iv)==null?void 0:n.join(","))}isSupported(){if(this.method){if(Du(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case rr.FAIRPLAY:case rr.WIDEVINE:case rr.PLAYREADY:case rr.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(Du(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Ma.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=$v(e);return new Uh(this.method,this.uri,"identity",this.keyFormatVersions,n)}if(this.pssh&&this.keyId)return this;const t=Gv(this.uri);if(t)switch(this.keyFormat){case rr.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const n=t.length-22;this.keyId=t.subarray(n,n+16)}break;case rr.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=ZT(n,null,t),this.keyId=Kv(t);break}default:{let n=t.subarray(0,16);if(n.length!==16){const r=new Uint8Array(16);r.set(n,16-n.length),n=r}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=uh[this.uri];if(!n){const r=Object.keys(uh).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,r),uh[this.uri]=n}this.keyId=n}return this}}function $v(f){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=f>>8*(15-t)&255;return e}const Yy=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Ky=/#EXT-X-MEDIA:(.*)/g,Wv=/^#EXT(?:INF|-X-TARGETDURATION):/m,Qg=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Xv=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Es{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return Om.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Wv.test(e)}static parseMasterPlaylist(e,t){const n=Gy(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},o=[];Yy.lastIndex=0;let u;for(;(u=Yy.exec(e))!=null;)if(u[1]){var d;const h=new ti(u[1],r),p=Tm(r,u[2]),E={attrs:h,bitrate:h.decimalInteger("BANDWIDTH")||h.decimalInteger("AVERAGE-BANDWIDTH"),name:h.NAME,url:Es.resolve(p,t)},b=h.decimalResolution("RESOLUTION");b&&(E.width=b.width,E.height=b.height),Xy(h.CODECS,E);const A=h["SUPPLEMENTAL-CODECS"];A&&(E.supplemental={},Xy(A,E.supplemental)),(d=E.unknownCodecs)!=null&&d.length||o.push(E),r.levels.push(E)}else if(u[3]){const h=u[3],p=u[4];switch(h){case"SESSION-DATA":{const E=new ti(p,r),b=E["DATA-ID"];b&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[b]=E);break}case"SESSION-KEY":{const E=$y(p,t,r);E.encrypted&&E.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(E)):Ma.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${p}"`);break}case"DEFINE":{{const E=new ti(p,r);Hy(r,E,t)}break}case"CONTENT-STEERING":{const E=new ti(p,r);r.contentSteering={uri:Es.resolve(E["SERVER-URI"],t),pathwayId:E["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=Wy(p);break}}}const g=o.length>0&&o.length<r.levels.length;return r.levels=g?o:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,n){let r;const o={},u=n.levels,d={AUDIO:u.map(h=>({id:h.attrs.AUDIO,audioCodec:h.audioCodec})),SUBTITLES:u.map(h=>({id:h.attrs.SUBTITLES,textCodec:h.textCodec})),"CLOSED-CAPTIONS":[]};let g=0;for(Ky.lastIndex=0;(r=Ky.exec(e))!==null;){const h=new ti(r[1],n),p=h.TYPE;if(p){const E=d[p],b=o[p]||[];o[p]=b;const A=h.LANGUAGE,T=h["ASSOC-LANGUAGE"],C=h.CHANNELS,O=h.CHARACTERISTICS,te=h["INSTREAM-ID"],de={attrs:h,bitrate:0,id:g++,groupId:h["GROUP-ID"]||"",name:h.NAME||A||"",type:p,default:h.bool("DEFAULT"),autoselect:h.bool("AUTOSELECT"),forced:h.bool("FORCED"),lang:A,url:h.URI?Es.resolve(h.URI,t):""};if(T&&(de.assocLang=T),C&&(de.channels=C),O&&(de.characteristics=O),te&&(de.instreamId=te),E!=null&&E.length){const fe=Es.findGroup(E,de.groupId)||E[0];Qy(de,fe,"audioCodec"),Qy(de,fe,"textCodec")}b.push(de)}}return o}static parseLevelPlaylist(e,t,n,r,o,u){var d;const g={url:t},h=new Bv(t),p=h.fragments,E=[];let b=null,A=0,T=0,C=0,O=0,te=0,de=null,fe=new Kg(r,g),De,Oe,q,k=-1,ee=!1,Ee=null,P;if(Qg.lastIndex=0,h.m3u8=e,h.hasVariableRefs=Gy(e),((d=Qg.exec(e))==null?void 0:d[0])!=="#EXTM3U")return h.playlistParsingError=new Error("Missing format identifier #EXTM3U"),h;for(;(De=Qg.exec(e))!==null;){ee&&(ee=!1,fe=new Kg(r,g),fe.playlistOffset=C,fe.setStart(C),fe.sn=A,fe.cc=O,te&&(fe.bitrate=te),fe.level=n,b&&(fe.initSegment=b,b.rawProgramDateTime&&(fe.rawProgramDateTime=b.rawProgramDateTime,b.rawProgramDateTime=null),Ee&&(fe.setByteRange(Ee),Ee=null)));const _t=De[1];if(_t){fe.duration=parseFloat(_t);const Ye=(" "+De[2]).slice(1);fe.title=Ye||null,fe.tagList.push(Ye?["INF",_t,Ye]:["INF",_t])}else if(De[3]){if(wn(fe.duration)){fe.playlistOffset=C,fe.setStart(C),q&&Jy(fe,q,h),fe.sn=A,fe.level=n,fe.cc=O,p.push(fe);const Ye=(" "+De[3]).slice(1);fe.relurl=Tm(h,Ye),Sm(fe,de,E),de=fe,C+=fe.duration,A++,T=0,ee=!0}}else{if(De=De[0].match(Xv),!De){Ma.warn("No matches on slow regex match for level playlist!");continue}for(Oe=1;Oe<De.length&&De[Oe]===void 0;Oe++);const Ye=(" "+De[Oe]).slice(1),_e=(" "+De[Oe+1]).slice(1),He=De[Oe+2]?(" "+De[Oe+2]).slice(1):null;switch(Ye){case"BYTERANGE":de?fe.setByteRange(_e,de):fe.setByteRange(_e);break;case"PROGRAM-DATE-TIME":fe.rawProgramDateTime=_e,fe.tagList.push(["PROGRAM-DATE-TIME",_e]),k===-1&&(k=p.length);break;case"PLAYLIST-TYPE":h.type&&qs(h,Ye,De),h.type=_e.toUpperCase();break;case"MEDIA-SEQUENCE":h.startSN!==0?qs(h,Ye,De):p.length>0&&eE(h,Ye,De),A=h.startSN=parseInt(_e);break;case"SKIP":{h.skippedSegments&&qs(h,Ye,De);const nt=new ti(_e,h),ut=nt.decimalInteger("SKIPPED-SEGMENTS");if(wn(ut)){h.skippedSegments+=ut;for(let Be=ut;Be--;)p.push(null);A+=ut}const Pe=nt.enumeratedString("RECENTLY-REMOVED-DATERANGES");Pe&&(h.recentlyRemovedDateranges=(h.recentlyRemovedDateranges||[]).concat(Pe.split("	")));break}case"TARGETDURATION":h.targetduration!==0&&qs(h,Ye,De),h.targetduration=Math.max(parseInt(_e),1);break;case"VERSION":h.version!==null&&qs(h,Ye,De),h.version=parseInt(_e);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":h.live||qs(h,Ye,De),h.live=!1;break;case"#":(_e||He)&&fe.tagList.push(He?[_e,He]:[_e]);break;case"DISCONTINUITY":O++,fe.tagList.push(["DIS"]);break;case"GAP":fe.gap=!0,fe.tagList.push([Ye]);break;case"BITRATE":fe.tagList.push([Ye,_e]),te=parseInt(_e)*1e3,wn(te)?fe.bitrate=te:te=0;break;case"DATERANGE":{const nt=new ti(_e,h),ut=new nb(nt,h.dateRanges[nt.ID],h.dateRangeTagCount);h.dateRangeTagCount++,ut.isValid||h.skippedSegments?h.dateRanges[ut.id]=ut:Ma.warn(`Ignoring invalid DATERANGE tag: "${_e}"`),fe.tagList.push(["EXT-X-DATERANGE",_e]);break}case"DEFINE":{{const nt=new ti(_e,h);"IMPORT"in nt?Mv(h,nt,u):Hy(h,nt,t)}break}case"DISCONTINUITY-SEQUENCE":h.startCC!==0?qs(h,Ye,De):p.length>0&&eE(h,Ye,De),h.startCC=O=parseInt(_e);break;case"KEY":{const nt=$y(_e,t,h);if(nt.isSupported()){if(nt.method==="NONE"){q=void 0;break}q||(q={});const ut=q[nt.keyFormat];ut!=null&&ut.matches(nt)||(ut&&(q=Fa({},q)),q[nt.keyFormat]=nt)}else Ma.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${_e}"`);break}case"START":h.startTimeOffset=Wy(_e);break;case"MAP":{const nt=new ti(_e,h);if(fe.duration){const ut=new Kg(r,g);Zy(ut,nt,n,q),b=ut,fe.initSegment=b,b.rawProgramDateTime&&!fe.rawProgramDateTime&&(fe.rawProgramDateTime=b.rawProgramDateTime)}else{const ut=fe.byteRangeEndOffset;if(ut){const Pe=fe.byteRangeStartOffset;Ee=`${ut-Pe}@${Pe}`}else Ee=null;Zy(fe,nt,n,q),b=fe,ee=!0}b.cc=O;break}case"SERVER-CONTROL":{P&&qs(h,Ye,De),P=new ti(_e),h.canBlockReload=P.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=P.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=h.canSkipUntil>0&&P.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=P.optionalFloat("PART-HOLD-BACK",0),h.holdBack=P.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{h.partTarget&&qs(h,Ye,De);const nt=new ti(_e);h.partTarget=nt.decimalFloatingPoint("PART-TARGET");break}case"PART":{let nt=h.partList;nt||(nt=h.partList=[]);const ut=T>0?nt[nt.length-1]:void 0,Pe=T++,Be=new ti(_e,h),it=new UT(Be,fe,g,Pe,ut);nt.push(it),fe.duration+=it.duration;break}case"PRELOAD-HINT":{const nt=new ti(_e,h);h.preloadHint=nt;break}case"RENDITION-REPORT":{const nt=new ti(_e,h);h.renditionReports=h.renditionReports||[],h.renditionReports.push(nt);break}default:Ma.warn(`line parsed but not handled: ${De}`);break}}}de&&!de.relurl?(p.pop(),C-=de.duration,h.partList&&(h.fragmentHint=de)):h.partList&&(Sm(fe,de,E),fe.cc=O,h.fragmentHint=fe,q&&Jy(fe,q,h)),h.targetduration||(h.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const xe=p.length,Ve=p[0],be=p[xe-1];if(C+=h.skippedSegments*h.targetduration,C>0&&xe&&be){h.averagetargetduration=C/xe;const _t=be.sn;h.endSN=_t!=="initSegment"?_t:0,h.live||(be.endList=!0),k>0&&(Zv(p,k),Ve&&E.unshift(Ve))}return h.fragmentHint&&(C+=h.fragmentHint.duration),h.totalduration=C,E.length&&h.dateRangeTagCount&&Ve&&ib(E,h),h.endCC=O,h}}function ib(f,e){const t=f.length;if(!t)return;const n=f[t-1],r=e.live?1/0:e.totalduration,o=Object.keys(e.dateRanges);for(let d=o.length;d--;){const g=e.dateRanges[o[d]],h=g.startDate.getTime();g.tagAnchor=n.ref;for(let p=t;p--;){var u;if(((u=f[p])==null?void 0:u.sn)<e.startSN)break;const E=Qv(e,h,f,p,r);if(E!==-1){g.tagAnchor=e.fragments[E].ref;break}}}}function Qv(f,e,t,n,r){const o=t[n];if(o){const d=o.programDateTime;if(e>=d||n===0){var u;const g=(((u=t[n+1])==null?void 0:u.start)||r)-o.start;if(e<=d+g*1e3){const h=t[n].sn-f.startSN;if(h<0)return-1;const p=f.fragments;if(p.length>t.length){const b=(t[n+1]||p[p.length-1]).sn-f.startSN;for(let A=b;A>h;A--){const T=p[A].programDateTime;if(e>=T&&e<T+p[A].duration*1e3)return A}}return h}}}return-1}function $y(f,e,t){var n,r;const o=new ti(f,t),u=(n=o.METHOD)!=null?n:"",d=o.URI,g=o.hexadecimalInteger("IV"),h=o.KEYFORMATVERSIONS,p=(r=o.KEYFORMAT)!=null?r:"identity";d&&o.IV&&!g&&Ma.error(`Invalid IV: ${o.IV}`);const E=d?Es.resolve(d,e):"",b=(h||"1").split("/").map(Number).filter(Number.isFinite);return new Uh(u,E,p,b,g,o.KEYID)}function Wy(f){const t=new ti(f).decimalFloatingPoint("TIME-OFFSET");return wn(t)?t:null}function Xy(f,e){let t=(f||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const r=t.filter(o=>Fm(o,n));r.length&&(e[`${n}Codec`]=r.map(o=>o.split("/")[0]).join(","),t=t.filter(o=>r.indexOf(o)===-1))}),e.unknownCodecs=t}function Qy(f,e,t){const n=e[t];n&&(f[t]=n)}function Zv(f,e){let t=f[e];for(let n=e;n--;){const r=f[n];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function Sm(f,e,t){f.rawProgramDateTime?t.push(f):e!=null&&e.programDateTime&&(f.programDateTime=e.endProgramDateTime)}function Zy(f,e,t,n){f.relurl=e.URI,e.BYTERANGE&&f.setByteRange(e.BYTERANGE),f.level=t,f.sn="initSegment",n&&(f.levelkeys=n),f.initSegment=null}function Jy(f,e,t){f.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&n.push(f)}function qs(f,e,t){f.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function eE(f,e,t){f.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function Zg(f,e){const t=e.startPTS;if(wn(t)){let n=0,r;e.sn>f.sn?(n=t-f.start,r=f):(n=f.start-t,r=e),r.duration!==n&&r.setDuration(n)}else e.sn>f.sn?f.cc===e.cc&&f.minEndPTS?e.setStart(f.start+(f.minEndPTS-f.start)):e.setStart(f.start+f.duration):e.setStart(Math.max(f.start-e.duration,0))}function rb(f,e,t,n,r,o,u){n-t<=0&&(u.warn("Fragment should have a positive duration",e),n=t+e.duration,o=r+e.duration);let g=t,h=n;const p=e.startPTS,E=e.endPTS;if(wn(p)){const te=Math.abs(p-t);f&&te>f.totalduration?u.warn(`media timestamps and playlist times differ by ${te}s for level ${e.level} ${f.url}`):wn(e.deltaPTS)?e.deltaPTS=Math.max(te,e.deltaPTS):e.deltaPTS=te,g=Math.max(t,p),t=Math.min(t,p),r=e.startDTS!==void 0?Math.min(r,e.startDTS):r,h=Math.min(n,E),n=Math.max(n,E),o=e.endDTS!==void 0?Math.max(o,e.endDTS):o}const b=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=g,e.startDTS=r,e.endPTS=n,e.minEndPTS=h,e.endDTS=o;const A=e.sn;if(!f||A<f.startSN||A>f.endSN)return 0;let T;const C=A-f.startSN,O=f.fragments;for(O[C]=e,T=C;T>0;T--)Zg(O[T],O[T-1]);for(T=C;T<O.length-1;T++)Zg(O[T],O[T+1]);return f.fragmentHint&&Zg(O[O.length-1],f.fragmentHint),f.PTSKnown=f.alignedSliding=!0,b}function Jv(f,e,t){if(f===e)return;let n=null;const r=f.fragments;for(let p=r.length-1;p>=0;p--){const E=r[p].initSegment;if(E){n=E;break}}f.fragmentHint&&delete f.fragmentHint.endPTS;let o;nS(f,e,(p,E,b,A)=>{if((!e.startCC||e.skippedSegments)&&E.cc!==p.cc){const T=p.cc-E.cc;for(let C=b;C<A.length;C++)A[C].cc+=T;e.endCC=A[A.length-1].cc}wn(p.startPTS)&&wn(p.endPTS)&&(E.setStart(E.startPTS=p.startPTS),E.startDTS=p.startDTS,E.maxStartPTS=p.maxStartPTS,E.endPTS=p.endPTS,E.endDTS=p.endDTS,E.minEndPTS=p.minEndPTS,E.setDuration(p.endPTS-p.startPTS),E.duration&&(o=E),e.PTSKnown=e.alignedSliding=!0),p.hasStreams&&(E.elementaryStreams=p.elementaryStreams),E.loader=p.loader,p.hasStats&&(E.stats=p.stats),p.initSegment&&(E.initSegment=p.initSegment,n=p.initSegment)});const u=e.fragments,d=e.fragmentHint?u.concat(e.fragmentHint):u;if(n&&d.forEach(p=>{var E;p&&(!p.initSegment||p.initSegment.relurl===((E=n)==null?void 0:E.relurl))&&(p.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=u.some(p=>!p),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let p=e.skippedSegments;p--;)u.shift();e.startSN=u[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=eS(f.dateRanges,e,t));const p=f.fragments.filter(E=>E.rawProgramDateTime);if(f.hasProgramDateTime&&!e.hasProgramDateTime)for(let E=1;E<d.length;E++)d[E].programDateTime===null&&Sm(d[E],d[E-1],p);ib(p,e)}e.endCC=u[u.length-1].cc}if(!e.startCC){var g;const p=ob(f,e.startSN-1);e.startCC=(g=p?.cc)!=null?g:u[0].cc}tS(f.partList,e.partList,(p,E)=>{E.elementaryStreams=p.elementaryStreams,E.stats=p.stats}),o?rb(e,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS,t):sb(f,e),u.length&&(e.totalduration=e.edge-u[0].start),e.driftStartTime=f.driftStartTime,e.driftStart=f.driftStart;const h=e.advancedDateTime;if(e.advanced&&h){const p=e.edge;e.driftStart||(e.driftStartTime=h,e.driftStart=p),e.driftEndTime=h,e.driftEnd=p}else e.driftEndTime=f.driftEndTime,e.driftEnd=f.driftEnd,e.advancedDateTime=f.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=f.requestScheduled)}function eS(f,e,t){const{dateRanges:n,recentlyRemovedDateranges:r}=e,o=Fa({},f);r&&r.forEach(g=>{delete o[g]});const d=Object.keys(o).length;return d&&Object.keys(n).forEach(g=>{const h=o[g],p=new nb(n[g].attr,h);p.isValid?(o[g]=p,h||(p.tagOrder+=d)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ya(n[g].attr)}"`)}),o}function tS(f,e,t){if(f&&e){let n=0;for(let r=0,o=f.length;r<=o;r++){const u=f[r],d=e[r+n];u&&d&&u.index===d.index&&u.fragment.sn===d.fragment.sn?t(u,d):n--}}}function nS(f,e,t){const n=e.skippedSegments,r=Math.max(f.startSN,e.startSN)-e.startSN,o=(f.fragmentHint?1:0)+(n?e.endSN:Math.min(f.endSN,e.endSN))-e.startSN,u=e.startSN-f.startSN,d=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,g=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments;for(let h=r;h<=o;h++){const p=g[u+h];let E=d[h];if(n&&!E&&p&&(E=e.fragments[h]=p),p&&E){if(t(p,E,h,d),p.url&&p.url!==E.url){e.playlistParsingError=tE(`media sequence mismatch ${E.sn}:`,f,e,p,E);return}else if(p.cc!==E.cc){e.playlistParsingError=tE(`discontinuity sequence mismatch (${p.cc}!=${E.cc})`,f,e,p,E);return}}}}function tE(f,e,t,n,r){return new Error(`${f} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function sb(f,e,t=!0){const n=e.startSN+e.skippedSegments-f.startSN,r=f.fragments,o=n>=0;let u=0;if(o&&n<r.length)u=r[n].start;else if(o&&e.startSN===f.endSN+1)u=f.fragmentEnd;else if(o&&t)u=f.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)u=f.fragmentStart;else return;_m(e,u)}function _m(f,e){if(e){const t=f.fragments;for(let n=f.skippedSegments;n<t.length;n++)t[n].addStart(e);f.fragmentHint&&f.fragmentHint.addStart(e)}}function lb(f,e=1/0){let t=1e3*f.targetduration;if(f.updated){const n=f.fragments;if(n.length&&t*4>e){const o=n[n.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function ob(f,e,t){if(!f)return null;let n=f.fragments[e-f.startSN];return n||(n=f.fragmentHint,n&&n.sn===e)?n:e<f.startSN&&t&&t.sn===e?t:null}function nE(f,e,t){return f?ub(f.partList,e,t):null}function ub(f,e,t){if(f)for(let n=f.length;n--;){const r=f[n];if(r.index===t&&r.fragment.sn===e)return r}return null}function cb(f){f.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(r=>{r.level=t,r.initSegment&&(r.initSegment.level=t)})})}function Td(f,e){for(let n=0,r=f.length;n<r;n++){var t;if(((t=f[n])==null?void 0:t.cc)===e)return f[n]}return null}function aS(f,e){return!!(f&&e.startCC<f.endCC&&e.endCC>f.startCC)}function aE(f,e){const t=f.start+e;f.startPTS=t,f.setStart(t),f.endPTS=t+f.duration}function db(f,e){const t=e.fragments;for(let n=0,r=t.length;n<r;n++)aE(t[n],f);e.fragmentHint&&aE(e.fragmentHint,f),e.alignedSliding=!0}function iS(f,e){f&&(fb(e,f),e.alignedSliding||Oh(e,f),!e.alignedSliding&&!e.skippedSegments&&sb(f,e,!1))}function fb(f,e){if(!aS(e,f))return;const t=Math.min(e.endCC,f.endCC),n=Td(e.fragments,t),r=Td(f.fragments,t);if(!n||!r)return;Ma.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const o=n.start-r.start;db(o,f)}function Oh(f,e){if(!f.hasProgramDateTime||!e.hasProgramDateTime)return;const t=f.fragments,n=e.fragments;if(!t.length||!n.length)return;let r,o;const u=Math.min(e.endCC,f.endCC);e.startCC<u&&f.startCC<u&&(r=Td(n,u),o=Td(t,u)),(!r||!o)&&(r=n[Math.floor(n.length/2)],o=Td(t,r.cc)||t[Math.floor(t.length/2)]);const d=r.programDateTime,g=o.programDateTime;if(!d||!g)return;const h=(g-d)/1e3-(o.start-r.start);db(h,f)}const rS={toString:function(f){let e="";const t=f.length;for(let n=0;n<t;n++)e+=`[${f.start(n).toFixed(3)}-${f.end(n).toFixed(3)}]`;return e}},sn={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Vm extends eb{constructor(e,t,n,r,o){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=sn.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:u,fragCurrent:d,media:g,mediaBuffer:h,state:p}=this,E=g?g.currentTime:0,b=aa.bufferInfo(h||g,E,u.maxBufferHole),A=!b.len;if(this.log(`Media seeking to ${wn(E)?E.toFixed(3):E}, state: ${p}, ${A?"out of":"in"} buffer`),this.state===sn.ENDED)this.resetLoadingState();else if(d){const T=u.maxFragLookUpTolerance,C=d.start-T,O=d.start+d.duration+T;if(A||O<b.start||C>b.end){const te=E>O;(E<C||te)&&(te&&d.loader&&(this.log(`Cancelling fragment load for seek (sn: ${d.sn})`),d.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(g){this.fragmentTracker.removeFragmentsInRange(E,1/0,this.playlistType,!0);const T=this.lastCurrentTime;if(E>T&&(this.lastCurrentTime=E),!this.loadingParts){const C=Math.max(b.end,E),O=this.shouldLoadParts(this.getLevelDetails(),C);O&&(this.log(`LL-Part loading ON after seeking to ${E.toFixed(2)} with buffer @${C.toFixed(2)}`),this.loadingParts=O)}}this.hls.hasEnoughToStart||(this.log(`Setting ${A?"startPosition":"nextLoadPosition"} to ${E} for seek without enough to start`),this.nextLoadPosition=E,A&&(this.startPosition=E)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=o,this.hls=e,this.fragmentLoader=new Lv(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new jm(e.config)}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===sn.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=sn.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const o=e.buffered;this.config.maxBufferHole&&o&&o.length>1&&(e=aa.bufferedInfo(o,e.start,0));const u=e.nextStart;if(u&&u>r&&u<t.edge||this.media.currentTime<e.start)return!1;const g=t.partList;if(g!=null&&g.length){const p=g[g.length-1];return aa.isBuffered(this.media,p.start+p.duration/2)}const h=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(h)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),n.addEventListener("seeking",this.onMediaSeeking),n.addEventListener("ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===sn.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=sn.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const r=o=>{const u=o.frag;if(this.fragContextChanged(u)){this.warn(`${u.type} sn: ${u.sn}${o.part?" part: "+o.part.index:""} of ${this.fragInfo(u,!1,o.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(u);return}u.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,n,r).then(o=>{if(!o)return;const u=this.state,d=o.frag;if(this.fragContextChanged(d)){(u===sn.FRAG_LOADING||!this.fragCurrent&&u===sn.PARSING)&&(this.fragmentTracker.removeFragment(d),this.state=sn.IDLE);return}"payload"in o&&(this.log(`Loaded ${d.type} sn: ${d.sn} of ${this.playlistLabel()} ${d.level}`),this.hls.trigger(pe.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===sn.STOPPED||this.state===sn.ERROR||(this.warn(`Frag error: ${o?.message||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===Ti.APPENDING){const o=e.type,u=this.getFwdBufferInfo(this.mediaBuffer,o),d=Math.max(e.duration,u?u.len:this.config.maxBufferLength),g=this.backtrackFragment;((g?e.sn-g.sn:0)===1||this.reduceMaxBufferLength(d,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Ti.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(pe.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const r=n?.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:r}=this,{frag:o,payload:u}=n,d=o.decryptdata;if(u&&u.byteLength>0&&d!=null&&d.key&&d.iv&&Du(d.method)){const g=self.performance.now();return this.decrypter.decrypt(new Uint8Array(u),d.key.buffer,d.iv.buffer,Gm(d.method)).catch(h=>{throw r.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_DECRYPT_ERROR,fatal:!1,error:h,reason:h.message,frag:o}),h}).then(h=>{const p=self.performance.now();return r.trigger(pe.FRAG_DECRYPTED,{frag:o,payload:h,stats:{tstart:g,tdecrypt:p}}),n.payload=h,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===sn.STOPPED||this.state===sn.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==sn.STOPPED&&(this.state=sn.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,r;const o=e.tracks;if(o&&!t.encrypted&&((n=o.audio)!=null&&n.encrypted||(r=o.video)!=null&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const u=this.media,d=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${u?"attached mediaKeys: "+u.mediaKeys:"detached"})`);return this.warn(d.message),!u||u.mediaKeys?!1:(this.hls.trigger(pe.ERROR,{type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_NO_KEYS,fatal:!1,error:d,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?rS.toString(aa.getBuffered(n)):"(detached)"})`),hi(e)){var r;if(e.type!==zn.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(d=>!!u[d])){this.state=sn.IDLE;return}}const o=(r=this.levels)==null?void 0:r[e.level];o!=null&&o.fragmentError&&(this.log(`Resetting level fragment error count of ${o.fragmentError} on frag buffered`),o.fragmentError=0)}this.state=sn.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:o}=e,u=!o||o.length===0||o.some(g=>!g),d=new qm(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!u);t.flush(d)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,r){var o;this.fragCurrent=e;const u=t.details;if(!this.levels||!u)throw new Error(`frag load aborted, missing level${u?"":" detail"}s`);let d=null;e.encrypted&&!((o=e.decryptdata)!=null&&o.key)?(this.log(`Loading key for ${e.sn} of [${u.startSN}-${u.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=sn.KEY_LOADING,this.fragCurrent=e,d=this.keyLoader.load(e).then(b=>{if(!this.fragContextChanged(b.frag))return this.hls.trigger(pe.KEY_LOADED,b),this.state===sn.KEY_LOADING&&(this.state=sn.IDLE),b}),this.hls.trigger(pe.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(d=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(d=this.keyLoader.loadClear(e,u.encryptedFragments,this.startFragRequested),d&&this.log("[eme] blocking frag load until media-keys acquired"));const g=this.fragPrevious;if(hi(e)&&(!g||e.sn!==g.sn)){const b=this.shouldLoadParts(t.details,e.end);b!==this.loadingParts&&(this.log(`LL-Part loading ${b?"ON":"OFF"} loading sn ${g?.sn}->${e.sn}`),this.loadingParts=b)}if(n=Math.max(e.start,n||0),this.loadingParts&&hi(e)){const b=u.partList;if(b&&r){n>e.end&&u.fragmentHint&&(e=u.fragmentHint);const A=this.getNextPart(b,e,n);if(A>-1){const T=b[A];e=this.fragCurrent=T.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${T.index} (${A}/${b.length-1}) of ${this.fragInfo(e,!1,T)}) cc: ${e.cc} [${u.startSN}-${u.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=T.start+T.duration,this.state=sn.FRAG_LOADING;let C;return d?C=d.then(O=>!O||this.fragContextChanged(O.frag)?null:this.doFragPartsLoad(e,T,t,r)).catch(O=>this.handleFragLoadError(O)):C=this.doFragPartsLoad(e,T,t,r).catch(O=>this.handleFragLoadError(O)),this.hls.trigger(pe.FRAG_LOADING,{frag:e,part:T,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):C}else if(!e.url||this.loadedEndOfParts(b,n))return Promise.resolve(null)}}if(hi(e)&&this.loadingParts){var h;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(h=u.partList)==null?void 0:h.filter(b=>b.loaded).map(b=>`[${b.start}-${b.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+u.startSN+"-"+u.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),wn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=sn.FRAG_LOADING;const p=this.config.progressive;let E;return p&&d?E=d.then(b=>!b||this.fragContextChanged(b.frag)?null:this.fragmentLoader.load(e,r)).catch(b=>this.handleFragLoadError(b)):E=Promise.all([this.fragmentLoader.load(e,p?r:void 0),d]).then(([b])=>(!p&&r&&r(b),b)).catch(b=>this.handleFragLoadError(b)),this.hls.trigger(pe.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):E}doFragPartsLoad(e,t,n,r){return new Promise((o,u)=>{var d;const g=[],h=(d=n.details)==null?void 0:d.partList,p=E=>{this.fragmentLoader.loadPart(e,E,r).then(b=>{g[E.index]=b;const A=b.part;this.hls.trigger(pe.FRAG_LOADED,b);const T=nE(n.details,e.sn,E.index+1)||ub(h,e.sn,E.index+1);if(T)p(T);else return o({frag:e,part:A,partsLoaded:g})}).catch(u)};p(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t&&t.details===xt.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(pe.ERROR,t)}else this.hls.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==sn.PARSING){!this.fragCurrent&&this.state!==sn.STOPPED&&this.state!==sn.ERROR&&(this.state=sn.IDLE);return}const{frag:n,part:r,level:o}=t,u=self.performance.now();n.stats.parsing.end=u,r&&(r.stats.parsing.end=u);const d=this.getLevelDetails(),h=d&&n.sn>d.endSN||this.shouldLoadParts(d,n.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=h),this.updateLevelTiming(n,r,o,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const o=e.partList[0],u=o.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=u){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>o.start-o.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:o,part:u}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${o} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const d=t[r],g=d.details,h=u>-1?nE(g,o,u):null,p=h?h.fragment:ob(g,o,n);return p?(n&&n!==p&&(p.stats=n.stats),{frag:p,part:h,level:d}):null}bufferFragmentData(e,t,n,r,o){if(this.state!==sn.PARSING)return;const{data1:u,data2:d}=e;let g=u;if(d&&(g=Cr(u,d)),!g.length)return;const h=this.initPTS[t.cc],p=h?-h.baseTime/h.timescale:void 0,E={type:e.type,frag:t,part:n,chunkMeta:r,offset:p,parent:t.type,data:g};if(this.hls.trigger(pe.BUFFER_APPENDING,E),e.dropped&&e.independent&&!n){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!aa.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,r=aa.bufferInfo(t,n,0),o=e.duration,u=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),d=Math.max(Math.min(e.start-u,r.end-u),n+u);e.start-d>u&&this.flushMainBuffer(d,e.start)}getFwdBufferInfo(e,t){var n;const r=this.getLoadPosition();if(!wn(r))return null;const u=this.lastCurrentTime>r||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,u)}getFwdBufferInfoAtPos(e,t,n,r){const o=aa.bufferInfo(e,t,r);if(o.len===0&&o.nextStart!==void 0){const u=this.fragmentTracker.getBufferedFrag(t,n);if(u&&(o.nextStart<=u.end||u.gap)){const d=Math.max(Math.min(o.nextStart,u.end)-t,r);return aa.bufferInfo(e,t,d)}}return o}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),o=Math.max(e-t*3,n.maxMaxBufferLength/2,r);return o>=r?(n.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=zn.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:o}=this,u=n[0].start,d=o.lowLatencyMode&&!!t.partList;let g=null;if(t.live){const E=o.initialLiveManifestSize;if(r<E)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${E})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<u){var h;d&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),g=this.getInitialLiveFragment(t);const b=this.hls.startPosition,A=this.hls.liveSyncPosition,T=g?(b!==-1&&b>=u?b:A)||g.start:e;this.log(`Setting startPosition to ${T} to match start frag at live edge. mainStart: ${b} liveSyncPosition: ${A} frag.start: ${(h=g)==null?void 0:h.start}`),this.startPosition=this.nextLoadPosition=T}}else e<=u&&(g=n[0]);if(!g){const E=this.loadingParts?t.partEnd:t.fragmentEnd;g=this.getFragmentAtPosition(e,E,t)}let p=this.filterReplacedPrimary(g,t);if(!p&&g){const E=g.sn-t.startSN;p=this.filterReplacedPrimary(n[E+1]||null,t)}return this.mapToInitFragWhenRequired(p)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===Ti.OK||n===Ti.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,o){let u=null;if(e.gap&&(u=this.getNextFragment(this.nextLoadPosition,t),u&&!u.gap&&n.nextStart)){const d=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(d!==null&&n.len+d.len>=o){const g=u.sn;return this.loopSn!==g&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${g}`),this.loopSn=g),null}}return this.loopSn=void 0,u}get primaryPrefetch(){if(iE(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(iE(this.config)&&e.type!==zn.SUBTITLE){const n=this.hls.interstitialsManager,r=n?.bufferingItem;if(r){const u=r.event;if(u){if(u.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&t?.live===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const o=n?.playerQueue;if(o)for(let u=o.length;u--;){const d=o[u].interstitial;if(d.appendInPlace&&e.start>=d.startTime&&e.end<=d.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let r=-1,o=!1,u=!0;for(let d=0,g=e.length;d<g;d++){const h=e[d];if(u=u&&!h.independent,r>-1&&n<h.start)break;const p=h.loaded;p?r=-1:(o||(h.independent||u)&&h.fragment===t)&&(h.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${h.start}`),r=d),o=p}return r}loadedEndOfParts(e,t){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=Tv(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const o=n.sn+1;if(o>=e.startSN&&o<=e.endSN){const u=t[o-e.startSN];n.cc===u.cc&&(r=u,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=JE(e,n.cc,n.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(r=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:o}=this,{fragments:u,endSN:d}=n;const{fragmentHint:g}=n,{maxFragLookUpTolerance:h}=r,p=n.partList,E=!!(this.loadingParts&&p!=null&&p.length&&g);E&&!this.bitrateTest&&p[p.length-1].fragment.sn===g.sn&&(u=u.concat(g),d=g.sn);let b;if(e<t){var A;const C=e<this.lastCurrentTime||e>t-h||(A=this.media)!=null&&A.paused||!this.startFragRequested?0:h;b=vo(o,u,e,C)}else b=u[u.length-1];if(b){const T=b.sn-n.startSN,C=this.fragmentTracker.getState(b);if((C===Ti.OK||C===Ti.PARTIAL&&b.gap)&&(o=b),o&&b.sn===o.sn&&(!E||p[0].fragment.sn>b.sn||!n.live)&&b.level===o.level){const te=u[T+1];b.sn<d&&this.fragmentTracker.getState(te)!==Ti.OK?b=te:b=null}}return b}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const o=e.fragmentStart,u=!t,d=e.alignedSliding&&wn(o);if(u||!d&&!o){iS(n,e);const g=e.fragmentStart;return this.log(`Live playlist sliding: ${g.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),g}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const r=this.timelineOffset;if(n===-1){const o=this.startTimeOffset!==null,u=o?this.startTimeOffset:e.startTimeOffset;u!==null&&wn(u)?(n=t+u,u<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${u} found in ${o?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&hi(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==sn.FRAG_LOADING_WAITING_RETRY)&&(this.state=sn.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const T=this.getCurrentContext(t.chunkMeta);T&&(t.frag=T.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var r;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const o=t.details===xt.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(n,!0);const u=t.errorAction,{action:d,flags:g,retryCount:h=0,retryConfig:p}=u||{},E=!!u&&!!p,b=E&&d===qi.RetryRequest,A=E&&!u.resolved&&g===$r.MoveAllAlternatesMatchingHost;if(!b&&A&&hi(n)&&!n.endList)this.resetFragmentErrors(e),this.treatAsGap(n),u.resolved=!0;else if((b||A)&&h<p.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const T=Bm(p,h);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${h+1}/${p.maxNumRetry} in ${T}ms`),u.resolved=!0,this.retryDate=self.performance.now()+T,this.state=sn.FRAG_LOADING_WAITING_RETRY}else if(p&&u)if(this.resetFragmentErrors(e),h<p.maxNumRetry)!o&&d!==qi.RemoveAlternatePermanently&&(u.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${h})`);return}else d===qi.SendAlternateToPenaltyBox?this.state=sn.WAITING_LEVEL:this.state=sn.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===sn.PARSING||this.state===sn.PARSED){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),o=r&&r.len>.5;o&&this.reduceMaxBufferLength(r.len,t?.duration||10);const u=!o;return u&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),u}return!1}resetFragmentErrors(e){e===zn.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==sn.STOPPED&&(this.state=sn.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const r=aa.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===sn.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==sn.STOPPED&&(this.state=sn.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const o=n.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((g,h)=>{const p=e.elementaryStreams[h];if(p){const E=p.endPTS-p.startPTS;if(E<=0)return this.warn(`Could not parse fragment ${e.sn} ${h} duration reliably (${E})`),g||!1;const b=r?0:rb(o,e,p.startPTS,p.endPTS,p.startDTS,p.endDTS,this);return this.hls.trigger(pe.LEVEL_PTS_UPDATED,{details:o,level:n,drift:b,type:h,frag:e,start:p.startPTS,end:p.endPTS}),!0}return g},!1)){var d;if(n.fragmentError===0&&this.treatAsGap(e,n),((d=this.transmuxer)==null?void 0:d.error)===null){const g=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(g.message),this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_PARSING_ERROR,fatal:!1,error:g,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=sn.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(pe.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===zn.MAIN?"level":"track"}fragInfo(e,t=!0,n){var r,o;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((r=t&&!n?e.startPTS:(n||e).start)!=null?r:NaN).toFixed(3)}-${((o=t&&!n?e.endPTS:(n||e).end)!=null?o:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function iE(f){return!!f.interstitialsController&&f.enableInterstitialPlayback!==!1}class hb{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=sS(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function sS(f,e){const t=new Uint8Array(e);let n=0;for(let r=0;r<f.length;r++){const o=f[r];t.set(o,n),n+=o.length}return t}var Jg={exports:{}},rE;function lS(){return rE||(rE=1,function(f){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(g,h,p){this.fn=g,this.context=h,this.once=p||!1}function o(g,h,p,E,b){if(typeof p!="function")throw new TypeError("The listener must be a function");var A=new r(p,E||g,b),T=t?t+h:h;return g._events[T]?g._events[T].fn?g._events[T]=[g._events[T],A]:g._events[T].push(A):(g._events[T]=A,g._eventsCount++),g}function u(g,h){--g._eventsCount===0?g._events=new n:delete g._events[h]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,E;if(this._eventsCount===0)return h;for(E in p=this._events)e.call(p,E)&&h.push(t?E.slice(1):E);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=t?t+h:h,E=this._events[p];if(!E)return[];if(E.fn)return[E.fn];for(var b=0,A=E.length,T=new Array(A);b<A;b++)T[b]=E[b].fn;return T},d.prototype.listenerCount=function(h){var p=t?t+h:h,E=this._events[p];return E?E.fn?1:E.length:0},d.prototype.emit=function(h,p,E,b,A,T){var C=t?t+h:h;if(!this._events[C])return!1;var O=this._events[C],te=arguments.length,de,fe;if(O.fn){switch(O.once&&this.removeListener(h,O.fn,void 0,!0),te){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,p),!0;case 3:return O.fn.call(O.context,p,E),!0;case 4:return O.fn.call(O.context,p,E,b),!0;case 5:return O.fn.call(O.context,p,E,b,A),!0;case 6:return O.fn.call(O.context,p,E,b,A,T),!0}for(fe=1,de=new Array(te-1);fe<te;fe++)de[fe-1]=arguments[fe];O.fn.apply(O.context,de)}else{var De=O.length,Oe;for(fe=0;fe<De;fe++)switch(O[fe].once&&this.removeListener(h,O[fe].fn,void 0,!0),te){case 1:O[fe].fn.call(O[fe].context);break;case 2:O[fe].fn.call(O[fe].context,p);break;case 3:O[fe].fn.call(O[fe].context,p,E);break;case 4:O[fe].fn.call(O[fe].context,p,E,b);break;default:if(!de)for(Oe=1,de=new Array(te-1);Oe<te;Oe++)de[Oe-1]=arguments[Oe];O[fe].fn.apply(O[fe].context,de)}}return!0},d.prototype.on=function(h,p,E){return o(this,h,p,E,!1)},d.prototype.once=function(h,p,E){return o(this,h,p,E,!0)},d.prototype.removeListener=function(h,p,E,b){var A=t?t+h:h;if(!this._events[A])return this;if(!p)return u(this,A),this;var T=this._events[A];if(T.fn)T.fn===p&&(!b||T.once)&&(!E||T.context===E)&&u(this,A);else{for(var C=0,O=[],te=T.length;C<te;C++)(T[C].fn!==p||b&&!T[C].once||E&&T[C].context!==E)&&O.push(T[C]);O.length?this._events[A]=O.length===1?O[0]:O:u(this,A)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=t?t+h:h,this._events[p]&&u(this,p)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,f.exports=d}(Jg)),Jg.exports}var oS=lS(),Ym=zT(oS);const Id="1.6.9",Mu={};function uS(){return typeof __HLS_WORKER_BUNDLE__=="function"}function cS(){const f=Mu[Id];if(f)return f.clientCount++,f;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),r={worker:new self.Worker(t),objectURL:t,clientCount:1};return Mu[Id]=r,r}function dS(f){const e=Mu[f];if(e)return e.clientCount++,e;const t=new self.URL(f,self.location.href).href,r={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Mu[f]=r,r}function fS(f){const e=Mu[f||Id];if(e&&e.clientCount--===1){const{worker:n,objectURL:r}=e;delete Mu[f||Id],r&&self.URL.revokeObjectURL(r),n.terminate()}}function gb(f,e){return e+10<=f.length&&f[e]===51&&f[e+1]===68&&f[e+2]===73&&f[e+3]<255&&f[e+4]<255&&f[e+6]<128&&f[e+7]<128&&f[e+8]<128&&f[e+9]<128}function Km(f,e){return e+10<=f.length&&f[e]===73&&f[e+1]===68&&f[e+2]===51&&f[e+3]<255&&f[e+4]<255&&f[e+6]<128&&f[e+7]<128&&f[e+8]<128&&f[e+9]<128}function Bh(f,e){let t=0;return t=(f[e]&127)<<21,t|=(f[e+1]&127)<<14,t|=(f[e+2]&127)<<7,t|=f[e+3]&127,t}function xd(f,e){const t=e;let n=0;for(;Km(f,e);){n+=10;const r=Bh(f,e+6);n+=r,gb(f,e+10)&&(n+=10),e+=n}if(n>0)return f.subarray(t,t+n)}function hS(f,e,t,n){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=e[t+2],u=o>>2&15;if(u>12){const A=new Error(`invalid ADTS sampling index:${u}`);f.emit(pe.ERROR,pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_PARSING_ERROR,fatal:!0,error:A,reason:A.message});return}const d=(o>>6&3)+1,g=e[t+3]>>6&3|(o&1)<<2,h="mp4a.40."+d,p=r[u];let E=u;(d===5||d===29)&&(E-=3);const b=[d<<3|(E&14)>>1,(E&1)<<7|g<<3];return Ma.log(`manifest codec:${n}, parsed codec:${h}, channels:${g}, rate:${p} (ADTS object type:${d} sampling index:${u})`),{config:b,samplerate:p,channelCount:g,codec:h,parsedCodec:h,manifestCodec:n}}function mb(f,e){return f[e]===255&&(f[e+1]&246)===240}function pb(f,e){return f[e+1]&1?7:9}function $m(f,e){return(f[e+3]&3)<<11|f[e+4]<<3|(f[e+5]&224)>>>5}function gS(f,e){return e+5<f.length}function Ph(f,e){return e+1<f.length&&mb(f,e)}function mS(f,e){return gS(f,e)&&mb(f,e)&&$m(f,e)<=f.length-e}function pS(f,e){if(Ph(f,e)){const t=pb(f,e);if(e+t>=f.length)return!1;const n=$m(f,e);if(n<=t)return!1;const r=e+n;return r===f.length||Ph(f,r)}return!1}function yb(f,e,t,n,r){if(!f.samplerate){const o=hS(e,t,n,r);if(!o)return;Fa(f,o)}}function Eb(f){return 1024*9e4/f}function yS(f,e){const t=pb(f,e);if(e+t<=f.length){const n=$m(f,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function bb(f,e,t,n,r){const o=Eb(f.samplerate),u=n+r*o,d=yS(e,t);let g;if(d){const{frameLength:E,headerLength:b}=d,A=b+E,T=Math.max(0,t+A-e.length);T?(g=new Uint8Array(A-b),g.set(e.subarray(t+b,e.length),0)):g=e.subarray(t+b,t+A);const C={unit:g,pts:u};return T||f.samples.push(C),{sample:C,length:A,missing:T}}const h=e.length-t;return g=new Uint8Array(h),g.set(e.subarray(t,e.length),0),{sample:{unit:g,pts:u},length:h,missing:-1}}function ES(f,e){return Km(f,e)&&Bh(f,e+6)+10<=f.length-e}function bS(f){return f instanceof ArrayBuffer?f:f.byteOffset==0&&f.byteLength==f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer}function em(f,e=0,t=1/0){return TS(f,e,t,Uint8Array)}function TS(f,e,t,n){const r=vS(f);let o=1;"BYTES_PER_ELEMENT"in n&&(o=n.BYTES_PER_ELEMENT);const u=SS(f)?f.byteOffset:0,d=(u+f.byteLength)/o,g=(u+e)/o,h=Math.floor(Math.max(0,Math.min(g,d))),p=Math.floor(Math.min(h+Math.max(t,0),d));return new n(r,h,p-h)}function vS(f){return f instanceof ArrayBuffer?f:f.buffer}function SS(f){return f&&f.buffer instanceof ArrayBuffer&&f.byteLength!==void 0&&f.byteOffset!==void 0}function _S(f){const e={key:f.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(f.size<2)return;if(f.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=f.data.subarray(1).indexOf(0);if(n===-1)return;const r=mr(em(f.data,1,n)),o=f.data[2+n],u=f.data.subarray(3+n).indexOf(0);if(u===-1)return;const d=mr(em(f.data,3+n,u));let g;return r==="-->"?g=mr(em(f.data,4+n+u)):g=bS(f.data.subarray(4+n+u)),e.mimeType=r,e.pictureType=o,e.description=d,e.data=g,e}function AS(f){if(f.size<2)return;const e=mr(f.data,!0),t=new Uint8Array(f.data.subarray(e.length+1));return{key:f.type,info:e,data:t.buffer}}function RS(f){if(f.size<2)return;if(f.type==="TXXX"){let t=1;const n=mr(f.data.subarray(t),!0);t+=n.length+1;const r=mr(f.data.subarray(t));return{key:f.type,info:n,data:r}}const e=mr(f.data.subarray(1));return{key:f.type,info:"",data:e}}function IS(f){if(f.type==="WXXX"){if(f.size<2)return;let t=1;const n=mr(f.data.subarray(t),!0);t+=n.length+1;const r=mr(f.data.subarray(t));return{key:f.type,info:n,data:r}}const e=mr(f.data);return{key:f.type,info:"",data:e}}function xS(f){return f.type==="PRIV"?AS(f):f.type[0]==="W"?IS(f):f.type==="APIC"?_S(f):RS(f)}function wS(f){const e=String.fromCharCode(f[0],f[1],f[2],f[3]),t=Bh(f,4),n=10;return{type:e,size:t,data:f.subarray(n,n+t)}}const ch=10,kS=10;function Tb(f){let e=0;const t=[];for(;Km(f,e);){const n=Bh(f,e+6);f[e+5]>>6&1&&(e+=ch),e+=ch;const r=e+n;for(;e+kS<r;){const o=wS(f.subarray(e)),u=xS(o);u&&t.push(u),e+=o.size+ch}gb(f,e)&&(e+=ch)}return t}function vb(f){return f&&f.key==="PRIV"&&f.info==="com.apple.streaming.transportStreamTimestamp"}function DS(f){if(f.data.byteLength===8){const e=new Uint8Array(f.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function Wm(f){const e=Tb(f);for(let t=0;t<e.length;t++){const n=e[t];if(vb(n))return DS(n)}}let hr=function(f){return f.audioId3="org.id3",f.dateRange="com.apple.quicktime.HLS",f.emsg="https://aomedia.org/emsg/ID3",f.misbklv="urn:misb:KLV:bin:1910.1",f}({});function ps(f="",e=9e4){return{type:f,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Xm{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Cr(this.cachedData,e),this.cachedData=null);let n=xd(e,0),r=n?n.length:0,o;const u=this._audioTrack,d=this._id3Track,g=n?Wm(n):void 0,h=e.length;for((this.basePTS===null||this.frameIndex===0&&wn(g))&&(this.basePTS=CS(g,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&d.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:hr.audioId3,duration:Number.POSITIVE_INFINITY});r<h;){if(this.canParse(e,r)){const p=this.appendFrame(u,e,r);p?(this.frameIndex++,this.lastPTS=p.sample.pts,r+=p.length,o=r):r=h}else ES(e,r)?(n=xd(e,r),d.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:hr.audioId3,duration:Number.POSITIVE_INFINITY}),r+=n.length,o=r):r++;if(r===h&&o!==h){const p=e.slice(o);this.cachedData?this.cachedData=Cr(this.cachedData,p):this.cachedData=p}}return{audioTrack:u,videoTrack:ps(),id3Track:d,textTrack:ps()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:ps(),id3Track:this._id3Track,textTrack:ps()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const CS=(f,e,t)=>{if(wn(f))return f*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let dh=null;const LS=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],NS=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],MS=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],OS=[0,1,1,4];function Sb(f,e,t,n,r){if(t+24>e.length)return;const o=_b(e,t);if(o&&t+o.frameLength<=e.length){const u=o.samplesPerFrame*9e4/o.sampleRate,d=n+r*u,g={unit:e.subarray(t,t+o.frameLength),pts:d,dts:d};return f.config=[],f.channelCount=o.channelCount,f.samplerate=o.sampleRate,f.samples.push(g),{sample:g,length:o.frameLength,missing:0}}}function _b(f,e){const t=f[e+1]>>3&3,n=f[e+1]>>1&3,r=f[e+2]>>4&15,o=f[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&o!==3){const u=f[e+2]>>1&1,d=f[e+3]>>6,g=t===3?3-n:n===3?3:4,h=LS[g*14+r-1]*1e3,E=NS[(t===3?0:t===2?1:2)*3+o],b=d===3?1:2,A=MS[t][n],T=OS[n],C=A*8*T,O=Math.floor(A*h/E+u)*T;if(dh===null){const fe=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);dh=fe?parseInt(fe[1]):0}return!!dh&&dh<=87&&n===2&&h>=224e3&&d===0&&(f[e+3]=f[e+3]|128),{sampleRate:E,channelCount:b,frameLength:O,samplesPerFrame:C}}}function Qm(f,e){return f[e]===255&&(f[e+1]&224)===224&&(f[e+1]&6)!==0}function Ab(f,e){return e+1<f.length&&Qm(f,e)}function PS(f,e){return Qm(f,e)&&4<=f.length-e}function Rb(f,e){if(e+1<f.length&&Qm(f,e)){const n=_b(f,e);let r=4;n!=null&&n.frameLength&&(r=n.frameLength);const o=e+r;return o===f.length||Ab(f,o)}return!1}class zS extends Xm{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=xd(e,0);let r=n?.length||0;if(Rb(e,r))return!1;for(let o=e.length;r<o;r++)if(pS(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return mS(e,t)}appendFrame(e,t,n){yb(e,this.observer,t,n,e.manifestCodec);const r=bb(e,t,n,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const Ib=(f,e)=>{let t=0,n=5;e+=n;const r=new Uint32Array(1),o=new Uint32Array(1),u=new Uint8Array(1);for(;n>0;){u[0]=f[e];const d=Math.min(n,8),g=8-d;o[0]=4278190080>>>24+g<<g,r[0]=(u[0]&o[0])>>g,t=t?t<<d|r[0]:r[0],e+=1,n-=d}return t};class FS extends Xm{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=xb(e,t,n,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=xd(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&Wm(t)!==void 0&&Ib(e,n)<16}}function xb(f,e,t,n,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const d=[48e3,44100,32e3][o],g=e[t+4]&63,p=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][g*3+o]*2;if(t+p>e.length)return-1;const E=e[t+6]>>5;let b=0;E===2?b+=2:(E&1&&E!==1&&(b+=2),E&4&&(b+=2));const A=(e[t+6]<<8|e[t+7])>>12-b&1,C=[2,1,2,3,3,4,4,5][E]+A,O=e[t+5]>>3,te=e[t+5]&7,de=new Uint8Array([o<<6|O<<1|te>>2,(te&3)<<6|E<<3|A<<2|g>>4,g<<4&224]),fe=1536/d*9e4,De=n+r*fe,Oe=e.subarray(t,t+p);return f.config=de,f.channelCount=C,f.samplerate=d,f.samples.push({unit:Oe,pts:De}),p}class US extends Xm{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=xd(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&Wm(t)!==void 0&&Ib(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(Rb(e,n))return Ma.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return PS(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return Sb(e,t,n,this.basePTS,this.frameIndex)}}const BS=/\/emsg[-/]ID3/i;class jS{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const o=this.videoTrack=ps("video",1),u=this.audioTrack=ps("audio",1),d=this.txtTrack=ps("text",1);if(this.id3Track=ps("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const g=GE(e);if(g.video){const{id:h,timescale:p,codec:E,supplemental:b}=g.video;o.id=h,o.timescale=d.timescale=p,o.codec=E,o.supplemental=b}if(g.audio){const{id:h,timescale:p,codec:E}=g.audio;u.id=h,u.timescale=p,u.codec=E}d.id=BE.text,o.sampleDuration=0,o.duration=u.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return qT(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Cr(this.remainderData,e));const d=$T(n);this.remainderData=d.remainder,r.samples=d.valid||new Uint8Array}else r.samples=n;const u=this.extractID3Track(r,t);return o.samples=Iy(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:u,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=Iy(e,t),{videoTrack:t,audioTrack:ps(),id3Track:r,textTrack:ps()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=ha(e.samples,["emsg"]);r&&r.forEach(o=>{const u=XT(o);if(BS.test(u.schemeIdUri)){const d=sE(u,t);let g=u.eventDuration===4294967295?Number.POSITIVE_INFINITY:u.eventDuration/u.timeScale;g<=.001&&(g=Number.POSITIVE_INFINITY);const h=u.payload;n.samples.push({data:h,len:h.byteLength,dts:d,pts:d,type:hr.emsg,duration:g})}else if(this.config.enableEmsgKLVMetadata&&u.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const d=sE(u,t);n.samples.push({data:u.payload,len:u.payload.byteLength,dts:d,pts:d,type:hr.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function sE(f,e){return wn(f.presentationTime)?f.presentationTime/f.timeScale:e+f.presentationTimeDelta/f.timeScale}class qS{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new jm(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Ul.cbc)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const o=r.subarray(16,r.length-r.length%16),u=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(u).then(d=>{const g=new Uint8Array(d);r.set(g,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let r=0;for(let o=32;o<e.length-16;o+=160,r+=16)n.set(e.subarray(o,o+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let o=32;o<e.length-16;o+=160,r+=16)e.set(n.subarray(r,r+16),o);return e}decryptAvcSample(e,t,n,r,o){const u=VE(o.data),d=this.getAvcEncryptedData(u);this.decryptBuffer(d.buffer).then(g=>{o.data=this.getAvcDecryptedUnit(u,g),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)})}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){r();return}const o=e[t].units;for(;!(n>=o.length);n++){const u=o[n];if(!(u.data.length<=48||u.type!==1&&u.type!==5)&&(this.decryptAvcSample(e,t,n,r,u),!this.decrypter.isSync()))return}}}}class wb{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,r;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const o=n.units;r=o[o.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,r=n.length;if(r){const o=n[r-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let o=e.naluState||0;const u=o,d=[];let g=0,h,p,E,b=-1,A=0;for(o===-1&&(b=0,A=this.getNALuType(t,0),o=0,g=1);g<r;){if(h=t[g++],!o){o=h?0:1;continue}if(o===1){o=h?0:2;continue}if(!h)o=3;else if(h===1){if(p=g-o-1,b>=0){const T={data:t.subarray(b,p),type:A};d.push(T)}else{const T=this.getLastNalUnit(e.samples);T&&(u&&g<=4-u&&T.state&&(T.data=T.data.subarray(0,T.data.byteLength-u)),p>0&&(T.data=Cr(T.data,t.subarray(0,p)),T.state=0))}g<r?(E=this.getNALuType(t,g),b=g,A=E,o=0):o=-1}else o=0}if(b>=0&&o>=0){const T={data:t.subarray(b,r),type:A,state:o};d.push(T)}if(d.length===0){const T=this.getLastNalUnit(e.samples);T&&(T.data=Cr(T.data,t))}return e.naluState=o,d}}class vd{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");r.set(e.subarray(n,n+o)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Ma.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class GS extends wb{parsePES(e,t,n,r){const o=this.parseNALu(e,n.data,r);let u=this.VideoSample,d,g=!1;n.data=null,u&&o.length&&!e.audFound&&(this.pushAccessUnit(u,e),u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.forEach(h=>{var p,E;switch(h.type){case 1:{let C=!1;d=!0;const O=h.data;if(g&&O.length>4){const te=this.readSliceType(O);(te===2||te===4||te===7||te===9)&&(C=!0)}if(C){var b;(b=u)!=null&&b.frame&&!u.key&&(this.pushAccessUnit(u,e),u=this.VideoSample=null)}u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),u.frame=!0,u.key=C;break}case 5:d=!0,(p=u)!=null&&p.frame&&!u.key&&(this.pushAccessUnit(u,e),u=this.VideoSample=null),u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),u.key=!0,u.frame=!0;break;case 6:{d=!0,zm(h.data,1,n.pts,t.samples);break}case 7:{var A,T;d=!0,g=!0;const C=h.data,O=this.readSPS(C);if(!e.sps||e.width!==O.width||e.height!==O.height||((A=e.pixelRatio)==null?void 0:A[0])!==O.pixelRatio[0]||((T=e.pixelRatio)==null?void 0:T[1])!==O.pixelRatio[1]){e.width=O.width,e.height=O.height,e.pixelRatio=O.pixelRatio,e.sps=[C];const te=C.subarray(1,4);let de="avc1.";for(let fe=0;fe<3;fe++){let De=te[fe].toString(16);De.length<2&&(De="0"+De),de+=De}e.codec=de}break}case 8:d=!0,e.pps=[h.data];break;case 9:d=!0,e.audFound=!0,(E=u)!=null&&E.frame&&(this.pushAccessUnit(u,e),u=null),u||(u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:d=!0;break;default:d=!1;break}u&&d&&u.units.push(h)}),r&&u&&(this.pushAccessUnit(u,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new vd(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,r=8,o;for(let u=0;u<e;u++)r!==0&&(o=t.readEG(),r=(n+o+256)%256),n=r===0?n:r}readSPS(e){const t=new vd(e);let n=0,r=0,o=0,u=0,d,g,h;const p=t.readUByte.bind(t),E=t.readBits.bind(t),b=t.readUEG.bind(t),A=t.readBoolean.bind(t),T=t.skipBits.bind(t),C=t.skipEG.bind(t),O=t.skipUEG.bind(t),te=this.skipScalingList.bind(this);p();const de=p();if(E(5),T(3),p(),O(),de===100||de===110||de===122||de===244||de===44||de===83||de===86||de===118||de===128){const ee=b();if(ee===3&&T(1),O(),O(),T(1),A())for(g=ee!==3?8:12,h=0;h<g;h++)A()&&(h<6?te(16,t):te(64,t))}O();const fe=b();if(fe===0)b();else if(fe===1)for(T(1),C(),C(),d=b(),h=0;h<d;h++)C();O(),T(1);const De=b(),Oe=b(),q=E(1);q===0&&T(1),T(1),A()&&(n=b(),r=b(),o=b(),u=b());let k=[1,1];if(A()&&A())switch(p()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:{k=[p()<<8|p(),p()<<8|p()];break}}return{width:Math.ceil((De+1)*16-n*2-r*2),height:(2-q)*(Oe+1)*16-(q?2:4)*(o+u),pixelRatio:k}}}class HS extends wb{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,r){const o=this.parseNALu(e,n.data,r);let u=this.VideoSample,d,g=!1;n.data=null,u&&o.length&&!e.audFound&&(this.pushAccessUnit(u,e),u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.forEach(h=>{var p,E;switch(h.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:u||(u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),u.frame=!0,d=!0;break;case 16:case 17:case 18:case 21:if(d=!0,g){var b;(b=u)!=null&&b.frame&&!u.key&&(this.pushAccessUnit(u,e),u=this.VideoSample=null)}u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),u.key=!0,u.frame=!0;break;case 19:case 20:d=!0,(p=u)!=null&&p.frame&&!u.key&&(this.pushAccessUnit(u,e),u=this.VideoSample=null),u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),u.key=!0,u.frame=!0;break;case 39:d=!0,zm(h.data,2,n.pts,t.samples);break;case 32:d=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Fa(e.params,this.readVPS(h.data)),this.initVPS=h.data),e.vps=[h.data];break;case 33:if(d=!0,g=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],h.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const A=this.readSPS(h.data);e.width=A.width,e.height=A.height,e.pixelRatio=A.pixelRatio,e.codec=A.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const T in A.params)e.params[T]=A.params[T]}this.pushParameterSet(e.sps,h.data,e.vps),u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),u.key=!0;break;case 34:if(d=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const A=this.readPPS(h.data);for(const T in A)e.params[T]=A[T]}this.pushParameterSet(e.pps,h.data,e.vps)}break;case 35:d=!0,e.audFound=!0,(E=u)!=null&&E.frame&&(this.pushAccessUnit(u,e),u=null),u||(u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:d=!1;break}u&&d&&u.units.push(h)}),r&&u&&(this.pushAccessUnit(u,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new vd(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),r=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:r}}readSPS(e){const t=new vd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),o=t.readBoolean(),u=t.readBits(5),d=t.readUByte(),g=t.readUByte(),h=t.readUByte(),p=t.readUByte(),E=t.readUByte(),b=t.readUByte(),A=t.readUByte(),T=t.readUByte(),C=t.readUByte(),O=t.readUByte(),te=t.readUByte(),de=[],fe=[];for(let qe=0;qe<n;qe++)de.push(t.readBoolean()),fe.push(t.readBoolean());if(n>0)for(let qe=n;qe<8;qe++)t.readBits(2);for(let qe=0;qe<n;qe++)de[qe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),fe[qe]&&t.readUByte();t.readUEG();const De=t.readUEG();De==3&&t.skipBits(1);const Oe=t.readUEG(),q=t.readUEG(),k=t.readBoolean();let ee=0,Ee=0,P=0,xe=0;k&&(ee+=t.readUEG(),Ee+=t.readUEG(),P+=t.readUEG(),xe+=t.readUEG());const Ve=t.readUEG(),be=t.readUEG(),_t=t.readUEG(),Ye=t.readBoolean();for(let qe=Ye?0:n;qe<=n;qe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let $e=0;$e<4;$e++)for(let Ge=0;Ge<($e===3?2:6);Ge++)if(!t.readBoolean())t.readUEG();else{const Et=Math.min(64,1<<4+($e<<1));$e>1&&t.readEG();for(let ct=0;ct<Et;ct++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const nt=t.readUEG();let ut=0;for(let qe=0;qe<nt;qe++){let $e=!1;if(qe!==0&&($e=t.readBoolean()),$e){qe===nt&&t.readUEG(),t.readBoolean(),t.readUEG();let Ge=0;for(let Je=0;Je<=ut;Je++){const Et=t.readBoolean();let ct=!1;Et||(ct=t.readBoolean()),(Et||ct)&&Ge++}ut=Ge}else{const Ge=t.readUEG(),Je=t.readUEG();ut=Ge+Je;for(let Et=0;Et<Ge;Et++)t.readUEG(),t.readBoolean();for(let Et=0;Et<Je;Et++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const qe=t.readUEG();for(let $e=0;$e<qe;$e++){for(let Ge=0;Ge<_t+4;Ge++)t.readBits(1);t.readBits(1)}}let Be=0,it=1,gt=1,zt=!0,Ce=1,Le=0;t.readBoolean(),t.readBoolean();let yt=!1;if(t.readBoolean()){if(t.readBoolean()){const Mt=t.readUByte(),yn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],tn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Mt>0&&Mt<16?(it=yn[Mt-1],gt=tn[Mt-1]):Mt===255&&(it=t.readBits(16),gt=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),yt=t.readBoolean(),yt&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(Ce=t.readBits(32),Le=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const tn=t.readBoolean(),fn=t.readBoolean();let Bt=!1;(tn||fn)&&(Bt=t.readBoolean(),Bt&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),Bt&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let kn=0;kn<=n;kn++){zt=t.readBoolean();const Wn=zt||t.readBoolean();let ta=!1;Wn?t.readEG():ta=t.readBoolean();const Ha=ta?1:t.readUEG()+1;if(tn)for(let La=0;La<Ha;La++)t.readUEG(),t.readUEG(),Bt&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(fn)for(let La=0;La<Ha;La++)t.readUEG(),t.readUEG(),Bt&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),Be=t.readUEG())}let W=Oe,L=q;if(k){let qe=1,$e=1;De===1?qe=$e=2:De==2&&(qe=2),W=Oe-qe*Ee-qe*ee,L=q-$e*xe-$e*P}const j=r?["A","B","C"][r]:"",me=d<<24|g<<16|h<<8|p;let ae=0;for(let qe=0;qe<32;qe++)ae=(ae|(me>>qe&1)<<31-qe)>>>0;let Ue=ae.toString(16);return u===1&&Ue==="2"&&(Ue="6"),{codecString:`hvc1.${j}${u}.${Ue}.${o?"H":"L"}${te}.B0`,params:{general_tier_flag:o,general_profile_idc:u,general_profile_space:r,general_profile_compatibility_flags:[d,g,h,p],general_constraint_indicator_flags:[E,b,A,T,C,O],general_level_idc:te,bit_depth:Ve+8,bit_depth_luma_minus8:Ve,bit_depth_chroma_minus8:be,min_spatial_segmentation_idc:Be,chroma_format_idc:De,frame_rate:{fixed:zt,fps:Le/Ce}},width:W,height:L,pixelRatio:[it,gt]}}readPPS(e){const t=new vd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),o=t.readBoolean();let u=1;return o&&r?u=0:o?u=3:r&&(u=2),{parallelismType:u}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Ii=188;class zl{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=zl.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(Ii*5,t-Ii)+1,r=0;for(;r<n;){let o=!1,u=-1,d=0;for(let g=r;g<t;g+=Ii)if(e[g]===71&&(t-g===Ii||e[g+Ii]===71)){if(d++,u===-1&&(u=g,u!==0&&(n=Math.min(u+Ii*99,e.length-Ii)+1)),o||(o=Am(e,g)===0),o&&d>1&&(u===0&&d>2||g+Ii>n))return u}else{if(d)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:BE[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=zl.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=zl.createTrack("audio",r),this._id3Track=zl.createTrack("id3"),this._txtTrack=zl.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){n||(this.sampleAes=null);let o;const u=this._videoTrack,d=this._audioTrack,g=this._id3Track,h=this._txtTrack;let p=u.pid,E=u.pesData,b=d.pid,A=g.pid,T=d.pesData,C=g.pesData,O=null,te=this.pmtParsed,de=this._pmtId,fe=e.length;if(this.remainderData&&(e=Cr(this.remainderData,e),fe=e.length,this.remainderData=null),fe<Ii&&!r)return this.remainderData=e,{audioTrack:d,videoTrack:u,id3Track:g,textTrack:h};const De=Math.max(0,zl.syncOffset(e));fe-=(fe-De)%Ii,fe<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,fe,e.buffer.byteLength-fe));let Oe=0;for(let k=De;k<fe;k+=Ii)if(e[k]===71){const ee=!!(e[k+1]&64),Ee=Am(e,k),P=(e[k+3]&48)>>4;let xe;if(P>1){if(xe=k+5+e[k+4],xe===k+Ii)continue}else xe=k+4;switch(Ee){case p:ee&&(E&&(o=Ru(E,this.logger))&&(this.readyVideoParser(u.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(u,h,o,!1)),E={data:[],size:0}),E&&(E.data.push(e.subarray(xe,k+Ii)),E.size+=k+Ii-xe);break;case b:if(ee){if(T&&(o=Ru(T,this.logger)))switch(d.segmentCodec){case"aac":this.parseAACPES(d,o);break;case"mp3":this.parseMPEGPES(d,o);break;case"ac3":this.parseAC3PES(d,o);break}T={data:[],size:0}}T&&(T.data.push(e.subarray(xe,k+Ii)),T.size+=k+Ii-xe);break;case A:ee&&(C&&(o=Ru(C,this.logger))&&this.parseID3PES(g,o),C={data:[],size:0}),C&&(C.data.push(e.subarray(xe,k+Ii)),C.size+=k+Ii-xe);break;case 0:ee&&(xe+=e[xe]+1),de=this._pmtId=VS(e,xe);break;case de:{ee&&(xe+=e[xe]+1);const Ve=YS(e,xe,this.typeSupported,n,this.observer,this.logger);p=Ve.videoPid,p>0&&(u.pid=p,u.segmentCodec=Ve.segmentVideoCodec),b=Ve.audioPid,b>0&&(d.pid=b,d.segmentCodec=Ve.segmentAudioCodec),A=Ve.id3Pid,A>0&&(g.pid=A),O!==null&&!te&&(this.logger.warn(`MPEG-TS PMT found at ${k} after unknown PID '${O}'. Backtracking to sync byte @${De} to parse all TS packets.`),O=null,k=De-188),te=this.pmtParsed=!0;break}case 17:case 8191:break;default:O=Ee;break}}else Oe++;Oe>0&&Rm(this.observer,new Error(`Found ${Oe} TS packet/s that do not start with 0x47`),void 0,this.logger),u.pesData=E,d.pesData=T,g.pesData=C;const q={audioTrack:d,videoTrack:u,id3Track:g,textTrack:h};return r&&this.extractRemainingSamples(q),q}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:o}=e,u=n.pesData,d=t.pesData,g=r.pesData;let h;if(u&&(h=Ru(u,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,o,h,!0),n.pesData=null)):n.pesData=u,d&&(h=Ru(d,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,h);break;case"mp3":this.parseMPEGPES(t,h);break;case"ac3":this.parseAC3PES(t,h);break}t.pesData=null}else d!=null&&d.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=d;g&&(h=Ru(g,this.logger))?(this.parseID3PES(r,h),r.pesData=null):r.pesData=g}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),o=this.sampleAes=new qS(this.observer,this.config,t);return this.decrypt(r,o)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new GS:e==="hevc"&&(this.videoParser=new HS))}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:o}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{n(e)}):n(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let o=t.data;if(r){this.aacOverFlow=null;const E=r.missing,b=r.sample.unit.byteLength;if(E===-1)o=Cr(r.sample.unit,o);else{const A=b-E;r.sample.unit.set(o.subarray(0,E),A),e.samples.push(r.sample),n=r.missing}}let u,d;for(u=n,d=o.length;u<d-1&&!Ph(o,u);u++);if(u!==n){let E;const b=u<d-1;if(b?E=`AAC PES did not start with ADTS header,offset:${u}`:E="No ADTS header found in AAC PES",Rm(this.observer,new Error(E),b,this.logger),!b)return}yb(e,this.observer,o,u,this.audioCodec);let g;if(t.pts!==void 0)g=t.pts;else if(r){const E=Eb(e.samplerate);g=r.sample.pts+E}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let h=0,p;for(;u<d;)if(p=bb(e,o,u,g,h),u+=p.length,p.missing){this.aacOverFlow=p;break}else for(h++;u<d-1&&!Ph(o,u);u++);}parseMPEGPES(e,t){const n=t.data,r=n.length;let o=0,u=0;const d=t.pts;if(d===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;u<r;)if(Ab(n,u)){const g=Sb(e,n,u,d,o);if(g)u+=g.length,o++;else break}else u++}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=n.length;let u=0,d=0,g;for(;d<o&&(g=xb(e,n,d,r,u++))>0;)d+=g}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Fa({},t,{type:this._videoTrack?hr.emsg:hr.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Am(f,e){return((f[e+1]&31)<<8)+f[e+2]}function VS(f,e){return(f[e+10]&31)<<8|f[e+11]}function YS(f,e,t,n,r,o){const u={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},d=(f[e+1]&15)<<8|f[e+2],g=e+3+d-4,h=(f[e+10]&15)<<8|f[e+11];for(e+=12+h;e<g;){const p=Am(f,e),E=(f[e+3]&15)<<8|f[e+4];switch(f[e]){case 207:if(!n){tm("ADTS AAC",o);break}case 15:u.audioPid===-1&&(u.audioPid=p);break;case 21:u.id3Pid===-1&&(u.id3Pid=p);break;case 219:if(!n){tm("H.264",o);break}case 27:u.videoPid===-1&&(u.videoPid=p);break;case 3:case 4:!t.mpeg&&!t.mp3?o.log("MPEG audio found, not supported in this browser"):u.audioPid===-1&&(u.audioPid=p,u.segmentAudioCodec="mp3");break;case 193:if(!n){tm("AC-3",o);break}case 129:t.ac3?u.audioPid===-1&&(u.audioPid=p,u.segmentAudioCodec="ac3"):o.log("AC-3 audio found, not supported in this browser");break;case 6:if(u.audioPid===-1&&E>0){let b=e+5,A=E;for(;A>2;){switch(f[b]){case 106:t.ac3!==!0?o.log("AC-3 audio found, not supported in this browser for now"):(u.audioPid=p,u.segmentAudioCodec="ac3");break}const C=f[b+1]+2;b+=C,A-=C}}break;case 194:case 135:return Rm(r,new Error("Unsupported EC-3 in M2TS found"),void 0,o),u;case 36:u.videoPid===-1&&(u.videoPid=p,u.segmentVideoCodec="hevc",o.log("HEVC in M2TS found"));break}e+=E+5}return u}function Rm(f,e,t,n){n.warn(`parsing error: ${e.message}`),f.emit(pe.ERROR,pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function tm(f,e){e.log(`${f} with AES-128-CBC encryption found in unencrypted stream`)}function Ru(f,e){let t=0,n,r,o,u,d;const g=f.data;if(!f||f.size===0)return null;for(;g[0].length<19&&g.length>1;)g[0]=Cr(g[0],g[1]),g.splice(1,1);if(n=g[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>f.size-6)return null;const p=n[7];p&192&&(u=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,p&64?(d=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,u-d>60*9e4&&(e.warn(`${Math.round((u-d)/9e4)}s delta between PTS and DTS, align them`),u=d)):d=u),o=n[8];let E=o+9;if(f.size<=E)return null;f.size-=E;const b=new Uint8Array(f.size);for(let A=0,T=g.length;A<T;A++){n=g[A];let C=n.byteLength;if(E)if(E>C){E-=C;continue}else n=n.subarray(E),C-=E,E=0;b.set(n,t),t+=C}return r&&(r-=o+3),{data:b,pts:u,dts:d,len:r}}return null}class KS{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ml=Math.pow(2,32)-1;class vt{static init(){vt.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in vt.types)vt.types.hasOwnProperty(e)&&(vt.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);vt.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);vt.STTS=vt.STSC=vt.STCO=o,vt.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),vt.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),vt.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),vt.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const u=new Uint8Array([105,115,111,109]),d=new Uint8Array([97,118,99,49]),g=new Uint8Array([0,0,0,1]);vt.FTYP=vt.box(vt.types.ftyp,u,g,u,d),vt.DINF=vt.box(vt.types.dinf,vt.box(vt.types.dref,r))}static box(e,...t){let n=8,r=t.length;const o=r;for(;r--;)n+=t[r].byteLength;const u=new Uint8Array(n);for(u[0]=n>>24&255,u[1]=n>>16&255,u[2]=n>>8&255,u[3]=n&255,u.set(e,4),r=0,n=8;r<o;r++)u.set(t[r],n),n+=t[r].byteLength;return u}static hdlr(e){return vt.box(vt.types.hdlr,vt.HDLR_TYPES[e])}static mdat(e){return vt.box(vt.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Ml+1)),r=Math.floor(t%(Ml+1));return vt.box(vt.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return vt.box(vt.types.mdia,vt.mdhd(e.timescale||0,e.duration||0),vt.hdlr(e.type),vt.minf(e))}static mfhd(e){return vt.box(vt.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?vt.box(vt.types.minf,vt.box(vt.types.smhd,vt.SMHD),vt.DINF,vt.stbl(e)):vt.box(vt.types.minf,vt.box(vt.types.vmhd,vt.VMHD),vt.DINF,vt.stbl(e))}static moof(e,t,n){return vt.box(vt.types.moof,vt.mfhd(e),vt.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=vt.trak(e[t]);return vt.box.apply(null,[vt.types.moov,vt.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(vt.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=vt.trex(e[t]);return vt.box.apply(null,[vt.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Ml+1)),r=Math.floor(t%(Ml+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return vt.box(vt.types.mvhd,o)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,o;for(r=0;r<t.length;r++)o=t[r].flags,n[r+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return vt.box(vt.types.sdtp,n)}static stbl(e){return vt.box(vt.types.stbl,vt.stsd(e),vt.box(vt.types.stts,vt.STTS),vt.box(vt.types.stsc,vt.STSC),vt.box(vt.types.stsz,vt.STSZ),vt.box(vt.types.stco,vt.STCO))}static avc1(e){let t=[],n=[],r,o,u;for(r=0;r<e.sps.length;r++)o=e.sps[r],u=o.byteLength,t.push(u>>>8&255),t.push(u&255),t=t.concat(Array.prototype.slice.call(o));for(r=0;r<e.pps.length;r++)o=e.pps[r],u=o.byteLength,n.push(u>>>8&255),n.push(u&255),n=n.concat(Array.prototype.slice.call(o));const d=vt.box(vt.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),g=e.width,h=e.height,p=e.pixelRatio[0],E=e.pixelRatio[1];return vt.box(vt.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,g>>8&255,g&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,vt.box(vt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),vt.box(vt.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,E>>24,E>>16&255,E>>8&255,E&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return vt.box(vt.types.mp4a,vt.audioStsd(e),vt.box(vt.types.esds,vt.esds(e)))}static mp3(e){return vt.box(vt.types[".mp3"],vt.audioStsd(e))}static ac3(e){return vt.box(vt.types["ac-3"],vt.audioStsd(e),vt.box(vt.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return vt.box(vt.types.stsd,vt.STSD,vt.mp4a(e));if(t==="ac3"&&e.config)return vt.box(vt.types.stsd,vt.STSD,vt.ac3(e));if(t==="mp3"&&e.codec==="mp3")return vt.box(vt.types.stsd,vt.STSD,vt.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return vt.box(vt.types.stsd,vt.STSD,vt.avc1(e));if(t==="hevc"&&e.vps)return vt.box(vt.types.stsd,vt.STSD,vt.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,o=e.height||0,u=Math.floor(n/(Ml+1)),d=Math.floor(n%(Ml+1));return vt.box(vt.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const n=vt.sdtp(e),r=e.id,o=Math.floor(t/(Ml+1)),u=Math.floor(t%(Ml+1));return vt.box(vt.types.traf,vt.box(vt.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),vt.box(vt.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,u>>24,u>>16&255,u>>8&255,u&255])),vt.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,vt.box(vt.types.trak,vt.tkhd(e),vt.mdia(e))}static trex(e){const t=e.id;return vt.box(vt.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,o=12+16*r,u=new Uint8Array(o);let d,g,h,p,E,b;for(t+=8+o,u.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),d=0;d<r;d++)g=n[d],h=g.duration,p=g.size,E=g.flags,b=g.cts,u.set([h>>>24&255,h>>>16&255,h>>>8&255,h&255,p>>>24&255,p>>>16&255,p>>>8&255,p&255,E.isLeading<<2|E.dependsOn,E.isDependedOn<<6|E.hasRedundancy<<4|E.paddingValue<<1|E.isNonSync,E.degradPrio&61440,E.degradPrio&15,b>>>24&255,b>>>16&255,b>>>8&255,b&255],12+16*d);return vt.box(vt.types.trun,u)}static initSegment(e){vt.types||vt.init();const t=vt.moov(e);return Cr(vt.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=4,o=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),r-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let u=o.length;for(let T=0;T<n.length;T+=1){u+=3;for(let C=0;C<n[T].length;C+=1)u+=2+n[T][C].length}const d=new Uint8Array(u);d.set(o,0),u=o.length;const g=n.length-1;for(let T=0;T<n.length;T+=1){d.set(new Uint8Array([32+T|(T===g?128:0),0,n[T].length]),u),u+=3;for(let C=0;C<n[T].length;C+=1)d.set(new Uint8Array([n[T][C].length>>8,n[T][C].length&255]),u),u+=2,d.set(n[T][C],u),u+=n[T][C].length}const h=vt.box(vt.types.hvcC,d),p=e.width,E=e.height,b=e.pixelRatio[0],A=e.pixelRatio[1];return vt.box(vt.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,p>>8&255,p&255,E>>8&255,E&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h,vt.box(vt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),vt.box(vt.types.pasp,new Uint8Array([b>>24,b>>16&255,b>>8&255,b&255,A>>24,A>>16&255,A>>8&255,A&255])))}}vt.types=void 0;vt.HDLR_TYPES=void 0;vt.STTS=void 0;vt.STSC=void 0;vt.STCO=void 0;vt.STSZ=void 0;vt.VMHD=void 0;vt.SMHD=void 0;vt.STSD=void 0;vt.FTYP=void 0;vt.DINF=void 0;const kb=9e4;function Zm(f,e,t=1,n=!1){const r=f*e*t;return n?Math.round(r):r}function $S(f,e,t=1,n=!1){return Zm(f,e,1/t,n)}function Ed(f,e=!1){return Zm(f,1e3,1/kb,e)}function WS(f,e=1){return Zm(f,kb,1/e)}const XS=10*1e3,QS=1024,ZS=1152,JS=1536;let Iu=null,nm=null;function lE(f,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:f?2:1,isNonSync:f?0:1}}}class Sh extends Xr{constructor(e,t,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Iu===null){const u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Iu=u?parseInt(u[1]):0}if(nm===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);nm=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((o,u)=>{let d=u.pts,g=d-o;return g<-4294967296&&(t=!0,d=kr(d,n),g=d-o),g>0?o:d},n);return t&&this.debug("PTS rollover detected"),r}remux(e,t,n,r,o,u,d,g){let h,p,E,b,A,T,C=o,O=o;const te=e.pid>-1,de=t.pid>-1,fe=t.samples.length,De=e.samples.length>0,Oe=d&&fe>0||fe>1;if((!te||De)&&(!de||Oe)||this.ISGenerated||d){if(this.ISGenerated){var k,ee,Ee,P;const _t=this.videoTrackConfig;(_t&&(t.width!==_t.width||t.height!==_t.height||((k=t.pixelRatio)==null?void 0:k[0])!==((ee=_t.pixelRatio)==null?void 0:ee[0])||((Ee=t.pixelRatio)==null?void 0:Ee[1])!==((P=_t.pixelRatio)==null?void 0:P[1]))||!_t&&Oe||this.nextAudioTs===null&&De)&&this.resetInitSegment()}this.ISGenerated||(E=this.generateIS(e,t,o,u));const xe=this.isVideoContiguous;let Ve=-1,be;if(Oe&&(Ve=e_(t.samples),!xe&&this.config.forceKeyFrameOnDiscontinuity))if(T=!0,Ve>0){this.warn(`Dropped ${Ve} out of ${fe} video samples due to a missing keyframe`);const _t=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Ve),t.dropped+=Ve,O+=(t.samples[0].pts-_t)/t.inputTimeScale,be=O}else Ve===-1&&(this.warn(`No keyframe found out of ${fe} video samples`),T=!1);if(this.ISGenerated){if(De&&Oe){const _t=this.getVideoStartPts(t.samples),_e=(kr(e.samples[0].pts,_t)-_t)/t.inputTimeScale;C+=Math.max(0,_e),O+=Math.max(0,-_e)}if(De){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),E=this.generateIS(e,t,o,u)),p=this.remuxAudio(e,C,this.isAudioContiguous,u,de||Oe||g===zn.AUDIO?O:void 0),Oe){const _t=p?p.endPTS-p.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),E=this.generateIS(e,t,o,u)),h=this.remuxVideo(t,O,xe,_t)}}else Oe&&(h=this.remuxVideo(t,O,xe,0));h&&(h.firstKeyFrame=Ve,h.independent=Ve!==-1,h.firstKeyFramePTS=be)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(A=Db(n,o,this._initPTS,this._initDTS)),r.samples.length&&(b=Cb(r,o,this._initPTS))),{audio:p,video:h,initSegment:E,independent:T,text:b,id3:A}}generateIS(e,t,n,r){const o=e.samples,u=t.samples,d=this.typeSupported,g={},h=this._initPTS;let p=!h||r,E="audio/mp4",b,A,T,C=-1;if(p&&(b=A=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":d.mpeg?(E="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}g.audio={id:"audio",container:E,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&d.mpeg?new Uint8Array(0):vt.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(C=e.id,T=e.inputTimeScale,!h||T!==h.timescale?b=A=o[0].pts-Math.round(T*n):p=!1)}if(t.sps&&t.pps&&u.length){if(t.timescale=t.inputTimeScale,g.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:vt.initSegment([t]),metadata:{width:t.width,height:t.height}},p)if(C=t.id,T=t.inputTimeScale,!h||T!==h.timescale){const O=this.getVideoStartPts(u),te=Math.round(T*n);A=Math.min(A,kr(u[0].dts,O)-te),b=Math.min(b,O-te)}else p=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(g).length)return this.ISGenerated=!0,p?(h&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${n} ${b/T} != initPTS: ${h.baseTime/h.timescale} (${h.baseTime}/${h.timescale}) trackId: ${h.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${b/T} (${b}/${T}) trackId: ${C}`),this._initPTS={baseTime:b,timescale:T,trackId:C},this._initDTS={baseTime:A,timescale:T,trackId:C}):b=T=void 0,{tracks:g,initPTS:b,timescale:T,trackId:C}}remuxVideo(e,t,n,r){const o=e.inputTimeScale,u=e.samples,d=[],g=u.length,h=this._initPTS,p=h.baseTime*o/h.timescale;let E=this.nextVideoTs,b=8,A=this.videoSampleDuration,T,C,O=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,de=!1;if(!n||E===null){const Be=p+t*o,it=u[0].pts-kr(u[0].dts,u[0].pts);Iu&&E!==null&&Math.abs(Be-it-(E+p))<15e3?n=!0:E=Be-it-p}const fe=E+p;for(let Be=0;Be<g;Be++){const it=u[Be];it.pts=kr(it.pts,fe),it.dts=kr(it.dts,fe),it.dts<u[Be>0?Be-1:Be].dts&&(de=!0)}de&&u.sort(function(Be,it){const gt=Be.dts-it.dts,zt=Be.pts-it.pts;return gt||zt}),T=u[0].dts,C=u[u.length-1].dts;const De=C-T,Oe=De?Math.round(De/(g-1)):A||e.inputTimeScale/30;if(n){const Be=T-fe,it=Be>Oe,gt=Be<-1;if((it||gt)&&(it?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ed(Be,!0)} ms (${Be}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ed(-Be,!0)} ms (${Be}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!gt||fe>=u[0].pts||Iu)){T=fe;const zt=u[0].pts-Be;if(it)u[0].dts=T,u[0].pts=zt;else{let Ce=!0;for(let Le=0;Le<u.length&&!(u[Le].dts>zt&&Ce);Le++){const yt=u[Le].pts;if(u[Le].dts-=Be,u[Le].pts-=Be,Le<u.length-1){const Y=u[Le+1].pts,W=u[Le].pts,L=Y<=W,j=Y<=yt;Ce=L==j}}}this.log(`Video: Initial PTS/DTS adjusted: ${Ed(zt,!0)}/${Ed(T,!0)}, delta: ${Ed(Be,!0)} ms`)}}T=Math.max(0,T);let q=0,k=0,ee=T;for(let Be=0;Be<g;Be++){const it=u[Be],gt=it.units,zt=gt.length;let Ce=0;for(let Le=0;Le<zt;Le++)Ce+=gt[Le].data.length;k+=Ce,q+=zt,it.length=Ce,it.dts<ee?(it.dts=ee,ee+=Oe/4|0||1):ee=it.dts,O=Math.min(it.pts,O),te=Math.max(it.pts,te)}C=u[g-1].dts;const Ee=k+4*q+8;let P;try{P=new Uint8Array(Ee)}catch(Be){this.observer.emit(pe.ERROR,pe.ERROR,{type:jn.MUX_ERROR,details:xt.REMUX_ALLOC_ERROR,fatal:!1,error:Be,bytes:Ee,reason:`fail allocating video mdat ${Ee}`});return}const xe=new DataView(P.buffer);xe.setUint32(0,Ee),P.set(vt.types.mdat,4);let Ve=!1,be=Number.POSITIVE_INFINITY,_t=Number.POSITIVE_INFINITY,Ye=Number.NEGATIVE_INFINITY,_e=Number.NEGATIVE_INFINITY;for(let Be=0;Be<g;Be++){const it=u[Be],gt=it.units;let zt=0;for(let yt=0,Y=gt.length;yt<Y;yt++){const W=gt[yt],L=W.data,j=W.data.byteLength;xe.setUint32(b,j),b+=4,P.set(L,b),b+=j,zt+=4+j}let Ce;if(Be<g-1)A=u[Be+1].dts-it.dts,Ce=u[Be+1].pts-it.pts;else{const yt=this.config,Y=Be>0?it.dts-u[Be-1].dts:Oe;if(Ce=Be>0?it.pts-u[Be-1].pts:Oe,yt.stretchShortVideoTrack&&this.nextAudioTs!==null){const W=Math.floor(yt.maxBufferHole*o),L=(r?O+r*o:this.nextAudioTs+p)-it.pts;L>W?(A=L-Y,A<0?A=Y:Ve=!0,this.log(`It is approximately ${L/90} ms to the next segment; using duration ${A/90} ms for the last video frame.`)):A=Y}else A=Y}const Le=Math.round(it.pts-it.dts);be=Math.min(be,A),Ye=Math.max(Ye,A),_t=Math.min(_t,Ce),_e=Math.max(_e,Ce),d.push(lE(it.key,A,zt,Le))}if(d.length){if(Iu){if(Iu<70){const Be=d[0].flags;Be.dependsOn=2,Be.isNonSync=0}}else if(nm&&_e-_t<Ye-be&&Oe/Ye<.025&&d[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Be=T;for(let it=0,gt=d.length;it<gt;it++){const zt=Be+d[it].duration,Ce=Be+d[it].cts;if(it<gt-1){const Le=zt+d[it+1].cts;d[it].duration=Le-Ce}else d[it].duration=it?d[it-1].duration:Oe;d[it].cts=0,Be=zt}}}A=Ve||!A?Oe:A;const He=C+A;this.nextVideoTs=E=He-p,this.videoSampleDuration=A,this.isVideoContiguous=!0;const Pe={data1:vt.moof(e.sequenceNumber++,T,Fa(e,{samples:d})),data2:P,startPTS:(O-p)/o,endPTS:(te+A-p)/o,startDTS:(T-p)/o,endDTS:E/o,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Pe}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return ZS;case"ac3":return JS;default:return QS}}remuxAudio(e,t,n,r,o){const u=e.inputTimeScale,d=e.samplerate?e.samplerate:u,g=u/d,h=this.getSamplesPerFrame(e),p=h*g,E=this._initPTS,b=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,A=[],T=o!==void 0;let C=e.samples,O=b?0:8,te=this.nextAudioTs||-1;const de=E.baseTime*u/E.timescale,fe=de+t*u;if(this.isAudioContiguous=n=n||C.length&&te>0&&(r&&Math.abs(fe-(te+de))<9e3||Math.abs(kr(C[0].pts,fe)-(te+de))<20*p),C.forEach(function(_e){_e.pts=kr(_e.pts,fe)}),!n||te<0){if(C=C.filter(_e=>_e.pts>=0),!C.length)return;o===0?te=0:r&&!T?te=Math.max(0,fe-de):te=C[0].pts-de}if(e.segmentCodec==="aac"){const _e=this.config.maxAudioFramesDrift;for(let He=0,nt=te+de;He<C.length;He++){const ut=C[He],Pe=ut.pts,Be=Pe-nt,it=Math.abs(1e3*Be/u);if(Be<=-_e*p&&T)He===0&&(this.warn(`Audio frame @ ${(Pe/u).toFixed(3)}s overlaps marker by ${Math.round(1e3*Be/u)} ms.`),this.nextAudioTs=te=Pe-de,nt=Pe);else if(Be>=_e*p&&it<XS&&T){let gt=Math.round(Be/p);for(nt=Pe-gt*p;nt<0&&gt&&p;)gt--,nt+=p;He===0&&(this.nextAudioTs=te=nt-de),this.warn(`Injecting ${gt} audio frames @ ${((nt-de)/u).toFixed(3)}s due to ${Math.round(1e3*Be/u)} ms gap.`);for(let zt=0;zt<gt;zt++){let Ce=KS.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Ce||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Ce=ut.unit.subarray()),C.splice(He,0,{unit:Ce,pts:nt}),nt+=p,He++}}ut.pts=nt,nt+=p}}let De=null,Oe=null,q,k=0,ee=C.length;for(;ee--;)k+=C[ee].unit.byteLength;for(let _e=0,He=C.length;_e<He;_e++){const nt=C[_e],ut=nt.unit;let Pe=nt.pts;if(Oe!==null){const it=A[_e-1];it.duration=Math.round((Pe-Oe)/g)}else if(n&&e.segmentCodec==="aac"&&(Pe=te+de),De=Pe,k>0){k+=O;try{q=new Uint8Array(k)}catch(it){this.observer.emit(pe.ERROR,pe.ERROR,{type:jn.MUX_ERROR,details:xt.REMUX_ALLOC_ERROR,fatal:!1,error:it,bytes:k,reason:`fail allocating audio mdat ${k}`});return}b||(new DataView(q.buffer).setUint32(0,k),q.set(vt.types.mdat,4))}else return;q.set(ut,O);const Be=ut.byteLength;O+=Be,A.push(lE(!0,h,Be,0)),Oe=Pe}const Ee=A.length;if(!Ee)return;const P=A[A.length-1];te=Oe-de,this.nextAudioTs=te+g*P.duration;const xe=b?new Uint8Array(0):vt.moof(e.sequenceNumber++,De/g,Fa({},e,{samples:A}));e.samples=[];const Ve=(De-de)/u,be=te/u,Ye={data1:xe,data2:q,startPTS:Ve,endPTS:be,startDTS:Ve,endDTS:be,type:"audio",hasAudio:!0,hasVideo:!1,nb:Ee};return this.isAudioContiguous=!0,Ye}}function kr(f,e){let t;if(e===null)return f;for(e<f?t=-8589934592:t=8589934592;Math.abs(f-e)>4294967296;)f+=t;return f}function e_(f){for(let e=0;e<f.length;e++)if(f[e].key)return e;return-1}function Db(f,e,t,n){const r=f.samples.length;if(!r)return;const o=f.inputTimeScale;for(let d=0;d<r;d++){const g=f.samples[d];g.pts=kr(g.pts-t.baseTime*o/t.timescale,e*o)/o,g.dts=kr(g.dts-n.baseTime*o/n.timescale,e*o)/o}const u=f.samples;return f.samples=[],{samples:u}}function Cb(f,e,t){const n=f.samples.length;if(!n)return;const r=f.inputTimeScale;for(let u=0;u<n;u++){const d=f.samples[u];d.pts=kr(d.pts-t.baseTime*r/t.timescale,e*r)/r}f.samples.sort((u,d)=>u.pts-d.pts);const o=f.samples;return f.samples=[],{samples:o}}class t_ extends Xr{constructor(e,t,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:o,video:u}=this.initData=GE(e);if(t)YT(e,t);else{const g=o||u;g!=null&&g.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${g.codec}")!`)}o&&(n=oE(o,ja.AUDIO,this)),u&&(r=oE(u,ja.VIDEO,this));const d={};o&&u?d.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:u.supplemental,encrypted:u.encrypted,initSegment:e,id:"main"}:o?d.audio={container:"audio/mp4",codec:n,encrypted:o.encrypted,initSegment:e,id:"audio"}:u?d.video={container:"video/mp4",codec:r,supplemental:u.supplemental,encrypted:u.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=d}remux(e,t,n,r,o,u){var d,g;let{initPTS:h,lastEndTime:p}=this;const E={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};wn(p)||(p=this.lastEndTime=o||0);const b=t.samples;if(!b.length)return E;const A={initPTS:void 0,timescale:void 0,trackId:void 0};let T=this.initData;if((d=T)!=null&&d.length||(this.generateInitSegment(b),T=this.initData),!((g=T)!=null&&g.length))return this.warn("Failed to generate initSegment."),E;this.emitInitSegment&&(A.tracks=this.initTracks,this.emitInitSegment=!1);const C=KT(b,T,this),O=T.audio?C[T.audio.id]:null,te=T.video?C[T.video.id]:null,de=fh(te,1/0),fe=fh(O,1/0),De=fh(te,0,!0),Oe=fh(O,0,!0);let q=o,k=0;const ee=O&&(!te||!h&&fe<de||h&&h.trackId===T.audio.id),Ee=ee?O:te;if(Ee){const nt=Ee.timescale,ut=Ee.start-o*nt,Pe=ee?T.audio.id:T.video.id;q=Ee.start/nt,k=ee?Oe-fe:De-de,(u||!h)&&(n_(h,q,o,k)||nt!==h.timescale)&&(h&&this.warn(`Timestamps at playlist time: ${u?"":"~"}${o} ${ut/nt} != initPTS: ${h.baseTime/h.timescale} (${h.baseTime}/${h.timescale}) trackId: ${h.trackId}`),this.log(`Found initPTS at playlist time: ${o} offset: ${q-o} (${ut}/${nt}) trackId: ${Pe}`),h=null,A.initPTS=ut,A.timescale=nt,A.trackId=Pe)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${o}`);h?(A.initPTS=h.baseTime,A.timescale=h.timescale,A.trackId=h.trackId):((!A.timescale||A.trackId===void 0||A.initPTS===void 0)&&(this.warn("Could not set initPTS"),A.initPTS=q,A.timescale=1,A.trackId=-1),this.initPTS=h={baseTime:A.initPTS,timescale:A.timescale,trackId:A.trackId});const P=q-h.baseTime/h.timescale,xe=P+k;k>0?this.lastEndTime=xe:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Ve=!!T.audio,be=!!T.video;let _t="";Ve&&(_t+="audio"),be&&(_t+="video");const Ye=(T.audio?T.audio.encrypted:!1)||(T.video?T.video.encrypted:!1),_e={data1:b,startPTS:P,startDTS:P,endPTS:xe,endDTS:xe,type:_t,hasAudio:Ve,hasVideo:be,nb:1,dropped:0,encrypted:Ye};E.audio=Ve&&!be?_e:void 0,E.video=be?_e:void 0;const He=te?.sampleCount;if(He){const nt=te.keyFrameIndex,ut=nt!==-1;_e.nb=He,_e.dropped=nt===0||this.isVideoContiguous?0:ut?nt:He,_e.independent=ut,_e.firstKeyFrame=nt,ut&&te.keyFrameStart&&(_e.firstKeyFramePTS=(te.keyFrameStart-h.baseTime)/h.timescale),this.isVideoContiguous||(E.independent=ut),this.isVideoContiguous||(this.isVideoContiguous=ut),_e.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${nt}/${He} dropped: ${_e.dropped} start: ${_e.firstKeyFramePTS||"NA"}`)}return E.initSegment=A,E.id3=Db(n,o,h,h),r.samples.length&&(E.text=Cb(r,o,h)),E}}function fh(f,e,t=!1){return f?.start!==void 0?(f.start+(t?f.duration:0))/f.timescale:e}function n_(f,e,t,n){if(f===null)return!0;const r=Math.max(n,1),o=e-f.baseTime/f.timescale;return Math.abs(o-t)>r}function oE(f,e,t){const n=f.codec;return n&&n.length>4?n:e===ja.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?kh(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let Ks;try{Ks=self.performance.now.bind(self.performance)}catch{Ks=Date.now}const _h=[{demux:jS,remux:t_},{demux:zl,remux:Sh},{demux:zS,remux:Sh},{demux:US,remux:Sh}];_h.splice(2,0,{demux:FS,remux:Sh});class uE{constructor(e,t,n,r,o,u){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=o,this.logger=u}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const o=n.transmuxing;o.executeStart=Ks();let u=new Uint8Array(e);const{currentTransmuxState:d,transmuxConfig:g}=this;r&&(this.currentTransmuxState=r);const{contiguous:h,discontinuity:p,trackSwitch:E,accurateTimeOffset:b,timeOffset:A,initSegmentChange:T}=r||d,{audioCodec:C,videoCodec:O,defaultInitPts:te,duration:de,initSegmentData:fe}=g,De=a_(u,t);if(De&&Du(De.method)){const ee=this.getDecrypter(),Ee=Gm(De.method);if(ee.isSync()){let P=ee.softwareDecrypt(u,De.key.buffer,De.iv.buffer,Ee);if(n.part>-1){const Ve=ee.flush();P=Ve&&Ve.buffer}if(!P)return o.executeEnd=Ks(),am(n);u=new Uint8Array(P)}else return this.asyncResult=!0,this.decryptionPromise=ee.webCryptoDecrypt(u,De.key.buffer,De.iv.buffer,Ee).then(P=>{const xe=this.push(P,null,n);return this.decryptionPromise=null,xe}),this.decryptionPromise}const Oe=this.needsProbing(p,E);if(Oe){const ee=this.configureTransmuxer(u);if(ee)return this.logger.warn(`[transmuxer] ${ee.message}`),this.observer.emit(pe.ERROR,pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_PARSING_ERROR,fatal:!1,error:ee,reason:ee.message}),o.executeEnd=Ks(),am(n)}(p||E||T||Oe)&&this.resetInitSegment(fe,C,O,de,t),(p||T||Oe)&&this.resetInitialTimestamp(te),h||this.resetContiguity();const q=this.transmux(u,De,A,b,n);this.asyncResult=wd(q);const k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,o.executeEnd=Ks(),q}flush(e){const t=e.transmuxing;t.executeStart=Ks();const{decrypter:n,currentTransmuxState:r,decryptionPromise:o}=this;if(o)return this.asyncResult=!0,o.then(()=>this.flush(e));const u=[],{timeOffset:d}=r;if(n){const E=n.flush();E&&u.push(this.push(E.buffer,null,e))}const{demuxer:g,remuxer:h}=this;if(!g||!h){t.executeEnd=Ks();const E=[am(e)];return this.asyncResult?Promise.resolve(E):E}const p=g.flush(d);return wd(p)?(this.asyncResult=!0,p.then(E=>(this.flushRemux(u,E,e),u))):(this.flushRemux(u,p,e),this.asyncResult?Promise.resolve(u):u)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:o,id3Track:u,textTrack:d}=t,{accurateTimeOffset:g,timeOffset:h}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===zn.MAIN?"level":"track"} ${n.level}`);const p=this.remuxer.remux(r,o,u,d,h,g,!0,this.id);e.push({remuxResult:p,chunkMeta:n}),n.transmuxing.executeEnd=Ks()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,o){const{demuxer:u,remuxer:d}=this;!u||!d||(u.resetInitSegment(e,t,n,r),d.resetInitSegment(e,t,n,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,o){let u;return t&&t.method==="SAMPLE-AES"?u=this.transmuxSampleAes(e,t,n,r,o):u=this.transmuxUnencrypted(e,n,r,o),u}transmuxUnencrypted(e,t,n,r){const{audioTrack:o,videoTrack:u,id3Track:d,textTrack:g}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,u,d,g,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,o){return this.demuxer.demuxSampleAes(e,t,n).then(u=>({remuxResult:this.remuxer.remux(u.audioTrack,u.videoTrack,u.id3Track,u.textTrack,n,r,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let o;for(let E=0,b=_h.length;E<b;E++){var u;if((u=_h[E].demux)!=null&&u.probe(e,this.logger)){o=_h[E];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const d=this.demuxer,g=this.remuxer,h=o.remux,p=o.demux;(!g||!(g instanceof h))&&(this.remuxer=new h(n,t,r,this.logger)),(!d||!(d instanceof p))&&(this.demuxer=new p(n,t,r,this.logger),this.probe=p.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new jm(this.config)),e}}function a_(f,e){let t=null;return f.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const am=f=>({remuxResult:{},chunkMeta:f});function wd(f){return"then"in f&&f.then instanceof Function}class i_{constructor(e,t,n,r,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=o||null}}class r_{constructor(e,t,n,r,o,u){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=o,this.initSegmentChange=u}}let cE=0;class Lb{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=cE++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=g=>{const h=g.data,p=this.hls;if(!(!p||!(h!=null&&h.event)||h.instanceNo!==this.instanceNo))switch(h.event){case"init":{var E;const b=(E=this.workerContext)==null?void 0:E.objectURL;b&&self.URL.revokeObjectURL(b);break}case"transmuxComplete":{this.handleTransmuxComplete(h.data);break}case"flush":{this.onFlush(h.data);break}case"workerLog":{p.logger[h.data.logType]&&p.logger[h.data.logType](h.data.message);break}default:{h.data=h.data||{},h.data.frag=this.frag,h.data.part=this.part,h.data.id=this.id,p.trigger(h.event,h.data);break}}},this.onWorkerError=g=>{if(!this.hls)return;const h=new Error(`${g.message}  (${g.filename}:${g.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})};const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const u=(g,h)=>{h=h||{},h.frag=this.frag||void 0,g===pe.ERROR&&(h=h,h.parent=this.id,h.part=this.part,this.error=h.error),this.hls.trigger(g,h)};this.observer=new Ym,this.observer.on(pe.FRAG_DECRYPTED,u),this.observer.on(pe.ERROR,u);const d=ky(o.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const g=this.hls.logger;if(o.workerPath||uS()){try{o.workerPath?(g.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=dS(o.workerPath)):(g.log(`injecting Web Worker for "${t}"`),this.workerContext=cS());const{worker:p}=this.workerContext;p.addEventListener("message",this.onWorkerMessage),p.addEventListener("error",this.onWorkerError),p.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:d,id:t,config:Ya(o)})}catch(p){g.warn(`Error setting up "${t}" Web Worker, fallback to inline`,p),this.terminateWorker(),this.error=null,this.transmuxer=new uE(this.observer,d,o,"",t,e.logger)}return}}this.transmuxer=new uE(this.observer,d,o,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=cE++;const t=this.hls.config,n=ky(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Ya(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),fS(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,o,u,d,g,h,p){var E,b;h.transmuxing.start=self.performance.now();const{instanceNo:A,transmuxer:T}=this,C=u?u.start:o.start,O=o.decryptdata,te=this.frag,de=!(te&&o.cc===te.cc),fe=!(te&&h.level===te.level),De=te?h.sn-te.sn:-1,Oe=this.part?h.part-this.part.index:-1,q=De===0&&h.id>1&&h.id===te?.stats.chunkCount,k=!fe&&(De===1||De===0&&(Oe===1||q&&Oe<=0)),ee=self.performance.now();(fe||De||o.stats.parsing.start===0)&&(o.stats.parsing.start=ee),u&&(Oe||!k)&&(u.stats.parsing.start=ee);const Ee=!(te&&((E=o.initSegment)==null?void 0:E.url)===((b=te.initSegment)==null?void 0:b.url)),P=new r_(de,k,g,fe,C,Ee);if(!k||de||Ee){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${o.type} sn: ${h.sn}${h.part>-1?" part: "+h.part:""} ${this.id===zn.MAIN?"level":"track"}: ${h.level} id: ${h.id}
        discontinuity: ${de}
        trackSwitch: ${fe}
        contiguous: ${k}
        accurateTimeOffset: ${g}
        timeOffset: ${C}
        initSegmentChange: ${Ee}`);const xe=new i_(n,r,t,d,p);this.configureTransmuxer(xe)}if(this.frag=o,this.part=u,this.workerContext)this.workerContext.worker.postMessage({instanceNo:A,cmd:"demux",data:e,decryptdata:O,chunkMeta:h,state:P},e instanceof ArrayBuffer?[e]:[]);else if(T){const xe=T.push(e,O,h,P);wd(xe)?xe.then(Ve=>{this.handleTransmuxComplete(Ve)}).catch(Ve=>{this.transmuxerError(Ve,h,"transmuxer-interface push error")}):this.handleTransmuxComplete(xe)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const r=n.flush(e);wd(r)?r.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const dE=100;class s_ extends Vm{constructor(e,t,n){super(e,t,n,"audio-stream-controller",zn.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(pe.BUFFER_RESET,this.onBufferReset,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(pe.BUFFER_RESET,this.onBufferReset,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:o,trackId:u}){if(n===zn.MAIN){const d=t.cc,g=this.fragCurrent;if(this.initPTS[d]={baseTime:r,timescale:o,trackId:u},this.log(`InitPTS for cc: ${d} found from main: ${r/o} (${r}/${o}) trackId: ${u}`),this.mainAnchor=t,this.state===sn.WAITING_INIT_PTS){const h=this.waitingData;(!h&&!this.loadingParts||h&&h.frag.cc!==d)&&this.syncWithAnchor(t,h?.frag)}else!this.hls.hasEnoughToStart&&g&&g.cc!==d?(g.abortRequests(),this.syncWithAnchor(t,g)):this.state===sn.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&r?.cc===t.cc)return;const o=(r||e).cc,u=this.getLevelDetails(),d=this.getLoadPosition(),g=JE(u,o,d);g&&(this.log(`Syncing with main frag at ${g.start} cc ${g.cc}`),this.startFragRequested=!1,this.nextLoadPosition=g.start,this.resetLoadingState(),this.state===sn.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=sn.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(dE),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=sn.IDLE):this.state=sn.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case sn.IDLE:this.doTickIdle();break;case sn.WAITING_TRACK:{const{levels:t,trackId:n}=this,r=t?.[n],o=r?.details;if(o&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(o))break;this.state=sn.WAITING_INIT_PTS}break}case sn.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:r,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(r?.[o]||null),this.state=sn.IDLE}break}case sn.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:n,part:r,cache:o,complete:u}=t,d=this.mainAnchor;if(this.initPTS[n.cc]!==void 0){this.waitingData=null,this.state=sn.FRAG_LOADING;const g=o.flush().buffer,h={frag:n,part:r,payload:g,networkDetails:null};this._handleFragmentLoadProgress(h),u&&super._handleFragmentLoadComplete(h)}else d&&d.cc!==t.frag.cc&&this.syncWithAnchor(d,t.frag)}else this.state=sn.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:o}=this,u=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!u.startFragPrefetch)||!(n!=null&&n[o]))return;const d=n[o],g=d.details;if(!g||this.waitForLive(d)||this.waitForCdnTuneIn(g)){this.state=sn.WAITING_TRACK,this.startFragRequested=!1;return}const h=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&h&&(this.bufferFlushed=!1,this.afterBufferFlushed(h,ja.AUDIO,zn.AUDIO));const p=this.getFwdBufferInfo(h,zn.AUDIO);if(p===null)return;if(!this.switchingTrack&&this._streamEnded(p,g)){t.trigger(pe.BUFFER_EOS,{type:"audio"}),this.state=sn.ENDED;return}const E=p.len,b=t.maxBufferLength,A=g.fragments,T=A[0].start,C=this.getLoadPosition(),O=this.flushing?C:p.end;if(this.switchingTrack&&r){const fe=C;g.PTSKnown&&fe<T&&(p.end>T||p.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=T+.05)}if(E>=b&&!this.switchingTrack&&O<A[A.length-1].start)return;let te=this.getNextFragment(O,g);if(te&&this.isLoopLoading(te,O)&&(te=this.getNextFragmentLoopLoading(te,g,p,zn.MAIN,b)),!te){this.bufferFlushed=!0;return}let de=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&de&&hi(te)&&!te.endList&&(!g.live||!this.loadingParts&&O<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(de)===Ti.OK&&(this.mainFragLoading=de=null),de&&hi(de))){if(te.start>de.end){const De=this.fragmentTracker.getFragAtPos(O,zn.MAIN);De&&De.end>de.end&&(de=De,this.mainFragLoading={frag:De,targetBufferTime:null})}if(te.start>de.end)return}this.loadFragment(te,d,O)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Ad(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==sn.STOPPED&&(this.setInterval(dE),this.state=sn.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(pe.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:o,id:u,groupId:d,track:g}=t;if(!r){this.warn(`Audio tracks reset while loading track ${u} "${g.name}" of "${d}"`);return}const h=this.mainDetails;if(!h||o.endCC>h.endCC||h.expired){this.cachedTrackLoadedData=t,this.state!==sn.STOPPED&&(this.state=sn.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${u} "${g.name}" of "${d}" loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const p=r[u];let E=0;if(o.live||(n=p.details)!=null&&n.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;if(p.details){var b;E=this.alignPlaylists(o,p.details,(b=this.levelLastLoaded)==null?void 0:b.details)}o.alignedSliding||(fb(o,h),o.alignedSliding||Oh(o,h),E=o.fragmentStart)}p.details=o,this.levelLastLoaded=p,this.startFragRequested||this.setStartPosition(h,E),this.hls.trigger(pe.AUDIO_TRACK_UPDATED,{details:o,id:u,groupId:t.groupId}),this.state===sn.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=sn.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:o}=e,{config:u,trackId:d,levels:g}=this;if(!g){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const h=g[d];if(!h){this.warn("Audio track is undefined on fragment load progress");return}const p=h.details;if(!p){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const E=u.defaultAudioCodec||h.audioCodec||"mp4a.40.2";let b=this.transmuxer;b||(b=this.transmuxer=new Lb(this.hls,zn.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const A=this.initPTS[n.cc],T=(t=n.initSegment)==null?void 0:t.data;if(A!==void 0){const O=r?r.index:-1,te=O!==-1,de=new qm(n.level,n.sn,n.stats.chunkCount,o.byteLength,O,te);b.push(o,T,E,"",n,r,p.totalduration,!1,de,A)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${p.startSN} ,${p.endSN}],track ${d}`);const{cache:C}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new hb,complete:!1};C.push(new Uint8Array(o)),this.state!==sn.STOPPED&&(this.state=sn.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===zn.MAIN&&hi(t.frag)&&(this.mainFragLoading=t,this.state===sn.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type!==zn.AUDIO){!this.audioOnly&&n.type===zn.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(hi(n)){this.fragPrevious=n;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(pe.AUDIO_TRACK_SWITCHED,za({},o)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=sn.ERROR;return}switch(t.details){case xt.FRAG_GAP:case xt.FRAG_PARSING_ERROR:case xt.FRAG_DECRYPT_ERROR:case xt.FRAG_LOAD_ERROR:case xt.FRAG_LOAD_TIMEOUT:case xt.KEY_LOAD_ERROR:case xt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(zn.AUDIO,t);break;case xt.AUDIO_TRACK_LOAD_ERROR:case xt.AUDIO_TRACK_LOAD_TIMEOUT:case xt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===sn.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===pa.AUDIO_TRACK&&(this.state=sn.IDLE);break;case xt.BUFFER_ADD_CODEC_ERROR:case xt.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case xt.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case xt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==ja.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==ja.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===sn.ENDED&&(this.state=sn.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,zn.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:o,chunkMeta:u}=e,d=this.getCurrentContext(u);if(!d){this.resetWhenMissingContext(u);return}const{frag:g,part:h,level:p}=d,{details:E}=p,{audio:b,text:A,id3:T,initSegment:C}=o;if(this.fragContextChanged(g)||!E){this.fragmentTracker.removeFragment(g);return}if(this.state=sn.PARSING,this.switchingTrack&&b&&this.completeAudioSwitch(this.switchingTrack),C!=null&&C.tracks){const O=g.initSegment||g;if(this.unhandledEncryptionError(C,g))return;this._bufferInitSegment(p,C.tracks,O,u),r.trigger(pe.FRAG_PARSING_INIT_SEGMENT,{frag:O,id:n,tracks:C.tracks})}if(b){const{startPTS:O,endPTS:te,startDTS:de,endDTS:fe}=b;h&&(h.elementaryStreams[ja.AUDIO]={startPTS:O,endPTS:te,startDTS:de,endDTS:fe}),g.setElementaryStreamInfo(ja.AUDIO,O,te,de,fe),this.bufferFragmentData(b,g,h,u)}if(T!=null&&(t=T.samples)!=null&&t.length){const O=Fa({id:n,frag:g,details:E},T);r.trigger(pe.FRAG_PARSING_METADATA,O)}if(A){const O=Fa({id:n,frag:g,details:E},A);r.trigger(pe.FRAG_PARSING_USERDATA,O)}}_bufferInitSegment(e,t,n,r){if(this.state!==sn.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const o=t.audio;o.id=zn.AUDIO;const u=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${u}/${o.codec}]`),u&&u.split(",").length===1&&(o.levelCodec=u),this.hls.trigger(pe.BUFFER_CODECS,t);const d=o.initSegment;if(d!=null&&d.byteLength){const g={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:d};this.hls.trigger(pe.BUFFER_APPENDING,g)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===Ti.NOT_LOADED||r===Ti.PARTIAL){var o;if(!hi(e))this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=sn.WAITING_INIT_PTS;const u=this.mainDetails;u&&u.fragmentStart!==t.details.fragmentStart&&Oh(t.details,u)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:o,audioCodec:u,channels:d}=this.bufferedTrack;To({name:t,lang:n,assocLang:r,characteristics:o,audioCodec:u,channels:d},e,bo)||(Ch(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(pe.AUDIO_TRACK_SWITCHED,za({},e))}}class Jm extends Xr{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=t?.renditionReports;if(r){let o=-1;for(let u=0;u<r.length;u++){const d=r[u];let g;try{g=new self.URL(d.URI,t.url).href}catch(h){this.warn(`Could not construct new URL for Rendition Report: ${h}`),g=d.URI||""}if(g===e){o=u;break}else g===e.substring(0,g.length)&&(o=u)}if(o!==-1){const u=r[o],d=parseInt(u["LAST-MSN"])||t.lastPartSn;let g=parseInt(u["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const p=Math.min(t.age-t.partTarget,t.targetduration);g>=0&&p>t.partTarget&&(g+=1)}const h=n&&Dy(n);return new Cy(d,g>=0?g:void 0,h)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:r,stats:o}=t,u=self.performance.now(),d=o.loading.first?Math.max(0,u-o.loading.first):0;r.advancedDateTime=Date.now()-d;const g=this.hls.config.timelineOffset;if(g!==r.appliedTimelineOffset){const p=Math.max(g||0,0);r.appliedTimelineOffset=p,r.fragments.forEach(E=>{E.setStart(E.playlistOffset+p)})}if(r.live||n!=null&&n.live){const p="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){Jv(n,r,this);const de=r.playlistParsingError;if(de){this.warn(de);const fe=this.hls;if(!fe.config.ignorePlaylistParsingErrors){var h;const{networkDetails:De}=t;fe.trigger(pe.ERROR,{type:jn.NETWORK_ERROR,details:xt.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:de,reason:de.message,level:t.level||void 0,parent:(h=r.fragments[0])==null?void 0:h.type,networkDetails:De,stats:o});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=o.loading.start);const E=this.hls.mainForwardBufferInfo,b=E?E.end-E.len:0,A=(r.edge-b)*1e3,T=lb(r,A);if(r.requestScheduled+T<u?r.requestScheduled=u:r.requestScheduled+=T,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let C,O,te;if(r.canBlockReload&&r.endSN&&r.advanced){const de=this.hls.config.lowLatencyMode,fe=r.lastPartSn,De=r.endSN,Oe=r.lastPartIndex,q=Oe!==-1,k=fe===De;q?k?(O=De+1,te=de?0:Oe):(O=fe,te=de?Oe+1:r.maxPartIndex):O=De+1;const ee=r.age,Ee=ee+r.ageHeader;let P=Math.min(Ee-r.partTarget,r.targetduration*1.5);if(P>0){if(Ee>r.targetduration*3)this.log(`Playlist last advanced ${ee.toFixed(2)}s ago. Omitting segment and part directives.`),O=void 0,te=void 0;else if(n!=null&&n.tuneInGoal&&Ee-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${P} with playlist age: ${r.age}`),P=0;else{const xe=Math.floor(P/r.targetduration);if(O+=xe,te!==void 0){const Ve=Math.round(P%r.targetduration/r.partTarget);te+=Ve}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${ee.toFixed(2)}s goal: ${P} skip sn ${xe} to part ${te}`)}r.tuneInGoal=P}if(C=this.getDeliveryDirectives(r,t.deliveryDirectives,O,te),de||!k){r.requestScheduled=u,this.loadingPlaylist(p,C);return}}else(r.canBlockReload||r.canSkipUntil)&&(C=this.getDeliveryDirectives(r,t.deliveryDirectives,O,te));C&&O!==void 0&&r.canBlockReload&&(r.requestScheduled=o.loading.first+Math.max(T-d*2,T/2)),this.scheduleLoading(p,C,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r){this.loadingPlaylist(e,t);return}const o=self.performance.now(),u=r.requestScheduled;if(o>=u){this.loadingPlaylist(e,t);return}const d=u-o;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(d)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),d)}getDeliveryDirectives(e,t,n,r){let o=Dy(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,o=Th.No),new Cy(n,r,o)}checkRetry(e){const t=e.details,n=Lh(e),r=e.errorAction,{action:o,retryCount:u=0,retryConfig:d}=r||{},g=!!r&&!!d&&(o===qi.RetryRequest||!r.resolved&&o===qi.SendAlternateToPenaltyBox);if(g){var h;if(u>=d.maxNumRetry)return!1;if(n&&(h=e.context)!=null&&h.deliveryDirectives)this.warn(`Retrying playlist loading ${u+1}/${d.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const p=Bm(d,u);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),p),this.warn(`Retrying playlist loading ${u+1}/${d.maxNumRetry} after "${t}" in ${p}ms`)}e.levelRetry=!0,r.resolved=!0}return g}}function Nb(f,e){if(f.length!==e.length)return!1;for(let t=0;t<f.length;t++)if(!kd(f[t].attrs,e[t].attrs))return!1;return!0}function kd(f,e,t){const n=f["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>f[r]!==e[r])}function Im(f,e){return e.label.toLowerCase()===f.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(f.lang||"").toLowerCase())}class l_ extends Jm{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(pe.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:o}=t,u=this.tracksInGroup[n];if(!u||u.groupId!==r){this.warn(`Audio track with id:${n} and group:${r} not found in active group ${u?.groupId}`);return}const d=u.details;u.details=t.details,this.log(`Audio track ${n} "${u.name}" lang:${u.lang} group:${r} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,d)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let o=this.currentTrack;if(!n||r?.length!==n?.length||n!=null&&n.some(d=>r?.indexOf(d)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const d=this.tracks.filter(b=>!n||n.indexOf(b.groupId)!==-1);if(d.length)this.selectDefaultTrack&&!d.some(b=>b.default)&&(this.selectDefaultTrack=!1),d.forEach((b,A)=>{b.id=A});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=d;const g=this.hls.config.audioPreference;if(!o&&g){const b=ys(g,d,bo);if(b>-1)o=d[b];else{const A=ys(g,this.tracks);o=this.tracks[A]}}let h=this.findTrackId(o);h===-1&&o&&(h=this.findTrackId(null));const p={audioTracks:d};this.log(`Updating audio tracks, ${d.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(pe.AUDIO_TRACKS_UPDATED,p);const E=this.trackId;if(h!==-1&&E===-1)this.setAudioTrack(h);else if(d.length&&E===-1){var u;const b=new Error(`No audio track selected for current audio group-ID(s): ${(u=this.groupIds)==null?void 0:u.join(",")} track count: ${d.length}`);this.warn(b.message),this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:b})}}}onError(e,t){t.fatal||!t.context||t.context.type===pa.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&To(e,r,bo))return r;const o=ys(e,this.tracksInGroup,bo);if(o>-1){const u=this.tracksInGroup[o];return this.setAudioTrack(o),u}else if(r){let u=t.loadLevel;u===-1&&(u=t.firstAutoLevel);const d=Ev(e,t.levels,n,u,bo);if(d===-1)return null;t.nextLoadLevel=d}if(e.channels||e.audioCodec){const u=ys(e,n);if(u>-1)return n[u]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],o=r.details&&!r.details.live;if(e===this.trackId&&r===n&&o||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(pe.AUDIO_TRACK_SWITCHING,za({},r)),o))return;const u=this.switchParams(r.url,n?.details,r.details);this.loadPlaylist(u)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(!(this.selectDefaultTrack&&!r.default)&&(!e||To(e,r,bo)))return n}if(e){const{name:n,lang:r,assocLang:o,characteristics:u,audioCodec:d,channels:g}=e;for(let h=0;h<t.length;h++){const p=t[h];if(To({name:n,lang:r,assocLang:o,characteristics:u,audioCodec:d,channels:g},p,bo))return h}for(let h=0;h<t.length;h++){const p=t[h];if(kd(e.attrs,p.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return h}for(let h=0;h<t.length;h++){const p=t[h];if(kd(e.attrs,p.attrs,["LANGUAGE"]))return h}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Ch(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,o=this.getUrlWithDirectives(e.url,t),u=e.details,d=u?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${d&&u.live?" age "+d.toFixed(1)+(u.type&&" "+u.type||""):""} ${o}`),this.hls.trigger(pe.AUDIO_TRACK_LOADING,{url:o,id:n,groupId:r,deliveryDirectives:t||null,track:e})}}class o_{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const r=this.queues[t];r.push(e),r.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(o){var n;if(r.onError(o),this.queues===null||this.tracks===null)return;const u=(n=this.tracks[e])==null?void 0:n.buffer;u!=null&&u.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],r=n?.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const fE=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Mb="HlsJsTrackRemovedError";class u_ extends Error{constructor(e){super(e),this.name=Mb}}class c_ extends Xr{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:r,mediaSource:o}=this;n&&this.log("Media source opened"),!(!r||!o)&&(o.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(pe.MEDIA_ATTACHED,{media:r,mediaSource:o}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:r}=this;n!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=PT(Fl(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.BUFFER_RESET,this.onBufferReset,this),e.on(pe.BUFFER_APPENDING,this.onBufferAppending,this),e.on(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.on(pe.BUFFER_EOS,this.onBufferEos,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.FRAG_PARSED,this.onFragParsed,this),e.on(pe.FRAG_CHANGED,this.onFragChanged,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.BUFFER_RESET,this.onBufferReset,this),e.off(pe.BUFFER_APPENDING,this.onBufferAppending,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.BUFFER_EOS,this.onBufferEos,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.FRAG_PARSED,this.onFragParsed,this),e.off(pe.FRAG_CHANGED,this.onFragChanged,this),e.off(pe.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const o=this.isUpdating();o||this.operationQueue.removeBlockers();const u=this.isQueued();(o||u)&&this.warn(`Transfering MediaSource with${u?" operations in queue":""}${o?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?Fa(n,r.tracks):this.sourceBuffers.forEach(o=>{const[u]=o;u&&(n[u]=Fa({},this.tracks[u]),this.removeBuffer(u)),o[0]=o[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const r=Fl(this.appendSource);if(r){const o=!!t.mediaSource;(o||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const u=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(u),o)this._objectUrl=n.src,this.attachTransferred();else{const d=this._objectUrl=self.URL.createObjectURL(u);if(this.appendSource)try{n.removeAttribute("src");const g=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||g&&u instanceof g,hE(n),d_(n,d),n.load()}catch{n.src=d}else n.src=d}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,o=r?Object.keys(r):null,u=o?o.length:0,d=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&o&&u){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ya(n,(g,h)=>g==="initSegment"?void 0:h)};
transfer tracks: ${Ya(r,(g,h)=>g==="initSegment"?void 0:h)}}`),!PE(r,n)){t.mediaSource=null,t.tracks=void 0;const g=e.currentTime,h=this.details,p=Math.max(g,h?.fragments[0].start||0);if(p-g>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${g} -> ${p}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${p} currentTime: ${g}`),this.onMediaDetaching(pe.MEDIA_DETACHING,{}),this.onMediaAttaching(pe.MEDIA_ATTACHING,t),e.currentTime=p;return}this.transferData=void 0,o.forEach(g=>{const h=g,p=r[h];if(p){const E=p.buffer;if(E){const b=this.fragmentTracker,A=p.id;if(b.hasFragments(A)||b.hasParts(A)){const O=aa.getBuffered(E);b.detectEvictedFragments(h,O,A,null,!0)}const T=im(h),C=[h,E];this.sourceBuffers[T]=C,E.updating&&this.operationQueue&&this.operationQueue.prependBlocker(h),this.trackSourceBuffer(h,p)}}}),d(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),d()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:o,_objectUrl:u}=this;if(o){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([d])=>{d&&this.removeBuffer(d)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const d=o.readyState==="open";try{const g=o.sourceBuffers;for(let h=g.length;h--;)d&&g[h].abort(),o.removeSourceBuffer(g[h]);d&&o.endOfStream()}catch(g){this.warn(`onMediaDetaching: ${g.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(u&&self.URL.revokeObjectURL(u),this.mediaSrc===u?(r.removeAttribute("src"),this.appendSource&&hE(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(pe.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(o){this.warn(`onBufferReset ${e}`,o)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[im(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new o_(this.tracks)}onBufferCodecs(e,t){const n=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),u=!o&&this.sourceBufferCount&&this.media&&r.some(d=>!n[d]);if(o||u){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${r}" SourceBuffers`);return}r.forEach(d=>{var g,h;const p=t[d],{id:E,codec:b,levelCodec:A,container:T,metadata:C,supplemental:O}=p;let te=n[d];const de=(g=this.transferData)==null||(g=g.tracks)==null?void 0:g[d],fe=de!=null&&de.buffer?de:te,De=fe?.pendingCodec||fe?.codec,Oe=fe?.levelCodec;te||(te=n[d]={buffer:void 0,listeners:[],codec:b,supplemental:O,container:T,levelCodec:A,metadata:C,id:E});const q=bh(De,Oe),k=q?.replace(fE,"$1");let ee=bh(b,A);const Ee=(h=ee)==null?void 0:h.replace(fE,"$1");ee&&q&&k!==Ee&&(d.slice(0,5)==="audio"&&(ee=kh(ee,this.appendSource)),this.log(`switching codec ${De} to ${ee}`),ee!==(te.pendingCodec||te.codec)&&(te.pendingCodec=ee),te.container=T,this.appendChangeType(d,T,ee))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r=`${t};codecs=${n}`,o={label:`change-type=${r}`,execute:()=>{const u=this.tracks[e];if(u){const d=u.buffer;d!=null&&d.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),d.changeType(r),u.codec=n,u.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:u=>{this.warn(`Failed to change ${e} SourceBuffer type`,u)}};this.append(o,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,zn.MAIN))==null?void 0:t.gap)===!0)return;const u={label:"block-audio",execute:()=>{var d;const g=this.tracks.video;(this.lastVideoAppendEnd>r||g!=null&&g.buffer&&aa.isBuffered(g.buffer,r)||((d=this.fragmentTracker.getAppendedFrag(r,zn.MAIN))==null?void 0:d.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:d=>{this.warn("Error executing block-audio operation",d)}};this.blockedAudioAppend={op:u,frag:e},this.append(u,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:r,type:o,parent:u,frag:d,part:g,chunkMeta:h,offset:p}=t,E=h.buffering[o],{sn:b,cc:A}=d,T=self.performance.now();E.start=T;const C=d.stats.buffering,O=g?g.stats.buffering:null;C.start===0&&(C.start=T),O&&O.start===0&&(O.start=T);const te=n.audio;let de=!1;o==="audio"&&te?.container==="audio/mpeg"&&(de=!this.lastMpegAudioChunk||h.id===1||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const fe=n.video,De=fe?.buffer;if(De&&b!=="initSegment"){const k=g||d,ee=this.blockedAudioAppend;if(o==="audio"&&u!=="main"&&!this.blockedAudioAppend&&!(fe.ending||fe.ended)){const P=k.start+k.duration*.05,xe=De.buffered,Ve=this.currentOp("video");!xe.length&&!Ve?this.blockAudio(k):!Ve&&!aa.isBuffered(De,P)&&this.lastVideoAppendEnd<P&&this.blockAudio(k)}else if(o==="video"){const Ee=k.end;if(ee){const P=ee.frag.start;(Ee>P||Ee<this.lastVideoAppendEnd||aa.isBuffered(De,P))&&this.unblockAudio()}this.lastVideoAppendEnd=Ee}}const Oe=(g||d).start,q={label:`append-${o}`,execute:()=>{var k;E.executeStart=self.performance.now();const ee=(k=this.tracks[o])==null?void 0:k.buffer;ee&&(de?this.updateTimestampOffset(ee,Oe,.1,o,b,A):p!==void 0&&wn(p)&&this.updateTimestampOffset(ee,p,1e-6,o,b,A)),this.appendExecutor(r,o)},onStart:()=>{},onComplete:()=>{const k=self.performance.now();E.executeEnd=E.end=k,C.first===0&&(C.first=k),O&&O.first===0&&(O.first=k);const ee={};this.sourceBuffers.forEach(([Ee,P])=>{Ee&&(ee[Ee]=aa.getBuffered(P))}),this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(pe.BUFFER_APPENDED,{type:o,frag:d,part:g,chunkMeta:h,parent:d.type,timeRanges:ee})},onError:k=>{var ee;const Ee={type:jn.MEDIA_ERROR,parent:d.type,details:xt.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:d,part:g,chunkMeta:h,error:k,err:k,fatal:!1},P=(ee=this.media)==null?void 0:ee.error;if(k.code===DOMException.QUOTA_EXCEEDED_ERR||k.name=="QuotaExceededError"||"quota"in k)Ee.details=xt.BUFFER_FULL_ERROR;else if(k.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!P)Ee.errorAction=Rd(!0);else if(k.name===Mb&&this.sourceBufferCount===0)Ee.errorAction=Rd(!0);else{const xe=++this.appendErrors[o];this.warn(`Failed ${xe}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer (${P||"no media error"})`),(xe>=this.hls.config.appendErrorMaxRetry||P)&&(Ee.fatal=!0)}this.hls.trigger(pe.ERROR,Ee)}};this.append(q,o,this.isPending(this.tracks[o]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(pe.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:o}=t;n?this.append(this.getFlushOp(n,r,o),n):this.sourceBuffers.forEach(([u])=>{u&&this.append(this.getFlushOp(u,r,o),u)})}onFragParsed(e,t){const{frag:n,part:r}=t,o=[],u=r?r.elementaryStreams:n.elementaryStreams;u[ja.AUDIOVIDEO]?o.push("audiovideo"):(u[ja.AUDIO]&&o.push("audio"),u[ja.VIDEO]&&o.push("video"));const d=()=>{const g=self.performance.now();n.stats.buffering.end=g,r&&(r.stats.buffering.end=g);const h=r?r.stats:n.stats;this.hls.trigger(pe.FRAG_BUFFERED,{frag:n,part:r,stats:h,id:n.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(d,o).catch(g=>{this.warn(`Fragment buffered callback ${g}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([u])=>{if(u){const d=this.tracks[u];(!t.type||t.type===u)&&(d.ending=!0,d.ended||(d.ended=!0,this.log(`${u} buffer reached EOS`)))}});const r=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([u])=>{var d;return u&&!((d=this.tracks[u])!=null&&d.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:u}=this;if(!u||u.readyState!=="open"){u&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${u.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),u.endOfStream(),this.hls.trigger(pe.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(pe.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===xt.BUFFER_APPEND_ERROR&&t.frag){var n;const r=(n=t.errorAction)==null?void 0:n.nextAutoLevel;wn(r)&&r!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const r=e.config,o=n.currentTime,u=t.levelTargetDuration,d=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(wn(d)&&d>=0){const h=Math.max(d,u),p=Math.floor(o/u)*u-h;this.flushBackBuffer(o,u,p)}const g=r.frontBufferFlushThreshold;if(wn(g)&&g>0){const h=Math.max(r.maxBufferLength,g),p=Math.max(h,u),E=Math.floor(o/u)*u+p;this.flushFrontBuffer(o,u,E)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([r,o])=>{if(o){const d=aa.getBuffered(o);if(d.length>0&&n>d.start(0)){var u;this.hls.trigger(pe.BACK_BUFFER_REACHED,{bufferEnd:n});const g=this.tracks[r];if((u=this.details)!=null&&u.live)this.hls.trigger(pe.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(g!=null&&g.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:r})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([r,o])=>{if(o){const u=aa.getBuffered(o),d=u.length;if(d<2)return;const g=u.start(d-1),h=u.end(d-1);if(n>g||e>=g&&e<=h)return;this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:g,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||n?.readyState!=="open")return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const h=Math.max(0,t.fragmentStart),p=Math.max(h,r);return{duration:1/0,start:h,end:p}}return{duration:1/0}}const o=(e=this.overrides)==null?void 0:e.duration;if(o)return wn(o)?{duration:o}:null;const u=this.media.duration,d=wn(n.duration)?n.duration:0;return r>d&&r>u||!wn(u)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:n}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(wn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${n}.`),r.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ya(n)}`),this.tracksReady){var r;const o=(r=this.transferData)==null?void 0:r.tracks;o&&Object.keys(o).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const r=this.tracks[t];e[t]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(pe.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const o in e){const u=o,d=e[u];if(this.isPending(d)){const g=this.getTrackCodec(d,u),h=`${d.container};codecs=${g}`;d.codec=g,this.log(`creating sourceBuffer(${h})${this.currentOp(u)?" Queued":""} ${Ya(d)}`);try{const p=n.addSourceBuffer(h),E=im(u),b=[u,p];t[E]=b,d.buffer=p}catch(p){var r;this.error(`error while trying to add sourceBuffer: ${p.message}`),this.shiftAndExecuteNext(u),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[u],this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:p,sourceBufferName:u,mimeType:h,parent:d.id});return}this.trackSourceBuffer(u,d)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&(t==="video"||t==="audiovideo")&&ym(n,"video")&&(r=tv(r,n));const o=bh(r,e.levelCodec);return o?t.slice(0,5)==="audio"?kh(o,this.appendSource):o:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(o,u)=>{const d=u.removedRanges;d!=null&&d.length&&this.hls.trigger(pe.BUFFER_FLUSHED,{type:o})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const o=this.currentOp(e);o&&o.onError(r)}updateTimestampOffset(e,t,n,r,o,u){const d=t-e.timestampOffset;Math.abs(d)>=n&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${o} cc: ${u})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:r,mediaSource:o}=this,u=this.tracks[e],d=u?.buffer;if(!r||!o||!d){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const g=wn(r.duration)?r.duration:1/0,h=wn(o.duration)?o.duration:1/0,p=Math.max(0,t),E=Math.min(n,g,h);E>p&&(!u.ending||u.ended)?(u.ended=!1,this.log(`Removing [${p},${E}] from the ${e} SourceBuffer`),d.remove(p,E)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=n?.buffer;if(!r)throw new u_(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(u=>this.appendBlocker(u));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(u=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const r=(n=this.tracks[t])==null?void 0:n.buffer;!r||r.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const o=r.buffer;if(!o)return;const u=n.bind(this,e);r.listeners.push({event:t,listener:u}),o.addEventListener(t,u)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(r=>{n.removeEventListener(r.event,r.listener)}),t.listeners.length=0)}}function hE(f){const e=f.querySelectorAll("source");[].slice.call(e).forEach(t=>{f.removeChild(t)})}function d_(f,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,f.appendChild(t)}function im(f){return f==="audio"?1:0}class ep{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(pe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(pe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&wn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((r,o)=>this.isLevelAllowed(r)&&o<=e);return this.clientRect=null,ep.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const r=(d,g)=>g?d.width!==g.width||d.height!==g.height:!0;let o=e.length-1;const u=Math.max(t,n);for(let d=0;d<e.length;d+=1){const g=e[d];if((g.width>=u||g.height>=u)&&r(g,e[d+1])){o=d;break}}return o}}const f_={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},ar=f_,h_={HLS:"h"},g_=h_;class bs{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof bs?n:new bs(n))),this.value=e,this.params=t}}const m_="Dict";function p_(f){return Array.isArray(f)?JSON.stringify(f):f instanceof Map?"Map{}":f instanceof Set?"Set{}":typeof f=="object"?JSON.stringify(f):String(f)}function y_(f,e,t,n){return new Error(`failed to ${f} "${p_(e)}" as ${t}`,{cause:n})}function Ts(f,e,t){return y_("serialize",f,e,t)}class Ob{constructor(e){this.description=e}}const gE="Bare Item",E_="Boolean";function b_(f){if(typeof f!="boolean")throw Ts(f,E_);return f?"?1":"?0"}function T_(f){return btoa(String.fromCharCode(...f))}const v_="Byte Sequence";function S_(f){if(ArrayBuffer.isView(f)===!1)throw Ts(f,v_);return`:${T_(f)}:`}const __="Integer";function A_(f){return f<-999999999999999||999999999999999<f}function Pb(f){if(A_(f))throw Ts(f,__);return f.toString()}function R_(f){return`@${Pb(f.getTime()/1e3)}`}function zb(f,e){if(f<0)return-zb(-f,e);const t=Math.pow(10,e);if(Math.abs(f*t%1-.5)<Number.EPSILON){const r=Math.floor(f*t);return(r%2===0?r:r+1)/t}else return Math.round(f*t)/t}const I_="Decimal";function x_(f){const e=zb(f,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ts(f,I_);const t=e.toString();return t.includes(".")?t:`${t}.0`}const w_="String",k_=/[\x00-\x1f\x7f]+/;function D_(f){if(k_.test(f))throw Ts(f,w_);return`"${f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function C_(f){return f.description||f.toString().slice(7,-1)}const L_="Token";function mE(f){const e=C_(f);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ts(e,L_);return e}function xm(f){switch(typeof f){case"number":if(!wn(f))throw Ts(f,gE);return Number.isInteger(f)?Pb(f):x_(f);case"string":return D_(f);case"symbol":return mE(f);case"boolean":return b_(f);case"object":if(f instanceof Date)return R_(f);if(f instanceof Uint8Array)return S_(f);if(f instanceof Ob)return mE(f);default:throw Ts(f,gE)}}const N_="Key";function wm(f){if(/^[a-z*][a-z0-9\-_.*]*$/.test(f)===!1)throw Ts(f,N_);return f}function tp(f){return f==null?"":Object.entries(f).map(([e,t])=>t===!0?`;${wm(e)}`:`;${wm(e)}=${xm(t)}`).join("")}function Fb(f){return f instanceof bs?`${xm(f.value)}${tp(f.params)}`:xm(f)}function M_(f){return`(${f.value.map(Fb).join(" ")})${tp(f.params)}`}function O_(f,e={whitespace:!0}){if(typeof f!="object"||f==null)throw Ts(f,m_);const t=f instanceof Map?f.entries():Object.entries(f),n=e?.whitespace?" ":"";return Array.from(t).map(([r,o])=>{o instanceof bs||(o=new bs(o));let u=wm(r);return o.value===!0?u+=tp(o.params):(u+="=",Array.isArray(o.value)?u+=M_(o):u+=Fb(o)),u}).join(`,${n}`)}function Ub(f,e){return O_(f,e)}const gs="CMCD-Object",li="CMCD-Request",yo="CMCD-Session",Ol="CMCD-Status",P_={br:gs,ab:gs,d:gs,ot:gs,tb:gs,tpb:gs,lb:gs,tab:gs,lab:gs,url:gs,pb:li,bl:li,tbl:li,dl:li,ltc:li,mtp:li,nor:li,nrr:li,rc:li,sn:li,sta:li,su:li,ttfb:li,ttfbb:li,ttlb:li,cmsdd:li,cmsds:li,smrt:li,df:li,cs:li,ts:li,cid:yo,pr:yo,sf:yo,sid:yo,st:yo,v:yo,msd:yo,bs:Ol,bsd:Ol,cdn:Ol,rtp:Ol,bg:Ol,pt:Ol,ec:Ol,e:Ol},z_={REQUEST:li};function F_(f){return Object.keys(f).reduce((e,t)=>{var n;return(n=f[t])===null||n===void 0||n.forEach(r=>e[r]=t),e},{})}function U_(f,e){const t={};if(!f)return t;const n=Object.keys(f),r=e?F_(e):{};return n.reduce((o,u)=>{var d;const g=P_[u]||r[u]||z_.REQUEST,h=(d=o[g])!==null&&d!==void 0?d:o[g]={};return h[u]=f[u],o},t)}function B_(f){return["ot","sf","st","e","sta"].includes(f)}function j_(f){return typeof f=="number"?wn(f):f!=null&&f!==""&&f!==!1}const Bb="event";function q_(f,e){const t=new URL(f),n=new URL(e);if(t.origin!==n.origin)return f;const r=t.pathname.split("/").slice(1),o=n.pathname.split("/").slice(1,-1);for(;r[0]===o[0];)r.shift(),o.shift();for(;o.length;)o.shift(),r.unshift("..");return r.join("/")+t.search+t.hash}const Ah=f=>Math.round(f),km=(f,e)=>Array.isArray(f)?f.map(t=>km(t,e)):f instanceof bs&&typeof f.value=="string"?new bs(km(f.value,e),f.params):(e.baseUrl&&(f=q_(f,e.baseUrl)),e.version===1?encodeURIComponent(f):f),hh=f=>Ah(f/100)*100,G_=(f,e)=>{let t=f;return e.version>=2&&(f instanceof bs&&typeof f.value=="string"?t=new bs([f]):typeof f=="string"&&(t=[f])),km(t,e)},H_={br:Ah,d:Ah,bl:hh,dl:hh,mtp:hh,nor:G_,rtp:hh,tb:Ah},jb="request",qb="response",np=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],V_=["e"],Y_=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function jh(f){return Y_.test(f)}function K_(f){return np.includes(f)||V_.includes(f)||jh(f)}const Gb=["d","dl","nor","ot","rtp","su"];function $_(f){return np.includes(f)||Gb.includes(f)||jh(f)}const W_=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function X_(f){return np.includes(f)||Gb.includes(f)||W_.includes(f)||jh(f)}const Q_=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function Z_(f){return Q_.includes(f)||jh(f)}const J_={[qb]:X_,[Bb]:K_,[jb]:$_};function Hb(f,e={}){const t={};if(f==null||typeof f!="object")return t;const n=e.version||f.v||1,r=e.reportingMode||jb,o=n===1?Z_:J_[r];let u=Object.keys(f).filter(o);const d=e.filter;typeof d=="function"&&(u=u.filter(d));const g=r===qb||r===Bb;g&&!u.includes("ts")&&u.push("ts"),n>1&&!u.includes("v")&&u.push("v");const h=Fa({},H_,e.formatters),p={version:n,reportingMode:r,baseUrl:e.baseUrl};return u.sort().forEach(E=>{let b=f[E];const A=h[E];if(typeof A=="function"&&(b=A(b,p)),E==="v"){if(n===1)return;b=n}E=="pr"&&b===1||(g&&E==="ts"&&!wn(b)&&(b=Date.now()),j_(b)&&(B_(E)&&typeof b=="string"&&(b=new Ob(b)),t[E]=b))}),t}function eA(f,e={}){const t={};if(!f)return t;const n=Hb(f,e),r=U_(n,e?.customHeaderMap);return Object.entries(r).reduce((o,[u,d])=>{const g=Ub(d,{whitespace:!1});return g&&(o[u]=g),o},t)}function tA(f,e,t){return Fa(f,eA(e,t))}const nA="CMCD";function aA(f,e={}){return f?Ub(Hb(f,e),{whitespace:!1}):""}function iA(f,e={}){if(!f)return"";const t=aA(f,e);return encodeURIComponent(t)}function rA(f,e={}){if(!f)return"";const t=iA(f,e);return`${nA}=${t}`}const pE=/CMCD=[^&#]+/;function sA(f,e,t){const n=rA(e,t);if(!n)return f;if(pE.test(f))return f.replace(pE,n);const r=f.includes("?")?"&":"?";return`${f}${r}${n}`}class lA{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:ar.MANIFEST,su:!this.initialized})}catch(o){this.hls.logger.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=r=>{try{const{frag:o,part:u}=r,d=this.hls.levels[o.level],g=this.getObjectType(o),h={d:(u||o).duration*1e3,ot:g};(g===ar.VIDEO||g===ar.AUDIO||g==ar.MUXED)&&(h.br=d.bitrate/1e3,h.tb=this.getTopBandwidth(g)/1e3,h.bl=this.getBufferLength(g));const p=u?this.getNextPart(u):this.getNextFrag(o);p!=null&&p.url&&p.url!==o.url&&(h.nor=p.url),this.apply(r,h)}catch(o){this.hls.logger.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHED,this.onMediaDetached,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHED,this.onMediaDetached,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:g_.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Fa(t,this.createData());const n=t.ot===ar.INIT||t.ot===ar.VIDEO||t.ot===ar.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((u,d)=>(r.includes(d)&&(u[d]=t[d]),u),{}));const o={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),tA(e.headers,t,o)):e.url=sA(e.url,t,o)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const r=e.sn-n.startSN;return n.fragments[r+1]}}getNextPart(e){var t;const{index:n,fragment:r}=e,o=(t=this.hls.levels[r.level])==null||(t=t.details)==null?void 0:t.partList;if(o){const{sn:u}=r;for(let d=o.length-1;d>=0;d--){const g=o[d];if(g.index===n&&g.fragment.sn===u)return o[d+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return ar.TIMED_TEXT;if(e.sn==="initSegment")return ar.INIT;if(t==="audio")return ar.AUDIO;if(t==="main")return this.hls.audioTracks.length?ar.VIDEO:ar.MUXED}getTopBandwidth(e){let t=0,n;const r=this.hls;if(e===ar.AUDIO)n=r.audioTracks;else{const o=r.maxAutoLevel,u=o>-1?o+1:r.levels.length;n=r.levels.slice(0,u)}return n.forEach(o=>{o.bitrate>t&&(t=o.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===ar.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:aa.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,u,d){t(o),this.loader.load(o,u,d)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,u,d){t(o),this.loader.load(o,u,d)}}}}const oA=3e5;class uA extends Xr{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===qi.SendAlternateToPenaltyBox&&n.flags===$r.MoveAllAlternatesMatchingHost){const r=this.levels;let o=this._pathwayPriority,u=this.pathwayId;if(t.context){const{groupId:d,pathwayId:g,type:h}=t.context;d&&r?u=this.getPathwayForGroupId(d,h,u):g&&(u=g)}u in this.penalizedPathways||(this.penalizedPathways[u]=performance.now()),!o&&r&&(o=this.pathways()),o&&o.length>1&&(this.updatePathwayPriority(o),n.resolved=this.pathwayId!==u),t.details===xt.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${u} levels: ${r&&r.length} priorities: ${Ya(o)} penalized: ${Ya(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(o=>{r-n[o]>oA&&delete n[o]});for(let o=0;o<e.length;o++){const u=e[o];if(u in n)continue;if(u===this.pathwayId)return;const d=this.hls.nextLoadLevel,g=this.hls.levels[d];if(t=this.getLevelsForPathway(u),t.length>0){this.log(`Setting Pathway to "${u}"`),this.pathwayId=u,cb(t),this.hls.trigger(pe.LEVELS_UPDATED,{levels:t});const h=this.hls.levels[d];g&&h&&this.levels&&(h.attrs["STABLE-VARIANT-ID"]!==g.attrs["STABLE-VARIANT-ID"]&&h.bitrate!==g.bitrate&&this.log(`Unstable Pathways change from bitrate ${g.bitrate} to ${h.bitrate}`),this.hls.nextLoadLevel=d);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let o=0;o<r.length;o++)if(t===pa.AUDIO_TRACK&&r[o].hasAudioGroup(e)||t===pa.SUBTITLE_TRACK&&r[o].hasSubtitleGroup(e))return r[o].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(o=>{const{ID:u,"BASE-ID":d,"URI-REPLACEMENT":g}=o;if(t.some(p=>p.pathwayId===u))return;const h=this.getLevelsForPathway(d).map(p=>{const E=new ti(p.attrs);E["PATHWAY-ID"]=u;const b=E.AUDIO&&`${E.AUDIO}_clone_${u}`,A=E.SUBTITLES&&`${E.SUBTITLES}_clone_${u}`;b&&(n[E.AUDIO]=b,E.AUDIO=b),A&&(r[E.SUBTITLES]=A,E.SUBTITLES=A);const T=Vb(p.uri,E["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",g),C=new Ad({attrs:E,audioCodec:p.audioCodec,bitrate:p.bitrate,height:p.height,name:p.name,url:T,videoCodec:p.videoCodec,width:p.width});if(p.audioGroups)for(let O=1;O<p.audioGroups.length;O++)C.addGroupId("audio",`${p.audioGroups[O]}_clone_${u}`);if(p.subtitleGroups)for(let O=1;O<p.subtitleGroups.length;O++)C.addGroupId("text",`${p.subtitleGroups[O]}_clone_${u}`);return C});t.push(...h),yE(this.audioTracks,n,g,u),yE(this.subtitleTracks,r,g,u)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const p=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+p)}const o={responseType:"json",url:r.href},u=t.steeringManifestLoadPolicy.default,d=u.errorRetry||u.timeoutRetry||{},g={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:d.maxNumRetry||0,retryDelay:d.retryDelayMs||0,maxRetryDelay:d.maxRetryDelayMs||0},h={onSuccess:(p,E,b,A)=>{this.log(`Loaded steering manifest: "${r}"`);const T=p.data;if(T?.VERSION!==1){this.log(`Steering VERSION ${T.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=T.TTL;const{"RELOAD-URI":C,"PATHWAY-CLONES":O,"PATHWAY-PRIORITY":te}=T;if(C)try{this.uri=new self.URL(C,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${C}`);return}this.scheduleRefresh(this.uri||b.url),O&&this.clonePathways(O);const de={steeringManifest:T,url:r.toString()};this.hls.trigger(pe.STEERING_MANIFEST_LOADED,de),te&&this.updatePathwayPriority(te)},onError:(p,E,b,A)=>{if(this.log(`Error loading steering manifest: ${p.code} ${p.text} (${E.url})`),this.stopLoad(),p.code===410){this.enabled=!1,this.log(`Steering manifest ${E.url} no longer available`);return}let T=this.timeToLoad*1e3;if(p.code===429){const C=this.loader;if(typeof C?.getResponseHeader=="function"){const O=C.getResponseHeader("Retry-After");O&&(T=parseFloat(O)*1e3)}this.log(`Steering manifest ${E.url} rate limited`);return}this.scheduleRefresh(this.uri||E.url,T)},onTimeout:(p,E,b)=>{this.log(`Timeout loading steering manifest (${E.url})`),this.scheduleRefresh(this.uri||E.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(o,g,h)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const r=(n=this.hls)==null?void 0:n.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function yE(f,e,t,n){f&&Object.keys(e).forEach(r=>{const o=f.filter(u=>u.groupId===r).map(u=>{const d=Fa({},u);return d.details=void 0,d.attrs=new ti(d.attrs),d.url=d.attrs.URI=Vb(u.url,u.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),d.groupId=d.attrs["GROUP-ID"]=e[r],d.attrs["PATHWAY-ID"]=n,d});f.push(...o)})}function Vb(f,e,t,n){const{HOST:r,PARAMS:o,[t]:u}=n;let d;e&&(d=u?.[e],d&&(f=d));const g=new self.URL(f);return r&&!d&&(g.host=r),o&&Object.keys(o).sort().forEach(h=>{h&&g.searchParams.set(h,o[h])}),g.href}function gr(f,e,t){Dr(f,e,t),f.addEventListener(e,t)}function Dr(f,e,t){f.removeEventListener(e,t)}class Cu extends Xr{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Cu.CDMCleanupPromise?[Cu.CDMCleanupPromise]:[],this.onMediaEncrypted=t=>{const{initDataType:n,initData:r}=t,o=`"${t.type}" event: init data type: "${n}"`;if(this.debug(o),r!==null){if(!this.keyFormatPromise){let u=Object.keys(this.keySystemAccessPromises);u.length||(u=bd(this.config));const d=u.map(Xg).filter(g=>!!g);this.keyFormatPromise=this.getKeyFormatPromise(d)}this.keyFormatPromise.then(u=>{const d=vh(u);if(n!=="sinf"||d!==oi.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${d}`);return}let g;try{const A=bi(new Uint8Array(r)),T=Hm(JSON.parse(A).sinf),C=HE(T);if(!C)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");g=new Uint8Array(C.subarray(8,24))}catch(A){this.warn(`${o} Failed to parse sinf: ${A}`);return}const h=Vs.hexDump(g),{keyIdToKeySessionPromise:p,mediaKeySessions:E}=this;let b=p[h];for(let A=0;A<E.length;A++){const T=E[A],C=T.decryptdata;if(!C.keyId)continue;const O=Vs.hexDump(C.keyId);if(h===O||C.uri.replace(/-/g,"").indexOf(h)!==-1){if(b=p[O],!b)continue;if(C.pssh)break;delete p[O],C.pssh=new Uint8Array(r),C.keyId=g,b=p[h]=b.then(()=>this.generateRequestWithPreferredKeySession(T,n,r,"encrypted-event-key-match")),b.catch(te=>this.handleError(te));break}}b||this.handleError(new Error(`Key ID ${h} not encountered in playlist. Key-system sessions ${E.length}.`))}).catch(u=>this.handleError(u))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(pe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(pe.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(pe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(pe.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];if(r)return r.licenseUrl;if(e===oi.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(u,d,g)=>!!u&&g.indexOf(u)===d,r=t.map(u=>u.audioCodec).filter(n),o=t.map(u=>u.videoCodec).filter(n);return r.length+o.length===0&&o.push("avc1.42e01e"),new Promise((u,d)=>{const g=h=>{const p=h.shift();this.getMediaKeysPromise(p,r,o).then(E=>u({keySystem:p,mediaKeys:E})).catch(E=>{h.length?g(h):E instanceof wr?d(E):d(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_NO_ACCESS,error:E,fatal:!0},E.message))})};g(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${n}`;return ab===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=Hv(e,t,n,this.config.drmSystemOptions),o=this.keySystemAccessPromises[e];let u=o?.keySystemAccess;if(!u){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ya(r)}`),u=this.requestMediaKeySystemAccess(e,r);const d=this.keySystemAccessPromises[e]={keySystemAccess:u};return u.catch(g=>{this.log(`Failed to obtain access to key-system "${e}": ${g}`)}),u.then(g=>{this.log(`Access for key-system "${g.keySystem}" obtained`);const h=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),d.mediaKeys=g.createMediaKeys().then(p=>(this.log(`Media-keys created for "${e}"`),d.hasMediaKeys=!0,h.then(E=>E?this.setMediaKeysServerCertificate(p,e,E):p))),d.mediaKeys.catch(p=>{this.error(`Failed to create media-keys for "${e}"}: ${p}`)}),d.mediaKeys})}return u.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Vs.hexDump(e.keyId||[])}`);const r=n.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),o="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,o,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Vs.hexDump(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Vs.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Xg(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>this.getKeySystemSelectionPromise(e).then(({keySystem:r})=>{const o=Xg(r);o?t(o):n(new Error(`Unable to find format for key-system "${r}"`))}).catch(n))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=bd(this.config),n=e.map(vh).filter(r=>!!r&&t.indexOf(r)!==-1);return this.selectKeySystem(n)}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let o=this.keyIdToKeySessionPromise[n];return o||(o=this.getKeySystemForKeyPromise(t).then(({keySystem:d,mediaKeys:g})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(d,g).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:d,mediaKeys:g,decryptdata:t}))))),(this.keyIdToKeySessionPromise[n]=o.then(d=>{const g="cenc",h=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(d,g,h,"playlist-key")})).catch(d=>this.handleError(d))),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof wr?this.hls.trigger(pe.ERROR,e.data):this.hls.trigger(pe.ERROR,{type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const r=vh(e.keyFormat),o=r?[r]:bd(this.config);return this.attemptKeySystemAccess(o)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=bd(this.config)),e.length===0)throw new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ya({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>n.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,n,r){var o;const u=(o=this.config.drmSystems)==null||(o=o[e.keySystem])==null?void 0:o.generateRequest;if(u)try{const A=u.call(this.hls,t,n,e);if(!A)throw new Error("Invalid response from configured generateRequest filter");t=A.initDataType,n=A.initData?A.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(A){var d;if(this.warn(A.message),(d=this.hls)!=null&&d.config.debug)throw A}if(n===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const g=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${g} (init data type: ${t} length: ${n?n.byteLength:null})`);const h=new Ym,p=e._onmessage=A=>{const T=e.mediaKeysSession;if(!T){h.emit("error",new Error("invalid state"));return}const{messageType:C,message:O}=A;this.log(`"${C}" message event for session "${T.sessionId}" message size: ${O.byteLength}`),C==="license-request"||C==="license-renewal"?this.renewLicense(e,O).catch(te=>{h.eventNames().length?h.emit("error",te):this.handleError(te)}):C==="license-release"?e.keySystem===oi.FAIRPLAY&&(this.updateKeySession(e,vm("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${C}"`)},E=e._onkeystatuseschange=A=>{if(!e.mediaKeysSession){h.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const C=e.keyStatus;h.emit("keyStatus",C),C==="expired"&&(this.warn(`${e.keySystem} expired for key ${g}`),this.renewKeySession(e))};gr(e.mediaKeysSession,"message",p),gr(e.mediaKeysSession,"keystatuseschange",E);const b=new Promise((A,T)=>{h.on("error",T),h.on("keyStatus",C=>{C.startsWith("usable")?A():C==="output-restricted"?T(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):C==="internal-error"?T(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${C}"`)):C==="expired"?T(new Error("key expired while generating request")):this.warn(`unhandled key status change "${C}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var A;this.log(`Request generated for key-session "${(A=e.mediaKeysSession)==null?void 0:A.sessionId}" keyId: ${g}`)}).catch(A=>{throw new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_NO_SESSION,error:A,fatal:!1},`Error generating key-session request: ${A}`)}).then(()=>b).catch(A=>{throw h.removeAllListeners(),this.removeSession(e),A}).then(()=>(h.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{if(typeof n=="string"&&typeof t=="object"){const r=n;n=t,t=r}this.log(`key status change "${t}" for keyStatuses keyId: ${Vs.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Vs.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,r=new n(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((u,d)=>{const g={responseType:"arraybuffer",url:o},h=t.certLoadPolicy.default,p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},E={onSuccess:(b,A,T,C)=>{u(b.data)},onError:(b,A,T,C)=>{d(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:T,response:za({url:g.url,data:void 0},b)},`"${e}" certificate request failed (${o}). Status: ${b.code} (${b.text})`))},onTimeout:(b,A,T)=>{d(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:T,response:{url:g.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(b,A,T)=>{d(new Error("aborted"))}};r.load(g,p,E)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,o)=>{e.setServerCertificate(n).then(u=>{this.log(`setServerCertificate ${u?"success":"not supported by CDM"} (${n?.byteLength}) on "${t}"`),r(e)}).catch(u=>{o(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:u,fatal:!0},u.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(r=>{throw new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(n,"application/xml"),o=r.querySelectorAll("HttpHeader");if(o.length>0){let p;for(let E=0,b=o.length;E<b;E++){var u,d;p=o[E];const A=(u=p.querySelector("name"))==null?void 0:u.textContent,T=(d=p.querySelector("value"))==null?void 0:d.textContent;A&&T&&e.setRequestHeader(A,T)}}const g=r.querySelector("Challenge"),h=g?.textContent;if(!h)throw new Error("Cannot find <Challenge> in key message");return vm(atob(h))}setupLicenseXHR(e,t,n,r){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,n,r)}).catch(u=>{if(!n.decryptdata)throw u;return e.open("POST",t,!0),o.call(this.hls,e,t,n,r)}).then(u=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:u||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,o)=>{const u=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${u}`);const d=new XMLHttpRequest;d.responseType="arraybuffer",d.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(d.readyState===4)if(d.status===200){this._requestLicenseFailureCount=0;let g=d.response;this.log(`License received ${g instanceof ArrayBuffer?g.byteLength:g}`);const h=this.config.licenseResponseCallback;if(h)try{g=h.call(this.hls,d,u,e)}catch(p){this.error(p)}r(g)}else{const g=n.errorRetry,h=g?g.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>h||d.status>=400&&d.status<500)o(new wr({type:jn.KEY_SYSTEM_ERROR,details:xt.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:d,response:{url:u,data:void 0,code:d.status,text:d.statusText}},`License Request XHR failed (${u}). Status: ${d.status} (${d.statusText})`));else{const p=h-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${p} attempts left`),this.requestLicense(e,t).then(r,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=d,this.setupLicenseXHR(d,u,e,t).then(({xhr:g,licenseChallenge:h})=>{e.keySystem==oi.PLAYREADY&&(h=this.unpackPlayReadyKeyMessage(g,h)),g.send(h)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,gr(n,"encrypted",this.onMediaEncrypted),gr(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Dr(e,"encrypted",this.onMediaEncrypted),Dr(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Uh.clearKeyUriToKeyIdMap();const r=n.length;Cu.CDMCleanupPromise=Promise.all(n.map(o=>this.removeSession(o)).concat(t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(o=>{var u;this.log(`Could not clear media keys: ${o}`),(u=this.hls)==null||u.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))).catch(o=>{var u;this.log(`Could not close sessions and clear media keys: ${o}`),(u=this.hls)==null||u.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((r,o)=>(r.indexOf(o.keyFormat)===-1&&r.push(o.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{drmSystemOptions:o}=this.config;return(Yv(o)?new Promise((d,g)=>{self.setTimeout(()=>g(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(d)}):Promise.resolve()).catch(d=>{var g;this.log(`Could not remove session: ${d}`),(g=this.hls)==null||g.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${d}`)})}).then(()=>t.close()).catch(d=>{var g;this.log(`Could not close session: ${d}`),(g=this.hls)==null||g.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${d}`)})})}}}Cu.CDMCleanupPromise=void 0;class wr extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class cA{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const o=r-this.lastTime,u=n-this.lastDroppedFrames,d=t-this.lastDecodedFrames,g=1e3*u/o,h=this.hls;if(h.trigger(pe.FPS_DROP,{currentDropped:u,currentDecoded:d,totalDroppedFrames:n}),g>0&&u>h.config.fpsDroppedMonitoringThreshold*d){let p=h.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+p),p>0&&(h.autoLevelCapping===-1||h.autoLevelCapping>=p)&&(p=p-1,h.trigger(pe.FPS_DROP_LEVEL_CAPPING,{level:p,droppedLevel:h.currentLevel}),h.autoLevelCapping=p,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function Yb(f,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=f,e.dispatchEvent(t)}function Kb(f,e){const t=f.mode;if(t==="disabled"&&(f.mode="hidden"),f.cues&&!f.cues.getCueById(e.id))try{if(f.addCue(e),!f.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Ma.debug(`[texttrack-utils]: ${n}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,f.addCue(r)}catch(r){Ma.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(f.mode=t)}function ku(f,e){const t=f.mode;if(t==="disabled"&&(f.mode="hidden"),f.cues)for(let n=f.cues.length;n--;)e&&f.cues[n].removeEventListener("enter",e),f.removeCue(f.cues[n]);t==="disabled"&&(f.mode=t)}function Dm(f,e,t,n){const r=f.mode;if(r==="disabled"&&(f.mode="hidden"),f.cues&&f.cues.length>0){const o=fA(f.cues,e,t);for(let u=0;u<o.length;u++)(!n||n(o[u]))&&f.removeCue(o[u])}r==="disabled"&&(f.mode=r)}function dA(f,e){if(e<=f[0].startTime)return 0;const t=f.length-1;if(e>f[t].endTime)return-1;let n=0,r=t,o;for(;n<=r;)if(o=Math.floor((r+n)/2),e<f[o].startTime)r=o-1;else if(e>f[o].startTime&&n<t)n=o+1;else return o;return f[n].startTime-e<e-f[r].startTime?n:r}function fA(f,e,t){const n=[],r=dA(f,e);if(r>-1)for(let o=r,u=f.length;o<u;o++){const d=f[o];if(d.startTime>=e&&d.endTime<=t)n.push(d);else if(d.startTime>t)return n}return n}function Rh(f){const e=[];for(let t=0;t<f.length;t++){const n=f[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(f[t])}return e}class hA extends Jm{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=Rh(this.media.textTracks);for(let o=0;o<n.length;o++)if(n[o].mode==="hidden")t=n[o];else if(n[o].mode==="showing"){t=n[o];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(pe.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;Rh(n.textTracks).forEach(u=>{ku(u)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:o}=t,u=this.tracksInGroup[n];if(!u||u.groupId!==r){this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${u?.groupId}`);return}const d=u.details;u.details=t.details,this.log(`Subtitle track ${n} "${u.name}" lang:${u.lang} group:${r} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,d)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let o=this.currentTrack;if(!n||r?.length!==n?.length||n!=null&&n.some(u=>r?.indexOf(u)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const u=this.tracks.filter(p=>!n||n.indexOf(p.groupId)!==-1);if(u.length)this.selectDefaultTrack&&!u.some(p=>p.default)&&(this.selectDefaultTrack=!1),u.forEach((p,E)=>{p.id=E});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=u;const d=this.hls.config.subtitlePreference;if(!o&&d){this.selectDefaultTrack=!1;const p=ys(d,u);if(p>-1)o=u[p];else{const E=ys(d,this.tracks);o=this.tracks[E]}}let g=this.findTrackId(o);g===-1&&o&&(g=this.findTrackId(null));const h={subtitleTracks:u};this.log(`Updating subtitle tracks, ${u.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(pe.SUBTITLE_TRACKS_UPDATED,h),g!==-1&&this.trackId===-1&&this.setSubtitleTrack(g)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const o=t[r];if(!(n&&!o.default||!n&&!e)&&(!e||To(o,e)))return r}if(e){for(let r=0;r<t.length;r++){const o=t[r];if(kd(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const o=t[r];if(kd(e.attrs,o.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(Im(r,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===pa.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&To(e,n))return n;const r=ys(e,this.tracksInGroup);if(r>-1){const o=this.tracksInGroup[r];return this.setSubtitleTrack(r),o}else{if(n)return null;{const o=ys(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,o=this.getUrlWithDirectives(e.url,t),u=e.details,d=u?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${d&&u.live?" age "+d.toFixed(1)+(u.type&&" "+u.type||""):""} ${o}`),this.hls.trigger(pe.SUBTITLE_TRACK_LOADING,{url:o,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Rh(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(o=>Im(n,o))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==r&&(o.mode="disabled")}),r){const o=this.subtitleDisplay?"showing":"hidden";r.mode!==o&&(r.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!wn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(pe.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&o)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:u,groupId:d="",name:g,type:h,url:p}=r;this.hls.trigger(pe.SUBTITLE_TRACK_SWITCH,{id:u,groupId:d,name:g,type:h,url:p});const E=this.switchParams(r.url,n?.details,r.details);this.loadPlaylist(E)}}function gA(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?o:o&3|8).toString(16)})}}}function Sd(f){let e=5381,t=f.length;for(;t;)e=e*33^f.charCodeAt(--t);return(e>>>0).toString()}const Lu=.025;let zh=function(f){return f[f.Point=0]="Point",f[f.Range=1]="Range",f}({});function mA(f,e,t){return`${f.identifier}-${t+1}-${Sd(e)}`}class pA{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return rm(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=rm(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=wn(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return rm(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Lu))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?zh.Range:zh.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return yA(this)}}function rm(f,e){return f-e.start<e.duration/2&&!(Math.abs(f-(e.start+e.duration))<Lu)?e.start:e.start+e.duration}function $b(f,e,t){const n=new self.URL(f,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function sm(f,e){for(;(t=f.assetList[++e])!=null&&t.error;)var t;return e}function yA(f){return`["${f.identifier}" ${f.cue.pre?"<pre>":f.cue.post?"<post>":""}${f.timelineStart.toFixed(2)}-${f.resumeTime.toFixed(2)}]`}function xu(f){const e=f.timelineStart,t=f.duration||0;return`["${f.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class EA{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(pe.PLAYOUT_LIMIT_REACHED,{})};const o=this.hls=new e(t);this.interstitial=n,this.assetItem=r;const u=()=>{this.hasDetails=!0};o.once(pe.LEVEL_LOADED,u),o.once(pe.AUDIO_TRACK_LOADED,u),o.once(pe.SUBTITLE_TRACK_LOADED,u),o.on(pe.MEDIA_ATTACHING,(d,{media:g})=>{this.removeMediaListeners(),this.mediaAttached=g,this.interstitial.playoutLimit&&(g.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&o.on(pe.BUFFER_APPENDED,()=>{const p=this.bufferedEnd;this.reachedPlayout(p)&&(this._bufferedEosTime=p,o.trigger(pe.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=$b(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,o=aa.bufferInfo(e,r,0);return this.getAssetTime(o.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=aa.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var r;(r=this.hls)==null||r.on(e,t)}once(e,t,n){var r;(r=this.hls)==null||r.once(e,t)}off(e,t,n){var r;(r=this.hls)==null||r.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${xu(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const EE=.033;class bA extends Xr{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(o=r[n])!=null&&o.event;){var o;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let o=n[r];if(t&&t!=="primary"&&(o=o[t]),e===o.start||e>o.start&&e<o.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const o=n[r].event;if(o!=null&&o.restrictions.jump&&!o.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if(((n=t[r].event)==null?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let o=0;o<r;o++){const u=n[o];if(!u.error){const d=u.timelineStart;if(t===d||t>d&&(t<d+(u.duration||0)||o===r-1))return o}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,r=n[n.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,o=this.events,u=this.parseDateRanges(r,{url:n.url},t),d=Object.keys(r),g=o?o.filter(h=>!d.includes(h.identifier)):[];u.length&&u.sort((h,p)=>{const E=h.cue.pre,b=h.cue.post,A=p.cue.pre,T=p.cue.post;if(E&&!A)return-1;if(A&&!E||b&&!T)return 1;if(T&&!b)return-1;if(!E&&!A&&!b&&!T){const C=h.startTime,O=p.startTime;if(C!==O)return C-O}return h.dateRange.tagOrder-p.dateRange.tagOrder}),this.events=u,g.forEach(h=>{this.removeEvent(h)}),this.updateSchedule(e,g)}updateSchedule(e,t=[],n=!1){const r=this.events||[];if(r.length||t.length||this.length<2){const o=this.items,u=this.parseSchedule(r,e);(n||t.length||o?.length!==u.length||u.some((g,h)=>Math.abs(g.playout.start-o[h].playout.start)>.005||Math.abs(g.playout.end-o[h].playout.end)>.005))&&(this.items=u,this.onScheduleUpdate(t,o))}}parseDateRanges(e,t,n){const r=[],o=Object.keys(e);for(let u=0;u<o.length;u++){const d=o[u],g=e[d];if(g.isInterstitial){let h=this.eventMap[d];h?h.setDateRange(g):(h=new pA(g,t),this.eventMap[d]=h,n===!1&&(h.appendInPlace=n)),r.push(h)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,o=r.live?1/0:r.edge;let u=0;if(e=e.filter(g=>!g.error&&!(g.cue.once&&g.hasPlayed)),e.length){this.resolveOffsets(e,t);let g=0,h=0;if(e.forEach((p,E)=>{const b=p.cue.pre,A=p.cue.post,T=e[E-1]||null,C=p.appendInPlace,O=A?o:p.startOffset,te=p.duration,de=p.timelineOccupancy===zh.Range?te:0,fe=p.resumptionOffset,De=T?.startTime===O,Oe=O+p.cumulativeDuration;let q=C?Oe+te:O+fe;if(b||!A&&O<=0){const ee=h;h+=de,p.timelineStart=Oe;const Ee=u;u+=te,n.push({event:p,start:Oe,end:q,playout:{start:Ee,end:u},integrated:{start:ee,end:h}})}else if(O<=o){if(!De){const P=O-g;if(P>EE){const xe=g,Ve=h;h+=P;const be=u;u+=P;const _t={previousEvent:e[E-1]||null,nextEvent:p,start:xe,end:xe+P,playout:{start:be,end:u},integrated:{start:Ve,end:h}};n.push(_t)}else P>0&&T&&(T.cumulativeDuration+=P,n[n.length-1].end=O)}A&&(q=Oe),p.timelineStart=Oe;const ee=h;h+=de;const Ee=u;u+=te,n.push({event:p,start:Oe,end:q,playout:{start:Ee,end:u},integrated:{start:ee,end:h}})}else return;const k=p.resumeTime;A||k>o?g=o:g=k}),g<o){var d;const p=g,E=h,b=o-g;h+=b;const A=u;u+=b,n.push({previousEvent:((d=n[n.length-1])==null?void 0:d.event)||null,nextEvent:null,start:g,end:p+b,playout:{start:A,end:u},integrated:{start:E,end:h}})}this.setDurations(o,u,h)}else n.push({previousEvent:null,nextEvent:null,start:0,end:o,playout:{start:0,end:o},integrated:{start:0,end:o}}),this.setDurations(o,o,o);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,r=n.live?1/0:n.edge;let o=0,u=-1;e.forEach((d,g)=>{const h=d.cue.pre,p=d.cue.post,E=h?0:p?r:d.startTime;this.updateAssetDurations(d),u===E?d.cumulativeDuration=o:(o=0,u=E),!p&&d.snapOptions.in&&(d.resumeAnchor=vo(null,n.fragments,d.startOffset+d.resumptionOffset,0,0)||void 0),d.appendInPlace&&!d.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(d,t)||(d.appendInPlace=!1)),!d.appendInPlace&&g+1<e.length&&e[g+1].startTime-e[g].resumeTime<EE&&(e[g+1].appendInPlace=!1,e[g+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${d}`));const A=wn(d.resumeOffset)?d.resumeOffset:d.duration;o+=A})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(n-r)>Lu?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1):!Object.keys(t).some(u=>{const d=t[u].details,g=d.edge;if(n>=g)return this.log(`"${e.identifier}" resumption ${n} past ${u} playlist end ${g}`),!1;const h=vo(null,d.fragments,n);if(!h)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${u} playlist (${d.fragStart}-${d.fragmentEnd})`),!0;const p=u==="audio"?.175:0;return Math.abs(h.start-n)<Lu+p||Math.abs(h.end-n)<Lu+p?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${u} fragment bounds (${h.start}-${h.end} sn: ${h.sn} cc: ${h.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,o=!1;for(let u=0;u<e.assetList.length;u++){const d=e.assetList[u],g=t+n;d.startOffset=n,d.timelineStart=g,r||(r=d.duration===null),o||(o=!!d.error);const h=d.error?0:d.duration||0;n+=h}r&&!o?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Gs(f){return`[${f.event?'"'+f.event.identifier+'"':"primary"}: ${f.start.toFixed(2)}-${f.end.toFixed(2)}]`}class TA{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=$b(n,this.hls.sessionId,e.baseUrl)}catch(b){const A=this.assignAssetListError(e,xt.ASSET_LIST_LOAD_ERROR,b,n);this.hls.trigger(pe.ERROR,A);return}t&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+t);const o=this.hls.config,u=o.loader,d=new u(o),g={responseType:"json",url:r.href},h=o.interstitialAssetListLoadPolicy.default,p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},E={onSuccess:(b,A,T,C)=>{const O=b.data,te=O?.ASSETS;if(!Array.isArray(te)){const de=this.assignAssetListError(e,xt.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),T.url,A,C);this.hls.trigger(pe.ERROR,de);return}e.assetListResponse=O,this.hls.trigger(pe.ASSET_LIST_LOADED,{event:e,assetListResponse:O,networkDetails:C})},onError:(b,A,T,C)=>{const O=this.assignAssetListError(e,xt.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${b.code} ${b.text} (${A.url})`),A.url,C,T);this.hls.trigger(pe.ERROR,O)},onTimeout:(b,A,T)=>{const C=this.assignAssetListError(e,xt.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${A.url})`),A.url,b,T);this.hls.trigger(pe.ERROR,C)}};return d.load(g,p,E),this.hls.trigger(pe.ASSET_LIST_LOADING,{event:e}),d}assignAssetListError(e,t,n,r,o,u){return e.error=n,{type:jn.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:u,stats:o}}}function bE(f){f?.play().catch(()=>{})}class vA extends Xr{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const r=n-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const u=r<=-.01;this.timelinePos=n,this.bufferedPos=n;const d=this.playingItem;if(!d){this.checkBuffer();return}if(u&&this.schedule.resetErrorsInRange(n,n-r)&&this.updateSchedule(!0),this.checkBuffer(),u&&n<d.start||n>=d.end){var g;const A=this.findItemIndex(d);let T=this.schedule.findItemIndexAtTime(n);if(T===-1&&(T=A+(u?-1:1),this.log(`seeked ${u?"back ":""}to position not covered by schedule ${n} (resolving from ${A} to ${T})`)),!this.isInterstitial(d)&&(g=this.media)!=null&&g.paused&&(this.shouldPlay=!1),!u&&T>A){const C=this.schedule.findJumpRestrictedIndex(A+1,T);if(C>A){this.setSchedulePosition(C);return}}this.setSchedulePosition(T);return}const h=this.playingAsset;if(!h){if(this.playingLastItem&&this.isInterstitial(d)){const A=d.event.assetList[0];A&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,A))}return}const p=h.timelineStart,E=h.duration||0;if(u&&n<p||n>=p+E){var b;(b=d.event)!=null&&b.appendInPlace&&(this.clearInterstitial(d.event,d),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,h)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(n>=r.end){this.timelinePos=r.end;const d=this.findItemIndex(r);this.setSchedulePosition(d+1)}const o=this.playingAsset;if(!o)return;const u=o.timelineStart+(o.duration||0);n>=u&&this.setScheduleToAssetAtTime(n,o)},this.onScheduleUpdate=(n,r)=>{const o=this.schedule;if(!o)return;const u=this.playingItem,d=o.events||[],g=o.items||[],h=o.durations,p=n.map(C=>C.identifier),E=!!(d.length||p.length);(E||r)&&this.log(`INTERSTITIALS_UPDATED (${d.length}): ${d}
Schedule: ${g.map(C=>Gs(C))} pos: ${this.timelinePos}`),p.length&&this.log(`Removed events ${p}`);let b=null,A=null;u&&(b=this.updateItem(u,this.timelinePos),this.itemsMatch(u,b)?this.playingItem=b:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const T=this.bufferingItem;if(T&&(A=this.updateItem(T,this.bufferedPos),this.itemsMatch(T,A)?this.bufferingItem=A:T.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(T.event,null))),n.forEach(C=>{C.assetList.forEach(O=>{this.clearAssetPlayer(O.identifier,null)})}),this.playerQueue.forEach(C=>{if(C.interstitial.appendInPlace){const O=C.assetItem.timelineStart,te=C.timelineOffset-O;if(te)try{C.timelineOffset=O}catch(de){Math.abs(te)>Lu&&this.warn(`${de} ("${C.assetId}" ${C.timelineOffset}->${O})`)}}}),E||r){if(this.hls.trigger(pe.INTERSTITIALS_UPDATED,{events:d.slice(0),schedule:g.slice(0),durations:h,removedIds:p}),this.isInterstitial(u)&&p.includes(u.event.identifier)){this.warn(`Interstitial "${u.event.identifier}" removed while playing`),this.primaryFallback(u.event);return}u&&this.trimInPlace(b,u),T&&this.trimInPlace(A,T),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new TA(e),this.schedule=new bA(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(pe.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(pe.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(pe.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(pe.MEDIA_ENDED,this.onMediaEnded,this),e.on(pe.ERROR,this.onError,this),e.on(pe.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(pe.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(pe.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(pe.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(pe.MEDIA_ENDED,this.onMediaEnded,this),e.off(pe.ERROR,this.onError,this),e.off(pe.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Dr(e,"play",this.onPlay),Dr(e,"pause",this.onPause),Dr(e,"seeking",this.onSeeking),Dr(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;gr(n,"seeking",this.onSeeking),gr(n,"timeupdate",this.onTimeupdate),gr(n,"play",this.onPlay),gr(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!r){this.clearScheduleState();const o=this.findItemIndex(n);this.setSchedulePosition(o)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const o=this.getBufferingPlayer();o&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,o.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=E=>E&&e.getAssetPlayer(E.identifier),r=(E,b,A,T,C)=>{if(E){let O=E[b].start;const te=E.event;if(te){if(b==="playout"||te.timelineOccupancy!==zh.Point){const de=n(A);de?.interstitial===te&&(O+=de.assetItem.startOffset+de[C])}}else{const de=T==="bufferedPos"?u():e[T];O+=de-E.start}return O}return 0},o=(E,b)=>{var A;if(E!==0&&b!=="primary"&&(A=e.schedule)!=null&&A.length){var T;const C=e.schedule.findItemIndexAtTime(E),O=(T=e.schedule.items)==null?void 0:T[C];if(O){const te=O[b].start-O.start;return E+te}}return E},u=()=>{const E=e.bufferedPos;return E===Number.MAX_VALUE?d("primary"):Math.max(E,0)},d=E=>{var b,A;return(b=e.primaryDetails)!=null&&b.live?e.primaryDetails.edge:((A=e.schedule)==null?void 0:A.durations[E])||0},g=(E,b)=>{var A,T;const C=e.effectivePlayingItem;if(C!=null&&(A=C.event)!=null&&A.restrictions.skip||!e.schedule)return;e.log(`seek to ${E} "${b}"`);const O=e.effectivePlayingItem,te=e.schedule.findItemIndexAtTime(E,b),de=(T=e.schedule.items)==null?void 0:T[te],fe=e.getBufferingPlayer(),De=fe?.interstitial,Oe=De?.appendInPlace,q=O&&e.itemsMatch(O,de);if(O&&(Oe||q)){const k=n(e.playingAsset),ee=k?.media||e.primaryMedia;if(ee){const Ee=b==="primary"?ee.currentTime:r(O,b,e.playingAsset,"timelinePos","currentTime"),P=E-Ee,xe=(Oe?Ee:ee.currentTime)+P;if(xe>=0&&(!k||Oe||xe<=k.duration)){ee.currentTime=xe;return}}}if(de){let k=E;if(b!=="primary"){const Ee=de[b].start,P=E-Ee;k=de.start+P}const ee=!e.isInterstitial(de);if((!e.isInterstitial(O)||O.event.appendInPlace)&&(ee||de.event.appendInPlace)){const Ee=e.media||(Oe?fe?.media:null);Ee&&(Ee.currentTime=k)}else if(O){const Ee=e.findItemIndex(O);if(te>Ee){const xe=e.schedule.findJumpRestrictedIndex(Ee+1,te);if(xe>Ee){e.setSchedulePosition(xe);return}}let P=0;if(ee)e.timelinePos=k,e.checkBuffer();else{const xe=de.event.assetList,Ve=E-(de[b]||de).start;for(let be=xe.length;be--;){const _t=xe[be];if(_t.duration&&Ve>=_t.startOffset&&Ve<_t.startOffset+_t.duration){P=be;break}}}e.setSchedulePosition(te,P)}}},h=()=>{const E=e.effectivePlayingItem;if(e.isInterstitial(E))return E;const b=t();return e.isInterstitial(b)?b:null},p={get bufferedEnd(){const E=t(),b=e.bufferingItem;if(b&&b===E){var A;return r(b,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-b.playout.start||((A=e.bufferingAsset)==null?void 0:A.startOffset)||0}return 0},get currentTime(){const E=h(),b=e.effectivePlayingItem;return b&&b===E?r(b,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-b.playout.start:0},set currentTime(E){const b=h(),A=e.effectivePlayingItem;A&&A===b&&g(E+A.playout.start,"playout")},get duration(){const E=h();return E?E.playout.end-E.playout.start:0},get assetPlayers(){var E;const b=(E=h())==null?void 0:E.event.assetList;return b?b.map(A=>e.getAssetPlayer(A.identifier)):[]},get playingIndex(){var E;const b=(E=h())==null?void 0:E.event;return b&&e.effectivePlayingAsset?b.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return h()}};return this.manager={get events(){var E;return((E=e.schedule)==null||(E=E.events)==null?void 0:E.slice(0))||[]},get schedule(){var E;return((E=e.schedule)==null||(E=E.items)==null?void 0:E.slice(0))||[]},get interstitialPlayer(){return h()?p:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const E=t();return e.findItemIndex(E)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const E=e.effectivePlayingItem;return e.findItemIndex(E)},primary:{get bufferedEnd(){return u()},get currentTime(){const E=e.timelinePos;return E>0?E:0},set currentTime(E){g(E,"primary")},get duration(){return d("primary")},get seekableStart(){var E;return((E=e.primaryDetails)==null?void 0:E.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(E){g(E,"integrated")},get duration(){return d("integrated")},get seekableStart(){var E;return o(((E=e.primaryDetails)==null?void 0:E.fragmentStart)||0,"integrated")}},skip:()=>{const E=e.effectivePlayingItem,b=E?.event;if(b&&!b.restrictions.skip){const A=e.findItemIndex(E);if(b.appendInPlace){const T=E.playout.start+E.event.duration;g(T+.001,"playout")}else e.advanceAfterAssetEnded(b,A,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let r=this.media;!r&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(r=this.primaryMedia);const o=(t=r)==null?void 0:t.currentTime;if(!(o===void 0||!wn(o)))return o}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r){this.detachedData={media:r};return}const o=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ya(o)}`),this.detachedData=o}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let o=null;const u=this.hls,d=e!==u,g=d&&e.interstitial.appendInPlace,h=(n=this.detachedData)==null?void 0:n.mediaSource;let p;if(u.media)g&&(o=u.transferMedia(),this.detachedData=o),p="Primary";else if(h){const T=this.getBufferingPlayer();T?(o=T.transferMedia(),p=`${T}`):p="detached MediaSource"}else p="detached media";if(!o){if(h)o=this.detachedData,this.log(`using detachedData: MediaSource ${Ya(o)}`);else if(!this.detachedData||u.media===t){const T=this.playerQueue;T.length>1&&T.forEach(C=>{if(d&&C.interstitial.appendInPlace!==g){const O=C.interstitial;this.clearInterstitial(C.interstitial,null),O.appendInPlace=!1,O.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${O}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const E=o&&"mediaSource"in o&&((r=o.mediaSource)==null?void 0:r.readyState)!=="closed",b=E&&o?o:t;this.log(`${E?"transfering MediaSource":"attaching media"} to ${d?e:"Primary"} from ${p} (media.currentTime: ${t.currentTime})`);const A=this.schedule;if(b===o&&A){const T=d&&e.assetId===A.assetIdAtEnd;b.overrides={duration:A.duration,endOfStream:!d||T,cueRemoval:!d}}e.attachMedia(b)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(n===-1){const o=this.hls.startPosition;if(this.timelinePos=o,t.length&&t[0].cue.pre){const u=e.findEventIndex(t[0].identifier);this.setSchedulePosition(u)}else if(o>=0||!this.primaryLive){const u=this.timelinePos=o>0?o:0,d=e.findItemIndexAtTime(u);this.setSchedulePosition(d)}}else if(r&&!this.playingItem){const o=e.findItemIndex(r);this.setSchedulePosition(o)}}advanceAssetBuffering(e,t){const n=e.event,r=n.findAssetIndex(t),o=sm(n,r);if(!n.isAssetPastPlayoutLimit(o))this.bufferedToEvent(e,o);else if(this.schedule){var u;const d=(u=this.schedule.items)==null?void 0:u[this.findItemIndex(e)+1];d&&this.bufferedToItem(d)}}advanceAfterAssetEnded(e,t,n){const r=sm(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const o=this.schedule.items;if(o){const u=t+1,d=o.length;if(u>=d){this.setSchedulePosition(-1);return}const g=e.resumeTime;this.timelinePos<g&&(this.timelinePos=g,e.appendInPlace&&this.advanceInPlace(g),this.checkBuffer(this.bufferedPos<g)),this.setSchedulePosition(u)}}}else{if(e.appendInPlace){const o=e.assetList[r];o&&this.advanceInPlace(o.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const r=t.parentIdentifier,o=n.getEvent(r);if(o){const u=n.findEventIndex(r),d=n.findAssetIndex(o,e);this.advanceAfterAssetEnded(o,u,d-1)}}setSchedulePosition(e,t){var n;const r=(n=this.schedule)==null?void 0:n.items;if(!r||this.playbackDisabled)return;const o=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${o&&Gs(o)})`);const u=this.waitingItem||this.playingItem,d=this.playingLastItem;if(this.isInterstitial(u)){const p=u.event,E=this.playingAsset,b=E?.identifier,A=b?this.getAssetPlayer(b):null;if(A&&b&&(!this.eventItemsMatch(u,o)||t!==void 0&&b!==p.assetList[t].identifier)){var g;const T=p.findAssetIndex(E);if(this.log(`INTERSTITIAL_ASSET_ENDED ${T+1}/${p.assetList.length} ${xu(E)}`),this.endedAsset=E,this.playingAsset=null,this.hls.trigger(pe.INTERSTITIAL_ASSET_ENDED,{asset:E,assetListIndex:T,event:p,schedule:r.slice(0),scheduleIndex:e,player:A}),u!==this.playingItem){this.itemsMatch(u,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(p,this.findItemIndex(this.playingItem),T);return}this.retreiveMediaSource(b,o),A.media&&!((g=this.detachedData)!=null&&g.mediaSource)&&A.detachMedia()}if(!this.eventItemsMatch(u,o)&&(this.endedItem=u,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${p} ${Gs(u)}`),p.hasPlayed=!0,this.hls.trigger(pe.INTERSTITIAL_ENDED,{event:p,schedule:r.slice(0),scheduleIndex:e}),p.cue.once)){var h;this.updateSchedule();const T=(h=this.schedule)==null?void 0:h.items;if(o&&T){const C=this.findItemIndex(o);this.advanceSchedule(C,T,t,u,d)}return}}this.advanceSchedule(e,r,t,u,d)}advanceSchedule(e,t,n,r,o){const u=this.schedule;if(!u)return;const d=e>=0?t[e]:null,g=this.primaryMedia,h=this.playerQueue;if(h.length&&h.forEach(p=>{const E=p.interstitial,b=u.findEventIndex(E.identifier);(b<e||b>e+1)&&this.clearInterstitial(E,d)}),this.isInterstitial(d)){this.timelinePos=Math.min(Math.max(this.timelinePos,d.start),d.end);const p=d.event;if(n===void 0){n=u.findAssetIndex(p,this.timelinePos);const T=sm(p,n-1);if(p.isAssetPastPlayoutLimit(T)||p.appendInPlace&&this.timelinePos===d.end){this.advanceAfterAssetEnded(p,e,n);return}n=T}const E=this.waitingItem;this.assetsBuffered(d,g)||this.setBufferingItem(d);let b=this.preloadAssets(p,n);if(this.eventItemsMatch(d,E||r)||(this.waitingItem=d,this.log(`INTERSTITIAL_STARTED ${Gs(d)} ${p.appendInPlace?"append in place":""}`),this.hls.trigger(pe.INTERSTITIAL_STARTED,{event:p,schedule:t.slice(0),scheduleIndex:e})),!p.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${p}`);return}if(p.assetListLoader&&(p.assetListLoader.destroy(),p.assetListLoader=void 0),!g){this.log(`Waiting for attachMedia to start Interstitial ${p}`);return}this.waitingItem=this.endedItem=null,this.playingItem=d;const A=p.assetList[n];if(!A){this.advanceAfterAssetEnded(p,e,n||0);return}if(b||(b=this.getAssetPlayer(A.identifier)),b===null||b.destroyed){const T=p.assetList.length;this.warn(`asset ${n+1}/${T} player destroyed ${p}`),b=this.createAssetPlayer(p,A,n),b.loadSource()}if(!this.eventItemsMatch(d,this.bufferingItem)&&p.appendInPlace&&this.isAssetBuffered(A))return;this.startAssetPlayer(b,n,t,e,g),this.shouldPlay&&bE(b.media)}else d!==null?(this.resumePrimary(d,e,r),this.shouldPlay&&bE(this.hls.media)):o&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(u.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var r,o;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Gs(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let d=this.timelinePos;(d<e.start||d>=e.end)&&(d=this.getPrimaryResumption(e,t),this.timelinePos=d),this.attachPrimary(d,e)}if(!n)return;const u=(o=this.schedule)==null?void 0:o.items;u&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Gs(e)}`),this.hls.trigger(pe.INTERSTITIALS_PRIMARY_RESUMED,{schedule:u.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const r=this.primaryDetails;if(t===0)return this.hls.startPosition;if(r&&(n<r.fragmentStart||n>r.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:aa.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const o=this.hls;o.media?this.checkBuffer():(this.transferMediaTo(o,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((n=r.mainForwardBufferInfo)==null?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(pe.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level],r=za(za({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=za(za({},this.altSelection),{},{audio:n});return}const o=za(za({},r),{},{audio:n});this.mediaSelection=o}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=za(za({},this.altSelection),{},{subtitles:n});return}const o=za(za({},r),{},{subtitles:n});this.mediaSelection=o}onAudioTrackSwitching(e,t){const n=Ny(t);this.playerQueue.forEach(({hls:r})=>r&&(r.setAudioOption(t)||r.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=Ny(t);this.playerQueue.forEach(({hls:r})=>r&&(r.setSubtitleOption(t)||t.id!==-1&&r.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let r=0;r<t.length;r++){const o=t[r];if(o.cue.post){var n;const u=this.schedule.findEventIndex(o.identifier),d=(n=this.schedule.items)==null?void 0:n[u];this.isInterstitial(d)&&this.eventItemsMatch(d,this.bufferingItem)&&this.bufferedToItem(d,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const r=(n=this.schedule)==null?void 0:n.items;if(e&&r){const o=this.findItemIndex(e,t);return r[o]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((o,u)=>{e.event.isAssetPastPlayoutLimit(u)&&this.clearAssetPlayer(o.identifier,null)});const n=e.end+.25,r=aa.bufferInfo(this.primaryMedia,n,0);(r.end>n||(r.nextStart||0)>n)&&(this.attachPrimary(n,null),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const r=aa.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,t,n){const r=this.schedule,o=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(t.length===1&&this.itemsMatch(t[0],o)){this.bufferedPos=e;return}const u=this.playingItem,d=this.findItemIndex(u);let g=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var h;const p=this.findItemIndex(o),E=Math.min(p+1,t.length-1),b=t[E];if((g===-1&&o&&e>=o.end||(h=b.event)!=null&&h.appendInPlace&&e+.01>=b.start)&&(g=E),this.isInterstitial(o)){const A=o.event;if(E-d>1&&A.appendInPlace===!1||A.assetList.length===0&&A.assetListLoader)return}if(this.bufferedPos=e,g>p&&g>d)this.bufferedToItem(b);else{const A=this.primaryDetails;this.primaryLive&&A&&e>A.edge-A.targetduration&&b.start<A.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(b)&&this.preloadAssets(b.event,0)}}else n&&u&&!this.itemsMatch(u,o)&&(g===d?this.bufferedToItem(u):g===d+1&&this.bufferedToItem(t[g]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const o=this.getAssetPlayer(r.identifier);return!(o!=null&&o.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:r,events:o}=n;if(!r||!o)return t;const u=this.isInterstitial(e),d=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const g=d?d.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Gs(e)}`+(t?` (${g.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(u){const h=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((p,E)=>{const b=this.getAssetPlayer(p.identifier);b&&(E===h&&b.loadSource(),b.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(h=>h.pauseBuffering());this.hls.trigger(pe.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:o.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=n.assetList.length===0&&!n.assetListLoader,o=n.cue.once;if(r||!o){const u=this.preloadAssets(n,t);if(u!=null&&u.interstitial.appendInPlace){const d=this.primaryMedia;d&&this.bufferAssetPlayer(u,d)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,o=r===0&&!e.assetListLoader,u=e.cue.once;if(o){const g=e.timelineStart;if(e.appendInPlace){var d;const b=this.playingItem;!this.isInterstitial(b)&&(b==null||(d=b.nextEvent)==null?void 0:d.identifier)===e.identifier&&this.flushFrontBuffer(g+.25)}let h,p=0;if(!this.playingItem&&this.primaryLive&&(p=this.hls.startPosition,p===-1&&(p=this.hls.liveSyncPosition||0)),p&&!(e.cue.pre||e.cue.post)){const b=p-g;b>0&&(h=Math.round(b*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:r} ${e}${h?` live-start: ${p} start-offset: ${h}`:""}`),n)return this.createAsset(e,0,0,g,e.duration,n);const E=this.assetListLoader.loadAssetList(e,h);E&&(e.assetListLoader=E)}else if(!u&&r){for(let h=t;h<r;h++){const p=e.assetList[h],E=this.getAssetPlayerQueueIndex(p.identifier);(E===-1||this.playerQueue[E].destroyed)&&!p.error&&this.createAssetPlayer(e,p,h)}const g=e.assetList[t];if(g){const h=this.getAssetPlayer(g.identifier);return h&&h.loadSource(),h}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(r=>{this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,r,o,u){const d={parentIdentifier:e.identifier,identifier:mA(e,u,t),duration:o,startOffset:n,timelineStart:r,uri:u};return this.createAssetPlayer(e,d,t)}createAssetPlayer(e,t,n){const r=this.hls,o=r.userConfig;let u=o.videoPreference;const d=r.loadLevelObj||r.levels[r.currentLevel];(u||d)&&(u=Fa({},u),d.videoCodec&&(u.videoCodec=d.videoCodec),d.videoRange&&(u.allowedVideoRanges=[d.videoRange]));const g=r.audioTracks[r.audioTrack],h=r.subtitleTracks[r.subtitleTrack];let p=0;if(this.primaryLive||e.appendInPlace){const De=this.timelinePos-t.timelineStart;if(De>1){const Oe=t.duration;Oe&&De<Oe&&(p=De)}}const E=t.identifier,b=za(za({},o),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:E,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:p,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:u,audioPreference:g||o.audioPreference,subtitlePreference:h||o.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(b.timelineOffset=t.timelineStart));const A=b.cmcd;A!=null&&A.sessionId&&A.contentId&&(b.cmcd=Fa({},A,{contentId:Sd(t.uri)})),this.getAssetPlayer(E)&&this.warn(`Duplicate date range identifier ${e} and asset ${E}`);const T=new EA(this.HlsPlayerClass,b,e,t);this.playerQueue.push(T),e.assetList[n]=t;let C=!0;const O=De=>{if(De.live){var Oe;const ee=new Error(`Interstitials MUST be VOD assets ${e}`),Ee={fatal:!0,type:jn.OTHER_ERROR,details:xt.INTERSTITIAL_ASSET_ITEM_ERROR,error:ee},P=((Oe=this.schedule)==null?void 0:Oe.findEventIndex(e.identifier))||-1;this.handleAssetItemError(Ee,e,P,n,ee.message);return}const q=De.edge-De.fragmentStart,k=t.duration;(C||k===null||q>k)&&(C=!1,this.log(`Interstitial asset "${E}" duration change ${k} > ${q}`),t.duration=q,this.updateSchedule())};T.on(pe.LEVEL_UPDATED,(De,{details:Oe})=>O(Oe)),T.on(pe.LEVEL_PTS_UPDATED,(De,{details:Oe})=>O(Oe)),T.on(pe.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const te=(De,Oe)=>{const q=this.getAssetPlayer(E);if(q&&Oe.tracks){q.off(pe.BUFFER_CODECS,te),q.tracks=Oe.tracks;const k=this.primaryMedia;this.bufferingAsset===q.assetItem&&k&&!q.media&&this.bufferAssetPlayer(q,k)}};T.on(pe.BUFFER_CODECS,te);const de=()=>{var De;const Oe=this.getAssetPlayer(E);if(this.log(`buffered to end of asset ${Oe}`),!Oe||!this.schedule)return;const q=this.schedule.findEventIndex(e.identifier),k=(De=this.schedule.items)==null?void 0:De[q];this.isInterstitial(k)&&this.advanceAssetBuffering(k,t)};T.on(pe.BUFFERED_TO_END,de);const fe=De=>()=>{if(!this.getAssetPlayer(E)||!this.schedule)return;this.shouldPlay=!0;const q=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,q,De)};return T.once(pe.MEDIA_ENDED,fe(n)),T.once(pe.PLAYOUT_LIMIT_REACHED,fe(1/0)),T.on(pe.ERROR,(De,Oe)=>{if(!this.schedule)return;const q=this.getAssetPlayer(E);if(Oe.details===xt.BUFFER_STALLED_ERROR){if(q!=null&&q.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(Oe,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${Oe.error} ${e}`)}),T.on(pe.DESTROYING,()=>{if(!this.getAssetPlayer(E)||!this.schedule)return;const Oe=new Error(`Asset player destroyed unexpectedly ${E}`),q={fatal:!0,type:jn.OTHER_ERROR,details:xt.INTERSTITIAL_ASSET_ITEM_ERROR,error:Oe};this.handleAssetItemError(q,e,this.schedule.findEventIndex(e.identifier),n,Oe.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${xu(t)}`),this.hls.trigger(pe.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:T}),T}clearInterstitial(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`clear asset player "${e}" toSegment: ${t&&Gs(t)}`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,t),this.playerQueue.splice(n,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,o){const{interstitial:u,assetItem:d,assetId:g}=e,h=u.assetList.length,p=this.playingAsset;this.endedAsset=null,this.playingAsset=d,(!p||p.identifier!==g)&&(p&&(this.clearAssetPlayer(p.identifier,n[r]),delete p.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${h} ${xu(d)}`),this.hls.trigger(pe.INTERSTITIAL_ASSET_STARTED,{asset:d,assetListIndex:t,event:u,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,o)}bufferAssetPlayer(e,t){var n,r;if(!this.schedule)return;const{interstitial:o,assetItem:u}=e,d=this.schedule.findEventIndex(o.identifier),g=(n=this.schedule.items)==null?void 0:n[d];if(!g)return;e.loadSource(),this.setBufferingItem(g),this.bufferingAsset=u;const h=this.getBufferingPlayer();if(h===e)return;const p=o.appendInPlace;if(p&&h?.interstitial.appendInPlace===!1)return;const E=h?.tracks||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(p&&u!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(E&&!PE(E,e.tracks)){const b=new Error(`Asset ${xu(u)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(E)}')`),A={fatal:!0,type:jn.OTHER_ERROR,details:xt.INTERSTITIAL_ASSET_ITEM_ERROR,error:b},T=o.findAssetIndex(u);this.handleAssetItemError(A,o,d,T,b.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const r=n.currentTime,o=t.findAssetIndex(e,r),u=e.assetList[o];if(u){const d=this.getAssetPlayer(u.identifier);if(d){const g=d.currentTime||r-u.timelineStart,h=d.duration-g;if(this.warn(`Stalled at ${g} of ${g+h} in ${d} ${e} (media.currentTime: ${r})`),g&&(h/n.playbackRate<.5||d.bufferedInPlaceToEnd(n))&&d.hls){const p=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,p,o)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,r,o){if(e.details===xt.BUFFER_STALLED_ERROR)return;const u=t.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${u&&xu(u)} ${e.error}`),!this.schedule)return;const d=u?.identifier||"",g=this.getAssetPlayerQueueIndex(d),h=this.playerQueue[g]||null,p=this.schedule.items,E=Fa({},e,{fatal:!1,errorAction:Rd(!0),asset:u,assetListIndex:r,event:t,schedule:p,scheduleIndex:n,player:h});if(this.hls.trigger(pe.INTERSTITIAL_ASSET_ERROR,E),!e.fatal)return;const b=this.playingAsset,A=this.bufferingAsset,T=new Error(o);if(u&&(this.clearAssetPlayer(d,null),u.error=T),!t.assetList.some(C=>!C.error))t.error=T;else for(let C=r;C<t.assetList.length;C++)this.resetAssetPlayer(t.assetList[C].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):b&&b.identifier===d?this.advanceAfterAssetEnded(t,n,r):A&&A.identifier===d&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,A)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${Gs(n)} error: ${e.error}`);let r=this.timelinePos;r===-1&&(r=this.hls.startPosition);const o=this.updateItem(n,r);if(this.itemsMatch(n,o)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const u=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(u)}else this.checkStart()}onAssetListLoaded(e,t){var n,r;const o=t.event,u=o.identifier,d=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(u)))return;const g=o.timelineStart,h=o.duration;let p=0;d.forEach((C,O)=>{const te=parseFloat(C.DURATION);this.createAsset(o,O,p,g+p,te,C.URI),p+=te}),o.duration=p,this.log(`Loaded asset-list with duration: ${p} (was: ${h}) ${o}`);const E=this.waitingItem,b=E?.event.identifier===u;this.updateSchedule();const A=(r=this.bufferingItem)==null?void 0:r.event;if(b){var T;const C=this.schedule.findEventIndex(u),O=(T=this.schedule.items)==null?void 0:T[C];if(O){if(!this.playingItem&&this.timelinePos>O.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==C){o.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${o}`),this.updateSchedule(!0),this.primaryFallback(o);return}this.setBufferingItem(O)}this.setSchedulePosition(C)}else if(A?.identifier===u){const C=o.assetList[0];if(C){const O=this.getAssetPlayer(C.identifier);if(A.appendInPlace){const te=this.primaryMedia;O&&te&&this.bufferAssetPlayer(O,te)}else O&&O.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case xt.ASSET_LIST_PARSING_ERROR:case xt.ASSET_LIST_LOAD_ERROR:case xt.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case xt.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const TE=500;class SA extends Vm{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",zn.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(pe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(pe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=sn.IDLE,this.setInterval(TE),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragContextChanged(n)||(hi(n)&&(this.fragPrevious=n),this.state=sn.IDLE),!r)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let u;const d=n.start;for(let h=0;h<o.length;h++)if(d>=o[h].start&&d<=o[h].end){u=o[h];break}const g=n.start+n.duration;u?u.end=g:(u={start:d,end:g},o.push(u)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(n===0&&r!==Number.POSITIVE_INFINITY){const o=r-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(u=>{for(let d=0;d<u.length;){if(u[d].end<=o){u.shift();continue}else if(u[d].start<o)u[d].start=o;else break;d++}}),this.fragmentTracker.removeFragmentsInRange(n,o,zn.SUBTITLE)}}onError(e,t){const n=t.frag;n?.type===zn.SUBTITLE&&(t.details===xt.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==sn.STOPPED&&(this.state=sn.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&Nb(this.levels,t)){this.levels=t.map(n=>new Ad(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const r=new Ad(n);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,zn.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==sn.STOPPED&&this.setInterval(TE)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:o}=this,{details:u,id:d}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${d}`);return}const g=o[d];if(d>=o.length||!g)return;this.log(`Subtitle track ${d} loaded [${u.startSN},${u.endSN}]${u.lastPartSn?`[part-${u.lastPartSn}-${u.lastPartIndex}]`:""},duration:${u.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let h=0;if(u.live||(n=g.details)!=null&&n.live){if(u.deltaUpdateFailed)return;const E=this.mainDetails;if(!E){this.startFragRequested=!1;return}const b=E.fragments[0];if(!g.details)u.hasProgramDateTime&&E.hasProgramDateTime?(Oh(u,E),h=u.fragmentStart):b&&(h=b.start,_m(u,h));else{var p;h=this.alignPlaylists(u,g.details,(p=this.levelLastLoaded)==null?void 0:p.details),h===0&&b&&(h=b.start,_m(u,h))}E&&!this.startFragRequested&&this.setStartPosition(E,h)}g.details=u,this.levelLastLoaded=g,d===r&&(this.hls.trigger(pe.SUBTITLE_TRACK_UPDATED,{details:u,id:d,groupId:t.groupId}),this.tick(),u.live&&!this.fragCurrent&&this.media&&this.state===sn.IDLE&&(vo(null,u.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),g.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&r!=null&&r.key&&r.iv&&Du(r.method)){const u=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,Gm(r.method)).catch(d=>{throw o.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:t}),d}).then(d=>{const g=performance.now();o.trigger(pe.FRAG_DECRYPTED,{frag:t,payload:d,stats:{tstart:u,tdecrypt:g}})}).catch(d=>{this.warn(`${d.name}: ${d.message}`),this.state=sn.IDLE})}}doTick(){if(!this.media){this.state=sn.IDLE;return}if(this.state===sn.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:r}=this,o=this.getLoadPosition(),u=aa.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,r.maxBufferHole),{end:d,len:g}=u,h=n.details,p=this.hls.maxBufferLength+h.levelTargetDuration;if(g>p)return;const E=h.fragments,b=E.length,A=h.edge;let T=null;const C=this.fragPrevious;if(d<A){const de=r.maxFragLookUpTolerance,fe=d>A-de?0:de;T=vo(C,E,Math.max(E[0].start,d),fe),!T&&C&&C.start<E[0].start&&(T=E[0])}else T=E[b-1];if(T=this.filterReplacedPrimary(T,n.details),!T)return;const O=T.sn-h.startSN,te=E[O-1];if(te&&te.cc===T.cc&&this.fragmentTracker.getState(te)===Ti.NOT_LOADED&&(T=te),this.fragmentTracker.getState(T)===Ti.NOT_LOADED){const de=this.mapToInitFragWhenRequired(T);de&&this.loadFragment(de,n,d)}}}loadFragment(e,t,n){hi(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new _A(this.tracksBuffered[this.currentTrackId]||[])}}class _A{constructor(e){this.buffered=void 0;const t=(n,r,o)=>{if(r=r>>>0,r>o-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${o})`);return e[r][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const AA={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Wb=f=>String.fromCharCode(AA[f]||f),Kr=15,Hs=100,RA={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},IA={17:2,18:4,21:6,22:8,23:10,19:13,20:15},xA={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},wA={25:2,26:4,29:6,30:8,31:10,27:13,28:15},kA=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class DA{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;Ma.log(`${this.time} [${e}] ${n}`)}}}const Eo=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class Xb{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class CA{constructor(){this.uchar=" ",this.penState=new Xb}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class LA{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Xb,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Hs;t++)this.chars.push(new CA);this.logger=e}equals(e){for(let t=0;t<Hs;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Hs;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Hs;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Hs&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Hs)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Wb(e);if(this.pos>=Hs){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Hs;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Hs;n++){const r=this.chars[n].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class lm{constructor(e){this.rows=[],this.currRow=Kr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Kr;t++)this.rows.push(new LA(e));this.logger=e}reset(){for(let e=0;e<Kr;e++)this.rows[e].clear();this.currRow=Kr-1}equals(e){let t=!0;for(let n=0;n<Kr;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Kr;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Kr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ya(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let d=0;d<Kr;d++)this.rows[d].clear();const o=this.currRow+1-this.nrRollUpRows,u=this.lastOutputScreen;if(u){const d=u.rows[o].cueStartTime,g=this.logger.time;if(d!==null&&g!==null&&d<g)for(let h=0;h<this.nrRollUpRows;h++)this.rows[t-this.nrRollUpRows+h+1].copy(u.rows[o+h])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,u=Math.max(o-1,0);n.setCursor(e.indent),e.color=n.chars[u].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ya(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let o=0;o<Kr;o++){const u=this.rows[o].getTextString();u&&(r=o+1,e?t.push("Row "+r+": '"+u+"'"):t.push(u.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class vE{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new lm(n),this.nonDisplayedMemory=new lm(n),this.lastOutputScreen=new lm(n),this.currRollUpRow=this.displayedMemory.rows[Kr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Kr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+Ya(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class SE{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=MA(),this.logger=void 0;const r=this.logger=new DA;this.channels=[null,new vE(e,t,r),new vE(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const r=t[n]&127,o=t[n+1]&127;let u=!1,d=null;if(r===0&&o===0)continue;this.logger.log(3,()=>"["+Eo([t[n],t[n+1]])+"] -> ("+Eo([r,o])+")");const g=this.cmdHistory;if(r>=16&&r<=31){if(NA(r,o,g)){gh(null,null,g),this.logger.log(3,()=>"Repeated command ("+Eo([r,o])+") is dropped");continue}gh(r,o,this.cmdHistory),u=this.parseCmd(r,o),u||(u=this.parseMidrow(r,o)),u||(u=this.parsePAC(r,o)),u||(u=this.parseBackgroundAttributes(r,o))}else gh(null,null,g);if(!u&&(d=this.parseChars(r,o),d)){const p=this.currentChannel;p&&p>0?this.channels[p].insertChars(d):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!u&&!d&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Eo([r,o])+" orig: "+Eo([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(n||r))return!1;const o=e===20||e===21||e===23?1:2,u=this.channels[o];return e===20||e===21||e===28||e===29?t===32?u.ccRCL():t===33?u.ccBS():t===34?u.ccAOF():t===35?u.ccAON():t===36?u.ccDER():t===37?u.ccRU(2):t===38?u.ccRU(3):t===39?u.ccRU(4):t===40?u.ccFON():t===41?u.ccRDC():t===42?u.ccTR():t===43?u.ccRTD():t===44?u.ccEDM():t===45?u.ccCR():t===46?u.ccENM():t===47&&u.ccEOC():u.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Eo([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(r||o))return!1;const u=e<=23?1:2;t>=64&&t<=95?n=u===1?RA[e]:xA[e]:n=u===1?IA[e]:wA[e];const d=this.channels[u];return d?(d.setPAC(this.interpretPAC(n,t)),this.currentChannel=u,!0):!1}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,r.underline=(n&1)===1,n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((n-16)/2)*4,r}parseChars(e,t){let n,r=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19){let u;o===17?u=t+80:o===18?u=t+112:u=t+144,this.logger.log(2,()=>"Special char '"+Wb(u)+"' in channel "+n),r=[u]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+Eo(r).join(",")),r}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(n||r))return!1;let o;const u={};e===16||e===24?(o=Math.floor((t-32)/2),u.background=kA[o],t%2===1&&(u.background=u.background+"_semi")):t===45?u.background="transparent":(u.foreground="black",t===47&&(u.underline=!0));const d=e<=23?1:2;return this.channels[d].setBkgData(u),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}gh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function gh(f,e,t){t.a=f,t.b=e}function NA(f,e,t){return t.a===f&&t.b===e}function MA(){return{a:null,b:null}}var ap=function(){if(Mh!=null&&Mh.VTTCue)return self.VTTCue;const f=["","lr","rl"],e=["start","middle","end","left","right"];function t(d,g){if(typeof g!="string"||!Array.isArray(d))return!1;const h=g.toLowerCase();return~d.indexOf(h)?h:!1}function n(d){return t(f,d)}function r(d){return t(e,d)}function o(d,...g){let h=1;for(;h<arguments.length;h++){const p=arguments[h];for(const E in p)d[E]=p[E]}return d}function u(d,g,h){const p=this,E={enumerable:!0};p.hasBeenReset=!1;let b="",A=!1,T=d,C=g,O=h,te=null,de="",fe=!0,De="auto",Oe="start",q=50,k="middle",ee=50,Ee="middle";Object.defineProperty(p,"id",o({},E,{get:function(){return b},set:function(P){b=""+P}})),Object.defineProperty(p,"pauseOnExit",o({},E,{get:function(){return A},set:function(P){A=!!P}})),Object.defineProperty(p,"startTime",o({},E,{get:function(){return T},set:function(P){if(typeof P!="number")throw new TypeError("Start time must be set to a number.");T=P,this.hasBeenReset=!0}})),Object.defineProperty(p,"endTime",o({},E,{get:function(){return C},set:function(P){if(typeof P!="number")throw new TypeError("End time must be set to a number.");C=P,this.hasBeenReset=!0}})),Object.defineProperty(p,"text",o({},E,{get:function(){return O},set:function(P){O=""+P,this.hasBeenReset=!0}})),Object.defineProperty(p,"region",o({},E,{get:function(){return te},set:function(P){te=P,this.hasBeenReset=!0}})),Object.defineProperty(p,"vertical",o({},E,{get:function(){return de},set:function(P){const xe=n(P);if(xe===!1)throw new SyntaxError("An invalid or illegal string was specified.");de=xe,this.hasBeenReset=!0}})),Object.defineProperty(p,"snapToLines",o({},E,{get:function(){return fe},set:function(P){fe=!!P,this.hasBeenReset=!0}})),Object.defineProperty(p,"line",o({},E,{get:function(){return De},set:function(P){if(typeof P!="number"&&P!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");De=P,this.hasBeenReset=!0}})),Object.defineProperty(p,"lineAlign",o({},E,{get:function(){return Oe},set:function(P){const xe=r(P);if(!xe)throw new SyntaxError("An invalid or illegal string was specified.");Oe=xe,this.hasBeenReset=!0}})),Object.defineProperty(p,"position",o({},E,{get:function(){return q},set:function(P){if(P<0||P>100)throw new Error("Position must be between 0 and 100.");q=P,this.hasBeenReset=!0}})),Object.defineProperty(p,"positionAlign",o({},E,{get:function(){return k},set:function(P){const xe=r(P);if(!xe)throw new SyntaxError("An invalid or illegal string was specified.");k=xe,this.hasBeenReset=!0}})),Object.defineProperty(p,"size",o({},E,{get:function(){return ee},set:function(P){if(P<0||P>100)throw new Error("Size must be between 0 and 100.");ee=P,this.hasBeenReset=!0}})),Object.defineProperty(p,"align",o({},E,{get:function(){return Ee},set:function(P){const xe=r(P);if(!xe)throw new SyntaxError("An invalid or illegal string was specified.");Ee=xe,this.hasBeenReset=!0}})),p.displayState=void 0}return u.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},u}();class OA{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Qb(f){function e(n,r,o,u){return(n|0)*3600+(r|0)*60+(o|0)+parseFloat(u||0)}const t=f.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class PA{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Zb(f,e,t,n){const r=n?f.split(n):[f];for(const o in r){if(typeof r[o]!="string")continue;const u=r[o].split(t);if(u.length!==2)continue;const d=u[0],g=u[1];e(d,g)}}const Cm=new ap(0,0,""),mh=Cm.align==="middle"?"middle":"center";function zA(f,e,t){const n=f;function r(){const d=Qb(f);if(d===null)throw new Error("Malformed timestamp: "+n);return f=f.replace(/^[^\sa-zA-Z-]+/,""),d}function o(d,g){const h=new PA;Zb(d,function(b,A){let T;switch(b){case"region":for(let C=t.length-1;C>=0;C--)if(t[C].id===A){h.set(b,t[C].region);break}break;case"vertical":h.alt(b,A,["rl","lr"]);break;case"line":T=A.split(","),h.integer(b,T[0]),h.percent(b,T[0])&&h.set("snapToLines",!1),h.alt(b,T[0],["auto"]),T.length===2&&h.alt("lineAlign",T[1],["start",mh,"end"]);break;case"position":T=A.split(","),h.percent(b,T[0]),T.length===2&&h.alt("positionAlign",T[1],["start",mh,"end","line-left","line-right","auto"]);break;case"size":h.percent(b,A);break;case"align":h.alt(b,A,["start",mh,"end","left","right"]);break}},/:/,/\s/),g.region=h.get("region",null),g.vertical=h.get("vertical","");let p=h.get("line","auto");p==="auto"&&Cm.line===-1&&(p=-1),g.line=p,g.lineAlign=h.get("lineAlign","start"),g.snapToLines=h.get("snapToLines",!0),g.size=h.get("size",100),g.align=h.get("align",mh);let E=h.get("position","auto");E==="auto"&&Cm.position===50&&(E=g.align==="start"||g.align==="left"?0:g.align==="end"||g.align==="right"?100:50),g.position=E}function u(){f=f.replace(/^\s+/,"")}if(u(),e.startTime=r(),u(),f.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);f=f.slice(3),u(),e.endTime=r(),u(),o(f,e)}function Jb(f){return f.replace(/<br(?: \/)?>/gi,`
`)}class FA{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new OA,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let o=t.buffer,u=0;for(o=Jb(o);u<o.length&&o[u]!=="\r"&&o[u]!==`
`;)++u;const d=o.slice(0,u);return o[u]==="\r"&&++u,o[u]===`
`&&++u,t.buffer=o.slice(u),d}function r(o){Zb(o,function(u,d){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=n();const d=o.match(/^()?WEBVTT([ \t].*)?$/);if(!(d!=null&&d[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let u=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(u?u=!1:o=n(),t.state){case"HEADER":/:/.test(o)?r(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new ap(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{zA(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const d=o.indexOf("-->")!==-1;if(!o||d&&(u=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const UA=/\r\n|\n\r|\n|\r/g,om=function(e,t,n=0){return e.slice(n,n+t.length)===t},BA=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!wn(t)||!wn(n)||!wn(r)||!wn(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*r,t+=3600*1e3*o,t};function ip(f,e,t){return Sd(f.toString())+Sd(e.toString())+Sd(t)}const jA=function(e,t,n){let r=e[t],o=e[r.prevCC];if(!o||!o.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(u=o)!=null&&u.new;){var u;e.ccOffset+=r.start-o.start,r.new=!1,r=o,o=e[r.prevCC]}e.presentationOffset=n};function qA(f,e,t,n,r,o,u){const d=new FA,g=mr(new Uint8Array(f)).trim().replace(UA,`
`).split(`
`),h=[],p=e?WS(e.baseTime,e.timescale):0;let E="00:00.000",b=0,A=0,T,C=!0;d.oncue=function(O){const te=t[n];let de=t.ccOffset;const fe=(b-p)/9e4;if(te!=null&&te.new&&(A!==void 0?de=t.ccOffset=te.start:jA(t,n,fe)),fe){if(!e){T=new Error("Missing initPTS for VTT MPEGTS");return}de=fe-t.presentationOffset}const De=O.endTime-O.startTime,Oe=kr((O.startTime+de-A)*9e4,r*9e4)/9e4;O.startTime=Math.max(Oe,0),O.endTime=Math.max(Oe+De,0);const q=O.text.trim();O.text=decodeURIComponent(encodeURIComponent(q)),O.id||(O.id=ip(O.startTime,O.endTime,q)),O.endTime>0&&h.push(O)},d.onparsingerror=function(O){T=O},d.onflush=function(){if(T){u(T);return}o(h)},g.forEach(O=>{if(C)if(om(O,"X-TIMESTAMP-MAP=")){C=!1,O.slice(16).split(",").forEach(te=>{om(te,"LOCAL:")?E=te.slice(6):om(te,"MPEGTS:")&&(b=parseInt(te.slice(7)))});try{A=BA(E)/1e3}catch(te){T=te}return}else O===""&&(C=!1);d.parse(O+`
`)}),d.flush()}const um="stpp.ttml.im1t",e0=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,t0=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,GA={left:"start",center:"center",right:"end",start:"start",end:"end"};function _E(f,e,t,n){const r=ha(new Uint8Array(f),["mdat"]);if(r.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const o=r.map(d=>mr(d)),u=$S(e.baseTime,1,e.timescale);try{o.forEach(d=>t(HA(d,u)))}catch(d){n(d)}}function HA(f,e){const r=new DOMParser().parseFromString(f,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},u=Object.keys(o).reduce((E,b)=>(E[b]=r.getAttribute(`ttp:${b}`)||o[b],E),{}),d=r.getAttribute("xml:space")!=="preserve",g=AE(cm(r,"styling","style")),h=AE(cm(r,"layout","region")),p=cm(r,"body","[begin]");return[].map.call(p,E=>{const b=n0(E,d);if(!b||!E.hasAttribute("begin"))return null;const A=fm(E.getAttribute("begin"),u),T=fm(E.getAttribute("dur"),u);let C=fm(E.getAttribute("end"),u);if(A===null)throw RE(E);if(C===null){if(T===null)throw RE(E);C=A+T}const O=new ap(A-e,C-e,b);O.id=ip(O.startTime,O.endTime,O.text);const te=h[E.getAttribute("region")],de=g[E.getAttribute("style")],fe=VA(te,de,g),{textAlign:De}=fe;if(De){const Oe=GA[De];Oe&&(O.lineAlign=Oe),O.align=De}return Fa(O,fe),O}).filter(E=>E!==null)}function cm(f,e,t){const n=f.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function AE(f){return f.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function n0(f,e){return[].slice.call(f.childNodes).reduce((t,n,r)=>{var o;return n.nodeName==="br"&&r?t+`
`:(o=n.childNodes)!=null&&o.length?n0(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function VA(f,e,t){const n="http://www.w3.org/ns/ttml#styling";let r=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],u=f!=null&&f.hasAttribute("style")?f.getAttribute("style"):null;return u&&t.hasOwnProperty(u)&&(r=t[u]),o.reduce((d,g)=>{const h=dm(e,n,g)||dm(f,n,g)||dm(r,n,g);return h&&(d[g]=h),d},{})}function dm(f,e,t){return f&&f.hasAttributeNS(e,t)?f.getAttributeNS(e,t):null}function RE(f){return new Error(`Could not parse ttml timestamp ${f}`)}function fm(f,e){if(!f)return null;let t=Qb(f);return t===null&&(e0.test(f)?t=YA(f,e):t0.test(f)&&(t=KA(f,e))),t}function YA(f,e){const t=e0.exec(f),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function KA(f,e){const t=t0.exec(f),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class ph{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class $A{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=xE(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this),e.on(pe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(pe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(pe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this),e.off(pe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(pe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(pe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new ph(this,"textTrack1"),t=new ph(this,"textTrack2"),n=new ph(this,"textTrack3"),r=new ph(this,"textTrack4");this.cea608Parser1=new SE(1,e,t),this.cea608Parser2=new SE(3,n,r)}addCues(e,t,n,r,o){let u=!1;for(let d=o.length;d--;){const g=o[d],h=WA(g[0],g[1],t,n);if(h>=0&&(g[0]=Math.min(g[0],t),g[1]=Math.max(g[1],n),u=!0,h/(n-t)>.5))return}if(u||o.push([t,n]),this.config.renderTextTracksNatively){const d=this.captionsTracks[e];this.Cues.newCue(d,t,n,r)}else{const d=this.Cues.newCue(null,t,n,r);this.hls.trigger(pe.CUES_PARSED,{type:"captions",cues:d,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:o,trackId:u}){const{unparsedVttFrags:d}=this;n===zn.MAIN&&(this.initPTS[t.cc]={baseTime:r,timescale:o,trackId:u}),d.length&&(this.unparsedVttFrags=[],d.forEach(g=>{this.initPTS[g.frag.cc]?this.onFragLoaded(pe.FRAG_LOADED,g):this.hls.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:g.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const o=n.textTracks[r];if(IE(o,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:o,languageCode:u}=t[e],d=this.getExistingTrack(o,u);if(d)n[e]=d,ku(n[e]),Yb(n[e],r);else{const g=this.createTextTrack("captions",o,u);g&&(g[e]=!0,n[e]=g)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,r={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(pe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(o=>{ku(r[o]),delete r[o]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=xE(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)ku(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(o=>o.textCodec===um);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(Nb(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const u=this.media,d=u?Rh(u.textTracks):null;if(this.tracks.forEach((g,h)=>{let p;if(d){let E=null;for(let b=0;b<d.length;b++)if(d[b]&&IE(d[b],g)){E=d[b],d[b]=null;break}E&&(p=E)}if(p)ku(p);else{const E=a0(g);p=this.createTextTrack(E,g.name,g.lang),p&&(p.mode="disabled")}p&&this.textTracks.push(p)}),d!=null&&d.length){const g=d.filter(h=>h!==null).map(h=>h.label);g.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${g.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const u=this.tracks.map(d=>({label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}));this.hls.trigger(pe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:u})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const r=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!r)return;const o=`textTrack${r[1]}`,u=this.captionsProperties[o];u&&(u.label=n.name,n.lang&&(u.languageCode=n.lang),u.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===zn.MAIN){var n,r;const{cea608Parser1:o,cea608Parser2:u,lastSn:d}=this,{cc:g,sn:h}=t.frag,p=(n=(r=t.part)==null?void 0:r.index)!=null?n:-1;o&&u&&(h!==d+1||h===d&&p!==this.lastPartIndex+1||g!==this.lastCc)&&(o.reset(),u.reset()),this.lastCc=g,this.lastSn=h,this.lastPartIndex=p}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===zn.SUBTITLE)if(r.byteLength){const o=n.decryptdata,u="stats"in t;if(o==null||!o.encrypted||u){const d=this.tracks[n.level],g=this.vttCCs;g[n.cc]||(g[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),d&&d.textCodec===um?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;_E(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),n.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{n.logger.log(`Failed to parse IMSC1: ${r}`),n.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:o,unparsedVttFrags:u}=this,d=o.length-1;if(!o[n.cc]&&d===-1){u.push(e);return}const g=this.hls,h=(t=n.initSegment)!=null&&t.data?Cr(n.initSegment.data,new Uint8Array(r)).buffer:r;qA(h,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,p=>{this._appendCues(p,n.level),g.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},p=>{const E=p.message==="Missing initPTS for VTT MPEGTS";E?u.push(e):this._fallbackToIMSC1(n,r),g.logger.log(`Failed to parse VTT cue: ${p}`),!(E&&d>n.cc)&&g.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:p})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||_E(t,this.initPTS[e.cc],()=>{n.textCodec=um,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(o=>Kb(r,o))}else{const r=this.tracks[t];if(!r)return;const o=r.default?"default":"subtitles"+t;n.trigger(pe.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===zn.SUBTITLE&&this.onFragLoaded(pe.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(!(n.type===zn.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let o=0;o<r.length;o++){const u=r[o].bytes;if(u){this.cea608Parser1||this.initCea608Parsers();const d=this.extractCea608Data(u);this.cea608Parser1.addData(r[o].pts,d[0]),this.cea608Parser2.addData(r[o].pts,d[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:o}){const{media:u}=this;if(!(!u||u.currentTime<n)){if(!o||o==="video"){const{captionsTracks:d}=this;Object.keys(d).forEach(g=>Dm(d[g],t,n))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:d}=this;Object.keys(d).forEach(g=>Dm(d[g],t,r))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let r=2;for(let o=0;o<n;o++){const u=e[r++],d=127&e[r++],g=127&e[r++];if(d===0&&g===0)continue;if((4&u)!==0){const p=3&u;(p===0||p===1)&&(t[p].push(d),t[p].push(g))}}return t}}function a0(f){return f.characteristics&&/transcribes-spoken-dialog/gi.test(f.characteristics)&&/describes-music-and-sound/gi.test(f.characteristics)?"captions":"subtitles"}function IE(f,e){return!!f&&f.kind===a0(e)&&Im(e,f)}function WA(f,e,t,n){return Math.min(e,n)-Math.max(f,t)}function xE(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const XA=/\s/,QA={newCue(f,e,t,n){const r=[];let o,u,d,g,h;const p=self.VTTCue||self.TextTrackCue;for(let b=0;b<n.rows.length;b++)if(o=n.rows[b],d=!0,g=0,h="",!o.isEmpty()){var E;for(let C=0;C<o.chars.length;C++)XA.test(o.chars[C].uchar)&&d?g++:(h+=o.chars[C].uchar,d=!1);o.cueStartTime=e,e===t&&(t+=1e-4),g>=16?g--:g++;const A=Jb(h.trim()),T=ip(e,t,A);f!=null&&(E=f.cues)!=null&&E.getCueById(T)||(u=new p(e,t,A),u.id=T,u.line=b+1,u.align="left",u.position=10+Math.min(80,Math.floor(g*8/32)*10),r.push(u))}return f&&r.length&&(r.sort((b,A)=>b.line==="auto"||A.line==="auto"?0:b.line>8&&A.line>8?A.line-b.line:b.line-A.line),r.forEach(b=>Kb(f,b))),r}};function ZA(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const JA=/(\d+)-(\d+)\/(\d+)/;class wE{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||aR,this.controller=new self.AbortController,this.stats=new Pm}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const o=eR(e,this.controller.signal),u=e.responseType==="arraybuffer",d=u?"byteLength":"length",{maxTimeToFirstByteMs:g,maxLoadTimeMs:h}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=g&&wn(g)?g:h,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout),(wd(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(E=>{var b;this.response=this.loader=E;const A=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},h-(A-r.loading.start)),!E.ok){const{status:C,statusText:O}=E;throw new iR(O||"fetch, bad network response",C,E)}r.loading.first=A,r.total=nR(E.headers)||r.total;const T=(b=this.callbacks)==null?void 0:b.onProgress;return T&&wn(t.highWaterMark)?this.loadProgressively(E,r,e,t.highWaterMark,T):u?E.arrayBuffer():e.responseType==="json"?E.json():E.text()}).then(E=>{var b,A;const T=this.response;if(!T)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const C=E[d];C&&(r.loaded=r.total=C);const O={url:T.url,data:E,code:T.status},te=(b=this.callbacks)==null?void 0:b.onProgress;te&&!wn(t.highWaterMark)&&te(r,e,E,T),(A=this.callbacks)==null||A.onSuccess(O,r,e,T)}).catch(E=>{var b;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const A=E&&E.code||0,T=E?E.message:null;(b=this.callbacks)==null||b.onError({code:A,text:T},e,E?E.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,r=0,o){const u=new hb,d=e.body.getReader(),g=()=>d.read().then(h=>{if(h.done)return u.dataLength&&o(t,n,u.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const p=h.value,E=p.length;return t.loaded+=E,E<r||u.dataLength?(u.push(p),u.dataLength>=r&&o(t,n,u.flush().buffer,e)):o(t,n,p.buffer,e),g()}).catch(()=>Promise.reject());return g()}}function eR(f,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Fa({},f.headers))};return f.rangeEnd&&t.headers.set("Range","bytes="+f.rangeStart+"-"+String(f.rangeEnd-1)),t}function tR(f){const e=JA.exec(f);if(e)return parseInt(e[2])-parseInt(e[1])+1}function nR(f){const e=f.get("Content-Range");if(e){const n=tR(e);if(wn(n))return n}const t=f.get("Content-Length");if(t)return parseInt(t)}function aR(f,e){return new self.Request(f.url,e)}class iR extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const rR=/^age:\s*[\d.]+\s*$/im;class i0{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Pm,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return o(n,t.url)}).catch(u=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),o(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(u=>{var d;(d=this.callbacks)==null||d.onError({code:n.status,text:u.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:u}=n.loadPolicy;if(r)for(const d in r)e.setRequestHeader(d,r[d]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=o&&wn(o)?o:u,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,o=this.config;if(!n.aborted&&r>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const h=t.status,p=t.responseType==="text"?t.responseText:null;if(h>=200&&h<300){const T=p??t.response;if(T!=null){var u,d;n.loading.end=Math.max(self.performance.now(),n.loading.first);const C=t.responseType==="arraybuffer"?T.byteLength:T.length;n.loaded=n.total=C,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const O=(u=this.callbacks)==null?void 0:u.onProgress;O&&O(n,e,T,t);const te={url:t.responseURL,data:T,code:h};(d=this.callbacks)==null||d.onSuccess(te,n,e,t);return}}const E=o.loadPolicy.errorRetry,b=n.retry,A={url:e.url,data:void 0,code:h};if(Nh(E,b,!1,A))this.retry(E);else{var g;Ma.error(`${h} while loading ${e.url}`),(g=this.callbacks)==null||g.onError({code:h,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Nh(e,t,!0))this.retry(e);else{var n;Ma.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Bm(e,n.retry),n.retry++,Ma.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&rR.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const sR={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},lR=za(za({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:i0,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:bv,bufferController:c_,capLevelController:ep,errorController:Av,fpsController:cA,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:ab,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:sR},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},oR()),{},{subtitleStreamController:SA,subtitleTrackController:hA,timelineController:$A,audioStreamController:s_,audioTrackController:l_,emeController:Cu,cmcdController:lA,contentSteeringController:uA,interstitialsController:vA});function oR(){return{cueHandler:QA,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function uR(f,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Lm(f),r=["manifest","level","frag"],o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(u=>{const d=`${u==="level"?"playlist":u}LoadPolicy`,g=e[d]===void 0,h=[];o.forEach(p=>{const E=`${u}Loading${p}`,b=e[E];if(b!==void 0&&g){h.push(E);const A=n[d].default;switch(e[d]={default:A},p){case"TimeOut":A.maxLoadTimeMs=b,A.maxTimeToFirstByteMs=b;break;case"MaxRetry":A.errorRetry.maxNumRetry=b,A.timeoutRetry.maxNumRetry=b;break;case"RetryDelay":A.errorRetry.retryDelayMs=b,A.timeoutRetry.retryDelayMs=b;break;case"MaxRetryTimeout":A.errorRetry.maxRetryDelayMs=b,A.timeoutRetry.maxRetryDelayMs=b;break}}}),h.length&&t.warn(`hls.js config: "${h.join('", "')}" setting(s) are deprecated, use "${d}": ${Ya(e[d])}`)}),za(za({},n),e)}function Lm(f){return f&&typeof f=="object"?Array.isArray(f)?f.map(Lm):Object.keys(f).reduce((e,t)=>(e[t]=Lm(f[t]),e),{}):f}function cR(f,e){const t=f.loader;t!==wE&&t!==i0?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),f.progressive=!1):ZA()&&(f.loader=wE,f.progressive=!0,f.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Ih=2,dR=.1,fR=.05,hR=100;class gR extends eb{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(pe.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(hR),this.mediaSource=t.mediaSource;const n=this.media=t.media;gr(n,"playing",this.onMediaPlaying),gr(n,"waiting",this.onMediaWaiting),gr(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Dr(n,"playing",this.onMediaPlaying),Dr(n,"waiting",this.onMediaWaiting),Dr(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,r;const o=(n=this.hls)==null?void 0:n.config;if(!o)return;const u=this.media;if(!u)return;const{seeking:d}=u,g=this.seeking&&!d,h=!this.seeking&&d,p=u.paused&&!d||u.ended||u.playbackRate===0;if(this.seeking=d,e!==t){t&&(this.ended=0),this.moved=!0,d||(this.nudgeRetry=0,o.nudgeOnVideoHole&&!p&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(h||g){g&&this.stallResolved(e);return}if(p){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&u.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(pe.MEDIA_ENDED,{stalled:!1}));return}if(!aa.getBuffered(u).length){this.nudgeRetry=0;return}const E=aa.bufferInfo(u,e,0),b=E.nextStart||0,A=this.fragmentTracker;if(d&&A&&this.hls){const q=kE(this.hls.inFlightFragments,e),k=E.len>Ih,ee=!b||q||b-e>Ih&&!A.getPartialFragment(e);if(k||ee)return;this.moved=!1}const T=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&A){if(!(E.len>0)&&!b)return;const k=Math.max(b,E.start||0)-e,Ee=!!(T!=null&&T.live)?T.targetduration*2:Ih,P=yh(e,A);if(k>0&&(k<=Ee||P)){u.paused||this._trySkipBufferHole(P);return}}const C=o.detectStallWithCurrentTimeMs,O=self.performance.now(),te=this.waiting;let de=this.stalled;if(de===null)if(te>0&&O-te<C)de=this.stalled=te;else{this.stalled=O;return}const fe=O-de;if(!d&&(fe>=C||te)&&this.hls){var De;if(((De=this.mediaSource)==null?void 0:De.readyState)==="ended"&&!(T!=null&&T.live)&&Math.abs(e-(T?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(pe.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(E),!this.media||!this.hls)return}const Oe=aa.bufferInfo(u,e,o.maxBufferHole);this._tryFixBufferStall(Oe,fe,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(pe.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&r&&r.length>1&&e>r.end(0)){const o=aa.bufferedInfo(aa.timeRangesToArray(this.buffered.audio),e,0);if(o.len>1&&t>=o.start){const u=aa.timeRangesToArray(r),d=aa.bufferedInfo(u,t,0).bufferedIndex;if(d>-1&&d<u.length-1){const g=aa.bufferedInfo(u,e,0).bufferedIndex,h=u[d].end,p=u[d+1].start;if((g===-1||g>d)&&p-h<1&&e-h<2){const E=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${h} -> ${p} buffered index: ${g}`);this.warn(E.message),this.media.currentTime+=1e-6;let b=yh(e,this.fragmentTracker);b&&"fragment"in b?b=b.fragment:b||(b=void 0);const A=aa.bufferInfo(this.media,e,0);this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:E,reason:E.message,frag:b,buffer:A.len,bufferInfo:A})}}}}}_tryFixBufferStall(e,t,n){var r,o;const{fragmentTracker:u,media:d}=this,g=(r=this.hls)==null?void 0:r.config;if(!d||!u||!g)return;const h=(o=this.hls)==null?void 0:o.latestLevelDetails,p=yh(n,u);if((p||h!=null&&h.live&&n<h.fragmentStart)&&(this._trySkipBufferHole(p)||!this.media))return;const E=e.buffered,b=this.adjacentTraversal(e,n);(E&&E.length>1&&e.len>g.maxBufferHole||e.nextStart&&(e.nextStart-n<g.maxBufferHole||b))&&(t>g.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const o=n.getFragAtPos(t,zn.MAIN),u=n.getFragAtPos(r,zn.MAIN);if(o&&u)return u.sn-o.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:r,stalled:o}=this;if(!r&&o!==null&&n&&t){this.stallReported=!0;const u=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Ya(e)})`);this.warn(u.message),t.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_STALLED_ERROR,fatal:!1,error:u,buffer:e.len,bufferInfo:e,stalled:{start:o}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:r}=this,o=(t=this.hls)==null?void 0:t.config;if(!r||!n||!o)return 0;const u=r.currentTime,d=aa.bufferInfo(r,u,0),g=u<d.start?d.start:d.nextStart;if(g&&this.hls){const p=d.len<=o.maxBufferHole,E=d.len>0&&d.len<1&&r.readyState<3,b=g-u;if(b>0&&(p||E)){if(b>o.maxBufferHole){let T=!1;if(u===0){const C=n.getAppendedFrag(0,zn.MAIN);C&&g<C.end&&(T=!0)}if(!T&&e){var h;if(!((h=this.hls.loadLevelObj)!=null&&h.details)||kE(this.hls.inFlightFragments,g))return 0;let O=!1,te=e.end;for(;te<g;){const de=yh(te,n);if(de)te+=de.duration;else{O=!0;break}}if(O)return 0}}const A=Math.max(g+fR,u+dR);if(this.warn(`skipping hole, adjusting currentTime from ${u} to ${A}`),this.moved=!0,r.currentTime=A,!(e!=null&&e.gap)){const T=new Error(`fragment loaded with buffer holes, seeking from ${u} to ${A}`),C={type:jn.MEDIA_ERROR,details:xt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:T,reason:T.message,buffer:d.len,bufferInfo:d};e&&("fragment"in e?C.part=e:C.frag=e),this.hls.trigger(pe.ERROR,C)}return A}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:r}=this,o=t?.config;if(!n||!o)return 0;const u=n.currentTime;if(this.nudgeRetry++,r<o.nudgeMaxRetry){const d=u+(r+1)*o.nudgeOffset,g=new Error(`Nudging 'currentTime' from ${u} to ${d}`);this.warn(g.message),n.currentTime=d,t.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_NUDGE_ON_STALL,error:g,fatal:!1,buffer:e.len,bufferInfo:e})}else{const d=new Error(`Playhead still not moving while enough data buffered @${u} after ${o.nudgeMaxRetry} nudges`);this.error(d.message),t.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.BUFFER_STALLED_ERROR,error:d,fatal:!0,buffer:e.len,bufferInfo:e})}}}function kE(f,e){const t=DE(f.main);if(t&&t.start<=e)return t;const n=DE(f.audio);return n&&n.start<=e?n:null}function DE(f){if(!f)return null;switch(f.state){case sn.IDLE:case sn.STOPPED:case sn.ENDED:case sn.ERROR:return null}return f.frag}function yh(f,e){return e.getAppendedFrag(f,zn.MAIN)||e.getPartialFragment(f)}const mR=.25;function Nm(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function hm(f,e,t,n,r){let o=new f(e,t,"");try{o.value=n,r&&(o.type=r)}catch{o=new f(e,t,Ya(r?za({type:r},n):n))}return o}const Eh=(()=>{const f=Nm();try{f&&new f(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class pR{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(pe.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&ku(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return Yb(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:r}=this.hls.config;if(!n&&!r)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=Nm();if(u)for(let d=0;d<o.length;d++){const g=o[d].type;if(g===hr.emsg&&!n||!r)continue;const h=Tb(o[d].data),p=o[d].pts;let E=p+o[d].duration;E>Eh&&(E=Eh),E-p<=0&&(E=p+mR);for(let A=0;A<h.length;A++){const T=h[A];if(!vb(T)){this.updateId3CueEnds(p,g);const C=hm(u,p,E,T,g);C&&this.id3Track.addCue(C)}}}}updateId3CueEnds(e,t){var n;const r=(n=this.id3Track)==null?void 0:n.cues;if(r)for(let o=r.length;o--;){const u=r[o];u.type===t&&u.startTime<e&&u.endTime===Eh&&(u.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:r}){const{id3Track:o,hls:u}=this;if(!u)return;const{config:{enableEmsgMetadataCues:d,enableID3MetadataCues:g}}=u;if(o&&(d||g)){let h;r==="audio"?h=p=>p.type===hr.audioId3&&g:r==="video"?h=p=>p.type===hr.emsg&&d:h=p=>p.type===hr.audioId3&&g||p.type===hr.emsg&&d,Dm(o,t,n,h)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:r,enableDateRangeMetadataCues:o,interstitialsController:u}=this.hls.config;if(!o)return;const d=Nm();if(n&&r&&!u){const{fragmentStart:C,fragmentEnd:O}=e;let te=this.assetCue;te?(te.startTime=C,te.endTime=O):d&&(te=this.assetCue=hm(d,C,O,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),te&&(te.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(te),te.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:g}=this,{dateRanges:h}=e,p=Object.keys(h);let E=this.dateRangeCuesAppended;if(g&&t){var b;if((b=g.cues)!=null&&b.length){const C=Object.keys(E).filter(O=>!p.includes(O));for(let O=C.length;O--;){var A;const te=C[O],de=(A=E[te])==null?void 0:A.cues;delete E[te],de&&Object.keys(de).forEach(fe=>{const De=de[fe];if(De){De.removeEventListener("enter",this.onEventCueEnter);try{g.removeCue(De)}catch{}}})}}else E=this.dateRangeCuesAppended={}}const T=e.fragments[e.fragments.length-1];if(!(p.length===0||!wn(T?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let C=0;C<p.length;C++){const O=p[C],te=h[O],de=te.startTime,fe=E[O],De=fe?.cues||{};let Oe=fe?.durationKnown||!1,q=Eh;const{duration:k,endDate:ee}=te;if(ee&&k!==null)q=de+k,Oe=!0;else if(te.endOnNext&&!Oe){const P=p.reduce((xe,Ve)=>{if(Ve!==te.id){const be=h[Ve];if(be.class===te.class&&be.startDate>te.startDate&&(!xe||te.startDate<xe.startDate))return be}return xe},null);P&&(q=P.startTime,Oe=!0)}const Ee=Object.keys(te.attr);for(let P=0;P<Ee.length;P++){const xe=Ee[P];if(!zv(xe))continue;const Ve=De[xe];if(Ve)Oe&&!(fe!=null&&fe.durationKnown)?Ve.endTime=q:Math.abs(Ve.startTime-de)>.01&&(Ve.startTime=de,Ve.endTime=q);else if(d){let be=te.attr[xe];Fv(xe)&&(be=zE(be));const Ye=hm(d,de,q,{key:xe,data:be},hr.dateRange);Ye&&(Ye.id=O,this.id3Track.addCue(Ye),De[xe]=Ye,u&&(xe==="X-ASSET-LIST"||xe==="X-ASSET-URL")&&Ye.addEventListener("enter",this.onEventCueEnter))}}E[O]={cues:De,dateRange:te,durationKnown:Oe}}}}}class yR{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:o,maxLiveSyncPlaybackRate:u}=this.config;if(!o||u===1||!n.live)return;const d=this.targetLatency;if(d===null)return;const g=r-d,h=Math.min(this.maxLatency,d+n.targetduration);if(g<h&&g>.05&&this.forwardBufferLength>1){const E=Math.min(2,Math.max(1,u)),b=Math.round(2/(1+Math.exp(-.75*g-this.edgeStalled))*20)/20,A=Math.min(E,Math.max(1,b));this.changeMediaPlaybackRate(t,A)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:o,liveSyncDurationCount:u,lowLatencyMode:d}=this.config,g=this.hls.userConfig;let h=d&&n||t;(this._targetLatencyUpdated||g.liveSyncDuration||g.liveSyncDurationCount||h===0)&&(h=o!==void 0?o:u*r);const p=r;return h+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,p)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const r=n.edge,o=e-t-this.edgeStalled,u=r-n.totalduration,d=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(u,o),d)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===xt.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,r;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class ER extends Jm{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],o={},u={};let d=!1,g=!1,h=!1;t.levels.forEach(p=>{const E=p.attrs;let{audioCodec:b,videoCodec:A}=p;b&&(p.audioCodec=b=kh(b,n)||void 0),A&&(A=p.videoCodec=nv(A));const{width:T,height:C,unknownCodecs:O}=p;let te=O?O.length:0;if(O)for(let P=te;P--;){const xe=O[P];this.isAudioSupported(xe)?(p.audioCodec=b=b?`${b},${xe}`:xe,te--,Nu.audio[b.substring(0,4)]=2):this.isVideoSupported(xe)&&(p.videoCodec=A=A?`${A},${xe}`:xe,te--,Nu.video[A.substring(0,4)]=2)}if(d||(d=!!(T&&C)),g||(g=!!A),h||(h=!!b),te||b&&!this.isAudioSupported(b)||A&&!this.isVideoSupported(A)){this.log(`Some or all CODECS not supported "${E.CODECS}"`);return}const{CODECS:de,"FRAME-RATE":fe,"HDCP-LEVEL":De,"PATHWAY-ID":Oe,RESOLUTION:q,"VIDEO-RANGE":k}=E,Ee=`${`${Oe||"."}-`}${p.bitrate}-${q}-${fe}-${de}-${k}-${De}`;if(o[Ee])if(o[Ee].uri!==p.url&&!p.attrs["PATHWAY-ID"]){const P=u[Ee]+=1;p.attrs["PATHWAY-ID"]=new Array(P+1).join(".");const xe=this.createLevel(p);o[Ee]=xe,r.push(xe)}else o[Ee].addGroupId("audio",E.AUDIO),o[Ee].addGroupId("text",E.SUBTITLES);else{const P=this.createLevel(p);o[Ee]=P,u[Ee]=1,r.push(P)}}),this.filterAndSortMediaOptions(r,t,d,g,h)}createLevel(e){const t=new Ad(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(r.message),t.supportedResult=$E(r,[])}return t}isAudioSupported(e){return ym(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return ym(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,r,o){let u=[],d=[],g=e;if((n||r)&&o&&(g=g.filter(({videoCodec:O,videoRange:te,width:de,height:fe})=>(!!O||!!(de&&fe))&&cv(te))),g.length===0){Promise.resolve().then(()=>{if(this.hls){let O="no level with compatible codecs found in manifest",te=O;t.levels.length&&(te=`one or more CODECS in variant not supported: ${Ya(t.levels.map(fe=>fe.attrs.CODECS).filter((fe,De,Oe)=>Oe.indexOf(fe)===De))}`,this.warn(te),O+=` (${te})`);const de=new Error(O);this.hls.trigger(pe.ERROR,{type:jn.MEDIA_ERROR,details:xt.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:de,reason:te})}});return}t.audioTracks&&(u=t.audioTracks.filter(O=>!O.audioCodec||this.isAudioSupported(O.audioCodec)),CE(u)),t.subtitles&&(d=t.subtitles,CE(d));const h=g.slice(0);g.sort((O,te)=>{if(O.attrs["HDCP-LEVEL"]!==te.attrs["HDCP-LEVEL"])return(O.attrs["HDCP-LEVEL"]||"")>(te.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&O.height!==te.height)return O.height-te.height;if(O.frameRate!==te.frameRate)return O.frameRate-te.frameRate;if(O.videoRange!==te.videoRange)return Dh.indexOf(O.videoRange)-Dh.indexOf(te.videoRange);if(O.videoCodec!==te.videoCodec){const de=xy(O.videoCodec),fe=xy(te.videoCodec);if(de!==fe)return fe-de}if(O.uri===te.uri&&O.codecSet!==te.codecSet){const de=wh(O.codecSet),fe=wh(te.codecSet);if(de!==fe)return fe-de}return O.averageBitrate!==te.averageBitrate?O.averageBitrate-te.averageBitrate:0});let p=h[0];if(this.steering&&(g=this.steering.filterParsedLevels(g),g.length!==h.length)){for(let O=0;O<h.length;O++)if(h[O].pathwayId===g[0].pathwayId){p=h[O];break}}this._levels=g;for(let O=0;O<g.length;O++)if(g[O]===p){var E;this._firstLevel=O;const te=p.bitrate,de=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${g.length} level(s) found, first bitrate: ${te}`),((E=this.hls.userConfig)==null?void 0:E.abrEwmaDefaultEstimate)===void 0){const fe=Math.min(te,this.hls.config.abrEwmaDefaultEstimateMax);fe>de&&de===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=fe)}break}const b=o&&!r,A=this.hls.config,T=!!(A.audioStreamController&&A.audioTrackController),C={levels:g,audioTracks:u,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:r,altAudio:T&&!b&&u.some(O=>!!O.url)};this.hls.trigger(pe.MANIFEST_PARSED,C)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const p=new Error("invalid level idx"),E=e<0;if(this.hls.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.LEVEL_SWITCH_ERROR,level:e,fatal:E,error:p,reason:p.message}),E)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,o=r?r.attrs["PATHWAY-ID"]:void 0,u=t[e],d=u.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=u,n===e&&r&&o===d)return;this.log(`Switching to level ${e} (${u.height?u.height+"p ":""}${u.videoRange?u.videoRange+" ":""}${u.codecSet?u.codecSet+" ":""}@${u.bitrate})${d?" with Pathway "+d:""} from level ${n}${o?" with Pathway "+o:""}`);const g={level:e,attrs:u.attrs,details:u.details,bitrate:u.bitrate,averageBitrate:u.averageBitrate,maxBitrate:u.maxBitrate,realBitrate:u.realBitrate,width:u.width,height:u.height,codecSet:u.codecSet,audioCodec:u.audioCodec,videoCodec:u.videoCodec,audioGroups:u.audioGroups,subtitleGroups:u.subtitleGroups,loaded:u.loaded,loadError:u.loadError,fragmentError:u.fragmentError,name:u.name,id:u.id,uri:u.uri,url:u.url,urlId:0,audioGroupIds:u.audioGroupIds,textGroupIds:u.textGroupIds};this.hls.trigger(pe.LEVEL_SWITCHING,g);const h=u.details;if(!h||h.live){const p=this.switchParams(u.uri,r?.details,h);this.loadPlaylist(p)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(r=>t.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===pa.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===zn.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(o=>!!n[o]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:o}=t,u=t.levelInfo;if(!u){var d;this.warn(`Invalid level index ${r}`),(d=t.deliveryDirectives)!=null&&d.skip&&(o.deltaUpdateFailed=!0);return}if(u===this.currentLevel||t.withoutMultiVariant){u.fragmentError===0&&(u.loadError=0);let g=u.details;g===t.details&&g.advanced&&(g=void 0),this.playlistLoaded(r,t,g)}else(n=t.deliveryDirectives)!=null&&n.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,o=e.attrs["PATHWAY-ID"],u=e.details,d=u?.age;this.log(`Loading level index ${r}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o?" Pathway "+o:""}${d&&u.live?" age "+d.toFixed(1)+(u.type&&" "+u.type||""):""} ${n}`),this.hls.trigger(pe.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((o,u)=>u!==e?!0:(this.steering&&this.steering.removeLevel(o),o===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,o.details&&o.details.fragments.forEach(d=>d.level=-1)),!1));cb(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(pe.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(pe.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function CE(f){const e={};f.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function r0(){return self.SourceBuffer||self.WebKitSourceBuffer}function s0(){if(!Fl())return!1;const e=r0();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function bR(){if(!s0())return!1;const f=Fl();return typeof f?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>f.isTypeSupported(_d(e,"video")))||["mp4a.40.2","fLaC"].some(e=>f.isTypeSupported(_d(e,"audio"))))}function TR(){var f;const e=r0();return typeof(e==null||(f=e.prototype)==null?void 0:f.changeType)=="function"}const vR=100;class SR extends Vm{constructor(e,t,n){super(e,t,n,"stream-controller",zn.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,o=r?r.currentTime:null;if(o===null||!wn(o)||(this.log(`Media seeked to ${o.toFixed(3)}`),!this.getBufferedFrag(o)))return;const u=this.getFwdBufferInfoAtPos(r,o,zn.MAIN,0);if(u===null||u.len===0){this.warn(`Main forward buffer length at ${o} on "seeked" event ${u?u.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(vR),this.level=-1,!this.startFragRequested){let o=r.startLevel;o===-1&&(r.config.testBandwidth&&this.levels.length>1?(o=0,this.bitrateTest=!0):o=r.firstAutoLevel),r.nextLoadLevel=o,this.level=r.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=sn.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=sn.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case sn.WAITING_LEVEL:{const{levels:t,level:n}=this,r=t?.[n],o=r?.details;if(o&&(!o.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(o))break;this.state=sn.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=sn.IDLE;break}break}case sn.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:r,level:o}=this,u=r?.[o];this.resetStartWhenNotLoaded(u||null),this.state=sn.IDLE}}break}this.state===sn.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(t===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[o]))return;const u=n[o],d=this.getMainFwdBufferInfo();if(d===null)return;const g=this.getLevelDetails();if(g&&this._streamEnded(d,g)){const C={};this.altAudio===2&&(C.type="video"),this.hls.trigger(pe.BUFFER_EOS,C),this.state=sn.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const h=u.details;if(!h||this.state===sn.WAITING_LEVEL||this.waitForLive(u)){this.level=o,this.state=sn.WAITING_LEVEL,this.startFragRequested=!1;return}const p=d.len,E=this.getMaxBufferLength(u.maxBitrate);if(p>=E)return;this.backtrackFragment&&this.backtrackFragment.start>d.end&&(this.backtrackFragment=null);const b=this.backtrackFragment?this.backtrackFragment.start:d.end;let A=this.getNextFragment(b,h);if(this.couldBacktrack&&!this.fragPrevious&&A&&hi(A)&&this.fragmentTracker.getState(A)!==Ti.OK){var T;const O=((T=this.backtrackFragment)!=null?T:A).sn-h.startSN,te=h.fragments[O-1];te&&A.cc===te.cc&&(A=te,this.fragmentTracker.removeFragment(te))}else this.backtrackFragment&&d.len&&(this.backtrackFragment=null);if(A&&this.isLoopLoading(A,b)){if(!A.gap){const O=this.audioOnly&&!this.altAudio?ja.AUDIO:ja.VIDEO,te=(O===ja.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;te&&this.afterBufferFlushed(te,O,zn.MAIN)}A=this.getNextFragmentLoopLoading(A,h,d,zn.MAIN,E)}A&&(A.initSegment&&!A.initSegment.data&&!this.bitrateTest&&(A=A.initSegment),this.loadFragment(A,u,b))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);r===Ti.NOT_LOADED||r===Ti.PARTIAL?hi(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,zn.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const d=this.getMainFwdBufferInfo();if(!d||d.len<o.targetduration*2)return}if(!t.paused&&e){const d=this.hls.nextLoadLevel,g=e[d],h=this.fragLastKbps;h&&this.fragCurrent?n=this.fragCurrent.duration*g.maxBitrate/(1e3*h)+1:n=0}else n=0;const u=this.getBufferedFrag(t.currentTime+n);if(u){const d=this.followingBufferedFrag(u);if(d){this.abortCurrentFrag();const g=d.maxStartPTS?d.maxStartPTS:d.start,h=d.duration,p=Math.max(u.end,g+Math.min(Math.max(h-this.config.maxFragLookUpTolerance,h*(this.couldBacktrack?.5:.125)),h*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(p,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case sn.KEY_LOADING:case sn.FRAG_LOADING:case sn.FRAG_LOADING_WAITING_RETRY:case sn.PARSING:case sn.PARSED:this.state=sn.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;gr(n,"playing",this.onMediaPlaying),gr(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Dr(n,"playing",this.onMediaPlaying),Dr(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(pe.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,r=!1;for(let o=0;o<t.levels.length;o++){const u=t.levels[o].audioCodec;u&&(n=n||u.indexOf("mp4a.40.2")!==-1,r=r||u.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&r&&!TR(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==sn.IDLE)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=sn.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:r,startFragRequested:o}=this,u=t.level,d=t.details,g=d.totalduration;if(!r){this.warn(`Levels were reset while loading level ${u}`);return}this.log(`Level ${u} loaded [${d.startSN},${d.endSN}]${d.lastPartSn?`[part-${d.lastPartSn}-${d.lastPartIndex}]`:""}, cc [${d.startCC}, ${d.endCC}] duration:${g}`);const h=t.levelInfo,p=this.fragCurrent;p&&(this.state===sn.FRAG_LOADING||this.state===sn.FRAG_LOADING_WAITING_RETRY)&&p.level!==t.level&&p.loader&&this.abortCurrentFrag();let E=0;if(d.live||(n=h.details)!=null&&n.live){var b;if(this.checkLiveUpdate(d),d.deltaUpdateFailed)return;E=this.alignPlaylists(d,h.details,(b=this.levelLastLoaded)==null?void 0:b.details)}if(h.details=d,this.levelLastLoaded=h,o||this.setStartPosition(d,E),this.hls.trigger(pe.LEVEL_UPDATED,{details:d,level:u}),this.state===sn.WAITING_LEVEL){if(this.waitForCdnTuneIn(d))return;this.state=sn.IDLE}o&&d.live&&this.synchronizeToLiveEdge(d),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,o=this.getLoadPosition(),u=e.fragmentStart,d=e.edge,g=o>=u-t.maxFragLookUpTolerance&&o<=d;if(r!==null&&n.duration>r&&(o<r||!g)){const p=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!g&&n.readyState<4||o<d-p)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${d}, reset currentTime to : ${r.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var h;const E=aa.bufferInfo(n,r,0);if(!((h=E.buffered)!=null&&h.length)){n.currentTime=r;return}if(E.start<=o){n.currentTime=r;return}const{nextStart:A}=aa.bufferedInfo(E.buffered,o,0);A&&(n.currentTime=A)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:o}=e,{levels:u}=this;if(!u){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const d=u[n.level];if(!d){this.warn(`Level ${n.level} not found on progress`);return}const g=d.details;if(!g){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const h=d.videoCodec,p=g.PTSKnown||!g.live,E=(t=n.initSegment)==null?void 0:t.data,b=this._getAudioCodec(d),A=this.transmuxer=this.transmuxer||new Lb(this.hls,zn.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),T=r?r.index:-1,C=T!==-1,O=new qm(n.level,n.sn,n.stats.chunkCount,o.byteLength,T,C),te=this.initPTS[n.cc];A.push(o,E,b,h,n,r,g.totalduration,p,O,te)}onAudioTrackSwitching(e,t){const n=this.hls,r=this.altAudio===2;if(Ch(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const u=this.fragCurrent;u&&(this.log("Switching to main audio track, cancel main fragment load"),u.abortRequests(),this.fragmentTracker.removeFragment(u)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.fragmentTracker.removeAllFragments(),n.once(pe.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(pe.AUDIO_TRACK_SWITCHED,t)}),n.trigger(pe.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(pe.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=Ch(t.url,this.hls);if(n){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,o,u=!1;for(const d in n){const g=n[d];if(g.id==="main"){if(o=d,r=g,d==="video"){const h=n[d];h&&(this.videoBuffer=h.buffer)}}else u=!0}u&&r?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t,o=n.type===zn.MAIN;if(o){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===sn.PARSED&&(this.state=sn.IDLE);return}const d=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*d.total/(d.buffering.end-d.loading.first)),hi(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const u=this.media;u&&(!this._hasEnoughToStart&&aa.getBuffered(u).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),o&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=sn.ERROR;return}switch(t.details){case xt.FRAG_GAP:case xt.FRAG_PARSING_ERROR:case xt.FRAG_DECRYPT_ERROR:case xt.FRAG_LOAD_ERROR:case xt.FRAG_LOAD_TIMEOUT:case xt.KEY_LOAD_ERROR:case xt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(zn.MAIN,t);break;case xt.LEVEL_LOAD_ERROR:case xt.LEVEL_LOAD_TIMEOUT:case xt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===sn.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===pa.LEVEL&&(this.state=sn.IDLE);break;case xt.BUFFER_ADD_CODEC_ERROR:case xt.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case xt.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case xt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=sn.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==ja.AUDIO||!this.altAudio){const n=(t===ja.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,zn.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const r=this.timelineOffset;r&&n&&(n+=r);const o=this.getLevelDetails(),u=aa.getBuffered(e),d=u.length?u.start(0):0,g=d-n,h=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||g>0&&(g<h||this.loadingParts&&g<2*(o?.partTarget||0)))&&(this.log(`adjusting start position by ${g} to match buffer start`),n+=g,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${d}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:r}=this,o=n?.frag;if(!o||this.fragContextChanged(o))return;t.fragmentError=0,this.state=sn.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const u=o.stats;u.parsing.start=u.parsing.end=u.buffering.start=u.buffering.end=self.performance.now(),r.trigger(pe.FRAG_LOADED,n),o.bitrateTest=!1})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:r,chunkMeta:o}=e,u=this.getCurrentContext(o);if(!u){this.resetWhenMissingContext(o);return}const{frag:d,part:g,level:h}=u,{video:p,text:E,id3:b,initSegment:A}=r,{details:T}=h,C=this.altAudio?void 0:r.audio;if(this.fragContextChanged(d)){this.fragmentTracker.removeFragment(d);return}if(this.state=sn.PARSING,A){const O=A.tracks;if(O){const De=d.initSegment||d;if(this.unhandledEncryptionError(A,d))return;this._bufferInitSegment(h,O,De,o),n.trigger(pe.FRAG_PARSING_INIT_SEGMENT,{frag:De,id:t,tracks:O})}const te=A.initPTS,de=A.timescale,fe=this.initPTS[d.cc];if(wn(te)&&(!fe||fe.baseTime!==te||fe.timescale!==de)){const De=A.trackId;this.initPTS[d.cc]={baseTime:te,timescale:de,trackId:De},n.trigger(pe.INIT_PTS_FOUND,{frag:d,id:t,initPTS:te,timescale:de,trackId:De})}}if(p&&T){C&&p.type==="audiovideo"&&this.logMuxedErr(d);const O=T.fragments[d.sn-1-T.startSN],te=d.sn===T.startSN,de=!O||d.cc>O.cc;if(r.independent!==!1){const{startPTS:fe,endPTS:De,startDTS:Oe,endDTS:q}=p;if(g)g.elementaryStreams[p.type]={startPTS:fe,endPTS:De,startDTS:Oe,endDTS:q};else if(p.firstKeyFrame&&p.independent&&o.id===1&&!de&&(this.couldBacktrack=!0),p.dropped&&p.independent){const k=this.getMainFwdBufferInfo(),ee=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,Ee=p.firstKeyFramePTS?p.firstKeyFramePTS:fe;if(!te&&ee<Ee-this.config.maxBufferHole&&!de){this.backtrack(d);return}else de&&(d.gap=!0);d.setElementaryStreamInfo(p.type,d.start,De,d.start,q,!0)}else te&&fe-(T.appliedTimelineOffset||0)>Ih&&(d.gap=!0);d.setElementaryStreamInfo(p.type,fe,De,Oe,q),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(p,d,g,o,te||de)}else if(te||de)d.gap=!0;else{this.backtrack(d);return}}if(C){const{startPTS:O,endPTS:te,startDTS:de,endDTS:fe}=C;g&&(g.elementaryStreams[ja.AUDIO]={startPTS:O,endPTS:te,startDTS:de,endDTS:fe}),d.setElementaryStreamInfo(ja.AUDIO,O,te,de,fe),this.bufferFragmentData(C,d,g,o)}if(T&&b!=null&&b.samples.length){const O={id:t,frag:d,details:T,samples:b.samples};n.trigger(pe.FRAG_PARSING_METADATA,O)}if(T&&E){const O={id:t,frag:d,details:T,samples:E.samples};n.trigger(pe.FRAG_PARSING_USERDATA,O)}}logMuxedErr(e){this.warn(`${hi(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,r){if(this.state!==sn.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:o,video:u,audiovideo:d}=t;if(o){const h=e.audioCodec;let p=bh(o.codec,h);p==="mp4a"&&(p="mp4a.40.5");const E=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){p&&(p.indexOf("mp4a.40.5")!==-1?p="mp4a.40.2":p="mp4a.40.5");const b=o.metadata;b&&"channelCount"in b&&(b.channelCount||1)!==1&&E.indexOf("firefox")===-1&&(p="mp4a.40.5")}p&&p.indexOf("mp4a.40.5")!==-1&&E.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(p="mp4a.40.2",this.log(`Android: force audio codec to ${p}`)),h&&h!==p&&this.log(`Swapping manifest audio codec "${h}" for "${p}"`),o.levelCodec=p,o.id=zn.MAIN,this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${p||""}/${h||""}/${o.codec}]`),delete t.audiovideo}if(u){u.levelCodec=e.videoCodec,u.id=zn.MAIN;const h=u.codec;if(h?.length===4)switch(h){case"hvc1":case"hev1":u.codec="hvc1.1.6.L120.90";break;case"av01":u.codec="av01.0.04M.08";break;case"avc1":u.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${u.container}, codecs[level/parsed]=[${e.videoCodec||""}/${h}]${u.codec!==h?" parsed-corrected="+u.codec:""}${u.supplemental?" supplemental="+u.supplemental:""}`),delete t.audiovideo}d&&(this.log(`Init audiovideo buffer, container:${d.container}, codecs[level/parsed]=[${e.codecs}/${d.codec}]`),delete t.video,delete t.audio);const g=Object.keys(t);if(g.length){if(this.hls.trigger(pe.BUFFER_CODECS,t),!this.hls)return;g.forEach(h=>{const E=t[h].initSegment;E!=null&&E.byteLength&&this.hls.trigger(pe.BUFFER_APPENDING,{type:h,data:E,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,zn.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e?.[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=sn.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(aa.isBuffered(e,n)?t=this.getAppendedFrag(n):aa.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,o=t.level;(!r||t.sn!==r.sn||r.level!==o)&&(this.fragPlaying=t,this.hls.trigger(pe.FRAG_CHANGED,{frag:t}),(!r||r.level!==o)&&this.hls.trigger(pe.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return wn(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(wn(t)){const n=this.getLevelDetails(),r=this.currentFrag||(n?vo(null,n.fragments,t):null);if(r){const o=r.programDateTime;if(o!==null){const u=o+(t-r.start)*1e3;return new Date(u)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class _R{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=xt.KEY_LOAD_ERROR,n,r,o){return new Ys({type:jn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:n,networkDetails:r})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,o=t.length;r<o;r++){const u=t[r];if(e.cc<=u.cc&&(!hi(e)||!hi(u)||e.sn<u.sn)||!n&&r==o-1)return this.emeController.selectKeySystemFormat(u).then(d=>{if(!this.emeController)return;u.setKeyFormat(d);const g=vh(d);if(g)return this.emeController.getKeySystemAccess([g])})}if(this.config.requireKeySystemAccessOnStart){const r=bd(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const h=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,xt.KEY_LOAD_ERROR,h))}const u=o.uri;if(!u)return Promise.reject(this.createKeyLoadError(e,xt.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${u}"`)));let d=this.keyUriToKeyInfo[u];if((n=d)!=null&&n.decryptdata.key)return o.key=d.decryptdata.key,Promise.resolve({frag:e,keyInfo:d});if((r=d)!=null&&r.keyLoadPromise){var g;switch((g=d.mediaKeySessionContext)==null?void 0:g.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return d.keyLoadPromise.then(h=>(o.key=h.keyInfo.decryptdata.key,{frag:e,keyInfo:d}))}}switch(d=this.keyUriToKeyInfo[u]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(d,e):this.loadKeyEME(d,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(d,e);default:return Promise.reject(this.createKeyLoadError(e,xt.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(n);if(r)return(e.keyLoadPromise=r.then(o=>(e.mediaKeySessionContext=o,n))).catch(o=>{throw e.keyLoadPromise=null,o})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=n.loader,o=new r(n);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((u,d)=>{const g={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},h=n.keyLoadPolicy.default,p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},E={onSuccess:(b,A,T,C)=>{const{frag:O,keyInfo:te,url:de}=T;if(!O.decryptdata||te!==this.keyUriToKeyInfo[de])return d(this.createKeyLoadError(O,xt.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),C));te.decryptdata.key=O.decryptdata.key=new Uint8Array(b.data),O.keyLoader=null,te.loader=null,u({frag:O,keyInfo:te})},onError:(b,A,T,C)=>{this.resetLoader(A),d(this.createKeyLoadError(t,xt.KEY_LOAD_ERROR,new Error(`HTTP Error ${b.code} loading key ${b.text}`),T,za({url:g.url,data:void 0},b)))},onTimeout:(b,A,T)=>{this.resetLoader(A),d(this.createKeyLoadError(t,xt.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),T))},onAbort:(b,A,T)=>{this.resetLoader(A),d(this.createKeyLoadError(t,xt.INTERNAL_ABORTED,new Error("key loading aborted"),T))}};o.load(g,p,E)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,o=n.loader;t.keyLoader===o&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],o&&o.destroy()}}function LE(f){const{type:e}=f;switch(e){case pa.AUDIO_TRACK:return zn.AUDIO;case pa.SUBTITLE_TRACK:return zn.SUBTITLE;default:return zn.MAIN}}function gm(f,e){let t=f.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class AR{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(pe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(pe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,o=n||r,u=new o(t);return this.loaders[e.type]=u,u}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:pa.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:o,url:u,deliveryDirectives:d,levelInfo:g}=t;this.load({id:n,level:r,pathwayId:o,responseType:"text",type:pa.LEVEL,url:u,deliveryDirectives:d,levelOrTrack:g})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:o,deliveryDirectives:u,track:d}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:pa.AUDIO_TRACK,url:o,deliveryDirectives:u,levelOrTrack:d})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:o,deliveryDirectives:u,track:d}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:pa.SUBTITLE_TRACK,url:o,deliveryDirectives:u,levelOrTrack:d})}onLevelsUpdated(e,t){const n=this.loaders[pa.LEVEL];if(n){const r=n.context;r&&!t.levels.some(o=>o===r.levelOrTrack)&&(n.abort(),delete this.loaders[pa.LEVEL])}}load(e){var t;const n=this.hls.config;let r=this.getInternalLoader(e);if(r){const h=this.hls.logger,p=r.context;if(p&&p.levelOrTrack===e.levelOrTrack&&(p.url===e.url||p.deliveryDirectives&&!e.deliveryDirectives)){p.url===e.url?h.log(`[playlist-loader]: ignore ${e.url} ongoing request`):h.log(`[playlist-loader]: ignore ${e.url} in favor of ${p.url}`);return}h.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let o;if(e.type===pa.MANIFEST?o=n.manifestLoadPolicy.default:o=Fa({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),wn((t=e.deliveryDirectives)==null?void 0:t.part)){let h;if(e.type===pa.LEVEL&&e.level!==null?h=this.hls.levels[e.level].details:e.type===pa.AUDIO_TRACK&&e.id!==null?h=this.hls.audioTracks[e.id].details:e.type===pa.SUBTITLE_TRACK&&e.id!==null&&(h=this.hls.subtitleTracks[e.id].details),h){const p=h.partTarget,E=h.targetduration;if(p&&E){const b=Math.max(p*3,E*.8)*1e3;o=Fa({},o,{maxTimeToFirstByteMs:Math.min(b,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(b,o.maxTimeToFirstByteMs)})}}}const u=o.errorRetry||o.timeoutRetry||{},d={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:u.maxNumRetry||0,retryDelay:u.retryDelayMs||0,maxRetryDelay:u.maxRetryDelayMs||0},g={onSuccess:(h,p,E,b)=>{const A=this.getInternalLoader(E);this.resetInternalLoader(E.type);const T=h.data;if(T.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(h,E,new Error("no EXTM3U delimiter"),b||null,p);return}p.parsing.start=performance.now(),Es.isMediaPlaylist(T)||E.type!==pa.MANIFEST?this.handleTrackOrLevelPlaylist(h,p,E,b||null,A):this.handleMasterPlaylist(h,p,E,b)},onError:(h,p,E,b)=>{this.handleNetworkError(p,E,!1,h,b)},onTimeout:(h,p,E)=>{this.handleNetworkError(p,E,!0,void 0,h)}};r.load(e,d,g)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,r){const o=this.hls,u=e.data,d=gm(e,n),g=Es.parseMasterPlaylist(u,d);if(g.playlistParsingError){this.handleManifestParsingError(e,n,g.playlistParsingError,r,t);return}const{contentSteering:h,levels:p,sessionData:E,sessionKeys:b,startTimeOffset:A,variableList:T}=g;this.variableList=T;const{AUDIO:C=[],SUBTITLES:O,"CLOSED-CAPTIONS":te}=Es.parseMasterPlaylistMedia(u,d,g);C.length&&!C.some(fe=>!fe.url)&&p[0].audioCodec&&!p[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),C.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ti({}),bitrate:0,url:""})),o.trigger(pe.MANIFEST_LOADED,{levels:p,audioTracks:C,subtitles:O,captions:te,contentSteering:h,url:d,stats:t,networkDetails:r,sessionData:E,sessionKeys:b,startTimeOffset:A,variableList:T})}handleTrackOrLevelPlaylist(e,t,n,r,o){const u=this.hls,{id:d,level:g,type:h}=n,p=gm(e,n),E=wn(g)?g:wn(d)?d:0,b=LE(n),A=Es.parseLevelPlaylist(e.data,p,E,b,0,this.variableList);if(h===pa.MANIFEST){const T={attrs:new ti({}),bitrate:0,details:A,name:"",url:p};A.requestScheduled=t.loading.start+lb(A,0),u.trigger(pe.MANIFEST_LOADED,{levels:[T],audioTracks:[],url:p,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=A,this.handlePlaylistLoaded(A,e,t,n,r,o)}handleManifestParsingError(e,t,n,r,o){this.hls.trigger(pe.ERROR,{type:jn.NETWORK_ERROR,details:xt.MANIFEST_PARSING_ERROR,fatal:t.type===pa.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:o})}handleNetworkError(e,t,n=!1,r,o){let u=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===pa.LEVEL?u+=`: ${e.level} id: ${e.id}`:(e.type===pa.AUDIO_TRACK||e.type===pa.SUBTITLE_TRACK)&&(u+=` id: ${e.id} group-id: "${e.groupId}"`);const d=new Error(u);this.hls.logger.warn(`[playlist-loader]: ${u}`);let g=xt.UNKNOWN,h=!1;const p=this.getInternalLoader(e);switch(e.type){case pa.MANIFEST:g=n?xt.MANIFEST_LOAD_TIMEOUT:xt.MANIFEST_LOAD_ERROR,h=!0;break;case pa.LEVEL:g=n?xt.LEVEL_LOAD_TIMEOUT:xt.LEVEL_LOAD_ERROR,h=!1;break;case pa.AUDIO_TRACK:g=n?xt.AUDIO_TRACK_LOAD_TIMEOUT:xt.AUDIO_TRACK_LOAD_ERROR,h=!1;break;case pa.SUBTITLE_TRACK:g=n?xt.SUBTITLE_TRACK_LOAD_TIMEOUT:xt.SUBTITLE_LOAD_ERROR,h=!1;break}p&&this.resetInternalLoader(e.type);const E={type:jn.NETWORK_ERROR,details:g,fatal:h,url:e.url,loader:p,context:e,error:d,networkDetails:t,stats:o};if(r){const b=t?.url||e.url;E.response=za({url:b,data:void 0},r)}this.hls.trigger(pe.ERROR,E)}handlePlaylistLoaded(e,t,n,r,o,u){const d=this.hls,{type:g,level:h,id:p,groupId:E,deliveryDirectives:b}=r,A=gm(t,r),T=LE(r),C=typeof r.level=="number"&&T===zn.MAIN?h:void 0;if(!e.fragments.length){const te=e.playlistParsingError=new Error("No Segments found in Playlist");d.trigger(pe.ERROR,{type:jn.NETWORK_ERROR,details:xt.LEVEL_EMPTY_ERROR,fatal:!1,url:A,error:te,reason:te.message,response:t,context:r,level:C,parent:T,networkDetails:o,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const O=e.playlistParsingError;if(O){if(this.hls.logger.warn(`${O} ${e.url}`),!d.config.ignorePlaylistParsingErrors){d.trigger(pe.ERROR,{type:jn.NETWORK_ERROR,details:xt.LEVEL_PARSING_ERROR,fatal:!1,url:A,error:O,reason:O.message,response:t,context:r,level:C,parent:T,networkDetails:o,stats:n});return}e.playlistParsingError=null}switch(e.live&&u&&(u.getCacheAge&&(e.ageHeader=u.getCacheAge()||0),(!u.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),g){case pa.MANIFEST:case pa.LEVEL:d.trigger(pe.LEVEL_LOADED,{details:e,levelInfo:r.levelOrTrack||d.levels[0],level:C||0,id:p||0,stats:n,networkDetails:o,deliveryDirectives:b,withoutMultiVariant:g===pa.MANIFEST});break;case pa.AUDIO_TRACK:d.trigger(pe.AUDIO_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:p||0,groupId:E||"",stats:n,networkDetails:o,deliveryDirectives:b});break;case pa.SUBTITLE_TRACK:d.trigger(pe.SUBTITLE_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:p||0,groupId:E||"",stats:n,networkDetails:o,deliveryDirectives:b});break}}}class $s{static get version(){return Id}static isMSESupported(){return s0()}static isSupported(){return bR()}static getMediaSource(){return Fl()}static get Events(){return pe}static get MetadataSchema(){return hr}static get ErrorTypes(){return jn}static get ErrorDetails(){return xt}static get DefaultConfig(){return $s.defaultConfig?$s.defaultConfig:lR}static set DefaultConfig(e){$s.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Ym,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=OT(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=uR($s.DefaultConfig,e,t);this.userConfig=e,n.progressive&&cR(n,t);const{abrController:r,bufferController:o,capLevelController:u,errorController:d,fpsController:g}=n,h=new d(this),p=this.abrController=new r(this),E=new Rv(this),b=n.interstitialsController,A=b?this.interstitialsController=new b(this,$s):null,T=this.bufferController=new o(this,E),C=this.capLevelController=new u(this),O=new g(this),te=new AR(this),de=n.contentSteeringController,fe=de?new de(this):null,De=this.levelController=new ER(this,fe),Oe=new pR(this),q=new _R(this.config),k=this.streamController=new SR(this,E,q),ee=this.gapController=new gR(this,E);C.setStreamController(k),O.setStreamController(k);const Ee=[te,De,k];A&&Ee.splice(1,0,A),fe&&Ee.splice(1,0,fe),this.networkControllers=Ee;const P=[p,T,ee,C,O,Oe,E];this.audioTrackController=this.createController(n.audioTrackController,Ee);const xe=n.audioStreamController;xe&&Ee.push(this.audioStreamController=new xe(this,E,q)),this.subtitleTrackController=this.createController(n.subtitleTrackController,Ee);const Ve=n.subtitleStreamController;Ve&&Ee.push(this.subtititleStreamController=new Ve(this,E,q)),this.createController(n.timelineController,P),q.emeController=this.emeController=this.createController(n.emeController,P),this.cmcdController=this.createController(n.cmcdController,P),this.latencyController=this.createController(yR,P),this.coreComponents=P,Ee.push(h);const be=h.onErrorOut;typeof be=="function"&&this.on(pe.ERROR,be,h),this.on(pe.MANIFEST_LOADED,te.onManifestLoaded,te)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,r){this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const r=e===pe.ERROR;this.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.INTERNAL_EXCEPTION,fatal:r,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(pe.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const o=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(pe.ERROR,{type:jn.OTHER_ERROR,details:xt.ATTACH_MEDIA_ERROR,fatal:!0,error:o});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,r=t?e:{media:n};this._media=n,this.trigger(pe.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(pe.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(pe.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,r=this._url=Om.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(pe.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[zn.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[zn.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[zn.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=gA()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){uv(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,n)for(let o=r;o--;){const u=e[o].attrs["HDCP-LEVEL"];if(u&&u<=n)return o}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=QE(t);return WE(e,n,navigator.mediaCapabilities)}}$s.defaultConfig=void 0;/*! For license information please see dash.all.min.js.LICENSE.txt */var RR={7267:function(f,e){e.byteLength=function(h){var p=d(h),E=p[0],b=p[1];return 3*(E+b)/4-b},e.toByteArray=function(h){var p,E,b=d(h),A=b[0],T=b[1],C=new r(function(de,fe,De){return 3*(fe+De)/4-De}(0,A,T)),O=0,te=T>0?A-4:A;for(E=0;E<te;E+=4)p=n[h.charCodeAt(E)]<<18|n[h.charCodeAt(E+1)]<<12|n[h.charCodeAt(E+2)]<<6|n[h.charCodeAt(E+3)],C[O++]=p>>16&255,C[O++]=p>>8&255,C[O++]=255&p;return T===2&&(p=n[h.charCodeAt(E)]<<2|n[h.charCodeAt(E+1)]>>4,C[O++]=255&p),T===1&&(p=n[h.charCodeAt(E)]<<10|n[h.charCodeAt(E+1)]<<4|n[h.charCodeAt(E+2)]>>2,C[O++]=p>>8&255,C[O++]=255&p),C},e.fromByteArray=function(h){for(var p,E=h.length,b=E%3,A=[],T=16383,C=0,O=E-b;C<O;C+=T)A.push(g(h,C,C+T>O?O:C+T));return b===1?(p=h[E-1],A.push(t[p>>2]+t[p<<4&63]+"==")):b===2&&(p=(h[E-2]<<8)+h[E-1],A.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),A.join("")};for(var t=[],n=[],r=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0;u<64;++u)t[u]=o[u],n[o.charCodeAt(u)]=u;function d(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=h.indexOf("=");return E===-1&&(E=p),[E,E===p?0:4-E%4]}function g(h,p,E){for(var b,A,T=[],C=p;C<E;C+=3)b=(h[C]<<16&16711680)+(h[C+1]<<8&65280)+(255&h[C+2]),T.push(t[(A=b)>>18&63]+t[A>>12&63]+t[A>>6&63]+t[63&A]);return T.join("")}n[45]=62,n[95]=63},44:function(f,e,t){var n=t(7267),r=t(7986),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=g,e.SlowBuffer=function(Y){return+Y!=Y&&(Y=0),g.alloc(+Y)},e.INSPECT_MAX_BYTES=50;var u=2147483647;function d(Y){if(Y>u)throw new RangeError('The value "'+Y+'" is invalid for option "size"');var W=new Uint8Array(Y);return Object.setPrototypeOf(W,g.prototype),W}function g(Y,W,L){if(typeof Y=="number"){if(typeof W=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(Y)}return h(Y,W,L)}function h(Y,W,L){if(typeof Y=="string")return function(ae,Ue){if(typeof Ue=="string"&&Ue!==""||(Ue="utf8"),!g.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);var rt=0|C(ae,Ue),qe=d(rt),$e=qe.write(ae,Ue);return $e!==rt&&(qe=qe.slice(0,$e)),qe}(Y,W);if(ArrayBuffer.isView(Y))return function(ae){if(Ce(ae,Uint8Array)){var Ue=new Uint8Array(ae);return A(Ue.buffer,Ue.byteOffset,Ue.byteLength)}return b(ae)}(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(Ce(Y,ArrayBuffer)||Y&&Ce(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(Y,SharedArrayBuffer)||Y&&Ce(Y.buffer,SharedArrayBuffer)))return A(Y,W,L);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var j=Y.valueOf&&Y.valueOf();if(j!=null&&j!==Y)return g.from(j,W,L);var me=function(ae){if(g.isBuffer(ae)){var Ue=0|T(ae.length),rt=d(Ue);return rt.length===0||ae.copy(rt,0,0,Ue),rt}return ae.length!==void 0?typeof ae.length!="number"||Le(ae.length)?d(0):b(ae):ae.type==="Buffer"&&Array.isArray(ae.data)?b(ae.data):void 0}(Y);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return g.from(Y[Symbol.toPrimitive]("string"),W,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}function p(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function E(Y){return p(Y),d(Y<0?0:0|T(Y))}function b(Y){for(var W=Y.length<0?0:0|T(Y.length),L=d(W),j=0;j<W;j+=1)L[j]=255&Y[j];return L}function A(Y,W,L){if(W<0||Y.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<W+(L||0))throw new RangeError('"length" is outside of buffer bounds');var j;return j=W===void 0&&L===void 0?new Uint8Array(Y):L===void 0?new Uint8Array(Y,W):new Uint8Array(Y,W,L),Object.setPrototypeOf(j,g.prototype),j}function T(Y){if(Y>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|Y}function C(Y,W){if(g.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||Ce(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);var L=Y.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&L===0)return 0;for(var me=!1;;)switch(W){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return it(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*L;case"hex":return L>>>1;case"base64":return gt(Y).length;default:if(me)return j?-1:it(Y).length;W=(""+W).toLowerCase(),me=!0}}function O(Y,W,L){var j=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0)<=(W>>>=0))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return _t(this,W,L);case"utf8":case"utf-8":return P(this,W,L);case"ascii":return Ve(this,W,L);case"latin1":case"binary":return be(this,W,L);case"base64":return Ee(this,W,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ye(this,W,L);default:if(j)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),j=!0}}function te(Y,W,L){var j=Y[W];Y[W]=Y[L],Y[L]=j}function de(Y,W,L,j,me){if(Y.length===0)return-1;if(typeof L=="string"?(j=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),Le(L=+L)&&(L=me?0:Y.length-1),L<0&&(L=Y.length+L),L>=Y.length){if(me)return-1;L=Y.length-1}else if(L<0){if(!me)return-1;L=0}if(typeof W=="string"&&(W=g.from(W,j)),g.isBuffer(W))return W.length===0?-1:fe(Y,W,L,j,me);if(typeof W=="number")return W&=255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(Y,W,L):Uint8Array.prototype.lastIndexOf.call(Y,W,L):fe(Y,[W],L,j,me);throw new TypeError("val must be string, number or Buffer")}function fe(Y,W,L,j,me){var ae,Ue=1,rt=Y.length,qe=W.length;if(j!==void 0&&((j=String(j).toLowerCase())==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(Y.length<2||W.length<2)return-1;Ue=2,rt/=2,qe/=2,L/=2}function $e(ct,Mt){return Ue===1?ct[Mt]:ct.readUInt16BE(Mt*Ue)}if(me){var Ge=-1;for(ae=L;ae<rt;ae++)if($e(Y,ae)===$e(W,Ge===-1?0:ae-Ge)){if(Ge===-1&&(Ge=ae),ae-Ge+1===qe)return Ge*Ue}else Ge!==-1&&(ae-=ae-Ge),Ge=-1}else for(L+qe>rt&&(L=rt-qe),ae=L;ae>=0;ae--){for(var Je=!0,Et=0;Et<qe;Et++)if($e(Y,ae+Et)!==$e(W,Et)){Je=!1;break}if(Je)return ae}return-1}function De(Y,W,L,j){L=Number(L)||0;var me=Y.length-L;j?(j=Number(j))>me&&(j=me):j=me;var ae=W.length;j>ae/2&&(j=ae/2);for(var Ue=0;Ue<j;++Ue){var rt=parseInt(W.substr(2*Ue,2),16);if(Le(rt))return Ue;Y[L+Ue]=rt}return Ue}function Oe(Y,W,L,j){return zt(it(W,Y.length-L),Y,L,j)}function q(Y,W,L,j){return zt(function(me){for(var ae=[],Ue=0;Ue<me.length;++Ue)ae.push(255&me.charCodeAt(Ue));return ae}(W),Y,L,j)}function k(Y,W,L,j){return zt(gt(W),Y,L,j)}function ee(Y,W,L,j){return zt(function(me,ae){for(var Ue,rt,qe,$e=[],Ge=0;Ge<me.length&&!((ae-=2)<0);++Ge)rt=(Ue=me.charCodeAt(Ge))>>8,qe=Ue%256,$e.push(qe),$e.push(rt);return $e}(W,Y.length-L),Y,L,j)}function Ee(Y,W,L){return W===0&&L===Y.length?n.fromByteArray(Y):n.fromByteArray(Y.slice(W,L))}function P(Y,W,L){L=Math.min(Y.length,L);for(var j=[],me=W;me<L;){var ae,Ue,rt,qe,$e=Y[me],Ge=null,Je=$e>239?4:$e>223?3:$e>191?2:1;if(me+Je<=L)switch(Je){case 1:$e<128&&(Ge=$e);break;case 2:(192&(ae=Y[me+1]))==128&&(qe=(31&$e)<<6|63&ae)>127&&(Ge=qe);break;case 3:ae=Y[me+1],Ue=Y[me+2],(192&ae)==128&&(192&Ue)==128&&(qe=(15&$e)<<12|(63&ae)<<6|63&Ue)>2047&&(qe<55296||qe>57343)&&(Ge=qe);break;case 4:ae=Y[me+1],Ue=Y[me+2],rt=Y[me+3],(192&ae)==128&&(192&Ue)==128&&(192&rt)==128&&(qe=(15&$e)<<18|(63&ae)<<12|(63&Ue)<<6|63&rt)>65535&&qe<1114112&&(Ge=qe)}Ge===null?(Ge=65533,Je=1):Ge>65535&&(Ge-=65536,j.push(Ge>>>10&1023|55296),Ge=56320|1023&Ge),j.push(Ge),me+=Je}return function(Et){var ct=Et.length;if(ct<=xe)return String.fromCharCode.apply(String,Et);for(var Mt="",yn=0;yn<ct;)Mt+=String.fromCharCode.apply(String,Et.slice(yn,yn+=xe));return Mt}(j)}e.kMaxLength=u,g.TYPED_ARRAY_SUPPORT=function(){try{var Y=new Uint8Array(1),W={foo:function(){return 42}};return Object.setPrototypeOf(W,Uint8Array.prototype),Object.setPrototypeOf(Y,W),Y.foo()===42}catch{return!1}}(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(Y,W,L){return h(Y,W,L)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(Y,W,L){return function(j,me,ae){return p(j),j<=0?d(j):me!==void 0?typeof ae=="string"?d(j).fill(me,ae):d(j).fill(me):d(j)}(Y,W,L)},g.allocUnsafe=function(Y){return E(Y)},g.allocUnsafeSlow=function(Y){return E(Y)},g.isBuffer=function(Y){return Y!=null&&Y._isBuffer===!0&&Y!==g.prototype},g.compare=function(Y,W){if(Ce(Y,Uint8Array)&&(Y=g.from(Y,Y.offset,Y.byteLength)),Ce(W,Uint8Array)&&(W=g.from(W,W.offset,W.byteLength)),!g.isBuffer(Y)||!g.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Y===W)return 0;for(var L=Y.length,j=W.length,me=0,ae=Math.min(L,j);me<ae;++me)if(Y[me]!==W[me]){L=Y[me],j=W[me];break}return L<j?-1:j<L?1:0},g.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(Y,W){if(!Array.isArray(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(Y.length===0)return g.alloc(0);var L;if(W===void 0)for(W=0,L=0;L<Y.length;++L)W+=Y[L].length;var j=g.allocUnsafe(W),me=0;for(L=0;L<Y.length;++L){var ae=Y[L];if(Ce(ae,Uint8Array))me+ae.length>j.length?g.from(ae).copy(j,me):Uint8Array.prototype.set.call(j,ae,me);else{if(!g.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(j,me)}me+=ae.length}return j},g.byteLength=C,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var Y=this.length;if(Y%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<Y;W+=2)te(this,W,W+1);return this},g.prototype.swap32=function(){var Y=this.length;if(Y%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<Y;W+=4)te(this,W,W+3),te(this,W+1,W+2);return this},g.prototype.swap64=function(){var Y=this.length;if(Y%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<Y;W+=8)te(this,W,W+7),te(this,W+1,W+6),te(this,W+2,W+5),te(this,W+3,W+4);return this},g.prototype.toString=function(){var Y=this.length;return Y===0?"":arguments.length===0?P(this,0,Y):O.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(Y){if(!g.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y||g.compare(this,Y)===0},g.prototype.inspect=function(){var Y="",W=e.INSPECT_MAX_BYTES;return Y=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(Y+=" ... "),"<Buffer "+Y+">"},o&&(g.prototype[o]=g.prototype.inspect),g.prototype.compare=function(Y,W,L,j,me){if(Ce(Y,Uint8Array)&&(Y=g.from(Y,Y.offset,Y.byteLength)),!g.isBuffer(Y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Y);if(W===void 0&&(W=0),L===void 0&&(L=Y?Y.length:0),j===void 0&&(j=0),me===void 0&&(me=this.length),W<0||L>Y.length||j<0||me>this.length)throw new RangeError("out of range index");if(j>=me&&W>=L)return 0;if(j>=me)return-1;if(W>=L)return 1;if(this===Y)return 0;for(var ae=(me>>>=0)-(j>>>=0),Ue=(L>>>=0)-(W>>>=0),rt=Math.min(ae,Ue),qe=this.slice(j,me),$e=Y.slice(W,L),Ge=0;Ge<rt;++Ge)if(qe[Ge]!==$e[Ge]){ae=qe[Ge],Ue=$e[Ge];break}return ae<Ue?-1:Ue<ae?1:0},g.prototype.includes=function(Y,W,L){return this.indexOf(Y,W,L)!==-1},g.prototype.indexOf=function(Y,W,L){return de(this,Y,W,L,!0)},g.prototype.lastIndexOf=function(Y,W,L){return de(this,Y,W,L,!1)},g.prototype.write=function(Y,W,L,j){if(W===void 0)j="utf8",L=this.length,W=0;else if(L===void 0&&typeof W=="string")j=W,L=this.length,W=0;else{if(!isFinite(W))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");W>>>=0,isFinite(L)?(L>>>=0,j===void 0&&(j="utf8")):(j=L,L=void 0)}var me=this.length-W;if((L===void 0||L>me)&&(L=me),Y.length>0&&(L<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var ae=!1;;)switch(j){case"hex":return De(this,Y,W,L);case"utf8":case"utf-8":return Oe(this,Y,W,L);case"ascii":case"latin1":case"binary":return q(this,Y,W,L);case"base64":return k(this,Y,W,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,Y,W,L);default:if(ae)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),ae=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var xe=4096;function Ve(Y,W,L){var j="";L=Math.min(Y.length,L);for(var me=W;me<L;++me)j+=String.fromCharCode(127&Y[me]);return j}function be(Y,W,L){var j="";L=Math.min(Y.length,L);for(var me=W;me<L;++me)j+=String.fromCharCode(Y[me]);return j}function _t(Y,W,L){var j=Y.length;(!W||W<0)&&(W=0),(!L||L<0||L>j)&&(L=j);for(var me="",ae=W;ae<L;++ae)me+=yt[Y[ae]];return me}function Ye(Y,W,L){for(var j=Y.slice(W,L),me="",ae=0;ae<j.length-1;ae+=2)me+=String.fromCharCode(j[ae]+256*j[ae+1]);return me}function _e(Y,W,L){if(Y%1!=0||Y<0)throw new RangeError("offset is not uint");if(Y+W>L)throw new RangeError("Trying to access beyond buffer length")}function He(Y,W,L,j,me,ae){if(!g.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>me||W<ae)throw new RangeError('"value" argument is out of bounds');if(L+j>Y.length)throw new RangeError("Index out of range")}function nt(Y,W,L,j,me,ae){if(L+j>Y.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function ut(Y,W,L,j,me){return W=+W,L>>>=0,me||nt(Y,0,L,4),r.write(Y,W,L,j,23,4),L+4}function Pe(Y,W,L,j,me){return W=+W,L>>>=0,me||nt(Y,0,L,8),r.write(Y,W,L,j,52,8),L+8}g.prototype.slice=function(Y,W){var L=this.length;(Y=~~Y)<0?(Y+=L)<0&&(Y=0):Y>L&&(Y=L),(W=W===void 0?L:~~W)<0?(W+=L)<0&&(W=0):W>L&&(W=L),W<Y&&(W=Y);var j=this.subarray(Y,W);return Object.setPrototypeOf(j,g.prototype),j},g.prototype.readUintLE=g.prototype.readUIntLE=function(Y,W,L){Y>>>=0,W>>>=0,L||_e(Y,W,this.length);for(var j=this[Y],me=1,ae=0;++ae<W&&(me*=256);)j+=this[Y+ae]*me;return j},g.prototype.readUintBE=g.prototype.readUIntBE=function(Y,W,L){Y>>>=0,W>>>=0,L||_e(Y,W,this.length);for(var j=this[Y+--W],me=1;W>0&&(me*=256);)j+=this[Y+--W]*me;return j},g.prototype.readUint8=g.prototype.readUInt8=function(Y,W){return Y>>>=0,W||_e(Y,1,this.length),this[Y]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(Y,W){return Y>>>=0,W||_e(Y,2,this.length),this[Y]|this[Y+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(Y,W){return Y>>>=0,W||_e(Y,2,this.length),this[Y]<<8|this[Y+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(Y,W){return Y>>>=0,W||_e(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+16777216*this[Y+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(Y,W){return Y>>>=0,W||_e(Y,4,this.length),16777216*this[Y]+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},g.prototype.readIntLE=function(Y,W,L){Y>>>=0,W>>>=0,L||_e(Y,W,this.length);for(var j=this[Y],me=1,ae=0;++ae<W&&(me*=256);)j+=this[Y+ae]*me;return j>=(me*=128)&&(j-=Math.pow(2,8*W)),j},g.prototype.readIntBE=function(Y,W,L){Y>>>=0,W>>>=0,L||_e(Y,W,this.length);for(var j=W,me=1,ae=this[Y+--j];j>0&&(me*=256);)ae+=this[Y+--j]*me;return ae>=(me*=128)&&(ae-=Math.pow(2,8*W)),ae},g.prototype.readInt8=function(Y,W){return Y>>>=0,W||_e(Y,1,this.length),128&this[Y]?-1*(255-this[Y]+1):this[Y]},g.prototype.readInt16LE=function(Y,W){Y>>>=0,W||_e(Y,2,this.length);var L=this[Y]|this[Y+1]<<8;return 32768&L?4294901760|L:L},g.prototype.readInt16BE=function(Y,W){Y>>>=0,W||_e(Y,2,this.length);var L=this[Y+1]|this[Y]<<8;return 32768&L?4294901760|L:L},g.prototype.readInt32LE=function(Y,W){return Y>>>=0,W||_e(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},g.prototype.readInt32BE=function(Y,W){return Y>>>=0,W||_e(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},g.prototype.readFloatLE=function(Y,W){return Y>>>=0,W||_e(Y,4,this.length),r.read(this,Y,!0,23,4)},g.prototype.readFloatBE=function(Y,W){return Y>>>=0,W||_e(Y,4,this.length),r.read(this,Y,!1,23,4)},g.prototype.readDoubleLE=function(Y,W){return Y>>>=0,W||_e(Y,8,this.length),r.read(this,Y,!0,52,8)},g.prototype.readDoubleBE=function(Y,W){return Y>>>=0,W||_e(Y,8,this.length),r.read(this,Y,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(Y,W,L,j){Y=+Y,W>>>=0,L>>>=0,j||He(this,Y,W,L,Math.pow(2,8*L)-1,0);var me=1,ae=0;for(this[W]=255&Y;++ae<L&&(me*=256);)this[W+ae]=Y/me&255;return W+L},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(Y,W,L,j){Y=+Y,W>>>=0,L>>>=0,j||He(this,Y,W,L,Math.pow(2,8*L)-1,0);var me=L-1,ae=1;for(this[W+me]=255&Y;--me>=0&&(ae*=256);)this[W+me]=Y/ae&255;return W+L},g.prototype.writeUint8=g.prototype.writeUInt8=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,1,255,0),this[W]=255&Y,W+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,2,65535,0),this[W]=255&Y,this[W+1]=Y>>>8,W+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,2,65535,0),this[W]=Y>>>8,this[W+1]=255&Y,W+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,4,4294967295,0),this[W+3]=Y>>>24,this[W+2]=Y>>>16,this[W+1]=Y>>>8,this[W]=255&Y,W+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,4,4294967295,0),this[W]=Y>>>24,this[W+1]=Y>>>16,this[W+2]=Y>>>8,this[W+3]=255&Y,W+4},g.prototype.writeIntLE=function(Y,W,L,j){if(Y=+Y,W>>>=0,!j){var me=Math.pow(2,8*L-1);He(this,Y,W,L,me-1,-me)}var ae=0,Ue=1,rt=0;for(this[W]=255&Y;++ae<L&&(Ue*=256);)Y<0&&rt===0&&this[W+ae-1]!==0&&(rt=1),this[W+ae]=(Y/Ue|0)-rt&255;return W+L},g.prototype.writeIntBE=function(Y,W,L,j){if(Y=+Y,W>>>=0,!j){var me=Math.pow(2,8*L-1);He(this,Y,W,L,me-1,-me)}var ae=L-1,Ue=1,rt=0;for(this[W+ae]=255&Y;--ae>=0&&(Ue*=256);)Y<0&&rt===0&&this[W+ae+1]!==0&&(rt=1),this[W+ae]=(Y/Ue|0)-rt&255;return W+L},g.prototype.writeInt8=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,1,127,-128),Y<0&&(Y=255+Y+1),this[W]=255&Y,W+1},g.prototype.writeInt16LE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,2,32767,-32768),this[W]=255&Y,this[W+1]=Y>>>8,W+2},g.prototype.writeInt16BE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,2,32767,-32768),this[W]=Y>>>8,this[W+1]=255&Y,W+2},g.prototype.writeInt32LE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,4,2147483647,-2147483648),this[W]=255&Y,this[W+1]=Y>>>8,this[W+2]=Y>>>16,this[W+3]=Y>>>24,W+4},g.prototype.writeInt32BE=function(Y,W,L){return Y=+Y,W>>>=0,L||He(this,Y,W,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),this[W]=Y>>>24,this[W+1]=Y>>>16,this[W+2]=Y>>>8,this[W+3]=255&Y,W+4},g.prototype.writeFloatLE=function(Y,W,L){return ut(this,Y,W,!0,L)},g.prototype.writeFloatBE=function(Y,W,L){return ut(this,Y,W,!1,L)},g.prototype.writeDoubleLE=function(Y,W,L){return Pe(this,Y,W,!0,L)},g.prototype.writeDoubleBE=function(Y,W,L){return Pe(this,Y,W,!1,L)},g.prototype.copy=function(Y,W,L,j){if(!g.isBuffer(Y))throw new TypeError("argument should be a Buffer");if(L||(L=0),j||j===0||(j=this.length),W>=Y.length&&(W=Y.length),W||(W=0),j>0&&j<L&&(j=L),j===L||Y.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),Y.length-W<j-L&&(j=Y.length-W+L);var me=j-L;return this===Y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(W,L,j):Uint8Array.prototype.set.call(Y,this.subarray(L,j),W),me},g.prototype.fill=function(Y,W,L,j){if(typeof Y=="string"){if(typeof W=="string"?(j=W,W=0,L=this.length):typeof L=="string"&&(j=L,L=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!g.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(Y.length===1){var me=Y.charCodeAt(0);(j==="utf8"&&me<128||j==="latin1")&&(Y=me)}}else typeof Y=="number"?Y&=255:typeof Y=="boolean"&&(Y=Number(Y));if(W<0||this.length<W||this.length<L)throw new RangeError("Out of range index");if(L<=W)return this;var ae;if(W>>>=0,L=L===void 0?this.length:L>>>0,Y||(Y=0),typeof Y=="number")for(ae=W;ae<L;++ae)this[ae]=Y;else{var Ue=g.isBuffer(Y)?Y:g.from(Y,j),rt=Ue.length;if(rt===0)throw new TypeError('The value "'+Y+'" is invalid for argument "value"');for(ae=0;ae<L-W;++ae)this[ae+W]=Ue[ae%rt]}return this};var Be=/[^+/0-9A-Za-z-_]/g;function it(Y,W){var L;W=W||1/0;for(var j=Y.length,me=null,ae=[],Ue=0;Ue<j;++Ue){if((L=Y.charCodeAt(Ue))>55295&&L<57344){if(!me){if(L>56319){(W-=3)>-1&&ae.push(239,191,189);continue}if(Ue+1===j){(W-=3)>-1&&ae.push(239,191,189);continue}me=L;continue}if(L<56320){(W-=3)>-1&&ae.push(239,191,189),me=L;continue}L=65536+(me-55296<<10|L-56320)}else me&&(W-=3)>-1&&ae.push(239,191,189);if(me=null,L<128){if((W-=1)<0)break;ae.push(L)}else if(L<2048){if((W-=2)<0)break;ae.push(L>>6|192,63&L|128)}else if(L<65536){if((W-=3)<0)break;ae.push(L>>12|224,L>>6&63|128,63&L|128)}else{if(!(L<1114112))throw new Error("Invalid code point");if((W-=4)<0)break;ae.push(L>>18|240,L>>12&63|128,L>>6&63|128,63&L|128)}}return ae}function gt(Y){return n.toByteArray(function(W){if((W=(W=W.split("=")[0]).trim().replace(Be,"")).length<2)return"";for(;W.length%4!=0;)W+="=";return W}(Y))}function zt(Y,W,L,j){for(var me=0;me<j&&!(me+L>=W.length||me>=Y.length);++me)W[me+L]=Y[me];return me}function Ce(Y,W){return Y instanceof W||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===W.name}function Le(Y){return Y!=Y}var yt=function(){for(var Y="0123456789abcdef",W=new Array(256),L=0;L<16;++L)for(var j=16*L,me=0;me<16;++me)W[j+me]=Y[L]+Y[me];return W}()},6877:function(f,e){var t={parseBuffer:function(o){return new n(o).parse()},addBoxProcessor:function(o,u){typeof o=="string"&&typeof u=="function"&&(r.prototype._boxProcessors[o]=u)},createFile:function(){return new n},createBox:function(o,u,d){var g=r.create(o);return u&&u.append(g,d),g},createFullBox:function(o,u,d){var g=t.createBox(o,u,d);return g.version=0,g.flags=0,g},Utils:{}};t.Utils.dataViewToString=function(o,u){var d=u||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(d).decode(o);var g=[],h=0;if(d==="utf-8")for(;h<o.byteLength;){var p=o.getUint8(h++);p<128||(p<224?(p=(31&p)<<6,p|=63&o.getUint8(h++)):p<240?(p=(15&p)<<12,p|=(63&o.getUint8(h++))<<6,p|=63&o.getUint8(h++)):(p=(7&p)<<18,p|=(63&o.getUint8(h++))<<12,p|=(63&o.getUint8(h++))<<6,p|=63&o.getUint8(h++))),g.push(String.fromCharCode(p))}else for(;h<o.byteLength;)g.push(String.fromCharCode(o.getUint8(h++)));return g.join("")},t.Utils.utf8ToByteArray=function(o){var u,d;if(typeof TextEncoder<"u")u=new TextEncoder().encode(o);else for(u=[],d=0;d<o.length;++d){var g=o.charCodeAt(d);g<128?u.push(g):g<2048?(u.push(192|g>>6),u.push(128|63&g)):g<65536?(u.push(224|g>>12),u.push(128|63&g>>6),u.push(128|63&g)):(u.push(240|g>>18),u.push(128|63&g>>12),u.push(128|63&g>>6),u.push(128|63&g))}return u},t.Utils.appendBox=function(o,u,d){if(u._offset=o._cursor.offset,u._root=o._root?o._root:o,u._raw=o._raw,u._parent=o,d!==-1)if(d!=null){var g,h=-1;if(typeof d=="number")h=d;else{if(typeof d=="string")g=d;else{if(typeof d!="object"||!d.type)return void o.boxes.push(u);g=d.type}for(var p=0;p<o.boxes.length;p++)if(g===o.boxes[p].type){h=p+1;break}}o.boxes.splice(h,0,u)}else o.boxes.push(u)},e.parseBuffer=t.parseBuffer,e.addBoxProcessor=t.addBoxProcessor,e.createFile=t.createFile,e.createBox=t.createBox,e.createFullBox=t.createFullBox,e.Utils=t.Utils,t.Cursor=function(o){this.offset=o===void 0?0:o};var n=function(o){this._cursor=new t.Cursor,this.boxes=[],o&&(this._raw=new DataView(o))};n.prototype.fetch=function(o){var u=this.fetchAll(o,!0);return u.length?u[0]:null},n.prototype.fetchAll=function(o,u){var d=[];return n._sweep.call(this,o,d,u),d},n.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var o=r.parse(this);if(o.type===void 0)break;this.boxes.push(o)}return this},n._sweep=function(o,u,d){for(var g in this.type&&this.type==o&&u.push(this),this.boxes){if(u.length&&d)return;n._sweep.call(this.boxes[g],o,u,d)}},n.prototype.write=function(){var o,u=0;for(o=0;o<this.boxes.length;o++)u+=this.boxes[o].getLength(!1);var d=new Uint8Array(u);for(this._rawo=new DataView(d.buffer),this.bytes=d,this._cursor.offset=0,o=0;o<this.boxes.length;o++)this.boxes[o].write();return d.buffer},n.prototype.append=function(o,u){t.Utils.appendBox(this,o,u)};var r=function(){this._cursor=new t.Cursor};r.parse=function(o){var u=new r;return u._offset=o._cursor.offset,u._root=o._root?o._root:o,u._raw=o._raw,u._parent=o,u._parseBox(),o._cursor.offset=u._raw.byteOffset+u._raw.byteLength,u},r.create=function(o){var u=new r;return u.type=o,u.boxes=[],u},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],r.prototype._boxProcessors={},r.prototype._procField=function(o,u,d){this._parsing?this[o]=this._readField(u,d):this._writeField(u,d,this[o])},r.prototype._procFieldArray=function(o,u,d,g){var h;if(this._parsing)for(this[o]=[],h=0;h<u;h++)this[o][h]=this._readField(d,g);else for(h=0;h<this[o].length;h++)this._writeField(d,g,this[o][h])},r.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},r.prototype._procEntries=function(o,u,d){var g;if(this._parsing)for(this[o]=[],g=0;g<u;g++)this[o].push({}),d.call(this,this[o][g]);else for(g=0;g<u;g++)d.call(this,this[o][g])},r.prototype._procSubEntries=function(o,u,d,g){var h;if(this._parsing)for(o[u]=[],h=0;h<d;h++)o[u].push({}),g.call(this,o[u][h]);else for(h=0;h<d;h++)g.call(this,o[u][h])},r.prototype._procEntryField=function(o,u,d,g){this._parsing?o[u]=this._readField(d,g):this._writeField(d,g,o[u])},r.prototype._procSubBoxes=function(o,u){var d;if(this._parsing)for(this[o]=[],d=0;d<u;d++)this[o].push(r.parse(this));else for(d=0;d<u;d++)this._rawo?this[o][d].write():this.size+=this[o][d].getLength()},r.prototype._readField=function(o,u){switch(o){case"uint":return this._readUint(u);case"int":return this._readInt(u);case"template":return this._readTemplate(u);case"string":return u===-1?this._readTerminatedString():this._readString(u);case"data":return this._readData(u);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},r.prototype._readInt=function(o){var u=null,d=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:u=this._raw.getInt8(d);break;case 16:u=this._raw.getInt16(d);break;case 32:u=this._raw.getInt32(d);break;case 64:var g=this._raw.getInt32(d),h=this._raw.getInt32(d+4);u=g*Math.pow(2,32)+h}return this._cursor.offset+=o>>3,u},r.prototype._readUint=function(o){var u,d,g=null,h=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:g=this._raw.getUint8(h);break;case 16:g=this._raw.getUint16(h);break;case 24:g=((u=this._raw.getUint16(h))<<8)+(d=this._raw.getUint8(h+2));break;case 32:g=this._raw.getUint32(h);break;case 64:u=this._raw.getUint32(h),d=this._raw.getUint32(h+4),g=u*Math.pow(2,32)+d}return this._cursor.offset+=o>>3,g},r.prototype._readString=function(o){for(var u="",d=0;d<o;d++){var g=this._readUint(8);u+=String.fromCharCode(g)}return u},r.prototype._readTemplate=function(o){return this._readUint(o/2)+this._readUint(o/2)/Math.pow(2,o/2)},r.prototype._readTerminatedString=function(){for(var o="";this._cursor.offset-this._offset<this._raw.byteLength;){var u=this._readUint(8);if(u===0)break;o+=String.fromCharCode(u)}return o},r.prototype._readData=function(o){var u=o>0?o:this._raw.byteLength-(this._cursor.offset-this._offset);if(u>0){var d=new Uint8Array(this._raw.buffer,this._cursor.offset,u);return this._cursor.offset+=u,d}return null},r.prototype._readUTF8String=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),u=null;return o>0&&(u=new DataView(this._raw.buffer,this._cursor.offset,o),this._cursor.offset+=o),u&&t.Utils.dataViewToString(u)},r.prototype._readUTF8TerminatedString=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),u=null;if(o>0){var d;for(u=new DataView(this._raw.buffer,this._cursor.offset,o),d=0;d<o&&u.getUint8(d)!==0;d++);u=new DataView(this._raw.buffer,this._cursor.offset,d),this._cursor.offset+=Math.min(d+1,o)}return u&&t.Utils.dataViewToString(u)},r.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype.append=function(o,u){t.Utils.appendBox(this,o,u)},r.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.size+=this.boxes[o].getLength();return this._data&&this._writeData(this._data),this.size},r.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.boxes[o].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},r.prototype._writeInt=function(o,u){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setInt8(d,u);break;case 16:this._rawo.setInt16(d,u);break;case 32:this._rawo.setInt32(d,u);break;case 64:var g=Math.floor(u/Math.pow(2,32)),h=u-g*Math.pow(2,32);this._rawo.setUint32(d,g),this._rawo.setUint32(d+4,h)}this._cursor.offset+=o>>3}else this.size+=o>>3},r.prototype._writeUint=function(o,u){if(this._rawo){var d,g,h=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setUint8(h,u);break;case 16:this._rawo.setUint16(h,u);break;case 24:d=(16776960&u)>>8,g=255&u,this._rawo.setUint16(h,d),this._rawo.setUint8(h+2,g);break;case 32:this._rawo.setUint32(h,u);break;case 64:g=u-(d=Math.floor(u/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(h,d),this._rawo.setUint32(h+4,g)}this._cursor.offset+=o>>3}else this.size+=o>>3},r.prototype._writeString=function(o,u){for(var d=0;d<o;d++)this._writeUint(8,u.charCodeAt(d))},r.prototype._writeTerminatedString=function(o){if(o.length!==0){for(var u=0;u<o.length;u++)this._writeUint(8,o.charCodeAt(u));this._writeUint(8,0)}},r.prototype._writeTemplate=function(o,u){var d=Math.floor(u),g=(u-d)*Math.pow(2,o/2);this._writeUint(o/2,d),this._writeUint(o/2,g)},r.prototype._writeData=function(o){if(o)if(this._rawo){if(o instanceof Array){for(var u=this._cursor.offset-this._rawo.byteOffset,d=0;d<o.length;d++)this._rawo.setInt8(u+d,o[d]);this._cursor.offset+=o.length}o instanceof Uint8Array&&(this._root.bytes.set(o,this._cursor.offset),this._cursor.offset+=o.length)}else this.size+=o.length},r.prototype._writeUTF8String=function(o){var u=t.Utils.utf8ToByteArray(o);if(this._rawo)for(var d=new DataView(this._rawo.buffer,this._cursor.offset,u.length),g=0;g<u.length;g++)d.setUint8(g,u[g]);else this.size+=u.length},r.prototype._writeField=function(o,u,d){switch(o){case"uint":this._writeUint(u,d);break;case"int":this._writeInt(u,d);break;case"template":this._writeTemplate(u,d);break;case"string":u==-1?this._writeTerminatedString(d):this._writeString(u,d);break;case"data":this._writeData(d);break;case"utf8":this._writeUTF8String(d)}},r.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},r.prototype._boxProcessors.avc1=r.prototype._boxProcessors.avc2=r.prototype._boxProcessors.avc3=r.prototype._boxProcessors.avc4=r.prototype._boxProcessors.hvc1=r.prototype._boxProcessors.hev1=r.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},r.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_offset",this.version===1?"int":"uint",32)})},r.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},r.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"segment_duration","uint",this.version===1?64:32),this._procEntryField(o,"media_time","int",this.version===1?64:32),this._procEntryField(o,"media_rate_integer","int",16),this._procEntryField(o,"media_rate_fraction","int",16)})},r.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},r.prototype._boxProcessors.free=r.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},r.prototype._boxProcessors.ftyp=r.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var o=-1;this._parsing&&(o=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",o,"string",4)},r.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},r.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},r.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},r.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},r.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},r.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},r.prototype._boxProcessors.meta=function(){this._procFullBox()},r.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},r.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},r.prototype._boxProcessors.mp4a=r.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},r.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},r.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},r.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},r.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,function(o){this._procEntryField(o,"entity_id","uint",32)}),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},r.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},r.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},r.prototype._boxProcessors.sdtp=function(){this._procFullBox();var o=-1;this._parsing&&(o=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",o,"uint",8)},r.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(o){this._parsing||(o.reference=(1&o.reference_type)<<31,o.reference|=2147483647&o.referenced_size,o.sap=(1&o.starts_with_SAP)<<31,o.sap|=(3&o.SAP_type)<<28,o.sap|=268435455&o.SAP_delta_time),this._procEntryField(o,"reference","uint",32),this._procEntryField(o,"subsegment_duration","uint",32),this._procEntryField(o,"sap","uint",32),this._parsing&&(o.reference_type=o.reference>>31&1,o.referenced_size=2147483647&o.reference,o.starts_with_SAP=o.sap>>31&1,o.SAP_type=o.sap>>28&7,o.SAP_delta_time=268435455&o.sap)})},r.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},r.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(o){this._procEntryField(o,"ranges_count","uint",32),this._procSubEntries(o,"ranges",o.ranges_count,function(u){this._procEntryField(u,"level","uint",8),this._procEntryField(u,"range_size","uint",24)})})},r.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},r.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_delta","uint",32)})},r.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_delta","uint",32),this._procEntryField(o,"subsample_count","uint",16),this._procSubEntries(o,"subsamples",o.subsample_count,function(u){this._procEntryField(u,"subsample_size","uint",this.version===1?32:16),this._procEntryField(u,"subsample_priority","uint",8),this._procEntryField(u,"discardable","uint",8),this._procEntryField(u,"codec_specific_parameters","uint",32)})})},r.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},r.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},r.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(o){this._procEntryField(o,"time","uint",this.version===1?64:32),this._procEntryField(o,"moof_offset","uint",this.version===1?64:32),this._procEntryField(o,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(o,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(o,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},r.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},r.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(o){256&this.flags&&this._procEntryField(o,"sample_duration","uint",32),512&this.flags&&this._procEntryField(o,"sample_size","uint",32),1024&this.flags&&this._procEntryField(o,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(o,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},r.prototype._boxProcessors["url "]=r.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},r.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},r.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},r.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},r.prototype._boxProcessors.vtte=function(){}},9826:function(f){var e,t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:function(O,te,de){return Function.prototype.apply.call(O,te,de)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:function(O){return Object.getOwnPropertyNames(O)};var r=Number.isNaN||function(O){return O!=O};function o(){o.init.call(this)}f.exports=o,f.exports.once=function(O,te){return new Promise(function(de,fe){function De(q){O.removeListener(te,Oe),fe(q)}function Oe(){typeof O.removeListener=="function"&&O.removeListener("error",De),de([].slice.call(arguments))}C(O,te,Oe,{once:!0}),te!=="error"&&function(q,k){typeof q.on=="function"&&C(q,"error",k,{once:!0})}(O,De)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function d(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}function g(O){return O._maxListeners===void 0?o.defaultMaxListeners:O._maxListeners}function h(O,te,de,fe){var De,Oe,q,k;if(d(de),(Oe=O._events)===void 0?(Oe=O._events=Object.create(null),O._eventsCount=0):(Oe.newListener!==void 0&&(O.emit("newListener",te,de.listener?de.listener:de),Oe=O._events),q=Oe[te]),q===void 0)q=Oe[te]=de,++O._eventsCount;else if(typeof q=="function"?q=Oe[te]=fe?[de,q]:[q,de]:fe?q.unshift(de):q.push(de),(De=g(O))>0&&q.length>De&&!q.warned){q.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(te)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=O,ee.type=te,ee.count=q.length,k=ee,console&&console.warn&&console.warn(k)}return O}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(O,te,de){var fe={fired:!1,wrapFn:void 0,target:O,type:te,listener:de},De=p.bind(fe);return De.listener=de,fe.wrapFn=De,De}function b(O,te,de){var fe=O._events;if(fe===void 0)return[];var De=fe[te];return De===void 0?[]:typeof De=="function"?de?[De.listener||De]:[De]:de?function(Oe){for(var q=new Array(Oe.length),k=0;k<q.length;++k)q[k]=Oe[k].listener||Oe[k];return q}(De):T(De,De.length)}function A(O){var te=this._events;if(te!==void 0){var de=te[O];if(typeof de=="function")return 1;if(de!==void 0)return de.length}return 0}function T(O,te){for(var de=new Array(te),fe=0;fe<te;++fe)de[fe]=O[fe];return de}function C(O,te,de,fe){if(typeof O.on=="function")fe.once?O.once(te,de):O.on(te,de);else{if(typeof O.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O);O.addEventListener(te,function De(Oe){fe.once&&O.removeEventListener(te,De),de(Oe)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(O){if(typeof O!="number"||O<0||r(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");u=O}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||r(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this},o.prototype.getMaxListeners=function(){return g(this)},o.prototype.emit=function(O){for(var te=[],de=1;de<arguments.length;de++)te.push(arguments[de]);var fe=O==="error",De=this._events;if(De!==void 0)fe=fe&&De.error===void 0;else if(!fe)return!1;if(fe){var Oe;if(te.length>0&&(Oe=te[0]),Oe instanceof Error)throw Oe;var q=new Error("Unhandled error."+(Oe?" ("+Oe.message+")":""));throw q.context=Oe,q}var k=De[O];if(k===void 0)return!1;if(typeof k=="function")n(k,this,te);else{var ee=k.length,Ee=T(k,ee);for(de=0;de<ee;++de)n(Ee[de],this,te)}return!0},o.prototype.addListener=function(O,te){return h(this,O,te,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(O,te){return h(this,O,te,!0)},o.prototype.once=function(O,te){return d(te),this.on(O,E(this,O,te)),this},o.prototype.prependOnceListener=function(O,te){return d(te),this.prependListener(O,E(this,O,te)),this},o.prototype.removeListener=function(O,te){var de,fe,De,Oe,q;if(d(te),(fe=this._events)===void 0)return this;if((de=fe[O])===void 0)return this;if(de===te||de.listener===te)--this._eventsCount==0?this._events=Object.create(null):(delete fe[O],fe.removeListener&&this.emit("removeListener",O,de.listener||te));else if(typeof de!="function"){for(De=-1,Oe=de.length-1;Oe>=0;Oe--)if(de[Oe]===te||de[Oe].listener===te){q=de[Oe].listener,De=Oe;break}if(De<0)return this;De===0?de.shift():function(k,ee){for(;ee+1<k.length;ee++)k[ee]=k[ee+1];k.pop()}(de,De),de.length===1&&(fe[O]=de[0]),fe.removeListener!==void 0&&this.emit("removeListener",O,q||te)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(O){var te,de,fe;if((de=this._events)===void 0)return this;if(de.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):de[O]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete de[O]),this;if(arguments.length===0){var De,Oe=Object.keys(de);for(fe=0;fe<Oe.length;++fe)(De=Oe[fe])!=="removeListener"&&this.removeAllListeners(De);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(te=de[O])=="function")this.removeListener(O,te);else if(te!==void 0)for(fe=te.length-1;fe>=0;fe--)this.removeListener(O,te[fe]);return this},o.prototype.listeners=function(O){return b(this,O,!0)},o.prototype.rawListeners=function(O){return b(this,O,!1)},o.listenerCount=function(O,te){return typeof O.listenerCount=="function"?O.listenerCount(te):A.call(O,te)},o.prototype.listenerCount=A,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(f){f.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,u;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;o--!=0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(u=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;o--!=0;)if(!Object.prototype.hasOwnProperty.call(n,u[o]))return!1;for(o=r;o--!=0;){var d=u[o];if(!e(t[d],n[d]))return!1}return!0}return t!=t&&n!=n}},7986:function(f,e){e.read=function(t,n,r,o,u){var d,g,h=8*u-o-1,p=(1<<h)-1,E=p>>1,b=-7,A=r?u-1:0,T=r?-1:1,C=t[n+A];for(A+=T,d=C&(1<<-b)-1,C>>=-b,b+=h;b>0;d=256*d+t[n+A],A+=T,b-=8);for(g=d&(1<<-b)-1,d>>=-b,b+=o;b>0;g=256*g+t[n+A],A+=T,b-=8);if(d===0)d=1-E;else{if(d===p)return g?NaN:1/0*(C?-1:1);g+=Math.pow(2,o),d-=E}return(C?-1:1)*g*Math.pow(2,d-o)},e.write=function(t,n,r,o,u,d){var g,h,p,E=8*d-u-1,b=(1<<E)-1,A=b>>1,T=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=o?0:d-1,O=o?1:-1,te=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(h=isNaN(n)?1:0,g=b):(g=Math.floor(Math.log(n)/Math.LN2),n*(p=Math.pow(2,-g))<1&&(g--,p*=2),(n+=g+A>=1?T/p:T*Math.pow(2,1-A))*p>=2&&(g++,p/=2),g+A>=b?(h=0,g=b):g+A>=1?(h=(n*p-1)*Math.pow(2,u),g+=A):(h=n*Math.pow(2,A-1)*Math.pow(2,u),g=0));u>=8;t[r+C]=255&h,C+=O,h/=256,u-=8);for(g=g<<u|h,E+=u;E>0;t[r+C]=255&g,C+=O,g/=256,E-=8);t[r+C-O]|=128*te}},5474:function(f,e,t){(function(n){n.parser=function(L,j){return new u(L,j)},n.SAXParser=u,n.SAXStream=g,n.createStream=function(L,j){return new g(L,j)},n.MAX_BUFFER_LENGTH=65536;var r,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function u(L,j){if(!(this instanceof u))return new u(L,j);var me=this;(function(ae){for(var Ue=0,rt=o.length;Ue<rt;Ue++)ae[o[Ue]]=""})(me),me.q=me.c="",me.bufferCheckPosition=n.MAX_BUFFER_LENGTH,me.opt=j||{},me.opt.lowercase=me.opt.lowercase||me.opt.lowercasetags,me.looseCase=me.opt.lowercase?"toLowerCase":"toUpperCase",me.tags=[],me.closed=me.closedRoot=me.sawRoot=!1,me.tag=me.error=null,me.strict=!!L,me.noscript=!(!L&&!me.opt.noscript),me.state=be.BEGIN,me.strictEntities=me.opt.strictEntities,me.ENTITIES=me.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),me.attribList=[],me.opt.xmlns&&(me.ns=Object.create(de)),me.trackPosition=me.opt.position!==!1,me.trackPosition&&(me.position=me.line=me.column=0),Ye(me,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(L){function j(){}return j.prototype=L,new j}),Object.keys||(Object.keys=function(L){var j=[];for(var me in L)L.hasOwnProperty(me)&&j.push(me);return j}),u.prototype={end:function(){Pe(this)},write:function(L){var j=this;if(this.error)throw this.error;if(j.closed)return ut(j,"Cannot write after close. Assign an onready handler.");if(L===null)return Pe(j);typeof L=="object"&&(L=L.toString());for(var me=0,ae="";ae=W(L,me++),j.c=ae,ae;)switch(j.trackPosition&&(j.position++,ae===`
`?(j.line++,j.column=0):j.column++),j.state){case be.BEGIN:if(j.state=be.BEGIN_WHITESPACE,ae==="\uFEFF")continue;Y(j,ae);continue;case be.BEGIN_WHITESPACE:Y(j,ae);continue;case be.TEXT:if(j.sawRoot&&!j.closedRoot){for(var Ue=me-1;ae&&ae!=="<"&&ae!=="&";)(ae=W(L,me++))&&j.trackPosition&&(j.position++,ae===`
`?(j.line++,j.column=0):j.column++);j.textNode+=L.substring(Ue,me-1)}ae!=="<"||j.sawRoot&&j.closedRoot&&!j.strict?(!Ee(h,ae)||j.sawRoot&&!j.closedRoot||Be(j,"Text data outside of root node."),ae==="&"?j.state=be.TEXT_ENTITY:j.textNode+=ae):(j.state=be.OPEN_WAKA,j.startTagPosition=j.position);continue;case be.SCRIPT:ae==="<"?j.state=be.SCRIPT_ENDING:j.script+=ae;continue;case be.SCRIPT_ENDING:ae==="/"?j.state=be.CLOSE_TAG:(j.script+="<"+ae,j.state=be.SCRIPT);continue;case be.OPEN_WAKA:if(ae==="!")j.state=be.SGML_DECL,j.sgmlDecl="";else if(!ee(h,ae))if(ee(fe,ae))j.state=be.OPEN_TAG,j.tagName=ae;else if(ae==="/")j.state=be.CLOSE_TAG,j.tagName="";else if(ae==="?")j.state=be.PROC_INST,j.procInstName=j.procInstBody="";else{if(Be(j,"Unencoded <"),j.startTagPosition+1<j.position){var rt=j.position-j.startTagPosition;ae=new Array(rt).join(" ")+ae}j.textNode+="<"+ae,j.state=be.TEXT}continue;case be.SGML_DECL:(j.sgmlDecl+ae).toUpperCase()===T?(_e(j,"onopencdata"),j.state=be.CDATA,j.sgmlDecl="",j.cdata=""):j.sgmlDecl+ae==="--"?(j.state=be.COMMENT,j.comment="",j.sgmlDecl=""):(j.sgmlDecl+ae).toUpperCase()===C?(j.state=be.DOCTYPE,(j.doctype||j.sawRoot)&&Be(j,"Inappropriately located doctype declaration"),j.doctype="",j.sgmlDecl=""):ae===">"?(_e(j,"onsgmldeclaration",j.sgmlDecl),j.sgmlDecl="",j.state=be.TEXT):(ee(b,ae)&&(j.state=be.SGML_DECL_QUOTED),j.sgmlDecl+=ae);continue;case be.SGML_DECL_QUOTED:ae===j.q&&(j.state=be.SGML_DECL,j.q=""),j.sgmlDecl+=ae;continue;case be.DOCTYPE:ae===">"?(j.state=be.TEXT,_e(j,"ondoctype",j.doctype),j.doctype=!0):(j.doctype+=ae,ae==="["?j.state=be.DOCTYPE_DTD:ee(b,ae)&&(j.state=be.DOCTYPE_QUOTED,j.q=ae));continue;case be.DOCTYPE_QUOTED:j.doctype+=ae,ae===j.q&&(j.q="",j.state=be.DOCTYPE);continue;case be.DOCTYPE_DTD:j.doctype+=ae,ae==="]"?j.state=be.DOCTYPE:ee(b,ae)&&(j.state=be.DOCTYPE_DTD_QUOTED,j.q=ae);continue;case be.DOCTYPE_DTD_QUOTED:j.doctype+=ae,ae===j.q&&(j.state=be.DOCTYPE_DTD,j.q="");continue;case be.COMMENT:ae==="-"?j.state=be.COMMENT_ENDING:j.comment+=ae;continue;case be.COMMENT_ENDING:ae==="-"?(j.state=be.COMMENT_ENDED,j.comment=nt(j.opt,j.comment),j.comment&&_e(j,"oncomment",j.comment),j.comment=""):(j.comment+="-"+ae,j.state=be.COMMENT);continue;case be.COMMENT_ENDED:ae!==">"?(Be(j,"Malformed comment"),j.comment+="--"+ae,j.state=be.COMMENT):j.state=be.TEXT;continue;case be.CDATA:ae==="]"?j.state=be.CDATA_ENDING:j.cdata+=ae;continue;case be.CDATA_ENDING:ae==="]"?j.state=be.CDATA_ENDING_2:(j.cdata+="]"+ae,j.state=be.CDATA);continue;case be.CDATA_ENDING_2:ae===">"?(j.cdata&&_e(j,"oncdata",j.cdata),_e(j,"onclosecdata"),j.cdata="",j.state=be.TEXT):ae==="]"?j.cdata+="]":(j.cdata+="]]"+ae,j.state=be.CDATA);continue;case be.PROC_INST:ae==="?"?j.state=be.PROC_INST_ENDING:ee(h,ae)?j.state=be.PROC_INST_BODY:j.procInstName+=ae;continue;case be.PROC_INST_BODY:if(!j.procInstBody&&ee(h,ae))continue;ae==="?"?j.state=be.PROC_INST_ENDING:j.procInstBody+=ae;continue;case be.PROC_INST_ENDING:ae===">"?(_e(j,"onprocessinginstruction",{name:j.procInstName,body:j.procInstBody}),j.procInstName=j.procInstBody="",j.state=be.TEXT):(j.procInstBody+="?"+ae,j.state=be.PROC_INST_BODY);continue;case be.OPEN_TAG:ee(De,ae)?j.tagName+=ae:(it(j),ae===">"?Ce(j):ae==="/"?j.state=be.OPEN_TAG_SLASH:(Ee(h,ae)&&Be(j,"Invalid character in tag name"),j.state=be.ATTRIB));continue;case be.OPEN_TAG_SLASH:ae===">"?(Ce(j,!0),Le(j)):(Be(j,"Forward-slash in opening tag not followed by >"),j.state=be.ATTRIB);continue;case be.ATTRIB:if(ee(h,ae))continue;ae===">"?Ce(j):ae==="/"?j.state=be.OPEN_TAG_SLASH:ee(fe,ae)?(j.attribName=ae,j.attribValue="",j.state=be.ATTRIB_NAME):Be(j,"Invalid attribute name");continue;case be.ATTRIB_NAME:ae==="="?j.state=be.ATTRIB_VALUE:ae===">"?(Be(j,"Attribute without value"),j.attribValue=j.attribName,zt(j),Ce(j)):ee(h,ae)?j.state=be.ATTRIB_NAME_SAW_WHITE:ee(De,ae)?j.attribName+=ae:Be(j,"Invalid attribute name");continue;case be.ATTRIB_NAME_SAW_WHITE:if(ae==="=")j.state=be.ATTRIB_VALUE;else{if(ee(h,ae))continue;Be(j,"Attribute without value"),j.tag.attributes[j.attribName]="",j.attribValue="",_e(j,"onattribute",{name:j.attribName,value:""}),j.attribName="",ae===">"?Ce(j):ee(fe,ae)?(j.attribName=ae,j.state=be.ATTRIB_NAME):(Be(j,"Invalid attribute name"),j.state=be.ATTRIB)}continue;case be.ATTRIB_VALUE:if(ee(h,ae))continue;ee(b,ae)?(j.q=ae,j.state=be.ATTRIB_VALUE_QUOTED):(Be(j,"Unquoted attribute value"),j.state=be.ATTRIB_VALUE_UNQUOTED,j.attribValue=ae);continue;case be.ATTRIB_VALUE_QUOTED:if(ae!==j.q){ae==="&"?j.state=be.ATTRIB_VALUE_ENTITY_Q:j.attribValue+=ae;continue}zt(j),j.q="",j.state=be.ATTRIB_VALUE_CLOSED;continue;case be.ATTRIB_VALUE_CLOSED:ee(h,ae)?j.state=be.ATTRIB:ae===">"?Ce(j):ae==="/"?j.state=be.OPEN_TAG_SLASH:ee(fe,ae)?(Be(j,"No whitespace between attributes"),j.attribName=ae,j.attribValue="",j.state=be.ATTRIB_NAME):Be(j,"Invalid attribute name");continue;case be.ATTRIB_VALUE_UNQUOTED:if(Ee(A,ae)){ae==="&"?j.state=be.ATTRIB_VALUE_ENTITY_U:j.attribValue+=ae;continue}zt(j),ae===">"?Ce(j):j.state=be.ATTRIB;continue;case be.CLOSE_TAG:if(j.tagName)ae===">"?Le(j):ee(De,ae)?j.tagName+=ae:j.script?(j.script+="</"+j.tagName,j.tagName="",j.state=be.SCRIPT):(Ee(h,ae)&&Be(j,"Invalid tagname in closing tag"),j.state=be.CLOSE_TAG_SAW_WHITE);else{if(ee(h,ae))continue;Ee(fe,ae)?j.script?(j.script+="</"+ae,j.state=be.SCRIPT):Be(j,"Invalid tagname in closing tag."):j.tagName=ae}continue;case be.CLOSE_TAG_SAW_WHITE:if(ee(h,ae))continue;ae===">"?Le(j):Be(j,"Invalid characters in closing tag");continue;case be.TEXT_ENTITY:case be.ATTRIB_VALUE_ENTITY_Q:case be.ATTRIB_VALUE_ENTITY_U:var qe,$e;switch(j.state){case be.TEXT_ENTITY:qe=be.TEXT,$e="textNode";break;case be.ATTRIB_VALUE_ENTITY_Q:qe=be.ATTRIB_VALUE_QUOTED,$e="attribValue";break;case be.ATTRIB_VALUE_ENTITY_U:qe=be.ATTRIB_VALUE_UNQUOTED,$e="attribValue"}ae===";"?(j[$e]+=yt(j),j.entity="",j.state=qe):ee(j.entity.length?q:Oe,ae)?j.entity+=ae:(Be(j,"Invalid character in entity name"),j[$e]+="&"+j.entity+ae,j.entity="",j.state=qe);continue;default:throw new Error(j,"Unknown state: "+j.state)}return j.position>=j.bufferCheckPosition&&function(Ge){for(var Je=Math.max(n.MAX_BUFFER_LENGTH,10),Et=0,ct=0,Mt=o.length;ct<Mt;ct++){var yn=Ge[o[ct]].length;if(yn>Je)switch(o[ct]){case"textNode":He(Ge);break;case"cdata":_e(Ge,"oncdata",Ge.cdata),Ge.cdata="";break;case"script":_e(Ge,"onscript",Ge.script),Ge.script="";break;default:ut(Ge,"Max buffer length exceeded: "+o[ct])}Et=Math.max(Et,yn)}var tn=n.MAX_BUFFER_LENGTH-Et;Ge.bufferCheckPosition=tn+Ge.position}(j),j},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var L;He(L=this),L.cdata!==""&&(_e(L,"oncdata",L.cdata),L.cdata=""),L.script!==""&&(_e(L,"onscript",L.script),L.script="")}};try{r=t(3515).Stream}catch{r=function(){}}var d=n.EVENTS.filter(function(L){return L!=="error"&&L!=="end"});function g(L,j){if(!(this instanceof g))return new g(L,j);r.apply(this),this._parser=new u(L,j),this.writable=!0,this.readable=!0;var me=this;this._parser.onend=function(){me.emit("end")},this._parser.onerror=function(ae){me.emit("error",ae),me._parser.error=null},this._decoder=null,d.forEach(function(ae){Object.defineProperty(me,"on"+ae,{get:function(){return me._parser["on"+ae]},set:function(Ue){if(!Ue)return me.removeAllListeners(ae),me._parser["on"+ae]=Ue,Ue;me.on(ae,Ue)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(r.prototype,{constructor:{value:g}}),g.prototype.write=function(L){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(L)){if(!this._decoder){var j=t(748).StringDecoder;this._decoder=new j("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},g.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},g.prototype.on=function(L,j){var me=this;return me._parser["on"+L]||d.indexOf(L)===-1||(me._parser["on"+L]=function(){var ae=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ae.splice(0,0,L),me.emit.apply(me,ae)}),r.prototype.on.call(me,L,j)};var h=`\r
	 `,p="0124356789",E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",b=`'"`,A=h+">",T="[CDATA[",C="DOCTYPE",O="http://www.w3.org/XML/1998/namespace",te="http://www.w3.org/2000/xmlns/",de={xml:O,xmlns:te};h=k(h),p=k(p),E=k(E);var fe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,De=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Oe=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function k(L){return L.split("").reduce(function(j,me){return j[me]=!0,j},{})}function ee(L,j){return function(me){return Object.prototype.toString.call(me)==="[object RegExp]"}(L)?!!j.match(L):L[j]}function Ee(L,j){return!ee(L,j)}b=k(b),A=k(A);var P,xe,Ve,be=0;for(var _t in n.STATE={BEGIN:be++,BEGIN_WHITESPACE:be++,TEXT:be++,TEXT_ENTITY:be++,OPEN_WAKA:be++,SGML_DECL:be++,SGML_DECL_QUOTED:be++,DOCTYPE:be++,DOCTYPE_QUOTED:be++,DOCTYPE_DTD:be++,DOCTYPE_DTD_QUOTED:be++,COMMENT_STARTING:be++,COMMENT:be++,COMMENT_ENDING:be++,COMMENT_ENDED:be++,CDATA:be++,CDATA_ENDING:be++,CDATA_ENDING_2:be++,PROC_INST:be++,PROC_INST_BODY:be++,PROC_INST_ENDING:be++,OPEN_TAG:be++,OPEN_TAG_SLASH:be++,ATTRIB:be++,ATTRIB_NAME:be++,ATTRIB_NAME_SAW_WHITE:be++,ATTRIB_VALUE:be++,ATTRIB_VALUE_QUOTED:be++,ATTRIB_VALUE_CLOSED:be++,ATTRIB_VALUE_UNQUOTED:be++,ATTRIB_VALUE_ENTITY_Q:be++,ATTRIB_VALUE_ENTITY_U:be++,CLOSE_TAG:be++,CLOSE_TAG_SAW_WHITE:be++,SCRIPT:be++,SCRIPT_ENDING:be++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(L){var j=n.ENTITIES[L],me=typeof j=="number"?String.fromCharCode(j):j;n.ENTITIES[L]=me}),n.STATE)n.STATE[n.STATE[_t]]=_t;function Ye(L,j,me){L[j]&&L[j](me)}function _e(L,j,me){L.textNode&&He(L),Ye(L,j,me)}function He(L){L.textNode=nt(L.opt,L.textNode),L.textNode&&Ye(L,"ontext",L.textNode),L.textNode=""}function nt(L,j){return L.trim&&(j=j.trim()),L.normalize&&(j=j.replace(/\s+/g," ")),j}function ut(L,j){return He(L),L.trackPosition&&(j+=`
Line: `+L.line+`
Column: `+L.column+`
Char: `+L.c),j=new Error(j),L.error=j,Ye(L,"onerror",j),L}function Pe(L){return L.sawRoot&&!L.closedRoot&&Be(L,"Unclosed root tag"),L.state!==be.BEGIN&&L.state!==be.BEGIN_WHITESPACE&&L.state!==be.TEXT&&ut(L,"Unexpected end"),He(L),L.c="",L.closed=!0,Ye(L,"onend"),u.call(L,L.strict,L.opt),L}function Be(L,j){if(typeof L!="object"||!(L instanceof u))throw new Error("bad call to strictFail");L.strict&&ut(L,j)}function it(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var j=L.tags[L.tags.length-1]||L,me=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(me.ns=j.ns),L.attribList.length=0,_e(L,"onopentagstart",me)}function gt(L,j){var me=L.indexOf(":")<0?["",L]:L.split(":"),ae=me[0],Ue=me[1];return j&&L==="xmlns"&&(ae="xmlns",Ue=""),{prefix:ae,local:Ue}}function zt(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),L.attribList.indexOf(L.attribName)!==-1||L.tag.attributes.hasOwnProperty(L.attribName))L.attribName=L.attribValue="";else{if(L.opt.xmlns){var j=gt(L.attribName,!0),me=j.prefix,ae=j.local;if(me==="xmlns")if(ae==="xml"&&L.attribValue!==O)Be(L,"xml: prefix must be bound to "+O+`
Actual: `+L.attribValue);else if(ae==="xmlns"&&L.attribValue!==te)Be(L,"xmlns: prefix must be bound to "+te+`
Actual: `+L.attribValue);else{var Ue=L.tag,rt=L.tags[L.tags.length-1]||L;Ue.ns===rt.ns&&(Ue.ns=Object.create(rt.ns)),Ue.ns[ae]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,_e(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}}function Ce(L,j){if(L.opt.xmlns){var me=L.tag,ae=gt(L.tagName);me.prefix=ae.prefix,me.local=ae.local,me.uri=me.ns[ae.prefix]||"",me.prefix&&!me.uri&&(Be(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),me.uri=ae.prefix);var Ue=L.tags[L.tags.length-1]||L;me.ns&&Ue.ns!==me.ns&&Object.keys(me.ns).forEach(function(fn){_e(L,"onopennamespace",{prefix:fn,uri:me.ns[fn]})});for(var rt=0,qe=L.attribList.length;rt<qe;rt++){var $e=L.attribList[rt],Ge=$e[0],Je=$e[1],Et=gt(Ge,!0),ct=Et.prefix,Mt=Et.local,yn=ct===""?"":me.ns[ct]||"",tn={name:Ge,value:Je,prefix:ct,local:Mt,uri:yn};ct&&ct!=="xmlns"&&!yn&&(Be(L,"Unbound namespace prefix: "+JSON.stringify(ct)),tn.uri=ct),L.tag.attributes[Ge]=tn,_e(L,"onattribute",tn)}L.attribList.length=0}L.tag.isSelfClosing=!!j,L.sawRoot=!0,L.tags.push(L.tag),_e(L,"onopentag",L.tag),j||(L.noscript||L.tagName.toLowerCase()!=="script"?L.state=be.TEXT:L.state=be.SCRIPT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function Le(L){if(!L.tagName)return Be(L,"Weird empty close tag."),L.textNode+="</>",void(L.state=be.TEXT);if(L.script){if(L.tagName!=="script")return L.script+="</"+L.tagName+">",L.tagName="",void(L.state=be.SCRIPT);_e(L,"onscript",L.script),L.script=""}var j=L.tags.length,me=L.tagName;L.strict||(me=me[L.looseCase]());for(var ae=me;j--&&L.tags[j].name!==ae;)Be(L,"Unexpected close tag");if(j<0)return Be(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",void(L.state=be.TEXT);L.tagName=me;for(var Ue=L.tags.length;Ue-- >j;){var rt=L.tag=L.tags.pop();L.tagName=L.tag.name,_e(L,"onclosetag",L.tagName);var qe={};for(var $e in rt.ns)qe[$e]=rt.ns[$e];var Ge=L.tags[L.tags.length-1]||L;L.opt.xmlns&&rt.ns!==Ge.ns&&Object.keys(rt.ns).forEach(function(Je){var Et=rt.ns[Je];_e(L,"onclosenamespace",{prefix:Je,uri:Et})})}j===0&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=be.TEXT}function yt(L){var j,me=L.entity,ae=me.toLowerCase(),Ue="";return L.ENTITIES[me]?L.ENTITIES[me]:L.ENTITIES[ae]?L.ENTITIES[ae]:((me=ae).charAt(0)==="#"&&(me.charAt(1)==="x"?(me=me.slice(2),Ue=(j=parseInt(me,16)).toString(16)):(me=me.slice(1),Ue=(j=parseInt(me,10)).toString(10))),me=me.replace(/^0+/,""),Ue.toLowerCase()!==me?(Be(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(j))}function Y(L,j){j==="<"?(L.state=be.OPEN_WAKA,L.startTagPosition=L.position):Ee(h,j)&&(Be(L,"Non-whitespace before first tag."),L.textNode=j,L.state=be.TEXT)}function W(L,j){var me="";return j<L.length&&(me=L.charAt(j)),me}be=n.STATE,String.fromCodePoint||(P=String.fromCharCode,xe=Math.floor,Ve=function(){var L,j,me=[],ae=-1,Ue=arguments.length;if(!Ue)return"";for(var rt="";++ae<Ue;){var qe=Number(arguments[ae]);if(!isFinite(qe)||qe<0||qe>1114111||xe(qe)!==qe)throw RangeError("Invalid code point: "+qe);qe<=65535?me.push(qe):(L=55296+((qe-=65536)>>10),j=qe%1024+56320,me.push(L,j)),(ae+1===Ue||me.length>16384)&&(rt+=P.apply(null,me),me.length=0)}return rt},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Ve,configurable:!0,writable:!0}):String.fromCodePoint=Ve)})(e)},6739:function(f,e,t){(function(n,r,o,u,d){function g(W){if("contents"in W)for(var L=("styleAttrs"in W)?W.styleAttrs[u.byName.ruby.qname]:null,j=W.kind==="span"&&(L==="container"||L==="textContainer"||L==="baseContainer"),me=W.contents.length-1;me>=0;me--)!j||"styleAttrs"in W.contents[me]&&u.byName.ruby.qname in W.contents[me].styleAttrs?g(W.contents[me]):delete W.contents[me]}function h(W,L,j,me){var ae=me&&me.timeContainer==="seq",Ue=0;me&&(Ue=ae&&j?j.end:me.begin),L.begin=L.explicit_begin?L.explicit_begin+Ue:Ue;var rt=L.begin,qe=null;if("sets"in L)for(var $e=0;$e<L.sets.length;$e++)h(W,L.sets[$e],qe,L),rt=L.timeContainer==="seq"?L.sets[$e].end:Math.max(rt,L.sets[$e].end),qe=L.sets[$e];if("contents"in L){if("contents"in L)for(var Ge=0;Ge<L.contents.length;Ge++)h(W,L.contents[Ge],qe,L),rt=L.timeContainer==="seq"?L.contents[Ge].end:Math.max(rt,L.contents[Ge].end),qe=L.contents[Ge]}else rt=ae?L.begin:Number.POSITIVE_INFINITY;L.explicit_end!==null&&L.explicit_dur!==null?L.end=Math.min(L.begin+L.explicit_dur,Ue+L.explicit_end):L.explicit_end===null&&L.explicit_dur!==null?L.end=L.begin+L.explicit_dur:L.explicit_end!==null&&L.explicit_dur===null?L.end=Ue+L.explicit_end:L.end=rt,delete L.explicit_begin,delete L.explicit_dur,delete L.explicit_end,W._registerEvent(L)}function p(W){this.node=W}function E(){this.events=[],this.head=new b,this.body=null}function b(){this.styling=new A,this.layout=new O}function A(){this.styles={},this.initials={}}function T(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function C(){this.styleAttrs=null}function O(){this.regions={}}function te(W,L){de.call(this,"image"),this.src=W,this.type=L}function de(W){this.kind=W}function fe(W){this.id=W}function De(W){this.regionID=W}function Oe(W){this.styleAttrs=W}function q(W){this.sets=W}function k(W){this.contents=W}function ee(W,L,j){this.explicit_begin=W,this.explicit_end=L,this.explicit_dur=j}function Ee(){de.call(this,"body")}function P(){de.call(this,"div")}function xe(){de.call(this,"p")}function Ve(){de.call(this,"span")}function be(){de.call(this,"span")}function _t(){de.call(this,"br")}function Ye(){}function _e(){}function He(W){return W&&"xml:id"in W.attributes&&W.attributes["xml:id"].value||null}function nt(W){return W&&"style"in W.attributes?W.attributes.style.value.split(" "):[]}function ut(W,L){var j={};if(W!==null)for(var me in W.attributes){var ae=W.attributes[me].uri+" "+W.attributes[me].local,Ue=u.byQName[ae];if(Ue!==void 0){var rt=Ue.parse(W.attributes[me].value);rt!==null?(j[ae]=rt,Ue===u.byName.zIndex&&Ce(L,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Le(L,"Cannot parse styling attribute "+ae+" --> "+W.attributes[me].value)}}return j}function Pe(W,L,j){for(var me in W.attributes)if(W.attributes[me].uri===L&&W.attributes[me].local===j)return W.attributes[me].value;return null}function Be(W,L,j){var me,ae=null;return(me=/^(\d+(?:\.\d+)?)f$/.exec(j))!==null?L!==null&&(ae=parseFloat(me[1])/L):(me=/^(\d+(?:\.\d+)?)t$/.exec(j))!==null?W!==null&&(ae=parseFloat(me[1])/W):(me=/^(\d+(?:\.\d+)?)ms$/.exec(j))!==null?ae=parseFloat(me[1])/1e3:(me=/^(\d+(?:\.\d+)?)s$/.exec(j))!==null?ae=parseFloat(me[1]):(me=/^(\d+(?:\.\d+)?)h$/.exec(j))!==null?ae=3600*parseFloat(me[1]):(me=/^(\d+(?:\.\d+)?)m$/.exec(j))!==null?ae=60*parseFloat(me[1]):(me=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(j))!==null?ae=3600*parseInt(me[1])+60*parseInt(me[2])+parseFloat(me[3]):(me=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(j))!==null&&L!==null&&(ae=3600*parseInt(me[1])+60*parseInt(me[2])+parseInt(me[3])+(me[4]===null?0:parseInt(me[4])/L)),ae}function it(W,L,j){for(;L.styleRefs.length>0;){var me=L.styleRefs.pop();me in W.styles?(it(W,W.styles[me],j),zt(W.styles[me].styleAttrs,L.styleAttrs)):Le(j,"Non-existant style id referenced")}}function gt(W,L,j,me){for(var ae=L.length-1;ae>=0;ae--){var Ue=L[ae];Ue in W.styles?zt(W.styles[Ue].styleAttrs,j):Le(me,"Non-existant style id referenced")}}function zt(W,L){for(var j in W)W.hasOwnProperty(j)&&(j in L||(L[j]=W[j]))}function Ce(W,L){if(W&&W.warn&&W.warn(L))throw L}function Le(W,L){if(W&&W.error&&W.error(L))throw L}function yt(W,L){throw W&&W.fatal&&W.fatal(L),L}function Y(W,L){for(var j,me=0,ae=W.length-1;me<=ae;){var Ue=W[j=Math.floor((me+ae)/2)];if(Ue<L)me=j+1;else{if(!(Ue>L))return{found:!0,index:j};ae=j-1}}return{found:!1,index:me}}n.fromXML=function(W,L,j){var me=r.parser(!0,{xmlns:!0}),ae=[],Ue=[],rt=[],qe=0,$e=null;me.onclosetag=function(Mt){if(ae[0]instanceof Ye)$e.head!==null&&$e.head.styling!==null&&gt($e.head.styling,ae[0].styleRefs,ae[0].styleAttrs,L),delete ae[0].styleRefs;else if(ae[0]instanceof A)for(var yn in ae[0].styles)ae[0].styles.hasOwnProperty(yn)&&it(ae[0],ae[0].styles[yn],L);else if(ae[0]instanceof xe||ae[0]instanceof Ve){if(ae[0].contents.length>1){var tn,fn=[ae[0].contents[0]];for(tn=1;tn<ae[0].contents.length;tn++)ae[0].contents[tn]instanceof be&&fn[fn.length-1]instanceof be?fn[fn.length-1].text+=ae[0].contents[tn].text:fn.push(ae[0].contents[tn]);ae[0].contents=fn}ae[0]instanceof Ve&&ae[0].contents.length===1&&ae[0].contents[0]instanceof be&&(ae[0].text=ae[0].contents[0].text,delete ae[0].contents)}else ae[0]instanceof p&&(ae[0].node.uri===o.ns_tt&&ae[0].node.local==="metadata"?qe--:qe>0&&j&&"onCloseTag"in j&&j.onCloseTag());rt.shift(),Ue.shift(),ae.shift()},me.ontext=function(Mt){if(ae[0]!==void 0)if(ae[0]instanceof Ve||ae[0]instanceof xe){if(ae[0]instanceof Ve){var yn=ae[0].styleAttrs[u.byName.ruby.qname];if(yn==="container"||yn==="textContainer"||yn==="baseContainer")return}var tn=new be;tn.initFromText($e,ae[0],Mt,Ue[0],rt[0],L),ae[0].contents.push(tn)}else ae[0]instanceof p&&qe>0&&j&&"onText"in j&&j.onText(Mt)},me.onopentag=function(Mt){var yn=Mt.attributes["xml:space"];yn?rt.unshift(yn.value):rt.length===0?rt.unshift("default"):rt.unshift(rt[0]);var tn=Mt.attributes["xml:lang"];if(tn?Ue.unshift(tn.value):Ue.length===0?Ue.unshift(""):Ue.unshift(Ue[0]),Mt.uri===o.ns_tt)if(Mt.local==="tt")$e!==null&&yt(L,"Two <tt> elements at ("+this.line+","+this.column+")"),($e=new E).initFromNode(Mt,Ue[0],L),ae.unshift($e);else if(Mt.local==="head")ae[0]instanceof E||yt(L,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),ae.unshift($e.head);else if(Mt.local==="styling")ae[0]instanceof b||yt(L,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),ae.unshift($e.head.styling);else if(Mt.local==="style"){var fn;ae[0]instanceof A?((fn=new T).initFromNode(Mt,L),fn.id?$e.head.styling.styles[fn.id]=fn:Le(L,"<style> element missing @id attribute"),ae.unshift(fn)):ae[0]instanceof Ye?((fn=new T).initFromNode(Mt,L),zt(fn.styleAttrs,ae[0].styleAttrs),ae.unshift(fn)):yt(L,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Mt.local==="initial"){var Bt;if(ae[0]instanceof A){for(var kn in(Bt=new C).initFromNode(Mt,L),Bt.styleAttrs)Bt.styleAttrs.hasOwnProperty(kn)&&($e.head.styling.initials[kn]=Bt.styleAttrs[kn]);ae.unshift(Bt)}else yt(L,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Mt.local==="layout")ae[0]instanceof b||yt(L,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),ae.unshift($e.head.layout);else if(Mt.local==="region"){ae[0]instanceof O||yt(L,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Wn=new Ye;Wn.initFromNode($e,Mt,Ue[0],L),!Wn.id||Wn.id in $e.head.layout.regions?Le(L,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):$e.head.layout.regions[Wn.id]=Wn,ae.unshift(Wn)}else if(Mt.local==="body"){ae[0]instanceof E||yt(L,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),$e.body!==null&&yt(L,"Second <body> element at "+this.line+","+this.column+")");var ta=new Ee;ta.initFromNode($e,Mt,Ue[0],L),$e.body=ta,ae.unshift(ta)}else if(Mt.local==="div"){ae[0]instanceof P||ae[0]instanceof Ee||yt(L,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Ha=new P;Ha.initFromNode($e,ae[0],Mt,Ue[0],L);var La=Ha.styleAttrs[u.byName.backgroundImage.qname];La&&(Ha.contents.push(new te(La)),delete Ha.styleAttrs[u.byName.backgroundImage.qname]),ae[0].contents.push(Ha),ae.unshift(Ha)}else if(Mt.local==="image"){ae[0]instanceof P||yt(L,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var qa=new te;qa.initFromNode($e,ae[0],Mt,Ue[0],L),ae[0].contents.push(qa),ae.unshift(qa)}else if(Mt.local==="p"){ae[0]instanceof P||yt(L,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Jt=new xe;Jt.initFromNode($e,ae[0],Mt,Ue[0],L),ae[0].contents.push(Jt),ae.unshift(Jt)}else if(Mt.local==="span"){ae[0]instanceof Ve||ae[0]instanceof xe||yt(L,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Ht=new Ve;Ht.initFromNode($e,ae[0],Mt,Ue[0],rt[0],L),ae[0].contents.push(Ht),ae.unshift(Ht)}else if(Mt.local==="br"){ae[0]instanceof Ve||ae[0]instanceof xe||yt(L,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Ft=new _t;Ft.initFromNode($e,ae[0],Mt,Ue[0],L),ae[0].contents.push(Ft),ae.unshift(Ft)}else if(Mt.local==="set"){ae[0]instanceof Ve||ae[0]instanceof xe||ae[0]instanceof P||ae[0]instanceof Ee||ae[0]instanceof Ye||ae[0]instanceof _t||yt(L,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var wt=new _e;wt.initFromNode($e,ae[0],Mt,L),ae[0].sets.push(wt),ae.unshift(wt)}else ae.unshift(new p(Mt));else ae.unshift(new p(Mt));if(ae[0]instanceof p){if(Mt.uri===o.ns_tt&&Mt.local==="metadata")qe++;else if(qe>0&&j&&"onOpenTag"in j){var nn=[];for(var We in Mt.attributes)nn[Mt.attributes[We].uri+" "+Mt.attributes[We].local]={uri:Mt.attributes[We].uri,local:Mt.attributes[We].local,value:Mt.attributes[We].value};j.onOpenTag(Mt.uri,Mt.local,nn)}}},me.write(W).close(),delete $e.head.styling.styles;var Ge=!1;for(var Je in $e.head.layout.regions)if($e.head.layout.regions.hasOwnProperty(Je)){Ge=!0;break}if(!Ge){var Et=Ye.prototype.createDefaultRegion($e.lang);$e.head.layout.regions[Et.id]=Et}for(var ct in $e.head.layout.regions)$e.head.layout.regions.hasOwnProperty(ct)&&h($e,$e.head.layout.regions[ct],null,null);return $e.body&&h($e,$e.body,null,null),$e.body&&g($e.body),$e},E.prototype.initFromNode=function(W,L,j){var me=function(qe,$e){var Ge=Pe(qe,o.ns_ttp,"cellResolution"),Je=15,Et=32;if(Ge!==null){var ct=/(\d+) (\d+)/.exec(Ge);ct!==null?(Et=parseInt(ct[1]),Je=parseInt(ct[2])):Ce($e,"Malformed cellResolution value (using initial value instead)")}return{w:Et,h:Je}}(W,j);this.cellLength={h:new d.ComputedLength(0,1/me.h),w:new d.ComputedLength(1/me.w,0)};var ae=function(qe,$e){var Ge,Je=Pe(qe,o.ns_ttp,"frameRate"),Et=30;Je!==null&&((Ge=/(\d+)/.exec(Je))!==null?Et=parseInt(Ge[1]):Ce($e,"Malformed frame rate attribute (using initial value instead)"));var ct=Pe(qe,o.ns_ttp,"frameRateMultiplier"),Mt=1;ct!==null&&((Ge=/(\d+) (\d+)/.exec(ct))!==null?Mt=parseInt(Ge[1])/parseInt(Ge[2]):Ce($e,"Malformed frame rate multiplier attribute (using initial value instead)"));var yn=Mt*Et,tn=1,fn=Pe(qe,o.ns_ttp,"tickRate");return fn===null?Je!==null&&(tn=yn):(Ge=/(\d+)/.exec(fn))!==null?tn=parseInt(Ge[1]):Ce($e,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:yn,tickRate:tn}}(W,j);this.effectiveFrameRate=ae.effectiveFrameRate,this.tickRate=ae.tickRate,this.aspectRatio=function(qe,$e){var Ge=Pe(qe,o.ns_ittp,"aspectRatio");Ge===null&&(Ge=Pe(qe,o.ns_ttp,"displayAspectRatio"));var Je=null;if(Ge!==null){var Et=/(\d+)\s+(\d+)/.exec(Ge);if(Et!==null){var ct=parseInt(Et[1]),Mt=parseInt(Et[2]);ct!==0&&Mt!==0?Je=ct/Mt:Le($e,"Illegal aspectRatio values (ignoring)")}else Le($e,"Malformed aspectRatio attribute (ignoring)")}return Je}(W,j);var Ue=Pe(W,o.ns_ttp,"timeBase");Ue!==null&&Ue!=="media"&&yt(j,"Unsupported time base");var rt=function(qe,$e){var Ge=Pe(qe,o.ns_tts,"extent");if(Ge===null)return null;var Je=Ge.split(" ");if(Je.length!==2)return Ce($e,"Malformed extent (ignoring)"),null;var Et=d.parseLength(Je[0]),ct=d.parseLength(Je[1]);return ct&&Et?{h:ct,w:Et}:(Ce($e,"Malformed extent values (ignoring)"),null)}(W,j);rt===null?this.pxLength={h:null,w:null}:(rt.h.unit==="px"&&rt.w.unit==="px"||yt(j,"Extent on TT must be in px or absent"),this.pxLength={h:new d.ComputedLength(0,1/rt.h.value),w:new d.ComputedLength(1/rt.w.value,0)}),this.dimensions={h:new d.ComputedLength(0,1),w:new d.ComputedLength(1,0)},this.lang=L},E.prototype._registerEvent=function(W){if(!(W.end<=W.begin)){var L=Y(this.events,W.begin);if(L.found||this.events.splice(L.index,0,W.begin),W.end!==Number.POSITIVE_INFINITY){var j=Y(this.events,W.end);j.found||this.events.splice(j.index,0,W.end)}}},E.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},E.prototype.getMediaTimeEvents=function(){return this.events},T.prototype.initFromNode=function(W,L){this.id=He(W),this.styleAttrs=ut(W,L),this.styleRefs=nt(W)},C.prototype.initFromNode=function(W,L){for(var j in this.styleAttrs={},W.attributes)if(W.attributes[j].uri===o.ns_itts||W.attributes[j].uri===o.ns_ebutts||W.attributes[j].uri===o.ns_tts){var me=W.attributes[j].uri+" "+W.attributes[j].local;this.styleAttrs[me]=W.attributes[j].value}},te.prototype.initFromNode=function(W,L,j,me,ae){this.src="src"in j.attributes?j.attributes.src.value:null,this.src||Le(ae,"Invalid image@src attribute"),this.type="type"in j.attributes?j.attributes.type.value:null,this.type||Le(ae,"Invalid image@type attribute"),Oe.prototype.initFromNode.call(this,W,L,j,ae),ee.prototype.initFromNode.call(this,W,L,j,ae),q.prototype.initFromNode.call(this,W,L,j,ae),De.prototype.initFromNode.call(this,W,L,j,ae),this.lang=me},fe.prototype.initFromNode=function(W,L,j,me){this.id=He(j)},De.prototype.initFromNode=function(W,L,j,me){this.regionID=function(ae){return ae&&"region"in ae.attributes?ae.attributes.region.value:""}(j)},Oe.prototype.initFromNode=function(W,L,j,me){this.styleAttrs=ut(j,me),W.head!==null&&W.head.styling!==null&&gt(W.head.styling,nt(j),this.styleAttrs,me)},q.prototype.initFromNode=function(W,L,j,me){this.sets=[]},k.prototype.initFromNode=function(W,L,j,me){this.contents=[]},ee.prototype.initFromNode=function(W,L,j,me){var ae=function(Ue,rt,qe,$e){var Ge=null;qe&&"begin"in qe.attributes&&(Ge=Be(Ue.tickRate,Ue.effectiveFrameRate,qe.attributes.begin.value))===null&&Ce($e,"Malformed begin value "+qe.attributes.begin.value+" (using 0)");var Je=null;qe&&"dur"in qe.attributes&&(Je=Be(Ue.tickRate,Ue.effectiveFrameRate,qe.attributes.dur.value))===null&&Ce($e,"Malformed dur value "+qe.attributes.dur.value+" (ignoring)");var Et=null;return qe&&"end"in qe.attributes&&(Et=Be(Ue.tickRate,Ue.effectiveFrameRate,qe.attributes.end.value))===null&&Ce($e,"Malformed end value (ignoring)"),{explicit_begin:Ge,explicit_end:Et,explicit_dur:Je}}(W,0,j,me);this.explicit_begin=ae.explicit_begin,this.explicit_end=ae.explicit_end,this.explicit_dur=ae.explicit_dur,this.timeContainer=function(Ue,rt){var qe=Ue&&"timeContainer"in Ue.attributes?Ue.attributes.timeContainer.value:null;return qe&&qe!=="par"?qe==="seq"?"seq":(Le(rt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(j,me)},Ee.prototype.initFromNode=function(W,L,j,me){Oe.prototype.initFromNode.call(this,W,null,L,me),ee.prototype.initFromNode.call(this,W,null,L,me),q.prototype.initFromNode.call(this,W,null,L,me),De.prototype.initFromNode.call(this,W,null,L,me),k.prototype.initFromNode.call(this,W,null,L,me),this.lang=j},P.prototype.initFromNode=function(W,L,j,me,ae){Oe.prototype.initFromNode.call(this,W,L,j,ae),ee.prototype.initFromNode.call(this,W,L,j,ae),q.prototype.initFromNode.call(this,W,L,j,ae),De.prototype.initFromNode.call(this,W,L,j,ae),k.prototype.initFromNode.call(this,W,L,j,ae),this.lang=me},xe.prototype.initFromNode=function(W,L,j,me,ae){Oe.prototype.initFromNode.call(this,W,L,j,ae),ee.prototype.initFromNode.call(this,W,L,j,ae),q.prototype.initFromNode.call(this,W,L,j,ae),De.prototype.initFromNode.call(this,W,L,j,ae),k.prototype.initFromNode.call(this,W,L,j,ae),this.lang=me},Ve.prototype.initFromNode=function(W,L,j,me,ae,Ue){Oe.prototype.initFromNode.call(this,W,L,j,Ue),ee.prototype.initFromNode.call(this,W,L,j,Ue),q.prototype.initFromNode.call(this,W,L,j,Ue),De.prototype.initFromNode.call(this,W,L,j,Ue),k.prototype.initFromNode.call(this,W,L,j,Ue),this.space=ae,this.lang=me},be.prototype.initFromText=function(W,L,j,me,ae,Ue){ee.prototype.initFromNode.call(this,W,L,null,Ue),this.text=j,this.space=ae,this.lang=me},_t.prototype.initFromNode=function(W,L,j,me,ae){De.prototype.initFromNode.call(this,W,L,j,ae),ee.prototype.initFromNode.call(this,W,L,j,ae),this.lang=me},Ye.prototype.createDefaultRegion=function(W){var L=new Ye;return fe.call(L,""),Oe.call(L,{}),q.call(L,[]),ee.call(L,0,Number.POSITIVE_INFINITY,null),this.lang=W,L},Ye.prototype.initFromNode=function(W,L,j,me){fe.prototype.initFromNode.call(this,W,null,L,me),ee.prototype.initFromNode.call(this,W,null,L,me),q.prototype.initFromNode.call(this,W,null,L,me),this.styleAttrs=ut(L,me),this.styleRefs=nt(L),this.lang=j},_e.prototype.initFromNode=function(W,L,j,me){ee.prototype.initFromNode.call(this,W,L,j,me);var ae=ut(j,me);for(var Ue in this.qname=null,this.value=null,ae)if(ae.hasOwnProperty(Ue)){if(this.qname){Le(me,"More than one style specified on set");break}this.qname=Ue,this.value=ae[Ue]}}})(e,typeof sax>"u"?t(5474):sax,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},1612:function(f,e,t){var n=/firefox/i.test(navigator.userAgent);(function(r,o,u){function d(k,ee,Ee,P){var xe;if(Ee.kind==="region")(xe=document.createElement("div")).style.position="absolute";else if(Ee.kind==="body")xe=document.createElement("div");else if(Ee.kind==="div")xe=document.createElement("div");else if(Ee.kind==="image"){if(xe=document.createElement("img"),k.imgResolver!==null&&Ee.src!==null){var Ve=k.imgResolver(Ee.src,xe);Ve&&(xe.src=Ve),xe.height=k.regionH,xe.width=k.regionW}}else if(Ee.kind==="p")xe=document.createElement("p");else if(Ee.kind==="span")if(Ee.styleAttrs[u.byName.ruby.qname]==="container")xe=document.createElement("ruby"),k.ruby=!0;else if(Ee.styleAttrs[u.byName.ruby.qname]==="base")xe=document.createElement("span");else if(Ee.styleAttrs[u.byName.ruby.qname]==="text")xe=document.createElement("rt");else if(Ee.styleAttrs[u.byName.ruby.qname]==="baseContainer")xe=document.createElement("rbc");else if(Ee.styleAttrs[u.byName.ruby.qname]==="textContainer")xe=document.createElement("rtc");else{if(Ee.styleAttrs[u.byName.ruby.qname]==="delimiter")return;xe=document.createElement("span")}else Ee.kind==="br"&&(xe=document.createElement("br"));if(xe){if(Ee.lang&&(Ee.kind!=="region"&&Ee.lang===P.lang||(xe.lang=Ee.lang)),ee.appendChild(xe),xe.style.margin="0",Ee.kind==="region"){var be=Ee.styleAttrs[u.byName.writingMode.qname];be==="lrtb"||be==="lr"?(k.ipd="lr",k.bpd="tb"):be==="rltb"||be==="rl"?(k.ipd="rl",k.bpd="tb"):be==="tblr"?(k.ipd="tb",k.bpd="lr"):be!=="tbrl"&&be!=="tb"||(k.ipd="tb",k.bpd="rl")}else if(Ee.kind==="p"&&k.bpd==="tb"){var _t=Ee.styleAttrs[u.byName.direction.qname];k.ipd=_t==="ltr"?"lr":"rl"}for(var Ye=0;Ye<C.length;Ye++){var _e=C[Ye],He=Ee.styleAttrs[_e.qname];He!==void 0&&_e.map!==null&&_e.map(k,xe,Ee,He)}var nt=xe,ut=Ee.styleAttrs[u.byName.linePadding.qname];if(ut&&!ut.isZero()){var Pe=ut.toUsedLength(k.w,k.h);if(Pe>0){var Be=Math.ceil(Pe)+"px";k.bpd==="tb"?(nt.style.paddingLeft=Be,nt.style.paddingRight=Be):(nt.style.paddingTop=Be,nt.style.paddingBottom=Be),k.lp=ut}}var it=Ee.styleAttrs[u.byName.multiRowAlign.qname];if(it&&it!=="auto"){var gt=document.createElement("span");gt.style.display="inline-block",gt.style.textAlign=it,xe.appendChild(gt),nt=gt,k.mra=it}var zt=Ee.styleAttrs[u.byName.rubyReserve.qname];if(zt&&zt[0]!=="none"&&(k.rubyReserve=zt),Ee.styleAttrs[u.byName.fillLineGap.qname]&&(k.flg=!0),Ee.kind==="span"&&Ee.text){var Ce=Ee.styleAttrs[u.byName.textEmphasis.qname];if(Ce&&Ce.style!=="none"&&(k.textEmphasis=!0),u.byName.textCombine.qname in Ee.styleAttrs&&Ee.styleAttrs[u.byName.textCombine.qname]==="all")xe.textContent=Ee.text,xe._isd_element=Ee,Ce&&A(k,xe,0,Ce);else for(var Le="",yt=0;yt<Ee.text.length;yt++){Le+=Ee.text.charAt(yt);var Y=Ee.text.charCodeAt(yt);if(Y<55296||Y>56319||yt===Ee.text.length-1){var W=document.createElement("span");W.textContent=Le,Ce&&A(k,W,0,Ce),xe.appendChild(W),Le="",W._isd_element=Ee}}}if("contents"in Ee)for(var L=0;L<Ee.contents.length;L++)d(k,nt,Ee.contents[L],Ee);var j=[];if(Ee.kind==="p"&&(b(k,nt,j,null),k.rubyReserve&&(function(qe,$e){for(var Ge=0;Ge<qe.length;Ge++){var Je,Et,ct=document.createElement("ruby"),Mt=document.createElement("span");Mt.textContent="",ct.appendChild(Mt);var yn,tn=$e.rubyReserve[1].toUsedLength($e.w,$e.h)+"px";$e.rubyReserve[0]==="both"||$e.rubyReserve[0]==="outside"&&qe.length==1?((Je=document.createElement("rtc")).style[fe]=de?"after":"under",Je.textContent="",Je.style.fontSize=tn,(Et=document.createElement("rtc")).style[fe]=de?"before":"over",Et.textContent="",Et.style.fontSize=tn,ct.appendChild(Je),ct.appendChild(Et)):((Je=document.createElement("rtc")).textContent="",Je.style.fontSize=tn,yn=$e.rubyReserve[0]==="after"||$e.rubyReserve[0]==="outside"&&Ge>0?de?"after":$e.bpd==="tb"||$e.bpd==="rl"?"under":"over":de?"before":$e.bpd==="tb"||$e.bpd==="rl"?"over":"under",Je.style[fe]=yn,ct.appendChild(Je));for(var fn=null,Bt=0;Bt<qe[Ge].rbc.length;Bt++)if(qe[Ge].rbc[Bt].localName==="ruby"){fn=qe[Ge].rbc[Bt];for(var kn=0;kn<fn.style.length;kn++)ct.style.setProperty(fn.style.item(kn),fn.style.getPropertyValue(fn.style.item(kn)));break}(fn=fn||qe[Ge].elements[0].node).parentElement.insertBefore(ct,fn)}}(j,k),k.rubyReserve=null),(k.ruby||k.rubyReserve)&&(function(qe,$e){for(var Ge=0;Ge<qe.length;Ge++)for(var Je=0;Je<qe[Ge].rbc.length;Je++){var Et;qe[Ge].rbc[Je].style[fe]||(Et=de?Ge===0?"before":"after":$e.bpd==="tb"||$e.bpd==="rl"?Ge===0?"over":"under":Ge===0?"under":"over",qe[Ge].rbc[Je].style[fe]=Et)}}(j,k),k.ruby=null),k.textEmphasis&&(function(qe,$e){for(var Ge=0;Ge<qe.length;Ge++)for(var Je=0;Je<qe[Ge].te.length;Je++){var Et;qe[Ge].te[Je].style[Oe]&&qe[Ge].te[Je].style[Oe]!=="none"||(Et=$e.bpd==="tb"?Ge===0?"left over":"left under":$e.bpd==="rl"?Ge===0?"right under":"left under":Ge===0?"left under":"right under",qe[Ge].te[Je].style[Oe]=Et)}}(j,k),k.textEmphasis=null),k.mra&&(function(qe){for(var $e=0;$e<qe.length-1;$e++){var Ge=qe[$e].elements.length;if(Ge!==0&&qe[$e].br===!1){var Je=document.createElement("br"),Et=qe[$e].elements[Ge-1].node;Et.parentElement.insertBefore(Je,Et.nextSibling)}}}(j),k.mra=null),k.lp&&(function(qe,$e,Ge){if(qe!==null)for(var Je=0;Je<qe.length;Je++){var Et=qe[Je].elements.length,ct=Math.ceil($e)+"px",Mt="-"+Math.ceil($e)+"px";if(Et!==0){var yn=qe[Je].elements[qe[Je].start_elem],tn=qe[Je].elements[qe[Je].end_elem];if(yn===tn){var fn=yn.node.getBoundingClientRect();if(fn.width==0||fn.height==0)continue}Ge.ipd==="lr"?(yn.node.style.marginLeft=Mt,yn.node.style.paddingLeft=ct):Ge.ipd==="rl"?(yn.node.style.paddingRight=ct,yn.node.style.marginRight=Mt):Ge.ipd==="tb"&&(yn.node.style.paddingTop=ct,yn.node.style.marginTop=Mt),Ge.ipd==="lr"?(n||(tn.node.style.marginRight=Mt),tn.node.style.paddingRight=ct):Ge.ipd==="rl"?(tn.node.style.paddingLeft=ct,n||(tn.node.style.marginLeft=Mt)):Ge.ipd==="tb"&&(tn.node.style.paddingBottom=ct,tn.node.style.marginBottom=Mt)}}}(j,k.lp.toUsedLength(k.w,k.h),k),k.lp=null),function(qe,$e){for(var Ge=0;Ge<qe.length;Ge++)for(var Je=qe[Ge],Et=1;Et<Je.elements.length;){var ct=Je.elements[Et-1],Mt=Je.elements[Et];h(ct.node,Mt.node,$e)?Je.elements.splice(Et,1):Et++}for(var yn,tn,fn=[],Bt=0;Bt<qe.length;Bt++)for(var kn=0;kn<qe[Bt].elements.length;kn++)(tn=g(yn=qe[Bt].elements[kn].node,fn,!1))&&(yn.style.backgroundColor=tn);for(var Wn=0;Wn<fn.length;Wn++)fn[Wn].style.backgroundColor=""}(j,k),k.flg)){var me=E(nt.getBoundingClientRect(),k);(function(qe,$e,Ge,Je){for(var Et=Math.sign(Ge-$e),ct=0;ct<=qe.length;ct++){var Mt,yn,tn,fn;if(Mt=ct===0?Math.round($e):ct===qe.length?Math.round(Ge):Math.round((qe[ct-1].after+qe[ct].before)/2),ct>0&&qe[ct-1])for(tn=0;tn<qe[ct-1].elements.length;tn++)yn=Et*(Mt-(fn=qe[ct-1].elements[tn]).after)+"px",Je.bpd==="lr"?fn.node.style.paddingRight=yn:Je.bpd==="rl"?fn.node.style.paddingLeft=yn:Je.bpd==="tb"&&(fn.node.style.paddingBottom=yn);if(ct<qe.length)for(tn=0;tn<qe[ct].elements.length;tn++)yn=Et*((fn=qe[ct].elements[tn]).before-Mt)+"px",Je.bpd==="lr"?fn.node.style.paddingLeft=yn:Je.bpd==="rl"?fn.node.style.paddingRight=yn:Je.bpd==="tb"&&(fn.node.style.paddingTop=yn)}})(j,me.before,me.after,k),k.flg=null}if(Ee.kind==="region"&&k.bpd==="tb"&&k.enableRollUp&&Ee.contents.length>0&&Ee.styleAttrs[u.byName.displayAlign.qname]==="after"){b(k,nt,j,null);var ae=new p(Ee.id===""?"_":Ee.id,j);if(k.currentISDState[ae.id]=ae,k.previousISDState&&ae.id in k.previousISDState&&k.previousISDState[ae.id].plist.length>0&&ae.plist.length>1&&ae.plist[ae.plist.length-2].text===k.previousISDState[ae.id].plist[k.previousISDState[ae.id].plist.length-1].text){var Ue=xe.firstElementChild,rt=ae.plist[ae.plist.length-1].after-ae.plist[ae.plist.length-1].before;Ue.style.bottom="-"+rt+"px",Ue.style.transition="transform 0.4s",Ue.style.position="relative",Ue.style.transform="translateY(-"+rt+"px)"}}}else q(k.errorHandler,"Error processing ISD element kind: "+Ee.kind)}function g(k,ee,Ee){return k.style.backgroundColor?(Ee&&!ee.includes(k)&&ee.push(k),k.style.backgroundColor):k.parentElement.nodeName==="SPAN"||k.parentElement.nodeName==="RUBY"||k.parentElement.nodeName==="RBC"||k.parentElement.nodeName==="RTC"||k.parentElement.nodeName==="RT"?g(k.parentElement,ee,!0):void 0}function h(k,ee,Ee){if(k.tagName==="SPAN"&&ee.tagName==="SPAN"&&k._isd_element===ee._isd_element){if(!k._isd_element)return q(Ee.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;k.textContent+=ee.textContent;for(var P=0;P<ee.style.length;P++){var xe=ee.style[P];(xe.indexOf("border")>=0||xe.indexOf("padding")>=0||xe.indexOf("margin")>=0)&&(k.style[xe]=ee.style[xe])}return ee.parentElement.removeChild(ee),!0}return!1}function p(k,ee){this.id=k,this.plist=ee}function E(k,ee){var Ee={before:null,after:null,start:null,end:null};return ee.bpd==="tb"?(Ee.before=k.top,Ee.after=k.bottom,ee.ipd==="lr"?(Ee.start=k.left,Ee.end=k.right):(Ee.start=k.right,Ee.end=k.left)):ee.bpd==="lr"?(Ee.before=k.left,Ee.after=k.right,Ee.start=k.top,Ee.end=k.bottom):ee.bpd==="rl"&&(Ee.before=k.right,Ee.after=k.left,Ee.start=k.top,Ee.end=k.bottom),Ee}function b(k,ee,Ee,P){if(ee.localName!=="rt"&&ee.localName!=="rtc"){var xe,Ve,be,_t,Ye=ee.style.backgroundColor||P;if(ee.childElementCount===0)if(ee.localName==="span"||ee.localName==="rb"){var _e=E(ee.getBoundingClientRect(),k);if(Ee.length!==0&&(xe=_e.before,Ve=_e.after,be=Ee[Ee.length-1].before,Ve<(_t=Ee[Ee.length-1].after)&&xe>be||_t<=Ve&&be>=xe)){var He=Math.sign(_e.after-_e.before),nt=Math.sign(_e.end-_e.start);He*(_e.before-Ee[Ee.length-1].before)<0&&(Ee[Ee.length-1].before=_e.before),He*(_e.after-Ee[Ee.length-1].after)>0&&(Ee[Ee.length-1].after=_e.after),nt*(_e.start-Ee[Ee.length-1].start)<0&&(Ee[Ee.length-1].start=_e.start,Ee[Ee.length-1].start_elem=Ee[Ee.length-1].elements.length),nt*(_e.end-Ee[Ee.length-1].end)>0&&(Ee[Ee.length-1].end=_e.end,Ee[Ee.length-1].end_elem=Ee[Ee.length-1].elements.length)}else Ee.push({before:_e.before,after:_e.after,start:_e.start,end:_e.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ee[Ee.length-1].text+=ee.textContent,Ee[Ee.length-1].elements.push({node:ee,bgcolor:Ye,before:_e.before,after:_e.after})}else ee.localName==="br"&&Ee.length!==0&&(Ee[Ee.length-1].br=!0);else for(var ut=ee.firstChild;ut;)ut.nodeType===Node.ELEMENT_NODE&&(b(k,ut,Ee,Ye),ut.localName==="ruby"||ut.localName==="rtc"?Ee.length>0&&Ee[Ee.length-1].rbc.push(ut):ut.localName==="span"&&ut.style[De]&&ut.style[De]!=="none"&&Ee.length>0&&Ee[Ee.length-1].te.push(ut)),ut=ut.nextSibling}}function A(k,ee,Ee,P){var xe;P.style!=="none"&&(P.style==="auto"?ee.style[De]="filled":ee.style[De]=P.style+" "+P.symbol,(P.position==="before"||P.position==="after")&&(xe=k.bpd==="tb"?P.position==="before"?"left over":"left under":k.bpd==="rl"?P.position==="before"?"right under":"left under":P.position==="before"?"left under":"right under",ee.style[Oe]=xe))}function T(k,ee){this.qname=k,this.map=ee}r.render=function(k,ee,Ee,P,xe,Ve,be,_t,Ye){var _e=P||ee.clientHeight,He=xe||ee.clientWidth;if(k.aspectRatio!==null){var nt=_e*k.aspectRatio;nt>He?_e=Math.round(He/k.aspectRatio):He=nt}var ut=document.createElement("div");ut.style.position="relative",ut.style.width=He+"px",ut.style.height=_e+"px",ut.style.margin="auto",ut.style.top=0,ut.style.bottom=0,ut.style.left=0,ut.style.right=0,ut.style.zIndex=0;var Pe={h:_e,w:He,regionH:null,regionW:null,imgResolver:Ee,displayForcedOnlyMode:Ve||!1,isd:k,errorHandler:be,previousISDState:_t,enableRollUp:Ye||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ee.appendChild(ut),"contents"in k)for(var Be=0;Be<k.contents.length;Be++)d(Pe,ut,k.contents[Be],k);return Pe.currentISDState};for(var C=[new T("http://www.w3.org/ns/ttml#styling backgroundColor",function(k,ee,Ee,P){P[3]!==0&&(ee.style.backgroundColor="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")")}),new T("http://www.w3.org/ns/ttml#styling color",function(k,ee,Ee,P){ee.style.color="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")"}),new T("http://www.w3.org/ns/ttml#styling direction",function(k,ee,Ee,P){ee.style.direction=P}),new T("http://www.w3.org/ns/ttml#styling display",function(k,ee,Ee,P){}),new T("http://www.w3.org/ns/ttml#styling displayAlign",function(k,ee,Ee,P){ee.style.display="flex",ee.style.flexDirection="column",P==="before"?ee.style.justifyContent="flex-start":P==="center"?ee.style.justifyContent="center":P==="after"&&(ee.style.justifyContent="flex-end")}),new T("http://www.w3.org/ns/ttml#styling extent",function(k,ee,Ee,P){k.regionH=P.h.toUsedLength(k.w,k.h),k.regionW=P.w.toUsedLength(k.w,k.h);var xe=0,Ve=0,be=Ee.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];be&&(xe=be[0].toUsedLength(k.w,k.h)+be[2].toUsedLength(k.w,k.h),Ve=be[1].toUsedLength(k.w,k.h)+be[3].toUsedLength(k.w,k.h)),ee.style.height=k.regionH-xe+"px",ee.style.width=k.regionW-Ve+"px"}),new T("http://www.w3.org/ns/ttml#styling fontFamily",function(k,ee,Ee,P){for(var xe=[],Ve=0;Ve<P.length;Ve++)P[Ve]=P[Ve].trim(),P[Ve]==="monospaceSerif"?(xe.push("Courier New"),xe.push('"Liberation Mono"'),xe.push("Courier"),xe.push("monospace")):P[Ve]==="proportionalSansSerif"?(xe.push("Arial"),xe.push("Helvetica"),xe.push('"Liberation Sans"'),xe.push("sans-serif")):P[Ve]==="monospace"?xe.push("monospace"):P[Ve]==="sansSerif"?xe.push("sans-serif"):P[Ve]==="serif"?xe.push("serif"):P[Ve]==="monospaceSansSerif"?(xe.push("Consolas"),xe.push("monospace")):P[Ve]==="proportionalSerif"?xe.push("serif"):xe.push(P[Ve]);if(xe.length>0){for(var be=[xe[0]],_t=1;_t<xe.length;_t++)be.indexOf(xe[_t])==-1&&be.push(xe[_t]);xe=be}ee.style.fontFamily=xe.join(",")}),new T("http://www.w3.org/ns/ttml#styling shear",function(k,ee,Ee,P){if(P!==0){var xe=-.9*P;k.bpd==="tb"?ee.style.transform="skewX("+xe+"deg)":ee.style.transform="skewY("+xe+"deg)"}}),new T("http://www.w3.org/ns/ttml#styling fontSize",function(k,ee,Ee,P){ee.style.fontSize=P.toUsedLength(k.w,k.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling fontStyle",function(k,ee,Ee,P){ee.style.fontStyle=P}),new T("http://www.w3.org/ns/ttml#styling fontWeight",function(k,ee,Ee,P){ee.style.fontWeight=P}),new T("http://www.w3.org/ns/ttml#styling lineHeight",function(k,ee,Ee,P){ee.style.lineHeight=P==="normal"?"normal":P.toUsedLength(k.w,k.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling opacity",function(k,ee,Ee,P){ee.style.opacity=P}),new T("http://www.w3.org/ns/ttml#styling origin",function(k,ee,Ee,P){ee.style.top=P.h.toUsedLength(k.w,k.h)+"px",ee.style.left=P.w.toUsedLength(k.w,k.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling overflow",function(k,ee,Ee,P){ee.style.overflow=P}),new T("http://www.w3.org/ns/ttml#styling padding",function(k,ee,Ee,P){var xe=[];xe[0]=P[0].toUsedLength(k.w,k.h)+"px",xe[1]=P[3].toUsedLength(k.w,k.h)+"px",xe[2]=P[2].toUsedLength(k.w,k.h)+"px",xe[3]=P[1].toUsedLength(k.w,k.h)+"px",ee.style.padding=xe.join(" ")}),new T("http://www.w3.org/ns/ttml#styling position",function(k,ee,Ee,P){ee.style.top=P.h.toUsedLength(k.w,k.h)+"px",ee.style.left=P.w.toUsedLength(k.w,k.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling rubyAlign",function(k,ee,Ee,P){ee.style.rubyAlign=P==="spaceAround"?"space-around":"center"}),new T("http://www.w3.org/ns/ttml#styling rubyPosition",function(k,ee,Ee,P){var xe;P!=="before"&&P!=="after"||(xe=de?P:k.bpd==="tb"||k.bpd==="rl"?P==="before"?"over":"under":P==="before"?"under":"over",ee.parentElement.style[fe]=xe)}),new T("http://www.w3.org/ns/ttml#styling showBackground",null),new T("http://www.w3.org/ns/ttml#styling textAlign",function(k,ee,Ee,P){var xe;xe=P==="start"?k.ipd==="rl"?"right":"left":P==="end"?k.ipd==="rl"?"left":"right":P,ee.style.textAlign=xe}),new T("http://www.w3.org/ns/ttml#styling textDecoration",function(k,ee,Ee,P){ee.style.textDecoration=P.join(" ").replace("lineThrough","line-through")}),new T("http://www.w3.org/ns/ttml#styling textOutline",function(k,ee,Ee,P){}),new T("http://www.w3.org/ns/ttml#styling textShadow",function(k,ee,Ee,P){var xe=Ee.styleAttrs[u.byName.textOutline.qname];if(P==="none"&&xe==="none")ee.style.textShadow="";else{var Ve=[];if(xe!=="none"){var be="rgba("+xe.color[0].toString()+","+xe.color[1].toString()+","+xe.color[2].toString()+","+(xe.color[3]/255).toString()+")";Ve.push("1px 1px 1px "+be),Ve.push("-1px 1px 1px "+be),Ve.push("1px -1px 1px "+be),Ve.push("-1px -1px 1px "+be)}if(P!=="none")for(var _t=0;_t<P.length;_t++)Ve.push(P[_t].x_off.toUsedLength(k.w,k.h)+"px "+P[_t].y_off.toUsedLength(k.w,k.h)+"px "+P[_t].b_radius.toUsedLength(k.w,k.h)+"px rgba("+P[_t].color[0].toString()+","+P[_t].color[1].toString()+","+P[_t].color[2].toString()+","+(P[_t].color[3]/255).toString()+")");ee.style.textShadow=Ve.join(",")}}),new T("http://www.w3.org/ns/ttml#styling textCombine",function(k,ee,Ee,P){ee.style.textCombineUpright=P}),new T("http://www.w3.org/ns/ttml#styling textEmphasis",function(k,ee,Ee,P){}),new T("http://www.w3.org/ns/ttml#styling unicodeBidi",function(k,ee,Ee,P){var xe;xe=P==="bidiOverride"?"bidi-override":P,ee.style.unicodeBidi=xe}),new T("http://www.w3.org/ns/ttml#styling visibility",function(k,ee,Ee,P){ee.style.visibility=P}),new T("http://www.w3.org/ns/ttml#styling wrapOption",function(k,ee,Ee,P){P==="wrap"?Ee.space==="preserve"?ee.style.whiteSpace="pre-wrap":ee.style.whiteSpace="normal":Ee.space==="preserve"?ee.style.whiteSpace="pre":ee.style.whiteSpace="noWrap"}),new T("http://www.w3.org/ns/ttml#styling writingMode",function(k,ee,Ee,P){P==="lrtb"||P==="lr"||P==="rltb"||P==="rl"?ee.style.writingMode="horizontal-tb":P==="tblr"?ee.style.writingMode="vertical-lr":P!=="tbrl"&&P!=="tb"||(ee.style.writingMode="vertical-rl")}),new T("http://www.w3.org/ns/ttml#styling zIndex",function(k,ee,Ee,P){ee.style.zIndex=P}),new T("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(k,ee,Ee,P){k.displayForcedOnlyMode&&P===!1&&(ee.style.visibility="hidden")})],O={},te=0;te<C.length;te++)O[C[te].qname]=C[te];var de="webkitRubyPosition"in window.getComputedStyle(document.documentElement),fe=de?"webkitRubyPosition":"rubyPosition",De="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",Oe="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function q(k,ee){if(k&&k.error&&k.error(ee))throw ee}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},8905:function(f,e,t){(function(n,r,o,u){n.generateISD=function(T,C,O){var te,de=new E(T),fe={},De={},Oe=T.head.styling.initials[o.byName.showBackground.qname],q=T.head.styling.initials[o.byName.backgroundColor.qname];for(var k in T.head.layout.regions)if(T.head.layout.regions.hasOwnProperty(k)){var ee=T.head.layout.regions[k],Ee=ee.styleAttrs[o.byName.showBackground.qname]||Oe,P=ee.styleAttrs[o.byName.backgroundColor.qname]||q;De[ee.id]=(Ee==="always"||Ee===void 0)&&P!==void 0&&!(C<ee.begin||C>=ee.end)}for(var xe in T.body&&T.body.regionID&&(De[T.body.regionID]=!0),te=T.body!==null?function be(_t,Ye){if(Ye.contents){var _e={};for(var He in Ye)Ye.hasOwnProperty(He)&&(_e[He]=Ye[He]);return _e.contents=[],Ye.contents.filter(function(nt){return!(_t<nt.begin||_t>=nt.end)}).forEach(function(nt){var ut=be(_t,nt);ut.regionID&&(De[ut.regionID]=!0),ut!==null&&_e.contents.push(ut)}),_e}return Ye}(C,T.body):null,De[""]!==void 0&&(De[""]=!0),De)if(De[xe]){var Ve=g(T,C,T.head.layout.regions[xe],te,null,"",T.head.layout.regions[xe],O,fe);Ve!==null&&de.contents.push(Ve.element)}return de};var d=[o.byName.color.qname,o.byName.textCombine.qname,o.byName.textDecoration.qname,o.byName.textEmphasis.qname,o.byName.textOutline.qname,o.byName.textShadow.qname];function g(T,C,O,te,de,fe,De,Oe,q){if(C<De.begin||C>=De.end)return null;var k="regionID"in De&&De.regionID!==""?De.regionID:fe;if(de!==null&&k!==O.id&&(!("contents"in De)||"contents"in De&&De.contents.length===0||k!==""))return null;var ee=new b(De);if("sets"in De)for(var Ee=0;Ee<De.sets.length;Ee++)C<De.sets[Ee].begin||C>=De.sets[Ee].end||(ee.styleAttrs[De.sets[Ee].qname]=De.sets[Ee].value);var P={};for(var xe in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(xe)&&(P[xe]=!0,ee.kind==="region"&&xe===o.byName.writingMode.qname&&!(o.byName.direction.qname in ee.styleAttrs))){var Ve=ee.styleAttrs[xe];Ve==="lrtb"||Ve==="lr"?ee.styleAttrs[o.byName.direction.qname]="ltr":Ve!=="rltb"&&Ve!=="rl"||(ee.styleAttrs[o.byName.direction.qname]="rtl")}if(de!==null)for(var be=0;be<o.all.length;be++){var _t=o.all[be];if(_t.qname===o.byName.textDecoration.qname){var Ye=de.styleAttrs[_t.qname],_e=ee.styleAttrs[_t.qname],He=[];_e===void 0?He=Ye:_e.indexOf("none")===-1?((_e.indexOf("noUnderline")===-1&&Ye.indexOf("underline")!==-1||_e.indexOf("underline")!==-1)&&He.push("underline"),(_e.indexOf("noLineThrough")===-1&&Ye.indexOf("lineThrough")!==-1||_e.indexOf("lineThrough")!==-1)&&He.push("lineThrough"),(_e.indexOf("noOverline")===-1&&Ye.indexOf("overline")!==-1||_e.indexOf("overline")!==-1)&&He.push("overline")):He.push("none"),ee.styleAttrs[_t.qname]=He}else if(_t.qname!==o.byName.fontSize.qname||_t.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[o.byName.ruby.qname]!=="textContainer")if(_t.qname!==o.byName.fontSize.qname||_t.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[o.byName.ruby.qname]!=="text")_t.inherit&&_t.qname in de.styleAttrs&&!(_t.qname in ee.styleAttrs)&&(ee.styleAttrs[_t.qname]=de.styleAttrs[_t.qname]);else{var nt=de.styleAttrs[o.byName.fontSize.qname];de.styleAttrs[o.byName.ruby.qname]==="textContainer"?ee.styleAttrs[_t.qname]=nt:ee.styleAttrs[_t.qname]=new u.ComputedLength(.5*nt.rw,.5*nt.rh)}else{var ut=de.styleAttrs[o.byName.fontSize.qname];ee.styleAttrs[_t.qname]=new u.ComputedLength(.5*ut.rw,.5*ut.rh)}}for(var Pe=0;Pe<o.all.length;Pe++){var Be=o.all[Pe];if(!(Be.qname in ee.styleAttrs)&&!(Be.qname===o.byName.position.qname&&o.byName.origin.qname in ee.styleAttrs||Be.qname===o.byName.origin.qname&&o.byName.position.qname in ee.styleAttrs)){var it=T.head.styling.initials[Be.qname]||Be.initial;if(it!==null&&(ee.kind==="region"||Be.inherit===!1&&it!==null)){var gt=Be.parse(it);gt!==null?(ee.styleAttrs[Be.qname]=gt,P[Be.qname]=!0):A(Oe,"Invalid initial value for '"+Be.qname+"' on element '"+ee.kind)}}}for(var zt=0;zt<o.all.length;zt++){var Ce=o.all[zt];if(Ce.qname in P&&Ce.compute!==null){var Le=Ce.compute(T,de,ee,ee.styleAttrs[Ce.qname],q);Le!==null?ee.styleAttrs[Ce.qname]=Le:(ee.styleAttrs[Ce.qname]=Ce.compute(T,de,ee,Ce.parse(Ce.initial),q),A(Oe,"Style '"+Ce.qname+"' on element '"+ee.kind+"' cannot be computed"))}}if(ee.styleAttrs[o.byName.display.qname]==="none")return null;var yt=null;de===null?yt=te===null?[]:[te]:"contents"in De&&(yt=De.contents);for(var Y=0;yt!==null&&Y<yt.length;Y++){var W=g(T,C,O,te,ee,k,yt[Y],Oe,q);W!==null&&ee.contents.push(W.element)}for(var L in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(L)){var j=!1;if(ee.kind==="span"){var me=ee.styleAttrs[o.byName.ruby.qname];(j=(me==="container"||me==="textContainer"||me==="baseContainer")&&d.indexOf(L)!==-1)||(j=me!=="container"&&L===o.byName.rubyAlign.qname),j||(j=!(me==="textContainer"||me==="text")&&L===o.byName.rubyPosition.qname)}if(!j){var ae=o.byQName[L];"applies"in ae&&(j=ae.applies.indexOf(ee.kind)===-1)}j&&delete ee.styleAttrs[L]}var Ue=ee.styleAttrs[o.byName.ruby.qname];if(ee.kind==="p"||ee.kind==="span"&&(Ue==="textContainer"||Ue==="text")){var rt=[];h(ee,rt),function(qe){for(var $e,Ge=0;Ge<qe.length;)if(($e=qe[Ge]).kind!=="br"&&$e.space!=="preserve"){var Je=$e.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Je)&&(Ge===0||(Et=qe[Ge-1]).kind==="br"||/[\r\n\t ]$/.test(Et.text))&&(Je=Je.substring(1)),$e.text=Je,Je.length===0?qe.splice(Ge,1):Ge++}else Ge++;var Et,ct;for(Ge=0;Ge<qe.length;Ge++)($e=qe[Ge]).kind!=="br"&&$e.space!=="preserve"?/[ ]$/.test($e.text)&&(Ge===qe.length-1||(ct=qe[Ge+1]).kind==="br"||ct.space==="preserve"&&/^[\r\n]/.test(ct.text))&&($e.text=$e.text.slice(0,-1)):Ge++}(rt),p(ee)}return ee.kind==="div"&&o.byName.backgroundImage.qname in ee.styleAttrs||ee.kind==="br"||ee.kind==="image"||"contents"in ee&&ee.contents.length>0||ee.kind==="span"&&ee.text!==null||ee.kind==="region"&&ee.styleAttrs[o.byName.showBackground.qname]==="always"?{region_id:k,element:ee}:null}function h(T,C){if("contents"in T)for(var O=0;O<T.contents.length;O++){var te=T.contents[O],de=te.styleAttrs[o.byName.ruby.qname];(te.kind!=="span"||de!=="textContainer"&&de!=="text")&&("contents"in te?h(te,C):(te.kind==="span"&&te.text.length!==0||te.kind==="br")&&C.push(te))}}function p(T){if(T.kind==="br")return!1;if("text"in T)return T.text.length===0;if("contents"in T){for(var C=T.contents.length;C--;)p(T.contents[C])&&T.contents.splice(C,1);return T.contents.length===0}}function E(T){this.contents=[],this.aspectRatio=T.aspectRatio,this.lang=T.lang}function b(T){for(var C in this.kind=T.kind||"region",this.lang=T.lang,T.id&&(this.id=T.id),this.styleAttrs={},T.styleAttrs)T.styleAttrs.hasOwnProperty(C)&&(this.styleAttrs[C]=T.styleAttrs[C]);"src"in T&&(this.src=T.src),"type"in T&&(this.type=T.type),"text"in T?this.text=T.text:(this.kind==="region"||"contents"in T)&&(this.contents=[]),"space"in T&&(this.space=T.space)}function A(T,C){if(T&&T.error&&T.error(C))throw C}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},7640:function(f,e,t){e.generateISD=t(8905).generateISD,e.fromXML=t(6739).fromXML,e.renderHTML=t(1612).render},977:function(f,e){(function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"})(e)},1219:function(f,e,t){(function(n,r,o){function u(h,p,E,b,A,T,C,O){this.name=p,this.ns=h,this.qname=h+" "+p,this.inherit=A,this.animatable=T,this.initial=E,this.applies=b,this.parse=C,this.compute=O}for(var d in n.all=[new u(r.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,o.parseColor,null),new u(r.ns_tts,"color","white",["span"],!0,!0,o.parseColor,null),new u(r.ns_tts,"direction","ltr",["p","span"],!0,!0,function(h){return h},null),new u(r.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(h){return h},null),new u(r.ns_tts,"displayAlign","before",["region"],!1,!0,function(h){return h},null),new u(r.ns_tts,"extent","auto",["tt","region"],!1,!0,function(h){if(h==="auto")return h;var p=h.split(" ");if(p.length!==2)return null;var E=o.parseLength(p[0]),b=o.parseLength(p[1]);return b&&E?{h:b,w:E}:null},function(h,p,E,b,A){var T,C;if(b==="auto")T=new o.ComputedLength(0,1);else if((T=o.toComputedLength(b.h.value,b.h.unit,null,h.dimensions.h,null,h.pxLength.h))===null)return null;if(b==="auto")C=new o.ComputedLength(1,0);else if((C=o.toComputedLength(b.w.value,b.w.unit,null,h.dimensions.w,null,h.pxLength.w))===null)return null;return{h:T,w:C}}),new u(r.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(h){for(var p=h.split(","),E=[],b=0;b<p.length;b++)p[b]=p[b].trim(),p[b].charAt(0)!=="'"&&p[b].charAt(0)!=='"'&&p[b]==="default"?E.push("monospaceSerif"):E.push(p[b]);return E},null),new u(r.ns_tts,"shear","0%",["p"],!0,!0,o.parseLength,function(h,p,E,b){return b.unit!=="%"?null:Math.abs(b.value)>100?100*Math.sign(b.value):b.value}),new u(r.ns_tts,"fontSize","1c",["span","p"],!0,!0,o.parseLength,function(h,p,E,b,A){return o.toComputedLength(b.value,b.unit,p!==null?p.styleAttrs[n.byName.fontSize.qname]:h.cellLength.h,p!==null?p.styleAttrs[n.byName.fontSize.qname]:h.cellLength.h,h.cellLength.h,h.pxLength.h)}),new u(r.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(h){return h},null),new u(r.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(h){return h},null),new u(r.ns_tts,"lineHeight","normal",["p"],!0,!0,function(h){return h==="normal"?h:o.parseLength(h)},function(h,p,E,b,A){var T;if(b==="normal")T=b;else if((T=o.toComputedLength(b.value,b.unit,E.styleAttrs[n.byName.fontSize.qname],E.styleAttrs[n.byName.fontSize.qname],h.cellLength.h,h.pxLength.h))===null)return null;return T}),new u(r.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new u(r.ns_tts,"origin","auto",["region"],!1,!0,function(h){if(h==="auto")return h;var p=h.split(" ");if(p.length!==2)return null;var E=o.parseLength(p[0]),b=o.parseLength(p[1]);return b&&E?{h:b,w:E}:null},function(h,p,E,b,A){var T,C;if(b==="auto")T=new o.ComputedLength(0,0);else if((T=o.toComputedLength(b.h.value,b.h.unit,null,h.dimensions.h,null,h.pxLength.h))===null)return null;if(b==="auto")C=new o.ComputedLength(0,0);else if((C=o.toComputedLength(b.w.value,b.w.unit,null,h.dimensions.w,null,h.pxLength.w))===null)return null;return{h:T,w:C}}),new u(r.ns_tts,"overflow","hidden",["region"],!1,!0,function(h){return h},null),new u(r.ns_tts,"padding","0px",["region"],!1,!0,function(h){var p=h.split(" ");if(p.length>4)return null;for(var E=[],b=0;b<p.length;b++){var A=o.parseLength(p[b]);if(!A)return null;E.push(A)}return E},function(h,p,E,b,A){var T;if(b.length===1)T=[b[0],b[0],b[0],b[0]];else if(b.length===2)T=[b[0],b[1],b[0],b[1]];else if(b.length===3)T=[b[0],b[1],b[2],b[1]];else{if(b.length!==4)return null;T=[b[0],b[1],b[2],b[3]]}var C=E.styleAttrs[n.byName.writingMode.qname];if(C==="lrtb"||C==="lr")T=[T[0],T[3],T[2],T[1]];else if(C==="rltb"||C==="rl")T=[T[0],T[1],T[2],T[3]];else if(C==="tblr")T=[T[3],T[0],T[1],T[2]];else{if(C!=="tbrl"&&C!=="tb")return null;T=[T[3],T[2],T[1],T[0]]}for(var O=[],te=0;te<T.length;te++)if(T[te].value===0)O[te]=new o.ComputedLength(0,0);else if(O[te]=o.toComputedLength(T[te].value,T[te].unit,E.styleAttrs[n.byName.fontSize.qname],te===0||te===2?E.styleAttrs[n.byName.extent.qname].h:E.styleAttrs[n.byName.extent.qname].w,te===0||te===2?h.cellLength.h:h.cellLength.w,te===0||te===2?h.pxLength.h:h.pxLength.w),O[te]===null)return null;return O}),new u(r.ns_tts,"position","top left",["region"],!1,!0,function(h){return o.parsePosition(h)},function(h,p,E,b){var A,T;return(A=o.toComputedLength(b.v.offset.value,b.v.offset.unit,null,new o.ComputedLength(-E.styleAttrs[n.byName.extent.qname].h.rw,h.dimensions.h.rh-E.styleAttrs[n.byName.extent.qname].h.rh),null,h.pxLength.h))===null?null:(b.v.edge==="bottom"&&(A=new o.ComputedLength(-A.rw-E.styleAttrs[n.byName.extent.qname].h.rw,h.dimensions.h.rh-A.rh-E.styleAttrs[n.byName.extent.qname].h.rh)),T=o.toComputedLength(b.h.offset.value,b.h.offset.unit,null,new o.ComputedLength(h.dimensions.w.rw-E.styleAttrs[n.byName.extent.qname].w.rw,-E.styleAttrs[n.byName.extent.qname].w.rh),null,h.pxLength.w),A===null?null:(b.h.edge==="right"&&(T=new o.ComputedLength(h.dimensions.w.rw-T.rw-E.styleAttrs[n.byName.extent.qname].w.rw,-T.rh-E.styleAttrs[n.byName.extent.qname].w.rh)),{h:A,w:T}))}),new u(r.ns_tts,"ruby","none",["span"],!1,!0,function(h){return h},null),new u(r.ns_tts,"rubyAlign","center",["span"],!0,!0,function(h){return h!=="center"&&h!=="spaceAround"?null:h},null),new u(r.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(h){return h},null),new u(r.ns_tts,"rubyReserve","none",["p"],!0,!0,function(h){var p=h.split(" "),E=[null,null];if(p.length===0||p.length>2||p[0]!=="none"&&p[0]!=="both"&&p[0]!=="after"&&p[0]!=="before"&&p[0]!=="outside")return null;if(E[0]=p[0],p.length===2&&p[0]!=="none"){var b=o.parseLength(p[1]);if(!b)return null;E[1]=b}return E},function(h,p,E,b,A){if(b[0]==="none")return b;var T;return(T=b[1]===null?new o.ComputedLength(.5*E.styleAttrs[n.byName.fontSize.qname].rw,.5*E.styleAttrs[n.byName.fontSize.qname].rh):o.toComputedLength(b[1].value,b[1].unit,E.styleAttrs[n.byName.fontSize.qname],E.styleAttrs[n.byName.fontSize.qname],h.cellLength.h,h.pxLength.h))===null?null:[b[0],T]}),new u(r.ns_tts,"showBackground","always",["region"],!1,!0,function(h){return h},null),new u(r.ns_tts,"textAlign","start",["p"],!0,!0,function(h){return h},function(h,p,E,b,A){return b==="left"?"start":b==="right"?"end":b}),new u(r.ns_tts,"textCombine","none",["span"],!0,!0,function(h){return h==="none"||h==="all"?h:null},null),new u(r.ns_tts,"textDecoration","none",["span"],!0,!0,function(h){return h.split(" ")},null),new u(r.ns_tts,"textEmphasis","none",["span"],!0,!0,function(h){for(var p=h.split(" "),E={style:null,symbol:null,color:null,position:null},b=0;b<p.length;b++)if(p[b]==="none"||p[b]==="auto")E.style=p[b];else if(p[b]==="filled"||p[b]==="open")E.style=p[b];else if(p[b]==="circle"||p[b]==="dot"||p[b]==="sesame")E.symbol=p[b];else if(p[b]==="current")E.color=p[b];else if(p[b]==="outside"||p[b]==="before"||p[b]==="after")E.position=p[b];else if(E.color=o.parseColor(p[b]),E.color===null)return null;return E.style==null&&E.symbol==null?E.style="auto":(E.symbol=E.symbol||"circle",E.style=E.style||"filled"),E.position=E.position||"outside",E.color=E.color||"current",E},null),new u(r.ns_tts,"textOutline","none",["span"],!0,!0,function(h){if(h==="none")return h;var p={},E=h.split(" ");if(E.length===0||E.length>2)return null;var b=o.parseColor(E[0]);if(p.color=b,b!==null&&E.shift(),E.length!==1)return null;var A=o.parseLength(E[0]);return A?(p.thickness=A,p):null},function(h,p,E,b,A){if(b==="none")return b;var T={};return b.color===null?T.color=E.styleAttrs[n.byName.color.qname]:T.color=b.color,T.thickness=o.toComputedLength(b.thickness.value,b.thickness.unit,E.styleAttrs[n.byName.fontSize.qname],E.styleAttrs[n.byName.fontSize.qname],h.cellLength.h,h.pxLength.h),T.thickness===null?null:T}),new u(r.ns_tts,"textShadow","none",["span"],!0,!0,o.parseTextShadow,function(h,p,E,b){if(b==="none")return b;for(var A=[],T=0;T<b.length;T++){var C={};if(C.x_off=o.toComputedLength(b[T][0].value,b[T][0].unit,null,E.styleAttrs[n.byName.fontSize.qname],null,h.pxLength.w),C.x_off===null||(C.y_off=o.toComputedLength(b[T][1].value,b[T][1].unit,null,E.styleAttrs[n.byName.fontSize.qname],null,h.pxLength.h),C.y_off===null))return null;if(b[T][2]===null)C.b_radius=0;else if(C.b_radius=o.toComputedLength(b[T][2].value,b[T][2].unit,null,E.styleAttrs[n.byName.fontSize.qname],null,h.pxLength.h),C.b_radius===null)return null;b[T][3]===null?C.color=E.styleAttrs[n.byName.color.qname]:C.color=b[T][3],A.push(C)}return A}),new u(r.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(h){return h},null),new u(r.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(h){return h},null),new u(r.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(h){return h},null),new u(r.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(h){return h},null),new u(r.ns_tts,"zIndex","auto",["region"],!1,!0,function(h){var p;return h==="auto"?p=h:(p=parseInt(h),isNaN(p)&&(p=null)),p},null),new u(r.ns_ebutts,"linePadding","0c",["p"],!0,!1,o.parseLength,function(h,p,E,b,A){return o.toComputedLength(b.value,b.unit,null,null,h.cellLength.w,null)}),new u(r.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(h){return h},null),new u(r.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(h){return h},null),new u(r.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(h){return h==="true"},null),new u(r.ns_itts,"fillLineGap","false",["p"],!0,!0,function(h){return h==="true"},null)],n.byQName={},n.all)n.byQName[n.all[d].qname]=n.all[d];for(var g in n.byName={},n.all)n.byName[n.all[g].name]=n.all[g]})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscUtils>"u"?t(6404):imscUtils)},6404:function(f,e){(function(t){var n=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,r=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,u={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(g){var h,p=null,E=u[g.toLowerCase()];return E!==void 0?p=E:(h=n.exec(g))!==null?p=[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),h[4]!==void 0?parseInt(h[4],16):255]:(h=r.exec(g))!==null?p=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),255]:(h=o.exec(g))!==null&&(p=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseInt(h[4])]),p};var d=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(g){var h,p=null;return(h=d.exec(g))!==null&&(p={value:parseFloat(h[1]),unit:h[2]}),p},t.parseTextShadow=function(g){for(var h=g.match(/([^\(,\)]|\([^\)]+\))+/g),p=[],E=0;E<h.length;E++){var b=h[E].split(" ");if(b.length===1&&b[0]==="none")return"none";if(b.length>1&&b.length<5){var A=[null,null,null,null],T=t.parseLength(b.shift());if(T===null||(A[0]=T,(T=t.parseLength(b.shift()))===null))return null;if(A[1]=T,b.length===0){p.push(A);continue}if((T=t.parseLength(b[0]))!==null&&(A[2]=T,b.shift()),b.length===0){p.push(A);continue}var C=t.parseColor(b[0]);if(C===null)return null;A[3]=C,p.push(A)}}return p},t.parsePosition=function(g){var h=g.split(" "),p=function(te){return te==="center"||te==="left"||te==="top"||te==="bottom"||te==="right"};if(h.length>4)return null;for(var E=0;E<h.length;E++)if(!p(h[E])){var b=t.parseLength(h[E]);if(b===null)return null;h[E]=b}for(var A={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},T=0;T<h.length;){var C=h[T++];if(p(C)){var O={value:0,unit:"%"};h.length!==2&&T<h.length&&!p(h[T])&&(O=h[T++]),C==="right"?(A.h.edge=C,A.h.offset=O):C==="bottom"?(A.v.edge=C,A.v.offset=O):C==="left"?A.h.offset=O:C==="top"&&(A.v.offset=O)}else{if(h.length!==1&&h.length!==2)return null;T===1?A.h.offset=C:A.v.offset=C}}return A},t.ComputedLength=function(g,h){this.rw=g,this.rh=h},t.ComputedLength.prototype.toUsedLength=function(g,h){return g*this.rw+h*this.rh},t.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},t.toComputedLength=function(g,h,p,E,b,A){return h==="%"&&E?new t.ComputedLength(E.rw*g/100,E.rh*g/100):h==="em"&&p?new t.ComputedLength(p.rw*g,p.rh*g):h==="c"&&b?new t.ComputedLength(g*b.rw,g*b.rh):h==="px"&&A?new t.ComputedLength(g*A.rw,g*A.rh):h==="rh"?new t.ComputedLength(0,g/100):h==="rw"?new t.ComputedLength(g/100,0):null}})(e)},7523:function(f){typeof Object.create=="function"?f.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:f.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3282:function(f){function e(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function t(r,o){for(var u,d="",g=0,h=-1,p=0,E=0;E<=r.length;++E){if(E<r.length)u=r.charCodeAt(E);else{if(u===47)break;u=47}if(u===47){if(!(h===E-1||p===1))if(h!==E-1&&p===2){if(d.length<2||g!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var b=d.lastIndexOf("/");if(b!==d.length-1){b===-1?(d="",g=0):g=(d=d.slice(0,b)).length-1-d.lastIndexOf("/"),h=E,p=0;continue}}else if(d.length===2||d.length===1){d="",g=0,h=E,p=0;continue}}o&&(d.length>0?d+="/..":d="..",g=2)}else d.length>0?d+="/"+r.slice(h+1,E):d=r.slice(h+1,E),g=E-h-1;h=E,p=0}else u===46&&p!==-1?++p:p=-1}return d}var n={resolve:function(){for(var r,o="",u=!1,d=arguments.length-1;d>=-1&&!u;d--){var g;d>=0?g=arguments[d]:(r===void 0&&(r=process.cwd()),g=r),e(g),g.length!==0&&(o=g+"/"+o,u=g.charCodeAt(0)===47)}return o=t(o,!u),u?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(r){if(e(r),r.length===0)return".";var o=r.charCodeAt(0)===47,u=r.charCodeAt(r.length-1)===47;return(r=t(r,!o)).length!==0||o||(r="."),r.length>0&&u&&(r+="/"),o?"/"+r:r},isAbsolute:function(r){return e(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,o=0;o<arguments.length;++o){var u=arguments[o];e(u),u.length>0&&(r===void 0?r=u:r+="/"+u)}return r===void 0?".":n.normalize(r)},relative:function(r,o){if(e(r),e(o),r===o||(r=n.resolve(r))===(o=n.resolve(o)))return"";for(var u=1;u<r.length&&r.charCodeAt(u)===47;++u);for(var d=r.length,g=d-u,h=1;h<o.length&&o.charCodeAt(h)===47;++h);for(var p=o.length-h,E=g<p?g:p,b=-1,A=0;A<=E;++A){if(A===E){if(p>E){if(o.charCodeAt(h+A)===47)return o.slice(h+A+1);if(A===0)return o.slice(h+A)}else g>E&&(r.charCodeAt(u+A)===47?b=A:A===0&&(b=0));break}var T=r.charCodeAt(u+A);if(T!==o.charCodeAt(h+A))break;T===47&&(b=A)}var C="";for(A=u+b+1;A<=d;++A)A!==d&&r.charCodeAt(A)!==47||(C.length===0?C+="..":C+="/..");return C.length>0?C+o.slice(h+b):(h+=b,o.charCodeAt(h)===47&&++h,o.slice(h))},_makeLong:function(r){return r},dirname:function(r){if(e(r),r.length===0)return".";for(var o=r.charCodeAt(0),u=o===47,d=-1,g=!0,h=r.length-1;h>=1;--h)if((o=r.charCodeAt(h))===47){if(!g){d=h;break}}else g=!1;return d===-1?u?"/":".":u&&d===1?"//":r.slice(0,d)},basename:function(r,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(r);var u,d=0,g=-1,h=!0;if(o!==void 0&&o.length>0&&o.length<=r.length){if(o.length===r.length&&o===r)return"";var p=o.length-1,E=-1;for(u=r.length-1;u>=0;--u){var b=r.charCodeAt(u);if(b===47){if(!h){d=u+1;break}}else E===-1&&(h=!1,E=u+1),p>=0&&(b===o.charCodeAt(p)?--p==-1&&(g=u):(p=-1,g=E))}return d===g?g=E:g===-1&&(g=r.length),r.slice(d,g)}for(u=r.length-1;u>=0;--u)if(r.charCodeAt(u)===47){if(!h){d=u+1;break}}else g===-1&&(h=!1,g=u+1);return g===-1?"":r.slice(d,g)},extname:function(r){e(r);for(var o=-1,u=0,d=-1,g=!0,h=0,p=r.length-1;p>=0;--p){var E=r.charCodeAt(p);if(E!==47)d===-1&&(g=!1,d=p+1),E===46?o===-1?o=p:h!==1&&(h=1):o!==-1&&(h=-1);else if(!g){u=p+1;break}}return o===-1||d===-1||h===0||h===1&&o===d-1&&o===u+1?"":r.slice(o,d)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return function(o,u){var d=u.dir||u.root,g=u.base||(u.name||"")+(u.ext||"");return d?d===u.root?d+g:d+"/"+g:g}(0,r)},parse:function(r){e(r);var o={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return o;var u,d=r.charCodeAt(0),g=d===47;g?(o.root="/",u=1):u=0;for(var h=-1,p=0,E=-1,b=!0,A=r.length-1,T=0;A>=u;--A)if((d=r.charCodeAt(A))!==47)E===-1&&(b=!1,E=A+1),d===46?h===-1?h=A:T!==1&&(T=1):h!==-1&&(T=-1);else if(!b){p=A+1;break}return h===-1||E===-1||T===0||T===1&&h===E-1&&h===p+1?E!==-1&&(o.base=o.name=p===0&&g?r.slice(1,E):r.slice(p,E)):(p===0&&g?(o.name=r.slice(1,h),o.base=r.slice(1,E)):(o.name=r.slice(p,h),o.base=r.slice(p,E)),o.ext=r.slice(h,E)),p>0?o.dir=r.slice(0,p-1):g&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,f.exports=n},3515:function(f,e,t){f.exports=r;var n=t(9826).EventEmitter;function r(){n.call(this)}t(7523)(r,n),r.Readable=t(2762),r.Writable=t(3726),r.Duplex=t(884),r.Transform=t(6756),r.PassThrough=t(1390),r.finished=t(2896),r.pipeline=t(8460),r.Stream=r,r.prototype.pipe=function(o,u){var d=this;function g(C){o.writable&&o.write(C)===!1&&d.pause&&d.pause()}function h(){d.readable&&d.resume&&d.resume()}d.on("data",g),o.on("drain",h),o._isStdio||u&&u.end===!1||(d.on("end",E),d.on("close",b));var p=!1;function E(){p||(p=!0,o.end())}function b(){p||(p=!0,typeof o.destroy=="function"&&o.destroy())}function A(C){if(T(),n.listenerCount(this,"error")===0)throw C}function T(){d.removeListener("data",g),o.removeListener("drain",h),d.removeListener("end",E),d.removeListener("close",b),d.removeListener("error",A),o.removeListener("error",A),d.removeListener("end",T),d.removeListener("close",T),o.removeListener("close",T)}return d.on("error",A),o.on("error",A),d.on("end",T),d.on("close",T),o.on("close",T),o.emit("pipe",d),o}},1602:function(f){var e={};function t(r,o,u){u||(u=Error);var d=function(g){var h,p;function E(b,A,T){return g.call(this,function(C,O,te){return typeof o=="string"?o:o(C,O,te)}(b,A,T))||this}return p=g,(h=E).prototype=Object.create(p.prototype),h.prototype.constructor=h,h.__proto__=p,E}(u);d.prototype.name=u.name,d.prototype.code=r,e[r]=d}function n(r,o){if(Array.isArray(r)){var u=r.length;return r=r.map(function(d){return String(d)}),u>2?"one of ".concat(o," ").concat(r.slice(0,u-1).join(", "),", or ")+r[u-1]:u===2?"one of ".concat(o," ").concat(r[0]," or ").concat(r[1]):"of ".concat(o," ").concat(r[0])}return"of ".concat(o," ").concat(String(r))}t("ERR_INVALID_OPT_VALUE",function(r,o){return'The value "'+o+'" is invalid for option "'+r+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(r,o,u){var d,g,h,p,E;if(typeof o=="string"&&(g="not ",o.substr(0,4)===g)?(d="must not be",o=o.replace(/^not /,"")):d="must be",function(A,T,C){return(C===void 0||C>A.length)&&(C=A.length),A.substring(C-9,C)===T}(r," argument"))h="The ".concat(r," ").concat(d," ").concat(n(o,"type"));else{var b=(typeof E!="number"&&(E=0),E+1>(p=r).length||p.indexOf(".",E)===-1?"argument":"property");h='The "'.concat(r,'" ').concat(b," ").concat(d," ").concat(n(o,"type"))}return h+". Received type ".concat(typeof u)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),f.exports.codes=e},884:function(f,e,t){var n=Object.keys||function(b){var A=[];for(var T in b)A.push(T);return A};f.exports=h;var r=t(2762),o=t(3726);t(7523)(h,r);for(var u=n(o.prototype),d=0;d<u.length;d++){var g=u[d];h.prototype[g]||(h.prototype[g]=o.prototype[g])}function h(b){if(!(this instanceof h))return new h(b);r.call(this,b),o.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||process.nextTick(E,this)}function E(b){b.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}})},1390:function(f,e,t){f.exports=r;var n=t(6756);function r(o){if(!(this instanceof r))return new r(o);n.call(this,o)}t(7523)(r,n),r.prototype._transform=function(o,u,d){d(null,o)}},2762:function(f,e,t){var n;f.exports=ee,ee.ReadableState=k,t(9826).EventEmitter;var r,o=function(Ce,Le){return Ce.listeners(Le).length},u=t(2611),d=t(44).Buffer,g=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h=t(7199);r=h&&h.debuglog?h.debuglog("stream"):function(){};var p,E,b,A=t(3791),T=t(2410),C=t(1749).getHighWaterMark,O=t(1602).codes,te=O.ERR_INVALID_ARG_TYPE,de=O.ERR_STREAM_PUSH_AFTER_EOF,fe=O.ERR_METHOD_NOT_IMPLEMENTED,De=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(7523)(ee,u);var Oe=T.errorOrDestroy,q=["error","close","destroy","pause","resume"];function k(Ce,Le,yt){n=n||t(884),Ce=Ce||{},typeof yt!="boolean"&&(yt=Le instanceof n),this.objectMode=!!Ce.objectMode,yt&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode),this.highWaterMark=C(this,Ce,"readableHighWaterMark",yt),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(p||(p=t(748).StringDecoder),this.decoder=new p(Ce.encoding),this.encoding=Ce.encoding)}function ee(Ce){if(n=n||t(884),!(this instanceof ee))return new ee(Ce);var Le=this instanceof n;this._readableState=new k(Ce,this,Le),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),u.call(this)}function Ee(Ce,Le,yt,Y,W){r("readableAddChunk",Le);var L,j=Ce._readableState;if(Le===null)j.reading=!1,function(me,ae){if(r("onEofChunk"),!ae.ended){if(ae.decoder){var Ue=ae.decoder.end();Ue&&Ue.length&&(ae.buffer.push(Ue),ae.length+=ae.objectMode?1:Ue.length)}ae.ended=!0,ae.sync?be(me):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,_t(me)))}}(Ce,j);else if(W||(L=function(me,ae){var Ue,rt;return rt=ae,d.isBuffer(rt)||rt instanceof g||typeof ae=="string"||ae===void 0||me.objectMode||(Ue=new te("chunk",["string","Buffer","Uint8Array"],ae)),Ue}(j,Le)),L)Oe(Ce,L);else if(j.objectMode||Le&&Le.length>0)if(typeof Le=="string"||j.objectMode||Object.getPrototypeOf(Le)===d.prototype||(Le=function(me){return d.from(me)}(Le)),Y)j.endEmitted?Oe(Ce,new De):P(Ce,j,Le,!0);else if(j.ended)Oe(Ce,new de);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!yt?(Le=j.decoder.write(Le),j.objectMode||Le.length!==0?P(Ce,j,Le,!1):Ye(Ce,j)):P(Ce,j,Le,!1)}else Y||(j.reading=!1,Ye(Ce,j));return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function P(Ce,Le,yt,Y){Le.flowing&&Le.length===0&&!Le.sync?(Le.awaitDrain=0,Ce.emit("data",yt)):(Le.length+=Le.objectMode?1:yt.length,Y?Le.buffer.unshift(yt):Le.buffer.push(yt),Le.needReadable&&be(Ce)),Ye(Ce,Le)}Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ce){this._readableState&&(this._readableState.destroyed=Ce)}}),ee.prototype.destroy=T.destroy,ee.prototype._undestroy=T.undestroy,ee.prototype._destroy=function(Ce,Le){Le(Ce)},ee.prototype.push=function(Ce,Le){var yt,Y=this._readableState;return Y.objectMode?yt=!0:typeof Ce=="string"&&((Le=Le||Y.defaultEncoding)!==Y.encoding&&(Ce=d.from(Ce,Le),Le=""),yt=!0),Ee(this,Ce,Le,!1,yt)},ee.prototype.unshift=function(Ce){return Ee(this,Ce,null,!0,!1)},ee.prototype.isPaused=function(){return this._readableState.flowing===!1},ee.prototype.setEncoding=function(Ce){p||(p=t(748).StringDecoder);var Le=new p(Ce);this._readableState.decoder=Le,this._readableState.encoding=this._readableState.decoder.encoding;for(var yt=this._readableState.buffer.head,Y="";yt!==null;)Y+=Le.write(yt.data),yt=yt.next;return this._readableState.buffer.clear(),Y!==""&&this._readableState.buffer.push(Y),this._readableState.length=Y.length,this};var xe=1073741824;function Ve(Ce,Le){return Ce<=0||Le.length===0&&Le.ended?0:Le.objectMode?1:Ce!=Ce?Le.flowing&&Le.length?Le.buffer.head.data.length:Le.length:(Ce>Le.highWaterMark&&(Le.highWaterMark=function(yt){return yt>=xe?yt=xe:(yt--,yt|=yt>>>1,yt|=yt>>>2,yt|=yt>>>4,yt|=yt>>>8,yt|=yt>>>16,yt++),yt}(Ce)),Ce<=Le.length?Ce:Le.ended?Le.length:(Le.needReadable=!0,0))}function be(Ce){var Le=Ce._readableState;r("emitReadable",Le.needReadable,Le.emittedReadable),Le.needReadable=!1,Le.emittedReadable||(r("emitReadable",Le.flowing),Le.emittedReadable=!0,process.nextTick(_t,Ce))}function _t(Ce){var Le=Ce._readableState;r("emitReadable_",Le.destroyed,Le.length,Le.ended),Le.destroyed||!Le.length&&!Le.ended||(Ce.emit("readable"),Le.emittedReadable=!1),Le.needReadable=!Le.flowing&&!Le.ended&&Le.length<=Le.highWaterMark,Pe(Ce)}function Ye(Ce,Le){Le.readingMore||(Le.readingMore=!0,process.nextTick(_e,Ce,Le))}function _e(Ce,Le){for(;!Le.reading&&!Le.ended&&(Le.length<Le.highWaterMark||Le.flowing&&Le.length===0);){var yt=Le.length;if(r("maybeReadMore read 0"),Ce.read(0),yt===Le.length)break}Le.readingMore=!1}function He(Ce){var Le=Ce._readableState;Le.readableListening=Ce.listenerCount("readable")>0,Le.resumeScheduled&&!Le.paused?Le.flowing=!0:Ce.listenerCount("data")>0&&Ce.resume()}function nt(Ce){r("readable nexttick read 0"),Ce.read(0)}function ut(Ce,Le){r("resume",Le.reading),Le.reading||Ce.read(0),Le.resumeScheduled=!1,Ce.emit("resume"),Pe(Ce),Le.flowing&&!Le.reading&&Ce.read(0)}function Pe(Ce){var Le=Ce._readableState;for(r("flow",Le.flowing);Le.flowing&&Ce.read()!==null;);}function Be(Ce,Le){return Le.length===0?null:(Le.objectMode?yt=Le.buffer.shift():!Ce||Ce>=Le.length?(yt=Le.decoder?Le.buffer.join(""):Le.buffer.length===1?Le.buffer.first():Le.buffer.concat(Le.length),Le.buffer.clear()):yt=Le.buffer.consume(Ce,Le.decoder),yt);var yt}function it(Ce){var Le=Ce._readableState;r("endReadable",Le.endEmitted),Le.endEmitted||(Le.ended=!0,process.nextTick(gt,Le,Ce))}function gt(Ce,Le){if(r("endReadableNT",Ce.endEmitted,Ce.length),!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,Le.readable=!1,Le.emit("end"),Ce.autoDestroy)){var yt=Le._writableState;(!yt||yt.autoDestroy&&yt.finished)&&Le.destroy()}}function zt(Ce,Le){for(var yt=0,Y=Ce.length;yt<Y;yt++)if(Ce[yt]===Le)return yt;return-1}ee.prototype.read=function(Ce){r("read",Ce),Ce=parseInt(Ce,10);var Le=this._readableState,yt=Ce;if(Ce!==0&&(Le.emittedReadable=!1),Ce===0&&Le.needReadable&&((Le.highWaterMark!==0?Le.length>=Le.highWaterMark:Le.length>0)||Le.ended))return r("read: emitReadable",Le.length,Le.ended),Le.length===0&&Le.ended?it(this):be(this),null;if((Ce=Ve(Ce,Le))===0&&Le.ended)return Le.length===0&&it(this),null;var Y,W=Le.needReadable;return r("need readable",W),(Le.length===0||Le.length-Ce<Le.highWaterMark)&&r("length less than watermark",W=!0),Le.ended||Le.reading?r("reading or ended",W=!1):W&&(r("do read"),Le.reading=!0,Le.sync=!0,Le.length===0&&(Le.needReadable=!0),this._read(Le.highWaterMark),Le.sync=!1,Le.reading||(Ce=Ve(yt,Le))),(Y=Ce>0?Be(Ce,Le):null)===null?(Le.needReadable=Le.length<=Le.highWaterMark,Ce=0):(Le.length-=Ce,Le.awaitDrain=0),Le.length===0&&(Le.ended||(Le.needReadable=!0),yt!==Ce&&Le.ended&&it(this)),Y!==null&&this.emit("data",Y),Y},ee.prototype._read=function(Ce){Oe(this,new fe("_read()"))},ee.prototype.pipe=function(Ce,Le){var yt=this,Y=this._readableState;switch(Y.pipesCount){case 0:Y.pipes=Ce;break;case 1:Y.pipes=[Y.pipes,Ce];break;default:Y.pipes.push(Ce)}Y.pipesCount+=1,r("pipe count=%d opts=%j",Y.pipesCount,Le);var W=Le&&Le.end===!1||Ce===process.stdout||Ce===process.stderr?$e:L;function L(){r("onend"),Ce.end()}Y.endEmitted?process.nextTick(W):yt.once("end",W),Ce.on("unpipe",function Ge(Je,Et){r("onunpipe"),Je===yt&&Et&&Et.hasUnpiped===!1&&(Et.hasUnpiped=!0,r("cleanup"),Ce.removeListener("close",rt),Ce.removeListener("finish",qe),Ce.removeListener("drain",j),Ce.removeListener("error",Ue),Ce.removeListener("unpipe",Ge),yt.removeListener("end",L),yt.removeListener("end",$e),yt.removeListener("data",ae),me=!0,!Y.awaitDrain||Ce._writableState&&!Ce._writableState.needDrain||j())});var j=function(Ge){return function(){var Je=Ge._readableState;r("pipeOnDrain",Je.awaitDrain),Je.awaitDrain&&Je.awaitDrain--,Je.awaitDrain===0&&o(Ge,"data")&&(Je.flowing=!0,Pe(Ge))}}(yt);Ce.on("drain",j);var me=!1;function ae(Ge){r("ondata");var Je=Ce.write(Ge);r("dest.write",Je),Je===!1&&((Y.pipesCount===1&&Y.pipes===Ce||Y.pipesCount>1&&zt(Y.pipes,Ce)!==-1)&&!me&&(r("false write response, pause",Y.awaitDrain),Y.awaitDrain++),yt.pause())}function Ue(Ge){r("onerror",Ge),$e(),Ce.removeListener("error",Ue),o(Ce,"error")===0&&Oe(Ce,Ge)}function rt(){Ce.removeListener("finish",qe),$e()}function qe(){r("onfinish"),Ce.removeListener("close",rt),$e()}function $e(){r("unpipe"),yt.unpipe(Ce)}return yt.on("data",ae),function(Ge,Je,Et){if(typeof Ge.prependListener=="function")return Ge.prependListener(Je,Et);Ge._events&&Ge._events[Je]?Array.isArray(Ge._events[Je])?Ge._events[Je].unshift(Et):Ge._events[Je]=[Et,Ge._events[Je]]:Ge.on(Je,Et)}(Ce,"error",Ue),Ce.once("close",rt),Ce.once("finish",qe),Ce.emit("pipe",yt),Y.flowing||(r("pipe resume"),yt.resume()),Ce},ee.prototype.unpipe=function(Ce){var Le=this._readableState,yt={hasUnpiped:!1};if(Le.pipesCount===0)return this;if(Le.pipesCount===1)return Ce&&Ce!==Le.pipes||(Ce||(Ce=Le.pipes),Le.pipes=null,Le.pipesCount=0,Le.flowing=!1,Ce&&Ce.emit("unpipe",this,yt)),this;if(!Ce){var Y=Le.pipes,W=Le.pipesCount;Le.pipes=null,Le.pipesCount=0,Le.flowing=!1;for(var L=0;L<W;L++)Y[L].emit("unpipe",this,{hasUnpiped:!1});return this}var j=zt(Le.pipes,Ce);return j===-1||(Le.pipes.splice(j,1),Le.pipesCount-=1,Le.pipesCount===1&&(Le.pipes=Le.pipes[0]),Ce.emit("unpipe",this,yt)),this},ee.prototype.on=function(Ce,Le){var yt=u.prototype.on.call(this,Ce,Le),Y=this._readableState;return Ce==="data"?(Y.readableListening=this.listenerCount("readable")>0,Y.flowing!==!1&&this.resume()):Ce==="readable"&&(Y.endEmitted||Y.readableListening||(Y.readableListening=Y.needReadable=!0,Y.flowing=!1,Y.emittedReadable=!1,r("on readable",Y.length,Y.reading),Y.length?be(this):Y.reading||process.nextTick(nt,this))),yt},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(Ce,Le){var yt=u.prototype.removeListener.call(this,Ce,Le);return Ce==="readable"&&process.nextTick(He,this),yt},ee.prototype.removeAllListeners=function(Ce){var Le=u.prototype.removeAllListeners.apply(this,arguments);return Ce!=="readable"&&Ce!==void 0||process.nextTick(He,this),Le},ee.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(r("resume"),Ce.flowing=!Ce.readableListening,function(Le,yt){yt.resumeScheduled||(yt.resumeScheduled=!0,process.nextTick(ut,Le,yt))}(this,Ce)),Ce.paused=!1,this},ee.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ee.prototype.wrap=function(Ce){var Le=this,yt=this._readableState,Y=!1;for(var W in Ce.on("end",function(){if(r("wrapped end"),yt.decoder&&!yt.ended){var j=yt.decoder.end();j&&j.length&&Le.push(j)}Le.push(null)}),Ce.on("data",function(j){r("wrapped data"),yt.decoder&&(j=yt.decoder.write(j)),yt.objectMode&&j==null||(yt.objectMode||j&&j.length)&&(Le.push(j)||(Y=!0,Ce.pause()))}),Ce)this[W]===void 0&&typeof Ce[W]=="function"&&(this[W]=function(j){return function(){return Ce[j].apply(Ce,arguments)}}(W));for(var L=0;L<q.length;L++)Ce.on(q[L],this.emit.bind(this,q[L]));return this._read=function(j){r("wrapped _read",j),Y&&(Y=!1,Ce.resume())},this},typeof Symbol=="function"&&(ee.prototype[Symbol.asyncIterator]=function(){return E===void 0&&(E=t(5857)),E(this)}),Object.defineProperty(ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ce){this._readableState&&(this._readableState.flowing=Ce)}}),ee._fromList=Be,Object.defineProperty(ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ee.from=function(Ce,Le){return b===void 0&&(b=t(3411)),b(ee,Ce,Le)})},6756:function(f,e,t){f.exports=p;var n=t(1602).codes,r=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,u=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=n.ERR_TRANSFORM_WITH_LENGTH_0,g=t(884);function h(A,T){var C=this._transformState;C.transforming=!1;var O=C.writecb;if(O===null)return this.emit("error",new o);C.writechunk=null,C.writecb=null,T!=null&&this.push(T),O(A);var te=this._readableState;te.reading=!1,(te.needReadable||te.length<te.highWaterMark)&&this._read(te.highWaterMark)}function p(A){if(!(this instanceof p))return new p(A);g.call(this,A),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,A&&(typeof A.transform=="function"&&(this._transform=A.transform),typeof A.flush=="function"&&(this._flush=A.flush)),this.on("prefinish",E)}function E(){var A=this;typeof this._flush!="function"||this._readableState.destroyed?b(this,null,null):this._flush(function(T,C){b(A,T,C)})}function b(A,T,C){if(T)return A.emit("error",T);if(C!=null&&A.push(C),A._writableState.length)throw new d;if(A._transformState.transforming)throw new u;return A.push(null)}t(7523)(p,g),p.prototype.push=function(A,T){return this._transformState.needTransform=!1,g.prototype.push.call(this,A,T)},p.prototype._transform=function(A,T,C){C(new r("_transform()"))},p.prototype._write=function(A,T,C){var O=this._transformState;if(O.writecb=C,O.writechunk=A,O.writeencoding=T,!O.transforming){var te=this._readableState;(O.needTransform||te.needReadable||te.length<te.highWaterMark)&&this._read(te.highWaterMark)}},p.prototype._read=function(A){var T=this._transformState;T.writechunk===null||T.transforming?T.needTransform=!0:(T.transforming=!0,this._transform(T.writechunk,T.writeencoding,T.afterTransform))},p.prototype._destroy=function(A,T){g.prototype._destroy.call(this,A,function(C){T(C)})}},3726:function(f,e,t){function n(Ye){var _e=this;this.next=null,this.entry=null,this.finish=function(){(function(He,nt){var ut=He.entry;for(He.entry=null;ut;){var Pe=ut.callback;nt.pendingcb--,Pe(void 0),ut=ut.next}nt.corkedRequestsFree.next=He})(_e,Ye)}}var r;f.exports=ee,ee.WritableState=k;var o,u={deprecate:t(9e3)},d=t(2611),g=t(44).Buffer,h=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p=t(2410),E=t(1749).getHighWaterMark,b=t(1602).codes,A=b.ERR_INVALID_ARG_TYPE,T=b.ERR_METHOD_NOT_IMPLEMENTED,C=b.ERR_MULTIPLE_CALLBACK,O=b.ERR_STREAM_CANNOT_PIPE,te=b.ERR_STREAM_DESTROYED,de=b.ERR_STREAM_NULL_VALUES,fe=b.ERR_STREAM_WRITE_AFTER_END,De=b.ERR_UNKNOWN_ENCODING,Oe=p.errorOrDestroy;function q(){}function k(Ye,_e,He){r=r||t(884),Ye=Ye||{},typeof He!="boolean"&&(He=_e instanceof r),this.objectMode=!!Ye.objectMode,He&&(this.objectMode=this.objectMode||!!Ye.writableObjectMode),this.highWaterMark=E(this,Ye,"writableHighWaterMark",He),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var nt=Ye.decodeStrings===!1;this.decodeStrings=!nt,this.defaultEncoding=Ye.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ut){(function(Pe,Be){var it=Pe._writableState,gt=it.sync,zt=it.writecb;if(typeof zt!="function")throw new C;if(function(Le){Le.writing=!1,Le.writecb=null,Le.length-=Le.writelen,Le.writelen=0}(it),Be)(function(Le,yt,Y,W,L){--yt.pendingcb,Y?(process.nextTick(L,W),process.nextTick(_t,Le,yt),Le._writableState.errorEmitted=!0,Oe(Le,W)):(L(W),Le._writableState.errorEmitted=!0,Oe(Le,W),_t(Le,yt))})(Pe,it,gt,Be,zt);else{var Ce=Ve(it)||Pe.destroyed;Ce||it.corked||it.bufferProcessing||!it.bufferedRequest||xe(Pe,it),gt?process.nextTick(P,Pe,it,Ce,zt):P(Pe,it,Ce,zt)}})(_e,ut)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ye.emitClose!==!1,this.autoDestroy=!!Ye.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function ee(Ye){var _e=this instanceof(r=r||t(884));if(!_e&&!o.call(ee,this))return new ee(Ye);this._writableState=new k(Ye,this,_e),this.writable=!0,Ye&&(typeof Ye.write=="function"&&(this._write=Ye.write),typeof Ye.writev=="function"&&(this._writev=Ye.writev),typeof Ye.destroy=="function"&&(this._destroy=Ye.destroy),typeof Ye.final=="function"&&(this._final=Ye.final)),d.call(this)}function Ee(Ye,_e,He,nt,ut,Pe,Be){_e.writelen=nt,_e.writecb=Be,_e.writing=!0,_e.sync=!0,_e.destroyed?_e.onwrite(new te("write")):He?Ye._writev(ut,_e.onwrite):Ye._write(ut,Pe,_e.onwrite),_e.sync=!1}function P(Ye,_e,He,nt){He||function(ut,Pe){Pe.length===0&&Pe.needDrain&&(Pe.needDrain=!1,ut.emit("drain"))}(Ye,_e),_e.pendingcb--,nt(),_t(Ye,_e)}function xe(Ye,_e){_e.bufferProcessing=!0;var He=_e.bufferedRequest;if(Ye._writev&&He&&He.next){var nt=_e.bufferedRequestCount,ut=new Array(nt),Pe=_e.corkedRequestsFree;Pe.entry=He;for(var Be=0,it=!0;He;)ut[Be]=He,He.isBuf||(it=!1),He=He.next,Be+=1;ut.allBuffers=it,Ee(Ye,_e,!0,_e.length,ut,"",Pe.finish),_e.pendingcb++,_e.lastBufferedRequest=null,Pe.next?(_e.corkedRequestsFree=Pe.next,Pe.next=null):_e.corkedRequestsFree=new n(_e),_e.bufferedRequestCount=0}else{for(;He;){var gt=He.chunk,zt=He.encoding,Ce=He.callback;if(Ee(Ye,_e,!1,_e.objectMode?1:gt.length,gt,zt,Ce),He=He.next,_e.bufferedRequestCount--,_e.writing)break}He===null&&(_e.lastBufferedRequest=null)}_e.bufferedRequest=He,_e.bufferProcessing=!1}function Ve(Ye){return Ye.ending&&Ye.length===0&&Ye.bufferedRequest===null&&!Ye.finished&&!Ye.writing}function be(Ye,_e){Ye._final(function(He){_e.pendingcb--,He&&Oe(Ye,He),_e.prefinished=!0,Ye.emit("prefinish"),_t(Ye,_e)})}function _t(Ye,_e){var He=Ve(_e);if(He&&(function(ut,Pe){Pe.prefinished||Pe.finalCalled||(typeof ut._final!="function"||Pe.destroyed?(Pe.prefinished=!0,ut.emit("prefinish")):(Pe.pendingcb++,Pe.finalCalled=!0,process.nextTick(be,ut,Pe)))}(Ye,_e),_e.pendingcb===0&&(_e.finished=!0,Ye.emit("finish"),_e.autoDestroy))){var nt=Ye._readableState;(!nt||nt.autoDestroy&&nt.endEmitted)&&Ye.destroy()}return He}t(7523)(ee,d),k.prototype.getBuffer=function(){for(var Ye=this.bufferedRequest,_e=[];Ye;)_e.push(Ye),Ye=Ye.next;return _e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(ee,Symbol.hasInstance,{value:function(Ye){return!!o.call(this,Ye)||this===ee&&Ye&&Ye._writableState instanceof k}})):o=function(Ye){return Ye instanceof this},ee.prototype.pipe=function(){Oe(this,new O)},ee.prototype.write=function(Ye,_e,He){var nt,ut=this._writableState,Pe=!1,Be=!ut.objectMode&&(nt=Ye,g.isBuffer(nt)||nt instanceof h);return Be&&!g.isBuffer(Ye)&&(Ye=function(it){return g.from(it)}(Ye)),typeof _e=="function"&&(He=_e,_e=null),Be?_e="buffer":_e||(_e=ut.defaultEncoding),typeof He!="function"&&(He=q),ut.ending?function(it,gt){var zt=new fe;Oe(it,zt),process.nextTick(gt,zt)}(this,He):(Be||function(it,gt,zt,Ce){var Le;return zt===null?Le=new de:typeof zt=="string"||gt.objectMode||(Le=new A("chunk",["string","Buffer"],zt)),!Le||(Oe(it,Le),process.nextTick(Ce,Le),!1)}(this,ut,Ye,He))&&(ut.pendingcb++,Pe=function(it,gt,zt,Ce,Le,yt){if(!zt){var Y=function(me,ae,Ue){return me.objectMode||me.decodeStrings===!1||typeof ae!="string"||(ae=g.from(ae,Ue)),ae}(gt,Ce,Le);Ce!==Y&&(zt=!0,Le="buffer",Ce=Y)}var W=gt.objectMode?1:Ce.length;gt.length+=W;var L=gt.length<gt.highWaterMark;if(L||(gt.needDrain=!0),gt.writing||gt.corked){var j=gt.lastBufferedRequest;gt.lastBufferedRequest={chunk:Ce,encoding:Le,isBuf:zt,callback:yt,next:null},j?j.next=gt.lastBufferedRequest:gt.bufferedRequest=gt.lastBufferedRequest,gt.bufferedRequestCount+=1}else Ee(it,gt,!1,W,Ce,Le,yt);return L}(this,ut,Be,Ye,_e,He)),Pe},ee.prototype.cork=function(){this._writableState.corked++},ee.prototype.uncork=function(){var Ye=this._writableState;Ye.corked&&(Ye.corked--,Ye.writing||Ye.corked||Ye.bufferProcessing||!Ye.bufferedRequest||xe(this,Ye))},ee.prototype.setDefaultEncoding=function(Ye){if(typeof Ye=="string"&&(Ye=Ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ye+"").toLowerCase())>-1))throw new De(Ye);return this._writableState.defaultEncoding=Ye,this},Object.defineProperty(ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ee.prototype._write=function(Ye,_e,He){He(new T("_write()"))},ee.prototype._writev=null,ee.prototype.end=function(Ye,_e,He){var nt=this._writableState;return typeof Ye=="function"?(He=Ye,Ye=null,_e=null):typeof _e=="function"&&(He=_e,_e=null),Ye!=null&&this.write(Ye,_e),nt.corked&&(nt.corked=1,this.uncork()),nt.ending||function(ut,Pe,Be){Pe.ending=!0,_t(ut,Pe),Be&&(Pe.finished?process.nextTick(Be):ut.once("finish",Be)),Pe.ended=!0,ut.writable=!1}(this,nt,He),this},Object.defineProperty(ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ye){this._writableState&&(this._writableState.destroyed=Ye)}}),ee.prototype.destroy=p.destroy,ee.prototype._undestroy=p.undestroy,ee.prototype._destroy=function(Ye,_e){_e(Ye)}},5857:function(f,e,t){var n;function r(de,fe,De){return(fe=function(Oe){var q=function(k){if(typeof k!="object"||k===null)return k;var ee=k[Symbol.toPrimitive];if(ee!==void 0){var Ee=ee.call(k,"string");if(typeof Ee!="object")return Ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(Oe);return typeof q=="symbol"?q:String(q)}(fe))in de?Object.defineProperty(de,fe,{value:De,enumerable:!0,configurable:!0,writable:!0}):de[fe]=De,de}var o=t(2896),u=Symbol("lastResolve"),d=Symbol("lastReject"),g=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),E=Symbol("handlePromise"),b=Symbol("stream");function A(de,fe){return{value:de,done:fe}}function T(de){var fe=de[u];if(fe!==null){var De=de[b].read();De!==null&&(de[p]=null,de[u]=null,de[d]=null,fe(A(De,!1)))}}function C(de){process.nextTick(T,de)}var O=Object.getPrototypeOf(function(){}),te=Object.setPrototypeOf((r(n={get stream(){return this[b]},next:function(){var de=this,fe=this[g];if(fe!==null)return Promise.reject(fe);if(this[h])return Promise.resolve(A(void 0,!0));if(this[b].destroyed)return new Promise(function(k,ee){process.nextTick(function(){de[g]?ee(de[g]):k(A(void 0,!0))})});var De,Oe=this[p];if(Oe)De=new Promise(function(k,ee){return function(Ee,P){k.then(function(){ee[h]?Ee(A(void 0,!0)):ee[E](Ee,P)},P)}}(Oe,this));else{var q=this[b].read();if(q!==null)return Promise.resolve(A(q,!1));De=new Promise(this[E])}return this[p]=De,De}},Symbol.asyncIterator,function(){return this}),r(n,"return",function(){var de=this;return new Promise(function(fe,De){de[b].destroy(null,function(Oe){Oe?De(Oe):fe(A(void 0,!0))})})}),n),O);f.exports=function(de){var fe,De=Object.create(te,(r(fe={},b,{value:de,writable:!0}),r(fe,u,{value:null,writable:!0}),r(fe,d,{value:null,writable:!0}),r(fe,g,{value:null,writable:!0}),r(fe,h,{value:de._readableState.endEmitted,writable:!0}),r(fe,E,{value:function(Oe,q){var k=De[b].read();k?(De[p]=null,De[u]=null,De[d]=null,Oe(A(k,!1))):(De[u]=Oe,De[d]=q)},writable:!0}),fe));return De[p]=null,o(de,function(Oe){if(Oe&&Oe.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=De[d];return q!==null&&(De[p]=null,De[u]=null,De[d]=null,q(Oe)),void(De[g]=Oe)}var k=De[u];k!==null&&(De[p]=null,De[u]=null,De[d]=null,k(A(void 0,!0))),De[h]=!0}),de.on("readable",C.bind(null,De)),De}},3791:function(f,e,t){function n(E,b){var A=Object.keys(E);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(E);b&&(T=T.filter(function(C){return Object.getOwnPropertyDescriptor(E,C).enumerable})),A.push.apply(A,T)}return A}function r(E){for(var b=1;b<arguments.length;b++){var A=arguments[b]!=null?arguments[b]:{};b%2?n(Object(A),!0).forEach(function(T){o(E,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(A)):n(Object(A)).forEach(function(T){Object.defineProperty(E,T,Object.getOwnPropertyDescriptor(A,T))})}return E}function o(E,b,A){return(b=d(b))in E?Object.defineProperty(E,b,{value:A,enumerable:!0,configurable:!0,writable:!0}):E[b]=A,E}function u(E,b){for(var A=0;A<b.length;A++){var T=b[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,d(T.key),T)}}function d(E){var b=function(A){if(typeof A!="object"||A===null)return A;var T=A[Symbol.toPrimitive];if(T!==void 0){var C=T.call(A,"string");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}(E);return typeof b=="symbol"?b:String(b)}var g=t(44).Buffer,h=t(3779).inspect,p=h&&h.custom||"inspect";f.exports=function(){function E(){(function(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")})(this,E),this.head=null,this.tail=null,this.length=0}var b,A;return b=E,(A=[{key:"push",value:function(T){var C={data:T,next:null};this.length>0?this.tail.next=C:this.head=C,this.tail=C,++this.length}},{key:"unshift",value:function(T){var C={data:T,next:this.head};this.length===0&&(this.tail=C),this.head=C,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var C=this.head,O=""+C.data;C=C.next;)O+=T+C.data;return O}},{key:"concat",value:function(T){if(this.length===0)return g.alloc(0);for(var C,O,te,de=g.allocUnsafe(T>>>0),fe=this.head,De=0;fe;)C=fe.data,O=de,te=De,g.prototype.copy.call(C,O,te),De+=fe.data.length,fe=fe.next;return de}},{key:"consume",value:function(T,C){var O;return T<this.head.data.length?(O=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):O=T===this.head.data.length?this.shift():C?this._getString(T):this._getBuffer(T),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var C=this.head,O=1,te=C.data;for(T-=te.length;C=C.next;){var de=C.data,fe=T>de.length?de.length:T;if(fe===de.length?te+=de:te+=de.slice(0,T),(T-=fe)==0){fe===de.length?(++O,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=de.slice(fe));break}++O}return this.length-=O,te}},{key:"_getBuffer",value:function(T){var C=g.allocUnsafe(T),O=this.head,te=1;for(O.data.copy(C),T-=O.data.length;O=O.next;){var de=O.data,fe=T>de.length?de.length:T;if(de.copy(C,C.length-T,0,fe),(T-=fe)==0){fe===de.length?(++te,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=de.slice(fe));break}++te}return this.length-=te,C}},{key:p,value:function(T,C){return h(this,r(r({},C),{},{depth:0,customInspect:!1}))}}])&&u(b.prototype,A),Object.defineProperty(b,"prototype",{writable:!1}),E}()},2410:function(f){function e(r,o){n(r,o),t(r)}function t(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function n(r,o){r.emit("error",o)}f.exports={destroy:function(r,o){var u=this,d=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return d||g?(o?o(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,r)):process.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(h){!o&&h?u._writableState?u._writableState.errorEmitted?process.nextTick(t,u):(u._writableState.errorEmitted=!0,process.nextTick(e,u,h)):process.nextTick(e,u,h):o?(process.nextTick(t,u),o(h)):process.nextTick(t,u)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,o){var u=r._readableState,d=r._writableState;u&&u.autoDestroy||d&&d.autoDestroy?r.destroy(o):r.emit("error",o)}}},2896:function(f,e,t){var n=t(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}f.exports=function o(u,d,g){if(typeof d=="function")return o(u,null,d);d||(d={}),g=function(fe){var De=!1;return function(){if(!De){De=!0;for(var Oe=arguments.length,q=new Array(Oe),k=0;k<Oe;k++)q[k]=arguments[k];fe.apply(this,q)}}}(g||r);var h=d.readable||d.readable!==!1&&u.readable,p=d.writable||d.writable!==!1&&u.writable,E=function(){u.writable||A()},b=u._writableState&&u._writableState.finished,A=function(){p=!1,b=!0,h||g.call(u)},T=u._readableState&&u._readableState.endEmitted,C=function(){h=!1,T=!0,p||g.call(u)},O=function(fe){g.call(u,fe)},te=function(){var fe;return h&&!T?(u._readableState&&u._readableState.ended||(fe=new n),g.call(u,fe)):p&&!b?(u._writableState&&u._writableState.ended||(fe=new n),g.call(u,fe)):void 0},de=function(){u.req.on("finish",A)};return function(fe){return fe.setHeader&&typeof fe.abort=="function"}(u)?(u.on("complete",A),u.on("abort",te),u.req?de():u.on("request",de)):p&&!u._writableState&&(u.on("end",E),u.on("close",E)),u.on("end",C),u.on("finish",A),d.error!==!1&&u.on("error",O),u.on("close",te),function(){u.removeListener("complete",A),u.removeListener("abort",te),u.removeListener("request",de),u.req&&u.req.removeListener("finish",A),u.removeListener("end",E),u.removeListener("close",E),u.removeListener("finish",A),u.removeListener("end",C),u.removeListener("error",O),u.removeListener("close",te)}}},3411:function(f){f.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(f,e,t){var n,r=t(1602).codes,o=r.ERR_MISSING_ARGS,u=r.ERR_STREAM_DESTROYED;function d(p){if(p)throw p}function g(p){p()}function h(p,E){return p.pipe(E)}f.exports=function(){for(var p=arguments.length,E=new Array(p),b=0;b<p;b++)E[b]=arguments[b];var A,T=function(O){return O.length?typeof O[O.length-1]!="function"?d:O.pop():d}(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new o("streams");var C=E.map(function(O,te){var de=te<E.length-1;return function(fe,De,Oe,q){q=function(Ee){var P=!1;return function(){P||(P=!0,Ee.apply(void 0,arguments))}}(q);var k=!1;fe.on("close",function(){k=!0}),n===void 0&&(n=t(2896)),n(fe,{readable:De,writable:Oe},function(Ee){if(Ee)return q(Ee);k=!0,q()});var ee=!1;return function(Ee){if(!k&&!ee)return ee=!0,function(P){return P.setHeader&&typeof P.abort=="function"}(fe)?fe.abort():typeof fe.destroy=="function"?fe.destroy():void q(Ee||new u("pipe"))}}(O,de,te>0,function(fe){A||(A=fe),fe&&C.forEach(g),de||(C.forEach(g),T(A))})});return E.reduce(h)}},1749:function(f,e,t){var n=t(1602).codes.ERR_INVALID_OPT_VALUE;f.exports={getHighWaterMark:function(r,o,u,d){var g=function(h,p,E){return h.highWaterMark!=null?h.highWaterMark:p?h[E]:null}(o,d,u);if(g!=null){if(!isFinite(g)||Math.floor(g)!==g||g<0)throw new n(d?u:"highWaterMark",g);return Math.floor(g)}return r.objectMode?16:16384}}},2611:function(f,e,t){f.exports=t(9826).EventEmitter},748:function(f,e,t){var n=t(4598).Buffer,r=n.isEncoding||function(T){switch((T=""+T)&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(T){var C;switch(this.encoding=function(O){var te=function(de){if(!de)return"utf8";for(var fe;;)switch(de){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return de;default:if(fe)return;de=(""+de).toLowerCase(),fe=!0}}(O);if(typeof te!="string"&&(n.isEncoding===r||!r(O)))throw new Error("Unknown encoding: "+O);return te||O}(T),this.encoding){case"utf16le":this.text=g,this.end=h,C=4;break;case"utf8":this.fillLast=d,C=4;break;case"base64":this.text=p,this.end=E,C=3;break;default:return this.write=b,void(this.end=A)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(C)}function u(T){return T<=127?0:T>>5==6?2:T>>4==14?3:T>>3==30?4:T>>6==2?-1:-2}function d(T){var C=this.lastTotal-this.lastNeed,O=function(te,de){if((192&de[0])!=128)return te.lastNeed=0,"";if(te.lastNeed>1&&de.length>1){if((192&de[1])!=128)return te.lastNeed=1,"";if(te.lastNeed>2&&de.length>2&&(192&de[2])!=128)return te.lastNeed=2,""}}(this,T);return O!==void 0?O:this.lastNeed<=T.length?(T.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,C,0,T.length),void(this.lastNeed-=T.length))}function g(T,C){if((T.length-C)%2==0){var O=T.toString("utf16le",C);if(O){var te=O.charCodeAt(O.length-1);if(te>=55296&&te<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",C,T.length-1)}function h(T){var C=T&&T.length?this.write(T):"";if(this.lastNeed){var O=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,O)}return C}function p(T,C){var O=(T.length-C)%3;return O===0?T.toString("base64",C):(this.lastNeed=3-O,this.lastTotal=3,O===1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",C,T.length-O))}function E(T){var C=T&&T.length?this.write(T):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function b(T){return T.toString(this.encoding)}function A(T){return T&&T.length?this.write(T):""}e.StringDecoder=o,o.prototype.write=function(T){if(T.length===0)return"";var C,O;if(this.lastNeed){if((C=this.fillLast(T))===void 0)return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<T.length?C?C+this.text(T,O):this.text(T,O):C||""},o.prototype.end=function(T){var C=T&&T.length?this.write(T):"";return this.lastNeed?C+"":C},o.prototype.text=function(T,C){var O=function(de,fe,De){var Oe=fe.length-1;if(Oe<De)return 0;var q=u(fe[Oe]);return q>=0?(q>0&&(de.lastNeed=q-1),q):--Oe<De||q===-2?0:(q=u(fe[Oe]))>=0?(q>0&&(de.lastNeed=q-2),q):--Oe<De||q===-2?0:(q=u(fe[Oe]))>=0?(q>0&&(q===2?q=0:de.lastNeed=q-3),q):0}(this,T,C);if(!this.lastNeed)return T.toString("utf8",C);this.lastTotal=O;var te=T.length-(O-this.lastNeed);return T.copy(this.lastChar,0,te),T.toString("utf8",C,te)},o.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length}},4598:function(f,e,t){var n=t(44),r=n.Buffer;function o(d,g){for(var h in d)g[h]=d[h]}function u(d,g,h){return r(d,g,h)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?f.exports=n:(o(n,e),e.Buffer=u),o(r,u),u.from=function(d,g,h){if(typeof d=="number")throw new TypeError("Argument must not be a number");return r(d,g,h)},u.alloc=function(d,g,h){if(typeof d!="number")throw new TypeError("Argument must be a number");var p=r(d);return g!==void 0?typeof h=="string"?p.fill(g,h):p.fill(g):p.fill(0),p},u.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r(d)},u.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(d)}},8571:function(f,e,t){var n;(function(r,o){var u="function",d="undefined",g="object",h="string",p="major",E="model",b="name",A="type",T="vendor",C="version",O="architecture",te="console",de="mobile",fe="tablet",De="smarttv",Oe="wearable",q="embedded",k="Amazon",ee="Apple",Ee="ASUS",P="BlackBerry",xe="Browser",Ve="Chrome",be="Firefox",_t="Google",Ye="Huawei",_e="LG",He="Microsoft",nt="Motorola",ut="Opera",Pe="Samsung",Be="Sharp",it="Sony",gt="Xiaomi",zt="Zebra",Ce="Facebook",Le="Chromium OS",yt="Mac OS",Y=function(Je){for(var Et={},ct=0;ct<Je.length;ct++)Et[Je[ct].toUpperCase()]=Je[ct];return Et},W=function(Je,Et){return typeof Je===h&&L(Et).indexOf(L(Je))!==-1},L=function(Je){return Je.toLowerCase()},j=function(Je,Et){if(typeof Je===h)return Je=Je.replace(/^\s\s*/,""),typeof Et===d?Je:Je.substring(0,500)},me=function(Je,Et){for(var ct,Mt,yn,tn,fn,Bt,kn=0;kn<Et.length&&!fn;){var Wn=Et[kn],ta=Et[kn+1];for(ct=Mt=0;ct<Wn.length&&!fn&&Wn[ct];)if(fn=Wn[ct++].exec(Je))for(yn=0;yn<ta.length;yn++)Bt=fn[++Mt],typeof(tn=ta[yn])===g&&tn.length>0?tn.length===2?typeof tn[1]==u?this[tn[0]]=tn[1].call(this,Bt):this[tn[0]]=tn[1]:tn.length===3?typeof tn[1]!==u||tn[1].exec&&tn[1].test?this[tn[0]]=Bt?Bt.replace(tn[1],tn[2]):o:this[tn[0]]=Bt?tn[1].call(this,Bt,tn[2]):o:tn.length===4&&(this[tn[0]]=Bt?tn[3].call(this,Bt.replace(tn[1],tn[2])):o):this[tn]=Bt||o;kn+=2}},ae=function(Je,Et){for(var ct in Et)if(typeof Et[ct]===g&&Et[ct].length>0){for(var Mt=0;Mt<Et[ct].length;Mt++)if(W(Et[ct][Mt],Je))return ct==="?"?o:ct}else if(W(Et[ct],Je))return ct==="?"?o:ct;return Je},Ue={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},rt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[C,[b,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[C,[b,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[b,C],[/opios[\/ ]+([\w\.]+)/i],[C,[b,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[C,[b,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[C,[b,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[C,[b,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[b,C],[/\bddg\/([\w\.]+)/i],[C,[b,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[C,[b,"UC"+xe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[C,[b,"WeChat"]],[/konqueror\/([\w\.]+)/i],[C,[b,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[C,[b,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[C,[b,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[C,[b,"Smart Lenovo "+xe]],[/(avast|avg)\/([\w\.]+)/i],[[b,/(.+)/,"$1 Secure "+xe],C],[/\bfocus\/([\w\.]+)/i],[C,[b,be+" Focus"]],[/\bopt\/([\w\.]+)/i],[C,[b,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[C,[b,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[C,[b,"Dolphin"]],[/coast\/([\w\.]+)/i],[C,[b,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[C,[b,"MIUI "+xe]],[/fxios\/([-\w\.]+)/i],[C,[b,be]],[/\bqihu|(qi?ho?o?|360)browser/i],[[b,"360 "+xe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[b,/(.+)/,"$1 "+xe],C],[/samsungbrowser\/([\w\.]+)/i],[C,[b,Pe+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[b,/_/g," "],C],[/metasr[\/ ]?([\d\.]+)/i],[C,[b,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[b,"Sogou Mobile"],C],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[b,C],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[b],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[b,Ce],C],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[b,C],[/\bgsa\/([\w\.]+) .*safari\//i],[C,[b,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[C,[b,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[C,[b,Ve+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[b,Ve+" WebView"],C],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[C,[b,"Android "+xe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[b,C],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[C,[b,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[C,b],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[b,[C,ae,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[b,C],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[b,"Netscape"],C],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[C,[b,be+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[b,C],[/(cobalt)\/([\w\.]+)/i],[b,[C,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[O,"amd64"]],[/(ia32(?=;))/i],[[O,L]],[/((?:i[346]|x)86)[;\)]/i],[[O,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[O,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[O,"armhf"]],[/windows (ce|mobile); ppc;/i],[[O,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[O,/ower/,"",L]],[/(sun4\w)[;\)]/i],[[O,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[O,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[E,[T,Pe],[A,fe]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[E,[T,Pe],[A,de]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[E,[T,ee],[A,de]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[E,[T,ee],[A,fe]],[/(macintosh);/i],[E,[T,ee]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[E,[T,Be],[A,de]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[E,[T,Ye],[A,fe]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[E,[T,Ye],[A,de]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[E,/_/g," "],[T,gt],[A,de]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[E,/_/g," "],[T,gt],[A,fe]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[E,[T,"OPPO"],[A,de]],[/\b(opd2\d{3}a?) bui/i],[E,[T,"OPPO"],[A,fe]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[E,[T,"Vivo"],[A,de]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[E,[T,"Realme"],[A,de]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[E,[T,nt],[A,de]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[E,[T,nt],[A,fe]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[E,[T,_e],[A,fe]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[E,[T,_e],[A,de]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[E,[T,"Lenovo"],[A,fe]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[E,/_/g," "],[T,"Nokia"],[A,de]],[/(pixel c)\b/i],[E,[T,_t],[A,fe]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[E,[T,_t],[A,de]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[E,[T,it],[A,de]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[E,"Xperia Tablet"],[T,it],[A,fe]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[E,[T,"OnePlus"],[A,de]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[E,[T,k],[A,fe]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[E,/(.+)/g,"Fire Phone $1"],[T,k],[A,de]],[/(playbook);[-\w\),; ]+(rim)/i],[E,T,[A,fe]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[E,[T,P],[A,de]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[E,[T,Ee],[A,fe]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[E,[T,Ee],[A,de]],[/(nexus 9)/i],[E,[T,"HTC"],[A,fe]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[E,/_/g," "],[A,de]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[E,[T,"Acer"],[A,fe]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[E,[T,"Meizu"],[A,de]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[E,[T,"Ulefone"],[A,de]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,E,[A,de]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,E,[A,fe]],[/(surface duo)/i],[E,[T,He],[A,fe]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[E,[T,"Fairphone"],[A,de]],[/(u304aa)/i],[E,[T,"AT&T"],[A,de]],[/\bsie-(\w*)/i],[E,[T,"Siemens"],[A,de]],[/\b(rct\w+) b/i],[E,[T,"RCA"],[A,fe]],[/\b(venue[\d ]{2,7}) b/i],[E,[T,"Dell"],[A,fe]],[/\b(q(?:mv|ta)\w+) b/i],[E,[T,"Verizon"],[A,fe]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[E,[T,"Barnes & Noble"],[A,fe]],[/\b(tm\d{3}\w+) b/i],[E,[T,"NuVision"],[A,fe]],[/\b(k88) b/i],[E,[T,"ZTE"],[A,fe]],[/\b(nx\d{3}j) b/i],[E,[T,"ZTE"],[A,de]],[/\b(gen\d{3}) b.+49h/i],[E,[T,"Swiss"],[A,de]],[/\b(zur\d{3}) b/i],[E,[T,"Swiss"],[A,fe]],[/\b((zeki)?tb.*\b) b/i],[E,[T,"Zeki"],[A,fe]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],E,[A,fe]],[/\b(ns-?\w{0,9}) b/i],[E,[T,"Insignia"],[A,fe]],[/\b((nxa|next)-?\w{0,9}) b/i],[E,[T,"NextBook"],[A,fe]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],E,[A,de]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],E,[A,de]],[/\b(ph-1) /i],[E,[T,"Essential"],[A,de]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[E,[T,"Envizen"],[A,fe]],[/\b(trio[-\w\. ]+) b/i],[E,[T,"MachSpeed"],[A,fe]],[/\btu_(1491) b/i],[E,[T,"Rotor"],[A,fe]],[/(shield[\w ]+) b/i],[E,[T,"Nvidia"],[A,fe]],[/(sprint) (\w+)/i],[T,E,[A,de]],[/(kin\.[onetw]{3})/i],[[E,/\./g," "],[T,He],[A,de]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[E,[T,zt],[A,fe]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[E,[T,zt],[A,de]],[/smart-tv.+(samsung)/i],[T,[A,De]],[/hbbtv.+maple;(\d+)/i],[[E,/^/,"SmartTV"],[T,Pe],[A,De]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,_e],[A,De]],[/(apple) ?tv/i],[T,[E,ee+" TV"],[A,De]],[/crkey/i],[[E,Ve+"cast"],[T,_t],[A,De]],[/droid.+aft(\w+)( bui|\))/i],[E,[T,k],[A,De]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[E,[T,Be],[A,De]],[/(bravia[\w ]+)( bui|\))/i],[E,[T,it],[A,De]],[/(mitv-\w{5}) bui/i],[E,[T,gt],[A,De]],[/Hbbtv.*(technisat) (.*);/i],[T,E,[A,De]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,j],[E,j],[A,De]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[A,De]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,E,[A,te]],[/droid.+; (shield) bui/i],[E,[T,"Nvidia"],[A,te]],[/(playstation [345portablevi]+)/i],[E,[T,it],[A,te]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[E,[T,He],[A,te]],[/((pebble))app/i],[T,E,[A,Oe]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[E,[T,ee],[A,Oe]],[/droid.+; (glass) \d/i],[E,[T,_t],[A,Oe]],[/droid.+; (wt63?0{2,3})\)/i],[E,[T,zt],[A,Oe]],[/(quest( \d| pro)?)/i],[E,[T,Ce],[A,Oe]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[A,q]],[/(aeobc)\b/i],[E,[T,k],[A,q]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[E,[A,de]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[E,[A,fe]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[A,fe]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[A,de]],[/(android[-\w\. ]{0,9});.+buil/i],[E,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[C,[b,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[C,[b,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[b,C],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[C,b]],os:[[/microsoft (windows) (vista|xp)/i],[b,C],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[b,[C,ae,Ue]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[C,ae,Ue],[b,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[C,/_/g,"."],[b,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[b,yt],[C,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[C,b],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[b,C],[/\(bb(10);/i],[C,[b,P]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[C,[b,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[C,[b,be+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[C,[b,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[C,[b,"watchOS"]],[/crkey\/([\d\.]+)/i],[C,[b,Ve+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[b,Le],C],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[b,C],[/(sunos) ?([\w\.\d]*)/i],[[b,"Solaris"],C],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[b,C]]},qe=function(Je,Et){if(typeof Je===g&&(Et=Je,Je=o),!(this instanceof qe))return new qe(Je,Et).getResult();var ct=typeof r!==d&&r.navigator?r.navigator:o,Mt=Je||(ct&&ct.userAgent?ct.userAgent:""),yn=ct&&ct.userAgentData?ct.userAgentData:o,tn=Et?function(Bt,kn){var Wn={};for(var ta in Bt)kn[ta]&&kn[ta].length%2==0?Wn[ta]=kn[ta].concat(Bt[ta]):Wn[ta]=Bt[ta];return Wn}(rt,Et):rt,fn=ct&&ct.userAgent==Mt;return this.getBrowser=function(){var Bt,kn={};return kn[b]=o,kn[C]=o,me.call(kn,Mt,tn.browser),kn[p]=typeof(Bt=kn[C])===h?Bt.replace(/[^\d\.]/g,"").split(".")[0]:o,fn&&ct&&ct.brave&&typeof ct.brave.isBrave==u&&(kn[b]="Brave"),kn},this.getCPU=function(){var Bt={};return Bt[O]=o,me.call(Bt,Mt,tn.cpu),Bt},this.getDevice=function(){var Bt={};return Bt[T]=o,Bt[E]=o,Bt[A]=o,me.call(Bt,Mt,tn.device),fn&&!Bt[A]&&yn&&yn.mobile&&(Bt[A]=de),fn&&Bt[E]=="Macintosh"&&ct&&typeof ct.standalone!==d&&ct.maxTouchPoints&&ct.maxTouchPoints>2&&(Bt[E]="iPad",Bt[A]=fe),Bt},this.getEngine=function(){var Bt={};return Bt[b]=o,Bt[C]=o,me.call(Bt,Mt,tn.engine),Bt},this.getOS=function(){var Bt={};return Bt[b]=o,Bt[C]=o,me.call(Bt,Mt,tn.os),fn&&!Bt[b]&&yn&&yn.platform&&yn.platform!="Unknown"&&(Bt[b]=yn.platform.replace(/chrome os/i,Le).replace(/macos/i,yt)),Bt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Bt){return Mt=typeof Bt===h&&Bt.length>500?j(Bt,500):Bt,this},this.setUA(Mt),this};qe.VERSION="1.0.38",qe.BROWSER=Y([b,C,p]),qe.CPU=Y([O]),qe.DEVICE=Y([E,T,A,te,de,De,fe,Oe,q]),qe.ENGINE=qe.OS=Y([b,C]),typeof e!==d?(f.exports&&(e=f.exports=qe),e.UAParser=qe):t.amdO?(n=(function(){return qe}).call(e,t,e,f))===o||(f.exports=n):typeof r!==d&&(r.UAParser=qe);var $e=typeof r!==d&&(r.jQuery||r.Zepto);if($e&&!$e.ua){var Ge=new qe;$e.ua=Ge.getResult(),$e.ua.get=function(){return Ge.getUA()},$e.ua.set=function(Je){Ge.setUA(Je);var Et=Ge.getResult();for(var ct in Et)$e.ua[ct]=Et[ct]}}})(typeof window=="object"?window:this)},9e3:function(f,e,t){function n(r){try{if(!t.g.localStorage)return!1}catch{return!1}var o=t.g.localStorage[r];return o!=null&&String(o).toLowerCase()==="true"}f.exports=function(r,o){if(n("noDeprecation"))return r;var u=!1;return function(){if(!u){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),u=!0}return r.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(f,e,t){t.r(e),t.d(e,{Debug:function(){return o.default},FactoryMaker:function(){return r.default},MediaPlayer:function(){return n.default}});var n=t(255),r=t(138),o=t(649),u=t(8986),d=typeof window<"u"&&window||global,g=d.dashjs;g||(g=d.dashjs={}),g.MediaPlayer=n.default,g.FactoryMaker=r.default,g.Debug=o.default,g.Version=(0,u.getVersionString)(),e.default=g},649:function(f,e,t){t.r(e);var n=t(8850),r=t(3621),o=t(138);function u(g){g=g||{};const h=this.context,p=(0,n.default)(h).getInstance(),E=g.settings,b=[];let A,T,C,O;function te(ee){return ee&&ee.bind?ee.bind(window.console):window.console.log.bind(window.console)}function de(){for(var ee=arguments.length,Ee=new Array(ee),P=0;P<ee;P++)Ee[P]=arguments[P];k(1,this,...Ee)}function fe(){for(var ee=arguments.length,Ee=new Array(ee),P=0;P<ee;P++)Ee[P]=arguments[P];k(2,this,...Ee)}function De(){for(var ee=arguments.length,Ee=new Array(ee),P=0;P<ee;P++)Ee[P]=arguments[P];k(3,this,...Ee)}function Oe(){for(var ee=arguments.length,Ee=new Array(ee),P=0;P<ee;P++)Ee[P]=arguments[P];k(4,this,...Ee)}function q(){for(var ee=arguments.length,Ee=new Array(ee),P=0;P<ee;P++)Ee[P]=arguments[P];k(5,this,...Ee)}function k(ee,Ee){let P="",xe=null;T&&(xe=new Date().getTime(),P+="["+(xe-O)+"]"),C&&Ee&&Ee.getClassName&&(P+="["+Ee.getClassName()+"]",Ee.getType&&(P+="["+Ee.getType()+"]")),P.length>0&&(P+=" ");for(var Ve=arguments.length,be=new Array(Ve>2?Ve-2:0),_t=2;_t<Ve;_t++)be[_t-2]=arguments[_t];Array.apply(null,be).forEach(function(Ye){P+=Ye+" "}),b[ee]&&E&&E.get().debug.logLevel>=ee&&b[ee](P),E&&E.get().debug.dispatchEvent&&p.trigger(r.default.LOG,{message:P,level:ee})}return A={getLogger:function(ee){return{fatal:de.bind(ee),error:fe.bind(ee),warn:De.bind(ee),info:Oe.bind(ee),debug:q.bind(ee)}},setLogTimestampVisible:function(ee){T=ee},setCalleeNameVisible:function(ee){C=ee}},T=!0,C=!0,O=new Date().getTime(),typeof window<"u"&&window.console&&(b[1]=te(window.console.error),b[2]=te(window.console.error),b[3]=te(window.console.warn),b[4]=te(window.console.info),b[5]=te(window.console.debug)),A}u.__dashjs_factory_name="Debug";const d=o.default.getSingletonFactory(u);d.LOG_LEVEL_NONE=0,d.LOG_LEVEL_FATAL=1,d.LOG_LEVEL_ERROR=2,d.LOG_LEVEL_WARNING=3,d.LOG_LEVEL_INFO=4,d.LOG_LEVEL_DEBUG=5,o.default.updateSingletonFactory(u.__dashjs_factory_name,d),e.default=d},8850:function(f,e,t){t.r(e);var n=t(138),r=t(1191);function o(){let d={};function g(b,A,T){let C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},O=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(!b)throw new Error("event type cannot be null or undefined");if(!A||typeof A!="function")throw new Error("listener must be a function: "+A);let te=C.priority||0;if(p(b,A,T)>=0)return;d[b]=d[b]||[];const de={callback:A,scope:T,priority:te,executeOnlyOnce:O};T&&T.getStreamId&&(de.streamId=T.getStreamId()),T&&T.getType&&(de.mediaType=T.getType()),C&&C.mode&&(de.mode=C.mode),d[b].some((fe,De)=>{if(fe&&te>fe.priority)return d[b].splice(De,0,de),!0})||d[b].push(de)}function h(b,A,T){if(!b||!A||!d[b])return;const C=p(b,A,T);C<0||(d[b][C]=null)}function p(b,A,T){let C=-1;return d[b]&&d[b].some((O,te)=>{if(O&&O.callback===A&&(!T||T===O.scope))return C=te,!0}),C}return{on:function(b,A,T){g(b,A,T,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{})},once:function(b,A,T){g(b,A,T,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},!0)},off:h,trigger:function(b){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!b||!d[b])return;if(A=A||{},A.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");A.type=b,T.streamId&&(A.streamId=T.streamId),T.mediaType&&(A.mediaType=T.mediaType);const C=[];d[b].filter(O=>!(!O||T.streamId&&O.streamId&&O.streamId!==T.streamId||T.mediaType&&O.mediaType&&O.mediaType!==T.mediaType||T.mode&&O.mode&&O.mode!==T.mode||!O.mode&&T.mode&&T.mode===r.default.EVENT_MODE_ON_RECEIVE)).forEach(O=>{O&&O.callback.call(O.scope,A),O.executeOnlyOnce&&C.push(O)}),C.forEach(O=>{h(b,O.callback,O.scope)})},reset:function(){d={}}}}o.__dashjs_factory_name="EventBus";const u=n.default.getSingletonFactory(o);u.EVENT_PRIORITY_LOW=0,u.EVENT_PRIORITY_HIGH=5e3,n.default.updateSingletonFactory(o.__dashjs_factory_name,u),e.default=u},138:function(f,e,t){t.r(e);const n=function(){let r,o=[];const u={},d={};function g(b,A){for(const T in o){const C=o[T];if(C.context===b&&C.name===A)return C.instance}return null}function h(b,A){return A[b]}function p(b,A,T){b in T&&(T[b]=A)}function E(b,A,T){let C;const O=b.__dashjs_factory_name,te=A[O];if(te){let de=te.instance;if(!te.override)return de.apply({context:A,factory:r},T);C=b.apply({context:A},T),de=de.apply({context:A,factory:r,parent:C},T);for(const fe in de)C.hasOwnProperty(fe)&&(C[fe]=de[fe])}else C=b.apply({context:A},T);return C.getClassName=function(){return O},C}return r={extend:function(b,A,T,C){!C[b]&&A&&(C[b]={instance:A,override:T})},getSingletonInstance:g,setSingletonInstance:function(b,A,T){for(const C in o){const O=o[C];if(O.context===b&&O.name===A)return void(o[C].instance=T)}o.push({name:A,context:b,instance:T})},deleteSingletonInstances:function(b){o=o.filter(A=>A.context!==b)},getSingletonFactory:function(b){let A=h(b.__dashjs_factory_name,u);return A||(A=function(T){let C;return T===void 0&&(T={}),{getInstance:function(){return C||(C=g(T,b.__dashjs_factory_name)),C||(C=E(b,T,arguments),o.push({name:b.__dashjs_factory_name,context:T,instance:C})),C}}},u[b.__dashjs_factory_name]=A),A},getSingletonFactoryByName:function(b){return h(b,u)},updateSingletonFactory:function(b,A){p(b,A,u)},getClassFactory:function(b){let A=h(b.__dashjs_factory_name,d);return A||(A=function(T){return T===void 0&&(T={}),{create:function(){return E(b,T,arguments)}}},d[b.__dashjs_factory_name]=A),A},getClassFactoryByName:function(b){return h(b,d)},updateClassFactory:function(b,A){p(b,A,d)}},r}();e.default=n},8261:function(f,e,t){t.r(e);var n=t(138),r=t(7263),o=t(649),u=t(5212),d=t(7568),g=t(8850),h=t(3621);function p(){let b;const A=this.context,T=(0,g.default)(A).getInstance(),C={"streaming.delay.liveDelay":h.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":h.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":h.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":h.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":h.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":h.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":h.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":h.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":h.default.SETTING_UPDATED_MIN_BITRATE},O={debug:{logLevel:o.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:u.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:u.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:u.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:u.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:u.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:u.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},...u.default.THUMBNAILS_SCHEME_ID_URIS.map(fe=>({schemeIdUri:fe}))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:u.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:u.default.TRACK_SWITCH_MODE_NEVER_REPLACE},ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:u.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[d.HTTPRequest.MPD_TYPE]:500,[d.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[d.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[d.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[d.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[d.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[d.HTTPRequest.LICENSE]:1e3,[d.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[d.HTTPRequest.MPD_TYPE]:3,[d.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[d.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[d.HTTPRequest.INIT_SEGMENT_TYPE]:3,[d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[d.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[d.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[d.HTTPRequest.LICENSE]:3,[d.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0},bolaRule:{active:!0},insufficientBufferRule:{active:!0,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1},loLPRule:{active:!1}},throughput:{averageCalculationMode:u.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:u.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:u.default.CMCD_MODE_QUERY,enabledKeys:u.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let te=r.default.clone(O);function de(fe,De,Oe){for(let q in fe)fe.hasOwnProperty(q)&&(De.hasOwnProperty(q)?typeof fe[q]!="object"||fe[q]instanceof RegExp||fe[q]instanceof Array||fe[q]===null?(De[q]=r.default.clone(fe[q]),C[Oe+q]&&T.trigger(C[Oe+q])):de(fe[q],De[q],Oe.slice()+q+"."):console.error("Settings parameter "+Oe+q+" is not supported"))}return b={get:function(){return te},update:function(fe){typeof fe=="object"&&de(fe,te,"")},reset:function(){te=r.default.clone(O)}},b}p.__dashjs_factory_name="Settings";let E=n.default.getSingletonFactory(p);e.default=E},7263:function(f,e,t){t.r(e);var n=t(3282),r=t(8571),o=t(5212);class u{static mixin(g,h,p){let E,b={};if(g)for(let A in h)h.hasOwnProperty(A)&&(E=h[A],A in g&&(g[A]===E||A in b&&b[A]===E)||(typeof g[A]=="object"&&g[A]!==null?g[A]=u.mixin(g[A],E,p):g[A]=p(E)));return g}static clone(g){if(!g||typeof g!="object")return g;if(g instanceof RegExp)return new RegExp(g);let h;if(g instanceof Array){h=[];for(let p=0,E=g.length;p<E;++p)p in g&&h.push(u.clone(g[p]))}else h={};return u.mixin(h,g,u.clone)}static addAdditionalQueryParameterToUrl(g,h){try{if(!h||h.length===0)return g;let p=g;return h.forEach(E=>{let{key:b,value:A}=E;const T=p.includes("?")?"&":"?";p+=`${T}${encodeURIComponent(b)}=${encodeURIComponent(A)}`}),p}catch{return g}}static removeQueryParameterFromUrl(g,h){if(!g||!h)return g;const p=new URL(g),E=new URLSearchParams(p.search);if(!E||E.size===0||!E.has(h))return g;E.delete(h);const b=Array.from(E.entries()).map(T=>{let[C,O]=T;return`${C}=${O}`}).join("&"),A=`${p.origin}${p.pathname}`;return b?`${A}?${b}`:A}static parseHttpHeaders(g){let h={};if(!g)return h;let p=g.trim().split(`\r
`);for(let E=0,b=p.length;E<b;E++){let A=p[E],T=A.indexOf(": ");T>0&&(h[A.substring(0,T)]=A.substring(T+2))}return h}static parseQueryParams(g){const h=[],p=new URLSearchParams(g);for(const[E,b]of p.entries())h.push({key:decodeURIComponent(E),value:decodeURIComponent(b)});return h}static generateUuid(){let g=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){const p=(g+16*Math.random())%16|0;return g=Math.floor(g/16),(h=="x"?p:3&p|8).toString(16)})}static generateHashCode(g){let h=0;if(g.length===0)return h;for(let p=0;p<g.length;p++)h=(h<<5)-h+g.charCodeAt(p),h|=0;return h}static getRelativeUrl(g,h){try{const p=new URL(g),E=new URL(h);if(p.protocol=E.protocol,p.origin!==E.origin)return h;let b=n.relative(p.pathname.substr(0,p.pathname.lastIndexOf("/")),E.pathname.substr(0,E.pathname.lastIndexOf("/")));const A=b.length===0?1:0;return b+=E.pathname.substr(E.pathname.lastIndexOf("/")+A,E.pathname.length-1),E.pathname.length<b.length?E.pathname:b}catch{return h}}static getHostFromUrl(g){try{return new URL(g).host}catch{return null}}static parseUserAgent(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const h=g===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,r.UAParser)(h)}catch{return{}}}static stringHasProtocol(g){return/(http(s?)):\/\//i.test(g)}static bufferSourceToDataView(g){return u.toDataView(g,DataView)}static bufferSourceToInt8(g){return u.toDataView(g,Uint8Array)}static uint8ArrayToString(g){return new TextDecoder("utf-8").decode(g)}static bufferSourceToHex(g){const h=u.bufferSourceToInt8(g);let p="";for(let E of h)E=E.toString(16),E.length===1&&(E="0"+E),p+=E;return p}static toDataView(g,h){const p=u.getArrayBuffer(g);let E=1;"BYTES_PER_ELEMENT"in DataView&&(E=DataView.BYTES_PER_ELEMENT);const b=((g.byteOffset||0)+g.byteLength)/E,A=(g.byteOffset||0)/E,T=Math.floor(Math.max(0,Math.min(A,b)));return new h(p,T,Math.floor(Math.min(T+Math.max(1/0,0),b))-T)}static getArrayBuffer(g){return g instanceof ArrayBuffer?g:g.buffer}static getCodecFamily(g){const{base:h,profile:p}=u._getCodecParts(g);switch(h){case"mp4a":switch(p){case"69":case"6b":case"40.34":return o.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return o.default.CODEC_FAMILIES.AAC;case"a5":return o.default.CODEC_FAMILIES.AC3;case"e6":return o.default.CODEC_FAMILIES.EC3;case"b2":return o.default.CODEC_FAMILIES.DTSX;case"a9":return o.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return o.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return o.default.CODEC_FAMILIES.HEVC;default:return h}return h}static _getCodecParts(g){const[h,...p]=g.split(".");return{base:h,profile:p.join(".")}}}e.default=u},8986:function(f,e,t){t.r(e),t.d(e,{getVersionString:function(){return r}});const n="5.0.3";function r(){return n}},8748:function(f,e,t){t.r(e),e.default=class{extend(n,r){if(!n)return;let o=!!r&&r.override,u=!!r&&r.publicOnly;for(const d in n)!n.hasOwnProperty(d)||this[d]&&!o||u&&n[d].indexOf("public_")===-1||(this[d]=n[d])}}},5734:function(f,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.QUOTA_EXCEEDED="quotaExceeded",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEEK_TARGET="seekTarget",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate"}}e.default=r},3621:function(f,e,t){t.r(e);var n=t(5734);class r extends n.default{}let o=new r;e.default=o},7252:function(f,e,t){t.r(e),e.default=class{extend(n,r){if(!n)return;let o=!!r&&r.override,u=!!r&&r.publicOnly;for(const d in n)!n.hasOwnProperty(d)||this[d]&&!o||u&&n[d].indexOf("public_")===-1||(this[d]=n[d])}}},8854:function(f,e,t){t.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(f,e,t){t.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},255:function(f,e,t){t.r(e),t.d(e,{default:function(){return zf}});class n{constructor(){this.time=null,this.verboseLevel=0}log(y,v){if(this.verboseLevel>=y){const _=typeof v=="function"?v():v;console.log(`${this.time} [${y}] ${_}`)}}}class r{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(y){const v=["foreground","underline","italics","background","flash"];for(let _=0;_<v.length;_++){const I=v[_];Object.prototype.hasOwnProperty.call(y,I)&&(this[I]=y[I])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(y){return this.foreground===y.foreground&&this.underline===y.underline&&this.italics===y.italics&&this.background===y.background&&this.flash===y.flash}copy(y){this.foreground=y.foreground,this.underline=y.underline,this.italics=y.italics,this.background=y.background,this.flash=y.flash}}class o{constructor(){this.uchar=" ",this.penState=new r}reset(){this.uchar=" ",this.penState.reset()}setChar(y,v){this.uchar=y,this.penState.copy(v)}setPenState(y){this.penState.copy(y)}equals(y){return this.uchar===y.uchar&&this.penState.equals(y.penState)}copy(y){this.uchar=y.uchar,this.penState.copy(y.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}const u=100,d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},g=function(S){return String.fromCharCode(d[S]||S)};class h{constructor(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n;this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new r;for(let v=0;v<u;v++)this.chars.push(new o);this.logger=y}equals(y){for(let v=0;v<u;v++)if(!this.chars[v].equals(y.chars[v]))return!1;return!0}copy(y){for(let v=0;v<u;v++)this.chars[v].copy(y.chars[v])}isEmpty(){let y=!0;for(let v=0;v<u;v++)if(!this.chars[v].isEmpty()){y=!1;break}return y}setCursor(y){this.pos!==y&&(this.pos=y),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=u)}moveCursor(y){const v=this.pos+y;if(y>1)for(let _=this.pos+1;_<v+1;_++)this.chars[_].setPenState(this.currPenState);this.setCursor(v)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(y){y>=144&&this.backSpace();const v=g(y);this.pos>=u?this.logger.log(0,()=>"Cannot insert "+y.toString(16)+" ("+v+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(v,this.currPenState),this.moveCursor(1))}clearFromPos(y){let v;for(v=y;v<u;v++)this.chars[v].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const y=[];let v=!0;for(let _=0;_<u;_++){const I=this.chars[_].uchar;I!==" "&&(v=!1),y.push(I)}return v?"":y.join("")}setPenStyles(y){this.currPenState.setStyles(y),this.chars[this.pos].setPenState(this.currPenState)}}const p=15;class E{constructor(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n;this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let v=0;v<p;v++)this.rows.push(new h(y));this.logger=y}reset(){for(let y=0;y<p;y++)this.rows[y].clear();this.currRow=14}equals(y){let v=!0;for(let _=0;_<p;_++)if(!this.rows[_].equals(y.rows[_])){v=!1;break}return v}copy(y){for(let v=0;v<p;v++)this.rows[v].copy(y.rows[v])}isEmpty(){let y=!0;for(let v=0;v<p;v++)if(!this.rows[v].isEmpty()){y=!1;break}return y}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(y){this.rows[this.currRow].insertChar(y)}setPen(y){this.rows[this.currRow].setPenStyles(y)}moveCursor(y){this.rows[this.currRow].moveCursor(y)}setCursor(y){this.logger.log(2,"setCursor: "+y),this.rows[this.currRow].setCursor(y)}setPAC(y){this.logger.log(2,()=>"pacData = "+JSON.stringify(y));let v=y.row-1;if(this.nrRollUpRows&&v<this.nrRollUpRows-1&&(v=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==v){for(let F=0;F<p;F++)this.rows[F].clear();const w=this.currRow+1-this.nrRollUpRows,z=this.lastOutputScreen;if(z){const F=z.rows[w].cueStartTime,x=this.logger.time;if(F!==null&&x!==null&&F<x)for(let H=0;H<this.nrRollUpRows;H++)this.rows[v-this.nrRollUpRows+H+1].copy(z.rows[w+H])}}this.currRow=v;const _=this.rows[this.currRow];if(y.indent!==null){const w=y.indent,z=Math.max(w-1,0);_.setCursor(y.indent),y.color=_.chars[z].penState.foreground}const I={foreground:y.color,underline:y.underline,italics:y.italics,background:"black",flash:!1};this.setPen(I)}setBkgData(y){this.logger.log(2,()=>"bkgData = "+JSON.stringify(y)),this.backSpace(),this.setPen(y),this.insertChar(32)}setRollUpRows(y){this.nrRollUpRows=y}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const y=this.currRow+1-this.nrRollUpRows,v=this.rows.splice(y,1)[0];v.clear(),this.rows.splice(this.currRow,0,v),this.logger.log(2,"Rolling up")}getDisplayText(y){y=y||!1;const v=[];let _="",I=-1;for(let w=0;w<p;w++){const z=this.rows[w].getTextString();z&&(I=w+1,y?v.push("Row "+I+": '"+z+"'"):v.push(z.trim()))}return v.length>0&&(_=y?"["+v.join(" | ")+"]":v.join(`
`)),_}getTextAndFormat(){return this.rows}}class b{constructor(y,v){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n;this.chNr=y,this.outputFilter=v,this.mode=null,this.displayedMemory=new E(_),this.nonDisplayedMemory=new E(_),this.lastOutputScreen=new E(_),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=_,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var y,v;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),(v=(y=this.outputFilter)===null||y===void 0?void 0:y.reset)===null||v===void 0||v.call(y),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}setPAC(y){this.writeScreen.setPAC(y)}setBkgData(y){this.writeScreen.setBkgData(y)}setMode(y){y!==this.mode&&(this.mode=y,this.logger.log(2,()=>"MODE="+y),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=y)}insertChars(y){for(let _=0;_<y.length;_++)this.writeScreen.insertChar(y[_]);const v=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>v+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(y){this.logger.log(2,"RU("+y+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(y)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const y=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=y,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(y){this.logger.log(2,"TO("+y+") - Tab Offset"),this.writeScreen.moveCursor(y)}ccMIDROW(y){const v={flash:!1};if(v.underline=y%2==1,v.italics=y>=46,v.italics)v.foreground="white";else{const _=Math.floor(y/2)-16,I=["white","green","blue","cyan","red","yellow","magenta"];v.foreground=I[_]}this.logger.log(2,"MIDROW: "+JSON.stringify(v)),this.writeScreen.setPen(v)}outputDataUpdate(){let y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];const v=this.logger.time;v!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,v,this.lastOutputScreen),y&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:v):this.cueStartTime=v,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(y){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,y,this.displayedMemory),this.cueStartTime=y))}}const A=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function T(S,y,v){return v.a===S&&v.b===y}const C=function(S){const y=[];for(let v=0;v<S.length;v++)y.push(S[v].toString(16));return y},O={17:2,18:4,21:6,22:8,23:10,19:13,20:15},te={25:2,26:4,29:6,30:8,31:10,27:13,28:15},de={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},fe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function De(S,y,v){v.a=S,v.b=y}class Oe{constructor(y,v,_){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const I=this.logger=new n;this.channels=[null,new b(y,v,I),new b(y+1,_,I)]}addData(y,v){this.lastTime=y,this.logger.time=y;for(let _=0;_<v.length;_+=2){const I=127&v[_],w=127&v[_+1];let z=!1,F=null;if(this.lastTime!==null&&(y=this.lastTime+.5*_*1001/3e4,this.logger.time=y),I===0&&w===0)continue;this.logger.log(3,()=>"["+C([v[_],v[_+1]])+"] -> ("+C([I,w])+")");const x=this.cmdHistory;if(I>=16&&I<=31){if(T(I,w,x)){De(null,null,x),this.logger.log(3,()=>"Repeated command ("+C([I,w])+") is dropped");continue}De(I,w,this.cmdHistory),z=this.parseCmd(I,w),z||(z=this.parseMidrow(I,w)),z||(z=this.parsePAC(I,w)),z||(z=this.parseBackgroundAttributes(I,w))}else De(null,null,x);if(!z&&(F=this.parseChars(I,w),F.length)){const H=this.currentChannel;H&&H>0?this.channels[H].insertChars(F):this.logger.log(2,"No channel found yet. TEXT-MODE?")}z||F||this.logger.log(2,()=>"Couldn't parse cleaned data "+C([I,w])+" orig: "+C([v[_],v[_+1]]))}}parseCmd(y,v){if(!((y===20||y===28||y===21||y===29)&&v>=32&&v<=47||(y===23||y===31)&&v>=33&&v<=35))return!1;const _=y===20||y===21||y===23?1:2,I=this.channels[_];return y===20||y===21||y===28||y===29?v===32?I.ccRCL():v===33?I.ccBS():v===34?I.ccAOF():v===35?I.ccAON():v===36?I.ccDER():v===37?I.ccRU(2):v===38?I.ccRU(3):v===39?I.ccRU(4):v===40?I.ccFON():v===41?I.ccRDC():v===42?I.ccTR():v===43?I.ccRTD():v===44?I.ccEDM():v===45?I.ccCR():v===46?I.ccENM():v===47&&I.ccEOC():I.ccTO(v-32),this.currentChannel=_,!0}parseMidrow(y,v){let _=0;if((y===17||y===25)&&v>=32&&v<=47){if(_=y===17?1:2,_!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const I=this.channels[_];return!!I&&(I.ccMIDROW(v),this.logger.log(3,()=>"MIDROW ("+C([y,v])+")"),!0)}return!1}parsePAC(y,v){let _;if(!((y>=17&&y<=23||y>=25&&y<=31)&&v>=64&&v<=127||(y===16||y===24)&&v>=64&&v<=95))return!1;const I=y<=23?1:2;_=v>=64&&v<=95?I===1?de[y]:fe[y]:I===1?O[y]:te[y];const w=this.channels[I];return!!w&&(w.setPAC(this.interpretPAC(_,v)),this.currentChannel=I,!0)}interpretPAC(y,v){let _;const I={color:null,italics:!1,indent:null,underline:!1,row:y};return _=v>95?v-96:v-64,I.underline=!(1&~_),_<=13?I.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(_/2)]:_<=15?(I.italics=!0,I.color="white"):I.indent=4*Math.floor((_-16)/2),I}parseChars(y,v){let _,I=[],w=null;if(y>=25?(_=2,w=y-8):(_=1,w=y),w>=17&&w<=19){let z;z=w===17?v+80:w===18?v+112:v+144,this.logger.log(2,()=>"Special char '"+g(z)+"' in channel "+_),I=[z]}else y>=32&&y<=127&&(I=v===0?[y]:[y,v]);return I&&this.logger.log(3,()=>"Char codes =  "+C(I).join(",")),I}parseBackgroundAttributes(y,v){if(!((y===16||y===24)&&v>=32&&v<=47||(y===23||y===31)&&v>=45&&v<=47))return!1;let _;const I={};y===16||y===24?(_=Math.floor((v-32)/2),I.background=A[_],v%2==1&&(I.background=I.background+"_semi")):v===45?I.background="transparent":(I.foreground="black",v===47&&(I.underline=!0));const w=y<=23?1:2;return this.channels[w].setBkgData(I),!0}reset(){for(let y=0;y<Object.keys(this.channels).length;y++){const v=this.channels[y];v&&v.reset()}De(null,null,this.cmdHistory)}cueSplitAtTime(y){for(let v=0;v<this.channels.length;v++){const _=this.channels[v];_&&_.cueSplitAtTime(y)}}}var q=t(5212),k=t(8854),ee={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},Ee=t(8850),P=t(3621),xe=t(138),Ve=t(649),be=t(1191);function _t(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w,z,F,x,H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$,ce,Te;function ge(){K(),ne=!1,D=0,M=0,se=0,$=!1,oe=!0,Ae=!1,ce=!1,Q=NaN,re=NaN,x&&(y.off(P.default.DATA_UPDATE_COMPLETED,ot,v),y.off(P.default.MANIFEST_UPDATED,rn,v),y.off(P.default.STREAMS_COMPOSED,Qt,v),y.off(be.default.PLAYBACK_ENDED,Gt,v),y.off(be.default.STREAM_INITIALIZING,et,v),y.off(be.default.REPRESENTATION_SWITCH,Ct,v),y.off(be.default.BUFFER_LEVEL_STATE_CHANGED,Xt,v),lt(),x.removeEventListener("canplay",qt),x.removeEventListener("canplaythrough",Kt),x.removeEventListener("play",In),x.removeEventListener("waiting",Lt),x.removeEventListener("playing",gn),x.removeEventListener("pause",vn),x.removeEventListener("error",dn),x.removeEventListener("seeking",Cn),x.removeEventListener("seeked",Nn),x.removeEventListener("timeupdate",Ke),x.removeEventListener("progress",bt),x.removeEventListener("ratechange",ht),x.removeEventListener("loadedmetadata",St),x.removeEventListener("loadeddata",ln),x.removeEventListener("stalled",an),x.removeEventListener("ended",Sn),x.removeEventListener("volumechange",ft)),G=null,x=null,B=null,Z=null}function ve(){return parseFloat((Me(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)-J()).toFixed(5))}function Me(pt){const ke=pt||B;return ke.start+ke.duration}function ze(){let pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];B&&x&&x.getElement()?(pt&&Z&&ye(J()),x.play()):ne=!0}function K(){B&&x&&x.pause()}function X(pt){let ke=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];B&&x&&x.getElement()&&pt!==(isNaN(Q)?x.getTime():Q)&&(U=Qe===!0,U||(Q=pt),_.info("Requesting seek to time: "+pt+(U?" (internal)":"")),Z&&Tt&&ye(pt),x.setCurrentTime(pt,ke))}function Se(){if(!B||!x||!Z)return;const pt=I&&I.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO,ke=z.getCurrentDVRInfo(pt);return ke&&ke.range?ke.range.end:0}function ye(pt){const ke=new Date(H.getClientReferenceTime()),Qe=F.getRegularPeriods()[0];D=H.calcPresentationTimeFromWallTime(ke,Qe)-pt}function J(){return B&&x?x.getTime():null}function ue(){return B&&x?x.isPaused():null}function he(){return B&&x?x.isSeeking():null}function le(){return B&&x?x.isStalled():null}function Ie(){return B&&x?x.getPlaybackRate():null}function we(){return B&&x?x.getEnded():null}function Fe(){return Z}function je(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(ue()||!Z||x.getReadyState()===0||he()||$)return;pt||(pt=I.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO);const ke=J(),Qe=function(Tt,Ze){const Ut=z.getCurrentDVRInfo(Ze),Zt=Ut?Ut.range:null;let _n;return Zt?(_n=Tt>Zt.end?Math.max(Zt.end-D,Zt.start):Tt>0&&Tt+.25<Zt.start&&Math.abs(Tt-Zt.start)<31536e4?Ae?Math.max(Zt.end-D,Zt.start):Zt.start:Tt,_n):NaN}(ke,pt);!isNaN(Qe)&&Qe!==ke&&!he()&&(le()||V||x.getReadyState()===1)&&(_.debug(`UpdateCurrentTime: Seek to actual time: ${Qe} from currentTime: ${ke}`),X(Qe,!1,!1))}function at(){G===null&&(G=setInterval(()=>{(function(){if(y.trigger(P.default.WALLCLOCK_TIME_UPDATED,{isDynamic:Z,time:new Date}),Fe()){const pt=Date.now();(isNaN(re)||pt>re+Te.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(I.addDVRMetric(),ue()?function(){const ke=Date.now();(!ie||ke>ie+500)&&(ie=ke,Ke())}():je(),re=pt)}})()},Te.get().streaming.wallclockTimeUpdateInterval))}function lt(){clearInterval(G),G=null}function ot(pt){const ke=pt.currentRepresentation,Qe=ke?ke.mediaInfo.streamInfo:null;Qe!==null&&B.id===Qe.id&&(B=Qe)}function qt(){y.trigger(P.default.CAN_PLAY)}function Kt(){y.trigger(P.default.CAN_PLAY_THROUGH)}function Xt(pt){pt.streamId===I.getActiveStreamInfo().id&&(V=pt.state===ee.BUFFER_EMPTY,Te.get().streaming.buffer.setStallState&&x.setStallState(pt.mediaType,pt.state===ee.BUFFER_EMPTY))}function In(){_.info("Native video element event: play"),je(),at(),y.trigger(P.default.PLAYBACK_STARTED,{startTime:J()})}function Lt(){_.info("Native video element event: waiting"),y.trigger(P.default.PLAYBACK_WAITING,{playingTime:J()})}function gn(){_.info("Native video element event: playing"),U=!1,y.trigger(P.default.PLAYBACK_PLAYING,{playingTime:J()})}function vn(){_.info("Native video element event: pause"),y.trigger(P.default.PLAYBACK_PAUSED,{ended:we()})}function Cn(){if(U)return;let pt=J();isNaN(Q)||Q===pt||(pt=Q),Q=NaN,_.info("Seeking to: "+pt),at(),y.trigger(P.default.PLAYBACK_SEEKING,{seekTime:pt,streamId:B.id})}function Nn(){_.info("Native video element event: seeked"),U=!1,y.trigger(P.default.PLAYBACK_SEEKED)}function Ke(){B&&y.trigger(P.default.PLAYBACK_TIME_UPDATED,{timeToEnd:ve(),time:J(),streamId:B.id})}function bt(){y.trigger(P.default.PLAYBACK_PROGRESS,{streamId:B.id})}function ht(){const pt=Ie();_.info("Native video element event: ratechange: ",pt),y.trigger(P.default.PLAYBACK_RATE_CHANGED,{playbackRate:pt})}function St(){_.info("Native video element event: loadedmetadata"),y.trigger(P.default.PLAYBACK_METADATA_LOADED),at()}function ln(){_.info("Native video element event: loadeddata"),y.trigger(P.default.PLAYBACK_LOADED_DATA)}function Sn(){_.info("Native video element event: ended"),K(),lt();const pt=I?I.getActiveStreamInfo():null;pt&&y.trigger(P.default.PLAYBACK_ENDED,{isLast:pt.isLast})}function ft(){y.trigger(P.default.PLAYBACK_VOLUME_CHANGED)}function Gt(pt){if(G&&pt.isLast){_.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const ke=pt.seekTime?pt.seekTime:Me();x.setCurrentTime(ke),K(),lt()}}function dn(pt){const ke=pt.target||pt.srcElement;y.trigger(P.default.PLAYBACK_ERROR,{error:ke.error})}function $t(){Z=!1}function an(pt){y.trigger(P.default.PLAYBACK_STALLED,{e:pt})}function et(pt){var ke;(ke=pt.mediaInfo)&&ke.supplementalProperties&&ke.supplementalProperties.find(Qe=>Qe.schemeIdUri===q.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME)&&(_.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ae=!0)}function Ct(pt){const ke=I.getActiveStreamInfo();pt&&ke&&pt.currentRepresentation&&pt.streamId&&pt.streamId===ke.id&&pt.mediaType&&(pt.mediaType===q.default.VIDEO||pt.mediaType===q.default.AUDIO)&&(oe=pt.currentRepresentation.availabilityTimeComplete,Ae=!oe,Ae&&!ce&&(ce=!0))}function rn(){$=!0}function Qt(){$=!1}return v={computeAndSetLiveDelay:function(pt,ke){let Qe,Tt,Ze;const Ut=!isNaN(pt)&&isFinite(pt)?pt:NaN;let Zt=F.getSuggestedPresentationDelay();const _n=w.getServiceDescriptionSettings();return Qe=isNaN(Te.get().streaming.delay.liveDelay)?Te.get().streaming.delay.liveDelayFragmentCount===null||isNaN(Te.get().streaming.delay.liveDelayFragmentCount)||isNaN(Ut)?_n&&!isNaN(_n.liveDelay)&&_n.liveDelay>0?_n.liveDelay:Te.get().streaming.delay.useSuggestedPresentationDelay===!0&&Zt!==null&&!isNaN(Zt)&&Zt>0?Zt:isNaN(Ut)?ke&&!isNaN(ke.minBufferTime)?4*ke.minBufferTime:4*B.manifestInfo.minBufferTime:4*Ut:Ut*Te.get().streaming.delay.liveDelayFragmentCount:Te.get().streaming.delay.liveDelay,Ze=F.getAvailabilityStartTime(),Ze!==null&&(se=Ze),Tt=ke&&ke.dvrWindowSize>0?Math.min(Qe,ke.dvrWindowSize):Qe,D=Tt,M=Tt,Tt},getAvailabilityStartTime:function(){return se},getBufferLevel:function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ke=null;return I.getActiveStreamProcessors().forEach(Qe=>{if(!pt||pt.length===0||pt.indexOf(Qe.getType())===-1){const Tt=Qe.getBufferLevel();ke=ke===null?Tt:Math.min(ke,Tt)}}),ke},getCurrentLiveLatency:function(){if(!Z||isNaN(se))return NaN;let pt=J();if(isNaN(pt)||pt===0)return 0;const ke=new Date().getTime()+1e3*H.getClientTimeOffset();return Math.max(((ke-se-1e3*pt)/1e3).toFixed(3),0)},getEnded:we,getInitialCatchupModeActivated:function(){return ce},getIsDynamic:Fe,getIsManifestUpdateInProgress:function(){return $},getLiveDelay:function(){return D},getLowLatencyModeEnabled:function(){return Ae},getOriginalLiveDelay:function(){return M},getPlaybackRate:Ie,getPlaybackStalled:function(){return V},getPlayedRanges:function(){return B&&x?x.getPlayedRanges():null},getStreamController:function(){return I},getStreamEndTime:Me,getTime:J,getTimeToStreamEnd:ve,initialize:function(pt,ke){B=pt,ke!==!0&&(x.addEventListener("canplay",qt),x.addEventListener("canplaythrough",Kt),x.addEventListener("play",In),x.addEventListener("waiting",Lt),x.addEventListener("playing",gn),x.addEventListener("pause",vn),x.addEventListener("error",dn),x.addEventListener("seeking",Cn),x.addEventListener("seeked",Nn),x.addEventListener("timeupdate",Ke),x.addEventListener("progress",bt),x.addEventListener("ratechange",ht),x.addEventListener("loadedmetadata",St),x.addEventListener("loadeddata",ln),x.addEventListener("stalled",an),x.addEventListener("ended",Sn),x.addEventListener("volumechange",ft),Z=B.manifestInfo.isDynamic,V=!1,U=!1,y.on(P.default.DATA_UPDATE_COMPLETED,ot,v),y.on(P.default.MANIFEST_UPDATED,rn,v),y.on(P.default.STREAMS_COMPOSED,Qt,v),y.on(be.default.PLAYBACK_ENDED,Gt,v,{priority:Ee.default.EVENT_PRIORITY_HIGH}),y.on(be.default.STREAM_INITIALIZING,et,v),y.on(be.default.REPRESENTATION_SWITCH,Ct,v),y.on(be.default.BUFFER_LEVEL_STATE_CHANGED,Xt,v),y.on(be.default.DYNAMIC_TO_STATIC,$t,v),ne&&(ne=!1,ze()))},isPaused:ue,isProgressing:function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;return new Promise(ke=>{let Qe=-1,Tt=null;const Ze=Zt=>{clearTimeout(Tt),Tt=null,y.off(be.default.PLAYBACK_TIME_UPDATED,Ut,v),ke(Zt)},Ut=Zt=>{Qe<0?Qe=Zt.time:Zt.time>Qe+.1&&Ze(!0)};Tt=setTimeout(()=>{Ze(!1)},pt),y.on(be.default.PLAYBACK_TIME_UPDATED,Ut,v)})},isSeeking:he,isStalled:le,pause:K,play:ze,reset:ge,seek:X,seekToCurrentLive:function(){let pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],ke=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const Tt=Se();Tt!==0&&X(Tt-D,pt,ke,Qe)},seekToOriginalLive:function(){let pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],ke=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const Tt=Se();Tt!==0&&(D=M,X(Tt-D,pt,ke,Qe))},setConfig:function(pt){pt&&(pt.streamController&&(I=pt.streamController),pt.serviceDescriptionController&&(w=pt.serviceDescriptionController),pt.dashMetrics&&(z=pt.dashMetrics),pt.adapter&&(F=pt.adapter),pt.videoModel&&(x=pt.videoModel),pt.timelineConverter&&(H=pt.timelineConverter),pt.settings&&(Te=pt.settings))},updateCurrentTime:je},_=(0,Ve.default)(S).getInstance().getLogger(v),ge(),v}_t.__dashjs_factory_name="PlaybackController";var Ye=xe.default.getSingletonFactory(_t),_e=t(7568);class He{constructor(y){this.action=He.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=y||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===_e.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(y){this.type=y&&y.init?_e.HTTPRequest.INIT_SEGMENT_TYPE:_e.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=y&&y.url?y.url:null,this.range=y&&y.range?y.range.start+"-"+y.range.end:null,this.mediaType=y&&y.mediaType?y.mediaType:null,this.representation=y&&y.representation?y.representation:null}}He.ACTION_DOWNLOAD="download",He.ACTION_COMPLETE="complete";var nt=He;const ut="loading",Pe="executed",Be="failed";function it(S){const y=(S=S||{}).eventBus,v=S.events,_=S.dashMetrics,I=S.fragmentLoader,w=S.debug,z=S.streamInfo,F=S.type;let x,H,G,D;function M(U){return!!U&&function(V){let $=!1;return V.some(ce=>{if(Te=U,ge=ce,!isNaN(Te.index)&&Te.startTime===ge.startTime&&Te.adaptationIndex===ge.adaptationIndex&&Te.type===ge.type||function(ve,Me){return ve.representation.id===Me.representation.id}(U,ce)||function(ve,Me){return ve.action===nt.ACTION_COMPLETE&&ve.action===Me.action}(U,ce))return $=!0,$;var Te,ge}),$}(G)}function B(U){return isNaN(U.duration)?.25:Math.min(U.duration/8,.5)}function Z(U){G=G.filter(V=>{const $=B(V);return isNaN(V.startTime)||U!==void 0&&V.startTime>=U-$})}function ne(U,V){V<=U+.5||(G=G.filter($=>{const ce=B($);return isNaN($.startTime)||$.startTime>=V-ce||isNaN($.duration)||$.startTime+$.duration<=U+ce}))}function ie(U,V,$){for(let ce=U.length-1;ce>=0;ce--){const Te=U[ce],ge=Te.startTime,ve=ge+Te.duration;if($=isNaN($)?B(Te):$,!isNaN(ge)&&!isNaN(ve)&&V+$>=ge&&V-$<ve||isNaN(ge)&&isNaN(V))return Te}return null}function re(U,V){_.addSchedulingInfo(U,V),_.addRequestsQueue(U.mediaType,D,G)}function se(U){U.sender===I&&(D.splice(D.indexOf(U.request),1),U.response&&!U.error&&G.push(U.request),re(U.request,U.error?Be:Pe),y.trigger(v.FRAGMENT_LOADING_COMPLETED,{request:U.request,response:U.response,error:U.error,sender:this},{streamId:z.id,mediaType:F}))}function oe(U){U.sender===I&&y.trigger(v.FRAGMENT_LOADING_PROGRESS,{request:U.request,response:U.response,error:U.error,sender:this},{streamId:z.id,mediaType:F})}function Ae(U){U.sender===I&&y.trigger(v.FRAGMENT_LOADING_ABANDONED,{request:U.request},{streamId:z.id,mediaType:F})}function Q(){G=[],D=[],I&&I.resetInitialSettings()}return x={abortRequests:function(){H.debug("abort requests"),I.abort(),D=[]},executeRequest:function(U){U.action===nt.ACTION_DOWNLOAD?(re(U,ut),D.push(U),function(V){y.trigger(v.FRAGMENT_LOADING_STARTED,{request:V},{streamId:z.id,mediaType:F}),I.load(V)}(U)):H.warn("Unknown request action.")},getRequests:function(U){const V=U?U.state instanceof Array?U.state:[U.state]:[];let $=[];return V.forEach(ce=>{const Te=function(ge){let ve;switch(ge){case ut:ve=D;break;case Pe:ve=G;break;default:ve=[]}return ve}(ce);$=$.concat(function(ge,ve){return ve.hasOwnProperty("time")?[ie(ge,ve.time,ve.threshold)]:ge.filter(Me=>{for(const ze in ve)if(ze!=="state"&&ve.hasOwnProperty(ze)&&Me[ze]!=ve[ze])return!1;return!0})}(Te,U))}),$},getStreamId:function(){return z.id},getType:function(){return F},isFragmentLoaded:M,isFragmentLoadedOrPending:function(U){let V,$=!1,ce=0;if($=M(U),!$)for(ce=0;ce<D.length;ce++)V=D[ce],U.url===V.url&&U.startTime===V.startTime&&($=!0);return $},removeExecutedRequestsAfterTime:function(U){G=G.filter(V=>isNaN(V.startTime)||U!==void 0&&V.startTime<U)},removeExecutedRequestsBeforeTime:Z,reset:function(){y.off(v.LOADING_COMPLETED,se,this),y.off(v.LOADING_DATA_PROGRESS,oe,this),y.off(v.LOADING_ABANDONED,Ae,this),I&&I.reset(),Q()},resetInitialSettings:Q,syncExecutedRequestsWithBufferedRange:function(U,V){if(!U||U.length===0)return void Z();let $=0;for(let ce=0,Te=U.length;ce<Te;ce++)ne($,U.start(ce)),$=U.end(ce);V>0&&ne($,V)}},H=w.getLogger(x),Q(),y.on(v.LOADING_COMPLETED,se,x),y.on(v.LOADING_DATA_PROGRESS,oe,x),y.on(v.LOADING_ABANDONED,Ae,x),x}it.__dashjs_factory_name="FragmentModel";const gt=xe.default.getClassFactory(it);gt.FRAGMENT_MODEL_LOADING=ut,gt.FRAGMENT_MODEL_EXECUTED=Pe,gt.FRAGMENT_MODEL_CANCELED="canceled",gt.FRAGMENT_MODEL_FAILED=Be,xe.default.updateClassFactory(it.__dashjs_factory_name,gt);var zt=gt,Ce=t(1944),Le=t(8748);class yt extends Le.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var Y=new yt,W=t(8261);function L(S){const y=this.context,v=(0,W.default)(y).getInstance(),_=S.textController,I=S.eventBus;let w,z,F,x,H,G,D=[],M=[],B=!1,Z=S.mediaSource,ne=null;function ie(ge){return ge.mimeType+';codecs="'+ge.codecs+'"'}function re(ge){return x=_.getTextSourceBuffer(ge),Promise.resolve()}function se(){if(typeof x.addEventListener=="function")try{x.addEventListener("updateend",$,!1),x.addEventListener("error",ce,!1),x.addEventListener("abort",ce,!1)}catch{G=setInterval($,50)}else G=setInterval($,50)}function oe(){try{typeof x.removeEventListener=="function"&&(x.removeEventListener("updateend",$,!1),x.removeEventListener("error",ce,!1),x.removeEventListener("abort",ce,!1)),clearInterval(G)}catch(ge){F.error(ge)}}function Ae(ge){return new Promise(ve=>{x&&v.get().streaming.buffer.useAppendWindow?Te(()=>{try{if(!x)return void ve();let Me=Z.duration,ze=0;ge&&!isNaN(ge.start)&&!isNaN(ge.duration)&&isFinite(ge.duration)&&(Me=ge.start+ge.duration),ge&&!isNaN(ge.start)&&(ze=ge.start),x.appendWindowEnd===Me&&x.appendWindowStart===ze||(x.appendWindowStart=0,x.appendWindowEnd=Me+.01,x.appendWindowStart=Math.max(ze-.1,0),F.debug(`Updated append window for ${H.type}. Set start to ${x.appendWindowStart} and end to ${x.appendWindowEnd}`)),ve()}catch{F.warn("Failed to set append window"),ve()}}):ve()})}function Q(ge){return new Promise(ve=>{x?Te(()=>{try{x.timestampOffset===ge||isNaN(ge)||(x.timestampOffset=ge,F.debug(`Set MSE timestamp offset to ${ge}`)),ve()}catch{ve()}}):ve()})}function U(){if(!B&&M.length>0){B=!0;const ge=M[0];M.splice(0,1);const ve=function(){B=!1,M.length>0&&U.call(this),ge&&ge.data&&ge.data.segmentType&&ge.data.segmentType!==_e.HTTPRequest.INIT_SEGMENT_TYPE&&delete ge.data.bytes,ge.promise.resolve({chunk:ge.data})};try{if(ne=ge.request,ge.data.bytes.byteLength===0)ve.call(this);else{try{F.debug(`Appending ${ge.data.segmentType} from period ${ge.data.streamId} to buffer. Request URL: ${ge.request.url}, Representation: ID: ${ge.data.representation.id}, bitrate: ${ge.data.representation.bitrateInKbit}`)}catch{}x.appendBuffer?x.appendBuffer(ge.data.bytes):x.append(ge.data.bytes,ge.data),Te(ve.bind(this))}}catch(Me){F.fatal('SourceBuffer append failed "'+Me+'"'),M.length>0?U():B=!1,delete ge.data.bytes,ge.promise.reject({chunk:ge.data,error:new Ce.default(Me.code,Me.message)})}}}function V(){D.length>0&&!x.updating&&(D.shift()(),V())}function $(){x.updating||V()}function ce(ge){const ve=ge.target||{};(function(Me,ze){let K=ze||{};I.trigger(Me,K,{streamId:H.streamInfo.id,mediaType:z})})(P.default.SOURCE_BUFFER_ERROR,{error:ve,lastRequestAppended:ne})}function Te(ge){try{D.push(ge),x.updating||V()}catch(ve){F.error(ve)}}return w={abort:function(){return new Promise(ge=>{try{M=[],Z.readyState==="open"?Te(()=>{try{x&&x.abort(),ge()}catch{ge()}}):(x&&x.setTextTrack&&Z.readyState==="ended"&&x.abort(),ge())}catch{ge()}})},abortBeforeAppend:function(){return new Promise(ge=>{Te(()=>{const ve=x.appendWindowStart,Me=x.appendWindowEnd;x&&(x.abort(),x.appendWindowStart=ve,x.appendWindowEnd=Me),ge()})})},append:function(ge){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((Me,ze)=>{ge?(M.push({data:ge,promise:{resolve:Me,reject:ze},request:ve}),Te(U.bind(this))):ze({chunk:ge,error:new Ce.default(Y.APPEND_ERROR_CODE,Y.APPEND_ERROR_MESSAGE)})})},changeType:function(ge){const ve=ie(ge);return new Promise(Me=>{Te(()=>{x.changeType&&(F.debug(`Changing SourceBuffer codec to ${ve}`),x.changeType(ve)),Me()})})},getAllBufferRanges:function(){try{return x.buffered}catch(ge){return F.error("getAllBufferRanges exception: "+ge.message),null}},getBuffer:function(){return x},getType:function(){return z},initializeForFirstUse:function(ge,ve){H=ge;const Me=ge.streamInfo;z=H.type;const ze=ve?ie(ve):ge.codec;try{if(ze.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return re(Me);x=Z.addSourceBuffer(ze),se();const K=[];return K.push(Ae(H.streamInfo)),ve&&ve.mseTimeOffset!==void 0&&K.push(Q(ve.mseTimeOffset)),Promise.all(K)}catch(K){return H.type==q.default.TEXT&&!H.isFragmented||ze.indexOf('codecs="stpp')!==-1||ze.indexOf('codecs="vtt')!==-1||ze.indexOf("text/vtt")!==-1?re(Me):Promise.reject(K)}},initializeForStreamSwitch:function(ge,ve,Me){H=ge,z=H.type,function(ze){x=ze.getBuffer()}(Me),se()},remove:function(ge){return new Promise((ve,Me)=>{const ze=ge.start,K=ge.end;ze>=0&&K>ze?Te(function(){try{x.remove(ze,K),Te(function(){ve({from:ze,to:K,unintended:!1}),ge.resolve&&ge.resolve()})}catch(X){Me({from:ze,to:K,unintended:!1,error:new Ce.default(Y.REMOVE_ERROR_CODE,Y.REMOVE_ERROR_MESSAGE)}),ge.reject&&ge.reject(X)}}):ve()})},removeEventListeners:oe,reset:function(){if(x){try{D=[],oe(),B=!1,M=[],x.getClassName&&x.getClassName()==="TextSourceBuffer"||(F.debug("Removing sourcebuffer from media source"),Z.removeSourceBuffer(x))}catch{}x=null}ne=null},updateAppendWindow:Ae,updateTimestampOffset:Q},F=(0,Ve.default)(y).getInstance().getLogger(w),w}L.__dashjs_factory_name="SourceBufferSink";var j=xe.default.getClassFactory(L);function me(S){const y=this.context;let v,_,I,w=[],z=S;function F(x,H){return w=w.filter(G=>!((isNaN(H)||G.start<H)&&(isNaN(x)||G.end>x))),Promise.resolve()}return v={getAllBufferRanges:function(){let x=[];for(let G=0;G<w.length;G++){let D=w[G];x.length===0||D.start>x[x.length-1].end?x.push({start:D.start,end:D.end}):x[x.length-1].end=D.end}const H={start:function(G){return x[G].start},end:function(G){return x[G].end}};return Object.defineProperty(H,"length",{get:function(){return x.length}}),H},append:function(x){return x.segmentType!=="InitializationSegment"?(w.push(x),w.sort(function(H,G){return H.start-G.start}),I=null):I=x,_.debug("PreBufferSink appended chunk s: "+x.start+"; e: "+x.end),z&&z({chunk:x}),Promise.resolve()},remove:F,abort:function(){return Promise.resolve()},discharge:function(x,H){const G=function(D,M){return w.filter(B=>(isNaN(M)||B.start<M)&&(isNaN(D)||B.end>D))}(x,H);return I&&(G.push(I),I=null),F(x,H),G},reset:function(){w=[],I=null,z=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(x){x()},getBuffer:function(){return this}},_=(0,Ve.default)(y).getInstance().getLogger(v),v}me.__dashjs_factory_name="PreBufferSink";var ae=xe.default.getClassFactory(me);function Ue(){let S={};return{save:function(y){const v=y.streamId,_=y.representation.id;S[v]=S[v]||{},S[v][_]=y},extract:function(y,v){return S&&S[y]&&S[y][v]?S[y][v]:null},reset:function(){S={}}}}Ue.__dashjs_factory_name="InitCache";var rt=xe.default.getSingletonFactory(Ue);const qe=.01,$e="BufferController";function Ge(S){const y=(S=S||{}).capabilities,v=this.context,_=(0,Ee.default)(v).getInstance(),I=S.fragmentModel,w=S.playbackController,z=S.representationController,F=S.settings,x=S.streamInfo,H=S.textController,G=S.type;let D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$,ce,Te,ge,ve,Me,ze,K;function X(et){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((rn,Qt)=>{ie=et,oe&&Ct&&typeof oe.discharge=="function"?(Ae=oe,Se(Ct).then(()=>{rn()}).catch(pt=>{Qt(pt)})):rn()})}function Se(et){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],rn=arguments.length>2?arguments[2]:void 0;return new Promise((Qt,pt)=>{ve&&et?ie?(Q=!1,function(ke,Qe,Tt){return new Promise(Ze=>{oe=j(v).create({mediaSource:ie,textController:H,eventBus:_}),function(Ut,Zt,_n){const Ln=z.getCurrentRepresentation();return Zt&&Zt[G]&&(G===q.default.VIDEO||G===q.default.AUDIO)?function(xn,Ta,Wa,tr){oe.initializeForStreamSwitch(xn,Ta,Wa[G]);const Zn=[];return Zn.push(oe.abortBeforeAppend()),Zn.push(ht()),Zn.push(we(Ta,tr)),Ta&&Ta.mseTimeOffset!==void 0&&Zn.push(bt(Ta)),Promise.allSettled(Zn)}(Ut,Ln,Zt,_n):function(xn,Ta){return oe.initializeForFirstUse(xn,Ta)}(Ut,Ln)}(ke,Qe,Tt).then(()=>bt(z.getCurrentRepresentation())).then(()=>{Ze(oe)}).catch(Ut=>{M.warn("Caught error on create SourceBuffer: "+Ut),Ze(oe)})})}(et,Ct,rn).then(ke=>{Qt(ke)}).catch(ke=>{pt(ke)})):(Q=!0,function(){return new Promise((ke,Qe)=>{oe=ae(v).create(le.bind(this)),bt(z.getCurrentRepresentation()).then(()=>{ke(oe)}).catch(()=>{Qe()})})}().then(ke=>{Qt(ke)}).catch(ke=>{pt(ke)})):Qt(null)})}function ye(et){F.get().streaming.cacheInitSegments&&(M.info("Init fragment finished loading saving to",G+"'s init cache"),ve.save(et.chunk)),M.debug(`Appending init fragment for type ${G}, representationId ${et.chunk.representation.id} and bandwidth ${et.chunk.representation.bandwidth}`),ue(et.chunk)}function J(et){ue(et.chunk,et.request)}function ue(et){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;oe&&(oe.append(et,Ct).then(rn=>{le(rn)}).catch(rn=>{le(rn)}),et.representation.mediaInfo.type===q.default.VIDEO&&$t(P.default.VIDEO_CHUNK_RECEIVED,{chunk:et}))}function he(et){if(et&&et.length>0)for(let Ct=0,rn=et.length;Ct<rn;Ct++)M.debug("Buffered range: "+et.start(Ct)+" - "+et.end(Ct)+", currentTime = ",w.getTime())}function le(et){if(et.error)return et.error.code===22&&function(){if(ge=!0,ne=.8*ft(),M.warn("Quota exceeded, Critical Buffer: "+ne),ne>0){const Qt=Math.max(.2*ne,1),pt=ne-Qt,ke=Math.min(F.get().streaming.buffer.bufferTimeAtTopQuality,.9*pt),Qe=Math.min(F.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*pt),Tt={streaming:{buffer:{bufferToKeep:parseFloat(Qt.toFixed(5)),bufferTimeAtTopQuality:parseFloat(ke.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Qe.toFixed(5))}}};F.update(Tt)}}(),void(et.error.code!==22&&dn()||(M.warn("Clearing playback buffer to overcome quota exceed situation"),$t(P.default.QUOTA_EXCEEDED,{criticalBufferLevel:ne,quotaExceededTime:et.chunk.start}),Cn(vn())));if(!oe||(Kt(),ge=!1,$=et.chunk,!$||!$.endFragment))return;$&&!isNaN($.index)&&(re=Math.max($.index,re),Xt());const Ct=oe.getAllBufferRanges();$.segmentType===_e.HTTPRequest.MEDIA_SEGMENT_TYPE&&(he(Ct),at(),function(){if(isNaN(K)||Q)return;if(G!==q.default.AUDIO&&G!==q.default.VIDEO)return void(K=NaN);const Qt=w.getTime(),pt=qt(Qt,0),ke=qt(K,0);if(pt&&ke&&pt.start===ke.start)return void(K=NaN);const Qe=z.getCurrentRepresentation().segmentDuration,Tt=qt(K,Qe);Tt&&(F.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Qt-K)>Qe?K<=Tt.end&&w.seek(Math.max(K,Tt.start),!1,!0):Qt<Tt.start&&w.seek(Tt.start,!1,!0))}());let rn=!1;U&&(U.indexOf($)>0&&(rn=!0),U=null),$&&!rn&&$t(P.default.BYTES_APPENDED_END_FRAGMENT,{startTime:$.start,index:$.index,bufferedRanges:Ct,segmentType:$.segmentType,mediaType:G,representationId:$.representation.id})}function Ie(et,Ct){const rn=[];return rn.push(bt(et)),rn.push(oe?oe.abort():Promise.resolve()),rn.push(we(et,Ct)),Promise.allSettled(rn)}function we(et,Ct){return et&&Ct?et&&Ct&&et.mimeType===Ct.mimeType&&et.codecFamily===Ct.codecFamily?(M.debug(`Switching to new codec ${et.codecs} without changeType as previous codec ${Ct.codecs} is compatible.`),Promise.resolve()):F.get().streaming.buffer.useChangeType&&y.supportsChangeType()?(M.debug(`Using changeType() to switch from codec ${Ct.codecs} to ${et.codecs}`),oe.changeType(et)):(M.debug("changeType() not available"),Promise.resolve()):(M.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve())}function Fe(){return new Promise((et,Ct)=>{let rn=je();if(!rn||rn.length===0)return at(),void et();Cn(rn).then(()=>{et()}).catch(Qt=>{Ct(Qt)})})}function je(et){const Ct=[],rn=oe.getAllBufferRanges();if(!rn||rn.length===0)return Ct;if(!et&&et!==0||isNaN(et))Ct.push({start:rn.start(0),end:rn.end(rn.length-1)+.5});else{const Qt=function(ke,Qe){const Tt=F.get().streaming.buffer.bufferToKeep,Ze=Qe.start(0);if(ke-Ze>Tt){let Ut=Math.max(0,ke-Tt);const Zt=I.getRequests({state:zt.FRAGMENT_MODEL_EXECUTED,time:ke,threshold:qe})[0];if(Zt&&(Ut=Math.min(Zt.startTime,Ut)),Ut>0)return{start:Ze,end:Ut}}return null}(et,rn),pt=function(ke,Qe){const Tt=Qe.end(Qe.length-1)+.5,Ze=Gt(ke),Ut=x.manifestInfo.duration>=F.get().streaming.buffer.longFormContentDurationThreshold?F.get().streaming.buffer.bufferTimeAtTopQualityLongForm:F.get().streaming.buffer.bufferTimeAtTopQuality;let Zt=isNaN(Ze)?ke:Math.min(Ze,ke+Ut);if(Zt>=Qe.end(Qe.length-1))return null;const _n=I.getRequests({state:zt.FRAGMENT_MODEL_EXECUTED,time:ke,threshold:qe})[0];if(_n&&(Zt=Math.max(_n.startTime+_n.duration,Zt)),F.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let Ln=0;Ln<Qe.length;Ln++)if(Qe.start(Ln)<=ke&&ke<=Qe.end(Ln)&&Qe.start(Ln)<=Zt&&Zt<=Qe.end(Ln)){let xn=Zt;Zt=Ln+1<Qe.length?Qe.start(Ln+1):Qe.end(Ln)+1,M.debug("Buffered range ["+Qe.start(Ln)+", "+Qe.end(Ln)+"] overlaps with targetTime "+ke+" and range to be pruned ["+xn+", "+Tt+"], using ["+Zt+", "+Tt+"] instead"+(Zt<Tt?"":" (no actual pruning)"));break}}return Zt<Qe.end(Qe.length-1)?{start:Zt,end:Tt}:null}(et,rn);Qt&&Ct.push(Qt),pt&&Ct.push(pt)}return Ct}function at(){(!ze||G===q.default.TEXT&&H.isTextEnabled())&&Kt()}function lt(){In()}function ot(){In(),K=NaN}function qt(et,Ct){if(!oe)return null;const rn=oe.getAllBufferRanges();let Qt,pt,ke=0,Qe=0,Tt=null,Ze=null,Ut=0;const Zt=isNaN(Ct)?.15:Ct;if(rn!=null){for(pt=0,Qt=rn.length;pt<Qt;pt++)if(ke=rn.start(pt),Qe=rn.end(pt),Tt===null)Ut=Math.abs(ke-et),(et>=ke&&et<Qe||Ut<=Zt)&&(Tt=ke,Ze=Qe);else{if(Ut=ke-Ze,!(Ut<=Zt))break;Ze=Qe}if(Tt!==null)return{start:Tt,end:Ze}}return null}function Kt(){if(w){let et=w.getTime()||0;Q&&(et=isNaN(K)?0:K);const Ct=F.get().streaming.gaps.jumpGaps&&!isNaN(F.get().streaming.gaps.smallGapLimit)?F.get().streaming.gaps.smallGapLimit:NaN;Z=Math.max(function(rn,Qt){let pt,ke;return F.get().streaming.gaps.jumpGaps&&(Qt=F.get().streaming.gaps.smallGapLimit),pt=qt(rn,Qt),ke=pt===null?0:pt.end-rn,ke}(et,Ct),0),$t(P.default.BUFFER_LEVEL_UPDATED,{mediaType:G,bufferLevel:Z}),In()}}function Xt(){const et=re>=se-1,Ct=w.getTimeToStreamEnd(x)-Z<1e-5;!et&&!Ct||B||(Sn(!0),M.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${x.id} and type ${G}`))}function In(){if(G!==q.default.AUDIO&&G!==q.default.VIDEO)return;const et=w.getLowLatencyModeEnabled()?F.get().streaming.buffer.lowLatencyStallThreshold:F.get().streaming.buffer.stallThreshold;Z<=et&&!B?Lt(ee.BUFFER_EMPTY):(B||Z>et)&&Lt(ee.BUFFER_LOADED)}function Lt(et){V===et||et===ee.BUFFER_EMPTY&&w.getTime()===0||G===q.default.TEXT&&!H.isTextEnabled()||(V=et,$t(P.default.BUFFER_LEVEL_STATE_CHANGED,{state:et}),$t(et===ee.BUFFER_LOADED?P.default.BUFFER_LOADED:P.default.BUFFER_EMPTY),M.debug(et===ee.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function gn(){oe&&G!==q.default.TEXT&&(B||Cn(vn()))}function vn(){const et=[],Ct=oe.getAllBufferRanges();if(!Ct||Ct.length===0)return et;const rn=w.getTime();let Qt=Math.max(0,rn-F.get().streaming.buffer.bufferToKeep);const pt=I.getRequests({state:zt.FRAGMENT_MODEL_EXECUTED,time:rn,threshold:qe})[0];if(pt)Qt=Math.min(pt.startTime,Qt);else if(rn===0&&w.getIsDynamic())return[];if(Ct.start(0)<=Qt){const ke={start:0,end:Qt};for(let Qe=0;Qe<Ct.length&&Ct.end(Qe)<=Qt;Qe++)ke.end=Ct.end(Qe);ke.start<ke.end&&et.push(ke)}return et}function Cn(et){return new Promise((Ct,rn)=>{if(!et||!oe||et.length===0)return Kt(),void Ct();const Qt=[];et.forEach(pt=>{Qt.push(function(ke){return new Promise((Qe,Tt)=>{ke.resolve=Qe,ke.reject=Tt,Me.push(ke)})}(pt))}),Te||Nn(),Promise.all(Qt).then(()=>{Ct()}).catch(pt=>{rn(pt)})})}function Nn(){try{if(Me.length===0||!oe)return M.debug("Nothing to prune, halt pruning"),Me=[],void(Te=!1);const et=oe.getBuffer();if(!et||!et.buffered||et.buffered.length===0)return M.debug("SourceBuffer is empty (or does not exist), halt pruning"),Me=[],void(Te=!1);const Ct=Me.shift();M.debug(`${G}: Removing buffer from: ${Ct.start} to ${Ct.end}`),Te=!0,w.getTime()<Ct.end&&Sn(!1),oe.remove(Ct).then(rn=>{Ke(rn)}).catch(rn=>{Ke(rn)})}catch{Te=!1}}function Ke(et){M.debug("onRemoved buffer from:",et.from,"to",et.to),oe&&(he(oe.getAllBufferRanges()),Me.length===0&&(Te=!1,Kt()),et.unintended&&(M.warn("Detected unintended removal from:",et.from,"to",et.to,"setting streamprocessor time to",et.from),$t(P.default.SEEK_TARGET,{time:et.from})),Te?Nn():(ze?ze=!1:Kt(),$t(P.default.BUFFER_CLEARED,{from:et.from,to:et.to,unintended:et.unintended,hasEnoughSpaceToAppend:dn(),quotaExceeded:ge})))}function bt(et){return new Promise(Ct=>{et&&et.mseTimeOffset!==void 0&&oe&&oe.updateTimestampOffset?oe.updateTimestampOffset(et.mseTimeOffset).then(()=>{Ct()}).catch(()=>{Ct()}):Ct()})}function ht(){return oe&&!B?oe.updateAppendWindow(x):Promise.resolve()}function St(){ce++,ce*(F.get().streaming.wallclockTimeUpdateInterval/1e3)>=F.get().streaming.buffer.bufferPruningInterval&&(ce=0,gn())}function ln(){In()}function Sn(et){B=et,B?$t(P.default.BUFFERING_COMPLETED):se=Number.POSITIVE_INFINITY}function ft(){try{const et=oe.getAllBufferRanges();let Ct,rn,Qt=0;if(!et)return Qt;for(rn=0,Ct=et.length;rn<Ct;rn++)Qt+=et.end(rn)-et.start(rn);return Qt}catch{return 0}}function Gt(et){try{let Ct=et;const rn=oe.getAllBufferRanges();if(!rn||rn.length===0)return NaN;let Qt=0;for(;Ct===et&&Qt<rn.length;){const pt=rn.start(Qt),ke=rn.end(Qt);Ct>=pt&&Ct<=ke&&(Ct=ke),Qt+=1}return Ct===et?NaN:Ct}catch{return NaN}}function dn(){const et=ft();return isNaN(et)||et<ne}function $t(et,Ct){let rn=Ct||{};_.trigger(et,rn,{streamId:x.id,mediaType:G})}function an(et,Ct){if(ne=Number.POSITIVE_INFINITY,V=void 0,se=Number.POSITIVE_INFINITY,re=0,$=null,B=!1,Te=!1,ge=!1,Z=0,ce=0,Me=[],K=NaN,Q=!1,oe){let rn=oe;oe=null,et||(Ct?rn.removeEventListeners():rn.abort().then(()=>{rn.reset(Ct),rn=null}))}ze=!1}return D={appendInitSegmentFromCache:function(et){const Ct=ve.extract(x.id,et);return!!Ct&&(M.debug(`Appending init fragment for type ${G}, representationId ${Ct.representation.id} and bandwidth ${Ct.representation.bandwidth}`),ue(Ct),!0)},clearBuffers:Cn,createBufferSink:Se,dischargePreBuffer:function(){if(oe&&Ae&&typeof Ae.discharge=="function"){const et=Ae.getAllBufferRanges();if(et.length>0){let Qt="Beginning "+G+"PreBuffer discharge, adding buffer for:";for(let pt=0;pt<et.length;pt++)Qt+=" start: "+et.start(pt)+", end: "+et.end(pt)+";";M.debug(Qt)}else M.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");U=[];let Ct=Ae.discharge(),rn=null;for(let Qt=0;Qt<Ct.length;Qt++){const pt=Ct[Qt];if(pt.segmentType!==_e.HTTPRequest.INIT_SEGMENT_TYPE){const ke=ve.extract(pt.streamId,pt.representation.id);ke&&rn!==ke&&(U.push(ke),oe.append(ke),rn=ke)}U.push(pt),oe.append(pt)}Ae.reset(),Ae=null}},getAllRangesWithSafetyFactor:je,getBuffer:function(){return oe},getBufferControllerType:function(){return $e},getBufferLevel:function(){return Z},getContinuousBufferTimeForTargetTime:Gt,getIsBufferingCompleted:function(){return B},getIsPruningInProgress:function(){return Te},getMediaSource:function(){return ie},getRangeAt:qt,getStreamId:function(){return x.id},getType:function(){return G},hasBufferAtTime:function(et){try{const Ct=oe.getAllBufferRanges();if(!Ct||Ct.length===0)return!1;let rn=0;for(;rn<Ct.length;){const Qt=Ct.start(rn),pt=Ct.end(rn);if(et>=Qt&&et<=pt)return!0;rn+=1}return!1}catch(Ct){return M.error(Ct),!1}},initialize:function(et){X(et),_.on(P.default.INIT_FRAGMENT_LOADED,ye,D),_.on(P.default.MEDIA_FRAGMENT_LOADED,J,D),_.on(P.default.WALLCLOCK_TIME_UPDATED,St,D),_.on(be.default.PLAYBACK_PLAYING,ot,D),_.on(be.default.PLAYBACK_PROGRESS,at,D),_.on(be.default.PLAYBACK_TIME_UPDATED,at,D),_.on(be.default.PLAYBACK_RATE_CHANGED,ln,D),_.on(be.default.PLAYBACK_STALLED,lt,D)},prepareForAbandonQualitySwitch:function(et,Ct){return Ie(et,Ct)},prepareForDefaultQualitySwitch:function(et,Ct){return Ie(et,Ct)},prepareForFastQualitySwitch:function(et,Ct){return Ie(et,Ct)},prepareForForceReplacementQualitySwitch:function(et,Ct){return new Promise(rn=>{const Qt=[];Qt.push(oe.abort()),Qt.push(ht()),Qt.push(Fe()),Qt.push(bt(et)),Qt.push(we(et,Ct)),Promise.allSettled(Qt).then(()=>{Sn(!1),rn()})})},prepareForNonReplacementTrackSwitch:function(et,Ct){return new Promise(rn=>{const Qt=[];Qt.push(ht()),Qt.push(we(et,Ct)),Promise.allSettled(Qt).then(()=>{rn()})})},prepareForPlaybackSeek:function(){return B&&Sn(!1),oe.abort()},prepareForReplacementTrackSwitch:function(et,Ct){return new Promise(rn=>{const Qt=[];Qt.push(oe.abort()),Qt.push(ht()),Qt.push(we(et,Ct)),Qt.push(Fe()),Qt.push(bt(et)),Promise.allSettled(Qt).then(()=>{Sn(!1),rn()})})},pruneAllSafely:Fe,pruneBuffer:gn,reset:function(et,Ct){_.off(P.default.INIT_FRAGMENT_LOADED,ye,this),_.off(P.default.MEDIA_FRAGMENT_LOADED,J,this),_.off(P.default.WALLCLOCK_TIME_UPDATED,St,this),_.off(be.default.PLAYBACK_PLAYING,ot,this),_.off(be.default.PLAYBACK_PROGRESS,at,this),_.off(be.default.PLAYBACK_TIME_UPDATED,at,this),_.off(be.default.PLAYBACK_RATE_CHANGED,ln,this),_.off(be.default.PLAYBACK_STALLED,lt,this),an(et,Ct)},segmentRequestingCompleted:function(et){isNaN(et)||(se=et,Xt())},setIsBufferingCompleted:Sn,setMediaSource:X,setSeekTarget:function(et){K=et},updateAppendWindow:ht,updateBufferTimestampOffset:bt},M=(0,Ve.default)(v).getInstance().getLogger(D),ve=rt(v).getInstance(),an(),D}Ge.__dashjs_factory_name=$e;var Je=xe.default.getClassFactory(Ge);const Et="NotFragmentedTextBufferController";function ct(S){S=S||{};const y=this.context,v=(0,Ee.default)(y).getInstance(),_=S.textController,I=S.errHandler,w=S.streamInfo,z=S.type;let F,x,H,G,D,M;function B(ie){G=ie}function Z(ie){x!==ie&&(x=ie,x&&function(re){let se={};v.trigger(re,se,{streamId:w.id,mediaType:z})}(P.default.BUFFERING_COMPLETED))}function ne(ie){ie.chunk.bytes&&!x&&(M.save(ie.chunk),D.append(ie.chunk),Z(!0))}return F={initialize:function(ie){B(ie)},getStreamId:function(){return w.id},getType:function(){return z},getBufferControllerType:function(){return Et},createBufferSink:function(ie){return new Promise((re,se)=>{try{D=j(y).create({mediaSource:G,textController:_,eventBus:v}),D.initializeForFirstUse(ie),H||(D.getBuffer()&&typeof D.getBuffer().initialize=="function"&&D.getBuffer().initialize(),H=!0),re(D)}catch(oe){I.error(new Ce.default(Y.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Y.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+z)),se(oe)}})},dischargePreBuffer:function(){},getBuffer:function(){return D},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:B,getMediaSource:function(){return G},appendInitSegmentFromCache:function(ie){return M.extract(w.id,ie)!==null},getIsBufferingCompleted:function(){return x},setIsBufferingCompleted:Z,getIsPruningInProgress:function(){return!1},reset:function(ie){v.off(P.default.INIT_FRAGMENT_LOADED,ne,F),!ie&&D&&(D.abort(),D.reset(),D=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return x=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},H=!1,G=null,x=!1,M=rt(y).getInstance(),v.on(P.default.INIT_FRAGMENT_LOADED,ne,F),F}ct.__dashjs_factory_name=Et;var Mt=xe.default.getClassFactory(ct);function yn(S){S=S||{};const y=this.context,v=(0,Ee.default)(y).getInstance(),_=S.dashMetrics,I=S.mediaPlayerModel,w=S.fragmentModel,z=S.abrController,F=S.playbackController,x=S.textController,H=S.type,G=S.bufferController,D=S.representationController,M=S.settings;let B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$;function ce(){V=!0}function Te(){V=!1}function ge(he){if(G.getIsBufferingCompleted())return;ve();const le=isNaN(he)?0:he;re=setTimeout(Me,le)}function ve(){re&&(clearTimeout(re),re=null)}function Me(){try{if(function(){try{return H===q.default.TEXT&&!x.isTextEnabled()||F.isPaused()&&(!F.getStreamController().getInitialPlayback()||!F.getStreamController().getAutoPlay())&&!M.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void ve();if(function(){try{return!!V&&D.getCurrentRepresentation()&&(Ae==null||Q||function(){const he=D.getCurrentRepresentation();if(!H||!he)return!0;let le=he&&he.segmentDuration&&!isNaN(he.segmentDuration)?he.segmentDuration:0;const Ie=_.getCurrentBufferLevel(H),we=ze();return(we<=le||F.getLowLatencyModeEnabled()||H===q.default.AUDIO&&se)&&(le=0),Ie+le<we}())}catch{return!1}}()){let he=!1;$&&(he=z.checkPlaybackQuality(H,Z.id)),he||function(){const le=D.getCurrentRepresentation();U||le.id!==Ae||Q?(Q?(ne.debug("Switch track for "+H+", representation id = "+le.id),Q=!1):ne.debug("Quality has changed, get init request for representationid = "+le.id),v.trigger(P.default.INIT_FRAGMENT_NEEDED,{representationId:le.id,sender:B},{streamId:Z.id,mediaType:H}),$=!1,U=!1):(ne.debug(`Media segment needed for ${H} and stream id ${Z.id}`),v.trigger(P.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:Z.id,mediaType:H}),$=!0)}()}else ge(F.getLowLatencyModeEnabled()?M.get().streaming.scheduling.lowLatencyTimeout:M.get().streaming.scheduling.defaultTimeout)}catch{ge(F.getLowLatencyModeEnabled()?M.get().streaming.scheduling.lowLatencyTimeout:M.get().streaming.scheduling.defaultTimeout)}}function ze(){let he=NaN;const le=D.getCurrentRepresentation();return H&&le&&(he=H===q.default.TEXT?function(){try{if(x.isTextEnabled()){const Ie=D.getCurrentRepresentation();if(isNaN(Ie.fragmentDuration)){const we=_.getCurrentSchedulingInfo(ee.SCHEDULING_INFO);return we?we.duration:0}return Ie.fragmentDuration}return 0}catch{return 0}}():H===q.default.AUDIO&&se?function(){try{const Ie=_.getCurrentBufferLevel(q.default.VIDEO),we=D.getCurrentRepresentation();return isNaN(we.fragmentDuration)?Ie+1:Math.max(Ie+1,we.fragmentDuration)}catch{return 0}}():function(){try{const Ie=D.getCurrentRepresentation(),we=Ie.mediaInfo.streamInfo;return z.isPlayingAtTopQuality(Ie)?we.manifestInfo.duration>=M.get().streaming.buffer.longFormContentDurationThreshold?M.get().streaming.buffer.bufferTimeAtTopQualityLongForm:M.get().streaming.buffer.bufferTimeAtTopQuality:I.getBufferTimeDefaultUnadjusted()}catch{return I.getBufferTimeDefaultUnadjusted()}}()),he}function K(){X(!0)}function X(he){if(F&&w){const le=w.getRequests({state:zt.FRAGMENT_MODEL_EXECUTED,time:F.getTime(),threshold:0})[0];le&&F.getTime()>=le.startTime&&((!oe.representation||le.representation.mediaInfo.type===oe.representation.mediaInfo.type&&le.representation.mediaInfo.index!==oe.representation.mediaInfo.index)&&he&&(ne.debug(`Track change rendered for streamId ${Z.id} and type ${H}`),v.trigger(P.default.TRACK_CHANGE_RENDERED,{mediaType:H,oldMediaInfo:oe&&oe.representation&&oe.representation.mediaInfo?oe.representation.mediaInfo:null,newMediaInfo:le.representation.mediaInfo,streamId:Z.id})),oe.representation&&le.representation.id===oe.representation.id||!he||(ne.debug(`Quality change rendered for streamId ${Z.id} and type ${H}`),v.trigger(P.default.QUALITY_CHANGE_RENDERED,{mediaType:H,oldRepresentation:oe.representation?oe.representation:null,newRepresentation:le.representation,streamId:Z.id})),oe.representation=le.representation)}}function Se(){w.abortRequests(),ve()}function ye(){M.get().streaming.scheduling.scheduleWhilePaused||ge()}function J(he){_.updatePlayListTraceMetrics({playbackspeed:he.playbackRate.toString()})}function ue(){$=!0,ie=0,Ae=null,oe={representation:null},Q=!1,U=!1,V=!0}return B={clearScheduleTimer:ve,getBufferTarget:ze,getPlaybackController:function(){return F},getStreamId:function(){return Z.id},getSwitchTrack:function(){return Q},getTimeToLoadDelay:function(){return ie},getType:function(){return H},initialize:function(he){se=he,v.on(P.default.URL_RESOLUTION_FAILED,Se,B),v.on(be.default.PLAYBACK_STARTED,ye,B),v.on(be.default.PLAYBACK_RATE_CHANGED,J,B),v.on(be.default.PLAYBACK_TIME_UPDATED,K,B),v.on(be.default.MANAGED_MEDIA_SOURCE_START_STREAMING,ce,B),v.on(be.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Te,B)},reset:function(){v.off(P.default.URL_RESOLUTION_FAILED,Se,B),v.off(be.default.PLAYBACK_STARTED,ye,B),v.off(be.default.PLAYBACK_RATE_CHANGED,J,B),v.off(be.default.PLAYBACK_TIME_UPDATED,K,B),v.off(be.default.MANAGED_MEDIA_SOURCE_START_STREAMING,ce,B),v.off(be.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Te,B),ve(),X(!1),ue(),Z=null},setCheckPlaybackQuality:function(he){$=he},setInitSegmentRequired:function(he){U=he},setLastInitializedRepresentationId:function(he){Ae=he},setSwitchTrack:function(he){Q=he},setTimeToLoadDelay:function(he){ie=he},startScheduleTimer:ge},ne=(0,Ve.default)(y).getInstance().getLogger(B),ue(),Z=S.streamInfo,B}yn.__dashjs_factory_name="ScheduleController";var tn=xe.default.getClassFactory(yn);const fn=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var Bt=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.media=null,this.mediaRange=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}};function kn(S,y,v,_,I,w,z,F){let x=new Bt;var H;return x.representation=S,x.duration=y,x.presentationStartTime=v,x.mediaStartTime=_,x.availabilityStartTime=I.calcAvailabilityStartTimeFromPresentationTime(w,S,z),x.availabilityEndTime=I.calcAvailabilityEndTimeFromPresentationTime(w+y,S,z),x.wallStartTime=I.calcWallTimeForSegment(x,z),x.replacementNumber=(H=F,x.representation.startNumber+H),x.index=F,x}function Wn(S,y,v,_){const I=y.adaptation.period;if(isFinite(I.duration)&&I.start+I.duration<=v.presentationStartTime)return!1;if(_){if(y.availabilityTimeOffset==="INF")return!0;const w=S.getClientReferenceTime();return v.availabilityStartTime.getTime()<=w&&(!isFinite(v.availabilityEndTime)||v.availabilityEndTime.getTime()>=w)}return!0}function ta(S,y,v,_,I,w){return S&&function(z,F,x,H,G,D){return z.replace(fn,(M,B,Z,ne)=>{let ie,re;switch(B){case void 0:return"$";case"RepresentationID":ie=F;break;case"Number":ie=x;break;case"SubNumber":ie=H;break;case"Bandwidth":ie=G;break;case"Time":if(typeof D=="string")return D;ie=D&&Math.round(D);break;default:ie=null}if(ie==null)return M;switch(ne){case void 0:case"d":case"i":case"u":re=ie.toString();break;case"o":re=ie.toString(8);break;case"x":re=ie.toString(16);break;case"X":re=ie.toString(16).toUpperCase();break;default:re=ie.toString()}const se=parseInt(Z,10)||1;return re.padStart(se,"0")})}(S,y,v,_,I,w)}function Ha(S,y,v,_){let I,w,z;I=v.segmentDuration,isNaN(I)&&(I=v.adaptation.period.duration),w=parseFloat((v.adaptation.period.start+_*I).toFixed(5)),z=parseFloat((w+I).toFixed(5));const F=kn(v,I,w,S.calcMediaTimeFromPresentationTime(w,v),S,z,y,_);return Wn(S,v,F,y)?F:null}function La(S,y,v,_,I,w,z,F,x,H){const G=_/w,D=I/w;let M,B,Z;return M=S.calcPresentationTimeFromMediaTime(G,v),B=M+D,Z=kn(v,D,M,G,S,B,y,x),Wn(S,v,Z,y)?(Z.replacementTime=H||_,Z.media=ta(z,void 0,Z.replacementNumber,void 0,void 0,Z.replacementTime),Z.mediaRange=F,Z):null}function qa(S){const y=(S=S||{}).eventBus,v=S.events,_=S.abrController,I=S.dashMetrics,w=S.playbackController,z=S.timelineConverter,F=S.type,x=S.streamInfo,H=S.segmentsController,G=S.isDynamic;let D,M,B;function Z(){return F}function ne(){return B}function ie(){B=null,M=[]}function re(U){return new Promise((V,$)=>{const ce=U.hasInitialization(),Te=U.hasSegments(),ge=[];ge.push(H.updateInitData(U,ce)),ge.push(H.updateSegmentData(U,Te)),Promise.all(ge).then(ve=>{var Me;ve[0]&&!ve[0].error&&(U=function(ze,K){return K&&!K.error&&K.representation?K.representation:ze}(U,ve[0])),ve[1]&&!ve[1].error&&(U=function(ze,K){if(!K||K.error)return;const X=K.segments,Se=[];let ye,J,ue,he,le=0;for(ye=0,J=X?X.length:0;ye<J;ye++)ue=X[ye],he=La(z,G,ze,ue.startTime,ue.duration,ue.timescale,ue.media,ue.mediaRange,le),he&&(Se.push(he),he=null,le++);return Se.length>0&&(ze.segments=Se),ze}(U,ve[1])),U.fragmentDuration=U.segmentDuration?U.segmentDuration:U.segments&&U.segments.length>0?U.segments[0].duration:NaN,(Me=U).mediaFinishedInformation=H.getMediaFinishedInformation(Me),function(ze){let K,X=I.getCurrentManifestUpdate(),Se=!1;if(X){for(let ye=0;ye<X.representationInfo.length;ye++)if(K=X.representationInfo[ye],K.index===ze.index&&K.mediaType===Z()){Se=!0;break}Se||I.addManifestUpdateRepresentationInfo(ze,Z())}}(U),V()}).catch(ve=>{$(ve)})})}function se(U){if(!M||M.length===0)return null;const V=M.filter($=>$.id===U);return V.length>0?V[0]:null}function oe(U){y.trigger(v.DATA_UPDATE_COMPLETED,{currentRepresentation:B,error:U},{streamId:x.id,mediaType:F})}function Ae(U){B&&B.id===U.id||function(V){(function(){if(!(_&&I&&w&&z))throw new Error(q.default.MISSING_CONFIG_ERROR)})();const $=new Date,ce=1e3*w.getTime();V&&I.addRepresentationSwitch(V.adaptation.type,$,ce,V.id),y.trigger(be.default.REPRESENTATION_SWITCH,{mediaType:F,streamId:x.id,currentRepresentation:V},{streamId:x.id,mediaType:F})}(U),B=U}function Q(U){if(U.newDuration){const V=ne();V&&V.adaptation.period&&(V.adaptation.period.duration=U.newDuration)}}return D={getCurrentRepresentation:ne,getRepresentationById:se,getStreamId:function(){return x.id},getType:Z,prepareQualityChange:function(U){const V=M.filter($=>$.id===U.id);V.length>0&&Ae(V[0])},reset:function(){y.off(be.default.MANIFEST_VALIDITY_CHANGED,Q,D),ie()},updateData:function(U,V,$){return new Promise((ce,Te)=>{if(M=U,Ae(se($)),F!==q.default.VIDEO&&F!==q.default.AUDIO&&(F!==q.default.TEXT||!V))return oe(),void ce();const ge=[];for(let ve=0,Me=M.length;ve<Me;ve++){const ze=M[ve];ge.push(re(ze))}Promise.all(ge).then(()=>{(function(){_.setPlaybackQuality(F,x,B);const ve=I.getCurrentDVRInfo(F);ve&&I.updateManifestUpdateInfo({latency:ve.range.end-w.getTime()}),oe()})(),ce()}).catch(ve=>{Te(ve)})})}},ie(),y.on(be.default.MANIFEST_VALIDITY_CHANGED,Q,D),D}qa.__dashjs_factory_name="RepresentationController";var Jt=xe.default.getClassFactory(qa),Ht=t(656);function Ft(S){const y=(S=S||{}).eventBus,v=S.debug,_=S.urlUtils,I=S.type,w=S.streamInfo,z=S.segmentsController,F=S.timelineConverter,x=S.baseURLController;let H,G,D,M,B;function Z(){return I}function ne(){D=null}function ie(Q,U,V){const $=x.resolve(V.path);let ce,Te,ge={};return $&&U!==$.url&&_.isRelative(U)?(ce=$.url,Te=$.serviceLocation,ge=$.queryParams,U&&(ce=_.resolve(U,ce))):ce=U,!_.isRelative(ce)&&(Q.url=ce,Q.serviceLocation=Te,Q.queryParams=ge,!0)}function re(Q,U){if(U==null)return null;const V=new nt,$=U.representation,ce=$.bandwidth,Te=ta(U.media,$.id,U.replacementNumber,void 0,ce,U.replacementTime);return V.mediaType=Z(),V.bandwidth=$.bandwidth,V.type=_e.HTTPRequest.MEDIA_SEGMENT_TYPE,V.range=U.mediaRange,V.startTime=U.presentationStartTime,V.mediaStartTime=U.mediaStartTime,V.duration=U.duration,V.timescale=$.timescale,V.availabilityStartTime=U.availabilityStartTime,V.availabilityEndTime=U.availabilityEndTime,V.availabilityTimeComplete=$.availabilityTimeComplete,V.wallStartTime=U.wallStartTime,V.index=U.index,V.adaptationIndex=$.adaptation.index,V.representation=$,ie(V,Te,$)?V:void 0}function se(Q,U,V){let $=null;if(!U||!U.segmentInfoType)return $;const ce=z.getSegmentByTime(U,V);return ce&&(D=ce,G.debug("Index for time "+V+" is "+ce.index),$=re(0,ce)),$}function oe(Q,U,V){let $=null;const ce=z.getSegmentByIndex(U,V,D?D.mediaStartTime:-1);if(ce)$=re(0,ce),D=ce;else{if(M&&!B)return G.debug(Z()+" No segment found at index: "+V+". Wait for next loop"),null;B=!0}return $}function Ae(){G.debug("Dynamic stream complete"),B=!0}return H={getCurrentIndex:function(){return D?D.index:-1},getInitRequest:function(Q,U){return U?function(V,$,ce){const Te=new nt,ge=$.adaptation.period,ve=ge.start;if(Te.mediaType=ce,Te.type=_e.HTTPRequest.INIT_SEGMENT_TYPE,Te.range=$.range,Te.availabilityStartTime=F.calcAvailabilityStartTimeFromPresentationTime(ve,$,M),Te.availabilityEndTime=F.calcAvailabilityEndTimeFromPresentationTime(ve+ge.duration,$,M),Te.representation=$,ie(Te,$.initialization,$))return Te.url=ta(Te.url,void 0,void 0,void 0,$.bandwidth),Te}(0,U,Z()):null},getNextSegmentRequest:function(Q,U){if(!U||!U.segmentInfoType)return null;let V=D?D.index+1:0;return U&&D&&U.endNumber&&D.replacementNumber&&D.replacementNumber>=U.endNumber?(B=!0,null):oe(0,U,V)},getNextSegmentRequestIdempotent:function(Q,U){let V=null,$=D?D.index+1:0;const ce=z.getSegmentByIndex(U,$,D?D.mediaStartTime:-1);return ce?(V=re(0,ce),V):null},getSegmentRequestForTime:se,getStreamId:function(){return w.id},getStreamInfo:function(){return w},getType:Z,getValidTimeAheadOfTargetTime:function(Q,U,V,$){try{if(isNaN(Q)||!U||!V)return NaN;if(Q<0&&(Q=0),isNaN($)&&($=.5),se(0,V,Q))return Q;if(V.adaptation.period.start+V.adaptation.period.duration<Q)return NaN;const ce=isFinite(V.adaptation.period.duration)?V.adaptation.period.start+V.adaptation.period.duration:Q+30;let Te=Math.min(Q+$,ce),ge=NaN,ve=null;for(;Te<=ce;){let Me=null;if(Te<=ce&&(Me=se(0,V,Te)),Me){ge=Te,ve=Me;break}Te+=$}if(ve){const Me=ve.startTime+ve.duration;return Q>ve.startTime&&Me-Q>$?Q:!isNaN(ve.startTime)&&Q<ve.startTime&&ge>ve.startTime?ve.startTime+.001:Math.min(Me-$,ge)}return ge}catch{return NaN}},initialize:function(Q){M=Q,B=!1,z.initialize(Q)},isLastSegmentRequested:function(Q,U){return!Q||!D?!1:B?!0:!isFinite(Q.adaptation.period.duration)||D.presentationStartTime+D.duration>U?!1:Q.mediaFinishedInformation&&!isNaN(Q.mediaFinishedInformation.numberOfSegments)&&!isNaN(D.index)&&D.index>=Q.mediaFinishedInformation.numberOfSegments-1&&(!M||Q.segmentInfoType===k.default.SEGMENT_TEMPLATE||M&&Q.segmentInfoType===k.default.SEGMENT_LIST&&Q.adaptation.period.nextPeriodId)?!0:!!(M&&Q.adaptation.period.nextPeriodId&&Q.segmentInfoType===k.default.SEGMENT_TIMELINE&&Q.mediaFinishedInformation&&!isNaN(Q.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&D&&!isNaN(D.mediaStartTime)&&!isNaN(D.duration)&&D.mediaStartTime+D.duration>=Q.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Q,U){return U&&U.segmentInfoType?oe(0,U,D?D.index:0):null},reset:function(){ne(),y.off(be.default.DYNAMIC_TO_STATIC,Ae,H)}},G=v.getLogger(H),ne(),y.on(be.default.DYNAMIC_TO_STATIC,Ae,H),H}Ft.__dashjs_factory_name="DashHandler";var wt=xe.default.getClassFactory(Ft);function nn(){let S;const y=/^[a-z][a-z0-9+\-_.]*:/i,v=/^https?:\/\//i,_=/^https:\/\//i,I=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,w=(B,Z)=>{try{return new window.URL(B,Z).toString()}catch{return B}},z=(B,Z)=>{let ne=F;if(!Z||!G(B))return B;D(B)&&(ne=x),M(B)&&(ne=H);const ie=ne(Z),re=ie.charAt(ie.length-1)!=="/"&&B.charAt(0)!=="/"?"/":"";return[ie,B].join(re)};function F(B){const Z=B.indexOf("/"),ne=B.lastIndexOf("/");return Z!==-1?ne===Z+1?B:(B.indexOf("?")!==-1&&(B=B.substring(0,B.indexOf("?"))),B.substring(0,ne+1)):""}function x(B){const Z=B.match(I);return Z?Z[1]:""}function H(B){const Z=B.match(y);return Z?Z[0]:""}function G(B){return!y.test(B)}function D(B){return G(B)&&B.charAt(0)==="/"}function M(B){return B.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),S=w}catch{}finally{S=S||z}}(),{parseBaseUrl:F,parseOrigin:x,parseScheme:H,isRelative:G,isPathAbsolute:D,isSchemeRelative:M,isHTTPURL:function(B){return v.test(B)},isHTTPS:function(B){return _.test(B)},removeHostname:function(B){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(B)[2].substring(1)},resolve:function(B,Z){return S(B,Z)}}}nn.__dashjs_factory_name="DefaultURLUtils";var We=xe.default.getSingletonFactory(nn);function kt(){let S,y,v=[];const _=this.context;function I(w,z,F){let x=function(H){let G;for(G=0;G<v.length;G++)if(v[G].regex.test(H))return v[G].utils;return y}(F||z);return x&&typeof x[w]=="function"?x[w](z,F):y[w](z,F)}return y=We(_).getInstance(),S={registerUrlRegex:function(w,z){v.push({regex:w,utils:z})},parseBaseUrl:function(w){return I("parseBaseUrl",w)},parseOrigin:function(w){return I("parseOrigin",w)},parseScheme:function(w){return I("parseScheme",w)},isRelative:function(w){return I("isRelative",w)},isPathAbsolute:function(w){return I("isPathAbsolute",w)},isSchemeRelative:function(w){return I("isSchemeRelative",w)},isHTTPURL:function(w){return I("isHTTPURL",w)},isHTTPS:function(w){return I("isHTTPS",w)},removeHostname:function(w){return I("removeHostname",w)},resolve:function(w,z){return I("resolve",w,z)}},S}kt.__dashjs_factory_name="URLUtils";var jt=xe.default.getSingletonFactory(kt);class It{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}It.INITIAL_PLAYOUT_START_REASON="initial_playout",It.SEEK_START_REASON="seek",It.RESUME_FROM_PAUSE_START_REASON="resume",It.METRICS_COLLECTION_START_REASON="metrics_collection_start";class Ot{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function on(S,y){const v=(S=S||{}).timelineConverter,_=S.dashMetrics;let I;function w(){if(!v)throw new Error(q.default.MISSING_CONFIG_ERROR)}function z(x,H){const G=x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentTemplate||x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentList,D=G.SegmentTimeline,M=G.SegmentURL;let B,Z,ne,ie,re,se,oe,Ae=0,Q=-1;oe=x.timescale,B=D.S;let U=!1;for(ne=0,ie=B.length;ne<ie&&!U;ne++)for(Z=B[ne],se=0,Z.hasOwnProperty("r")&&(se=Z.r),Z.hasOwnProperty("t")&&(Ae=Z.t),se<0&&(se=F(x,B[ne+1],Z,oe,Ae/oe)),re=0;re<=se&&!U;re++)Q++,U=H(Ae,G,M,Z,oe,Q,ne),U&&(x.segmentDuration=Z.d/oe),Ae+=Z.d}function F(x,H,G,D,M){let B;if(H&&H.hasOwnProperty("t"))B=H.t/D;else try{let Z=0;if(isNaN(x.adaptation.period.start)||isNaN(x.adaptation.period.duration)||!isFinite(x.adaptation.period.duration)){const ne=_.getCurrentDVRInfo();Z=isNaN(ne.end)?0:ne.end}else Z=x.adaptation.period.start+x.adaptation.period.duration;B=v.calcMediaTimeFromPresentationTime(Z,x),x.segmentDuration=G.d/D}catch{B=0}return Math.max(Math.ceil((B-M)/(G.d/D))-1,0)}return I={getSegmentByIndex:function(x,H,G){if(w(),!x)return null;let D=null,M=!1;return z(x,function(B,Z,ne,ie,re,se,oe){if(M||G<0){let Ae=Z.media,Q=ie.mediaRange;return ne&&(Ae=ne[oe].media||"",Q=ne[oe].mediaRange),D=La(v,y,x,B,ie.d,re,Ae,Q,se,ie.tManifest),!0}return B>=G*re-.5*ie.d&&(M=!0),!1}),D},getSegmentByTime:function(x,H){if(w(),!x)return null;H===void 0&&(H=null);let G=null;const D=v.calcMediaTimeFromPresentationTime(H,x);return z(x,function(M,B,Z,ne,ie,re,se){const oe=parseFloat((D*ie).toPrecision(15));if(oe<M+ne.d&&oe>=M){let Ae=B.media,Q=ne.mediaRange;return Z&&(Ae=Z[se].media||"",Q=Z[se].mediaRange),G=La(v,y,x,M,ne.d,ie,Ae,Q,re,ne.tManifest),!0}return!1}),G},getMediaFinishedInformation:function(x){if(!x)return 0;const H=(x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentTemplate||x.adaptation.period.mpd.manifest.Period[x.adaptation.period.index].AdaptationSet[x.adaptation.index].Representation[x.index].SegmentList).SegmentTimeline;let G,D,M,B,Z,ne,ie,re=0,se=0,oe=0;for(ie=x.timescale,G=H.S,B=G.length,M=0;M<B;M++)for(D=G[M],ne=0,D.hasOwnProperty("r")&&(ne=D.r),D.hasOwnProperty("t")&&(re=D.t,se=re/ie),ne<0&&(ne=F(x,G[M+1],D,ie,se)),Z=0;Z<=ne;Z++)oe++,re+=D.d,se=re/ie;return{numberOfSegments:oe,mediaTimeOfLastSignaledSegment:se}}},I}Ot.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Ot.REBUFFERING_REASON="rebuffering",Ot.USER_REQUEST_STOP_REASON="user_request",Ot.END_OF_PERIOD_STOP_REASON="end_of_period",Ot.END_OF_CONTENT_STOP_REASON="end_of_content",Ot.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Ot.FAILURE_STOP_REASON="failure",on.__dashjs_factory_name="TimelineSegmentsGetter";var Hn=xe.default.getClassFactory(on);function Wt(S,y){const v=(S=S||{}).timelineConverter;let _;function I(){if(!v||!v.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(q.default.MISSING_CONFIG_ERROR)}function w(z,F){if(I(),!z)return null;const x=z.adaptation.period.mpd.manifest.Period[z.adaptation.period.index].AdaptationSet[z.adaptation.index].Representation[z.index].SegmentTemplate;F=Math.max(F,0);const H=Ha(v,y,z,F);if(H){if(z.endNumber&&H.replacementNumber>z.endNumber)return null;H.replacementTime=Math.round(F*z.segmentDuration*z.timescale,10),H.media=ta(x.media,void 0,H.replacementNumber,void 0,void 0,H.replacementTime)}return H}return _={getSegmentByIndex:w,getSegmentByTime:function(z,F){if(I(),!z)return null;const x=z.segmentDuration;if(isNaN(x))return null;let H=v.calcPeriodRelativeTimeFromMpdRelativeTime(z,F);return w(z,Math.floor(H/x))},getMediaFinishedInformation:function(z){const F={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!z)return F;const x=z.segmentDuration;return isNaN(x)?F.numberOfSegments=1:F.numberOfSegments=Math.ceil(z.adaptation.period.duration/x),F}},_}Wt.__dashjs_factory_name="TemplateSegmentsGetter";var Rn=xe.default.getClassFactory(Wt);function Bn(S,y){const v=(S=S||{}).timelineConverter;let _;function I(){if(!v||!v.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(q.default.MISSING_CONFIG_ERROR)}function w(z,F){if(I(),!z)return null;const x=z.adaptation.period.mpd.manifest.Period[z.adaptation.period.index].AdaptationSet[z.adaptation.index].Representation[z.index].SegmentList,H=x.SegmentURL.length,G=z&&!isNaN(z.startNumber)?z.startNumber:1,D=Math.max(G-1,0),M=Math.max(F-D,0);let B=null;if(M<H){const Z=x.SegmentURL[M];B=Ha(v,y,z,F),B&&(B.replacementTime=(G+F-1)*z.segmentDuration,B.media=Z.media?Z.media:"",B.mediaRange=Z.mediaRange,B.indexRange=Z.indexRange)}return B}return _={getSegmentByIndex:w,getSegmentByTime:function(z,F){if(I(),!z)return null;const x=z.segmentDuration;if(isNaN(x))return null;const H=v.calcPeriodRelativeTimeFromMpdRelativeTime(z,F);return w(z,Math.floor(H/x))},getMediaFinishedInformation:function(z){const F={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!z)return F;const x=z.adaptation.period.mpd.manifest.Period[z.adaptation.period.index].AdaptationSet[z.adaptation.index].Representation[z.index].SegmentList,H=z&&!isNaN(z.startNumber)?z.startNumber:1,G=Math.max(H-1,0);return F.numberOfSegments=G+x.SegmentURL.length,F}},_}Bn.__dashjs_factory_name="ListSegmentsGetter";var Dn=xe.default.getClassFactory(Bn);function Fn(S){const y=(S=S||{}).timelineConverter;let v;function _(){if(!y||!y.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(q.default.MISSING_CONFIG_ERROR)}function I(w,z){if(_(),!w)return null;const F=w.segments?w.segments.length:-1;let x;if(z<F&&(x=w.segments[z],x&&x.index===z))return x;for(let H=0;H<F;H++)if(x=w.segments[H],x&&x.index===z)return x;return null}return v={getSegmentByIndex:I,getSegmentByTime:function(w,z){_();const F=function(x,H){if(!x)return-1;const G=x.segments,D=G?G.length:null;let M,B,Z,ne,ie,re=-1;if(G&&D>0){for(ie=0;ie<D;ie++)if(B=G[ie],Z=B.presentationStartTime,ne=B.duration,M=ne/2,H+M>=Z&&H-M<Z+ne){re=B.index;break}}return re}(w,z);return I(w,F)},getMediaFinishedInformation:function(w){const z={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return w&&w.segments&&(z.numberOfSegments=w.segments.length),z}},v}Fn.__dashjs_factory_name="SegmentBaseGetter";var Kn=xe.default.getClassFactory(Fn);function bn(S){S=S||{};const y=this.context,v=S.dashConstants,_=S.type,I=S.segmentBaseController;let w,z;function F(x){return x?x.segments?z[v.SEGMENT_BASE]:z[x.segmentInfoType]:null}return w={initialize:function(x){z[v.SEGMENT_TIMELINE]=Hn(y).create(S,x),z[v.SEGMENT_TEMPLATE]=Rn(y).create(S,x),z[v.SEGMENT_LIST]=Dn(y).create(S,x),z[v.SEGMENT_BASE]=Kn(y).create(S,x)},updateInitData:function(x,H){return H?Promise.resolve():I.getSegmentBaseInitSegment({representation:x,mediaType:_})},updateSegmentData:function(x,H){return H?Promise.resolve():I.getSegmentList({mimeType:x.mimeType,representation:x,mediaType:_})},getSegmentByIndex:function(x,H,G){const D=F(x);return D?D.getSegmentByIndex(x,H,G):null},getSegmentByTime:function(x,H){const G=F(x);return G?G.getSegmentByTime(x,H):null},getMediaFinishedInformation:function(x){const H=F(x);return H?H.getMediaFinishedInformation(x):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},z={},w}bn.__dashjs_factory_name="SegmentsController";var At=xe.default.getClassFactory(bn);function dt(){let S;return S={ntpToUTC:function(y){const v=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(v.getTime()+y).getTime()}},S}dt.__dashjs_factory_name="TimeUtils";var cn=xe.default.getSingletonFactory(dt),mn=class{constructor(S){this.newMediaInfo=S.newMediaInfo,this.previouslySelectedRepresentation=S.previouslySelectedRepresentation,this.newRepresentation=S.newRepresentation}};function On(S){S=S||{};let y,v,_,I,w,z,F,x,H,G,D,M,B,Z,ne,ie,re=this.context,se=(0,Ee.default)(re).getInstance(),oe=S.abrController,Ae=S.adapter,Q=S.boxParser,U=S.capabilities,V=S.dashMetrics,$=S.errHandler,ce=S.fragmentModel,Te=S.manifestModel,ge=S.mediaController,ve=S.mediaPlayerModel,Me=S.mimeType,ze=S.playbackController,K=S.segmentBlacklistController,X=S.settings,Se=S.streamInfo,ye=S.textController,J=S.timelineConverter,ue=S.type;function he(){return Se.id}function le(){return ue}function Ie(){x=[],_=null,v=0,ne=!1,Z=!1,G=!1,ie=!1,In()}function we(Ze){return!isNaN(Ze)&&!isNaN(Se.duration)&&isFinite(Se.duration)&&Ze>=Se.start+Se.duration}function Fe(Ze){let Ut=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ze.sender){if(ze.getIsManifestUpdateInProgress())lt();else if((!_.isText||ye.isTextEnabled())&&y&&Ze.representationId&&!y.appendInitSegmentFromCache(Ze.representationId)){const Zt=D.getCurrentRepresentation();if(Zt.range===0)return void je();const _n=I?I.getInitRequest(_,Zt):null;_n?ce.executeRequest(_n):Ut&&(M.setInitSegmentRequired(!0),lt())}}}function je(Ze){let Ut=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(ze.getIsManifestUpdateInProgress()||y.getIsPruningInProgress())return void lt();let Zt=function(){let _n;if(isNaN(v)||le()===q.default.TEXT&&!ye.isTextEnabled())return null;if(I){const Ln=et();_n=ne?I.getSegmentRequestForTime(_,Ln,v):Z?I.repeatSegmentRequest(_,Ln):I.getNextSegmentRequest(_,Ln)}return _n}();Zt?(ne=!1,Z=!1,function(_n){isNaN(_n.startTime+_n.duration)||(v=_n.startTime+_n.duration),_n.delayLoadingTime=new Date().getTime()+M.getTimeToLoadDelay(),M.setTimeToLoadDelay(0),function(Ln){let xn=Ln.url;return Ln.range&&(xn=xn.concat("_",Ln.range)),K.contains(xn)}(_n)?(F.warn(`Fragment request url ${_n.url} for stream id ${Se.id} and media type ${ue} is on the ignore list and will be skipped`),lt()):(F.debug(`Next fragment request url for stream id ${Se.id} and media type ${ue} is ${_n.url} with request range ${_n.range}`),ce.executeRequest(_n))}(Zt)):function(_n){const Ln=D.getCurrentRepresentation();try{if(X.get().streaming.gaps.enableSeekFix&&(ne||ze.getTime()===0)){let xn;if(z?z&&Ln.segmentInfoType===k.default.SEGMENT_TIMELINE&&(xn=I.getValidTimeAheadOfTargetTime(v,_,Ln,X.get().streaming.gaps.threshold)):(xn=I.getValidTimeAheadOfTargetTime(v,_,Ln,X.get().streaming.gaps.threshold),isNaN(xn)&&v>=Ln.adaptation.period.mpd.mediaPresentationDuration-Ln.segmentDuration&&(xn=v-.1)),!isNaN(xn)&&xn!==v)return void(ze.isSeeking()||ze.getTime()===0?(F.warn(`Adjusting playback time ${xn} because of gap in the manifest. Seeking by ${xn-v}`),ze.seek(xn,!1,!1)):(F.warn(`Adjusting buffering time ${xn} because of gap in the manifest. Adjusting time by ${xn-v}`),Tt(xn),_n&&lt()))}}catch(xn){F.error(xn)}at()||_n&&lt()}(Ut)}function at(){const Ze=D.getCurrentRepresentation(),Ut=I.isLastSegmentRequested(Ze,v);if(Ut){const Zt=I.getCurrentIndex();F.debug(`Segment requesting for stream ${Se.id} has finished`),se.trigger(P.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Zt},{streamId:Se.id,mediaType:ue}),y.segmentRequestingCompleted(Zt),an()}return Ut}function lt(){M.startScheduleTimer(ze.getLowLatencyModeEnabled()?X.get().streaming.scheduling.lowLatencyTimeout:X.get().streaming.scheduling.defaultTimeout)}function ot(Ze){V.addBufferState(ue,Ze.state,M.getBufferTarget()),Ze.state!==ee.BUFFER_EMPTY||ze.isSeeking()||(F.info("Buffer is empty! Stalling!"),V.pushPlayListTraceMetrics(new Date,Ot.REBUFFERING_REASON))}function qt(Ze){ce.syncExecutedRequestsWithBufferedRange(y.getBuffer().getAllBufferRanges(),Se.duration),Ze.quotaExceeded&&Ze.from>ze.getTime()&&Tt(Ze.from),Ze.hasEnoughSpaceToAppend&&Ze.quotaExceeded&&M.startScheduleTimer()}function Kt(Ze){if(!Ze||!Ze.lastRequestAppended||!Ze.lastRequestAppended.url)return;let Ut=Ze.lastRequestAppended.url;Ze.lastRequestAppended.range&&(Ut=Ut.concat("_",Ze.lastRequestAppended.range)),F.warn(`Blacklisting segment with url ${Ut}`),K.add(Ut)}function Xt(Ze){if(F.debug(`Appended bytes for ${Ze.mediaType} and stream id ${Ze.streamId}`),Ze.segmentType===_e.HTTPRequest.INIT_SEGMENT_TYPE){const Ut=Ze.representationId;M.setLastInitializedRepresentationId(Ut),F.info("["+ue+"] lastInitializedRepresentationId changed to "+Ut)}H&&H.enabled?bt(H.newRepresentation,H.oldRepresentation):ie||M.startScheduleTimer(0)}function In(){H={newRepresentation:null,oldRepresentation:null,enabled:!1}}function Lt(Ze){return new Promise(Ut=>{if(!D)return Promise.resolve();let Zt=null;var _n;Zt=Ze.newRepresentation?{selectedRepresentation:(_n=Ze).newRepresentation,currentMediaInfo:_n.newMediaInfo}:_!==null&&Ae.areMediaInfosEqual(_,Ze.newMediaInfo)?function(xn){return{currentMediaInfo:xn.newMediaInfo,selectedRepresentation:D.getCurrentRepresentation()}}(Ze):function(xn){let Ta=NaN;return Ta=!X.get().streaming.abr.autoSwitchBitrate[xn.newMediaInfo.type]&&xn.previouslySelectedRepresentation?xn.previouslySelectedRepresentation.bitrateInKbit:oe.getInitialBitrateFor(ue),{selectedRepresentation:oe.getOptimalRepresentationForBitrate(xn.newMediaInfo,Ta,!1),currentMediaInfo:xn.newMediaInfo}}(Ze),gn(Zt.currentMediaInfo),se.trigger();const Ln=oe.getPossibleVoRepresentations(_,!1);return D.updateData(Ln,_.isFragmented,Zt.selectedRepresentation.id).then(()=>{(function(){const xn=D.getCurrentRepresentation();y.getIsBufferingCompleted()||y.updateBufferTimestampOffset(xn)})(),Ut()}).catch(xn=>{F.error(xn),Ut()})})}function gn(Ze){Ae.areMediaInfosEqual(_,Ze)||se.trigger(be.default.NEW_TRACK_SELECTED,{value:Ze}),_=Ze,oe.handleNewMediaInfo(_),se.trigger(P.default.MEDIAINFO_UPDATED,{mediaType:ue,streamId:Se.id,currentMediaInfo:_})}function vn(Ze){const Ut=Ze.newRepresentation,Zt=Ze.oldRepresentation;Ut&&Zt||F.warn("_handleDifferentSwitchTypes() is missing the target representations"),Ze.reason&&Ze.reason.forceReplace?function(_n,Ln){ce.abortRequests(),se.trigger(P.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ue,streamId:Se.id},{mediaType:ue,streamId:Se.id}),M.setCheckPlaybackQuality(!1),y.prepareForForceReplacementQualitySwitch(_n,Ln).then(()=>{Cn()}).catch(()=>{Cn()})}(Ut,Zt):Ze&&Ze.reason&&Ze.reason.forceAbandon?function(_n,Ln){y.prepareForAbandonQualitySwitch(_n,Ln).then(()=>{Nn()}).catch(()=>{Nn()})}(Ut,Zt):ve.getFastSwitchEnabled()?function(_n,Ln){const xn=ze.getTime();let Ta=1.5*(isNaN(_n.fragmentDuration)?1:_n.fragmentDuration);const Wa=ce.getRequests({state:zt.FRAGMENT_MODEL_EXECUTED,time:xn+Ta,threshold:0})[0];if(Wa&&!_.isText){const tr=y.getBufferLevel(),Zn=oe.getAbandonmentStateFor(Se.id,ue);Wa.bandwidth<_n.bandwidth&&tr>=Ta&&Zn===ee.ALLOW_LOAD?y.prepareForFastQualitySwitch(_n,Ln).then(()=>{Ke(xn,Ta)}).catch(()=>{Ke(xn,Ta)}):bt(_n,Ln)}else bt(_n,Ln)}(Ut,Zt):bt(Ut,Zt),V.pushPlayListTraceMetrics(new Date,Ot.REPRESENTATION_SWITCH_STOP_REASON),V.createPlaylistTraceMetrics(Ut.id,1e3*ze.getTime(),ze.getPlaybackRate())}function Cn(){pt(),In(),G=!1}function Nn(){ce.abortRequests(),Z=!0,M.setCheckPlaybackQuality(!1),M.startScheduleTimer(),G=!1}function Ke(Ze,Ut){ce.abortRequests(),Tt(Ze+Ut),M.setCheckPlaybackQuality(!1),M.startScheduleTimer(),G=!1}function bt(Ze,Ut){const Zt=ce.getRequests({state:zt.FRAGMENT_MODEL_LOADING});if(Zt&&Zt.length>0)return F.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),H.newRepresentation=Ze,H.oldRepresentation=Ut,void(H.enabled=!0);y.prepareForDefaultQualitySwitch(Ze,Ut).then(()=>{ht()}).catch(()=>{ht()})}function ht(){M.setCheckPlaybackQuality(!1),_.segmentAlignment||_.subSegmentAlignment?M.startScheduleTimer():ke(),In(),G=!1}function St(Ze){F.info("onFragmentLoadingAbandoned request: "+Ze.request.url+" has been aborted"),ze.isSeeking()||M.getSwitchTrack()||G||(F.info("onFragmentLoadingAbandoned request: "+Ze.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ze.request&&Ze.request.isInitializationRequest()?M.setInitSegmentRequired(!0):Tt(Ze.request.startTime+Ze.request.duration/2),M.startScheduleTimer(0))}function ln(Ze){F.info("OnFragmentLoadingCompleted for stream id "+Se.id+" and media type "+ue+" - Url:",Ze.request?Ze.request.url:"undefined",Ze.request.range?", Range:"+Ze.request.range:""),_.isText&&M.startScheduleTimer(0),Ze.error&&Ze.request.serviceLocation&&function(Ut){F.info("Fragment loading completed with an error"),Ut&&Ut.request&&Ut.request.type&&(Ut.request.type===_e.HTTPRequest.INIT_SEGMENT_TYPE?Fe({representationId:Ut.request.representation.id,sender:{}},!1):Ut.request.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Tt(Ut.request.startTime+Ut.request.duration/2),je({},!1)))}(Ze)}function Sn(){Tt(ze.getTime()),$t().startScheduleTimer()}function ft(Ze){const Ut=Ze.currentTrackInfo;if(!Ut)return;const Zt=x.find(_n=>_n.index===Ut.index&&_n.lang===Ut.lang);Zt&&Lt(new mn({newMediaInfo:Zt})).then(()=>{y.setIsBufferingCompleted(!1),Tt(ze.getTime()),M.setInitSegmentRequired(!0),M.startScheduleTimer()})}function Gt(Ze){Tt(Ze.quotaExceededTime),an()}function dn(){return y?y.getBuffer():null}function $t(){return M}function an(){M&&M.clearScheduleTimer()}function et(){let Ze,Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;return isNaN(Ut)?Ze=D?D.getCurrentRepresentation():null:((0,Ht.checkInteger)(Ut),Ze=D?D.getRepresentationById(Ut):null),Ze}function Ct(){return!!y&&y.getIsBufferingCompleted()}function rn(Ze){if(!X.get().streaming.enableManifestTimescaleMismatchFix)return;const Ut=Ze.chunk,Zt=Ut.bytes,_n=et(Ut.representation.id);_n&&(_n.timescale=Q.getMediaTimescaleFromMoov(Zt))}function Qt(Ze){const Ut=Ze.chunk,Zt=Ut.bytes,_n=et(Ut.representation.id);if(_n){let Ln;if(X.get().streaming.parseInbandPrft&&Ze.request.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE){Ln=Ln||Q.parse(Zt);const Wa=function(tr,Zn){const va=tr.getBoxes("prft"),na=[];return va.forEach(oa=>{na.push(function(ua,ri){let ei="unknown";switch(ua.flags){case 0:ei=k.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:ei=k.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:ei=k.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let yi=1e3*ua.ntp_timestamp_sec+ua.ntp_timestamp_frac/2**32*1e3;return yi=cn(re).getInstance().ntpToUTC(yi),{type:ei,ntpTimestamp:yi,mediaTime:ua.media_time/ri}}(oa,Zn))}),na}(Ln,_n.timescale);Wa&&Wa.length&&se.trigger(be.default.INBAND_PRFT,{data:Wa},{streamId:Se.id,mediaType:ue})}const xn=Ae.getEventsFor(_n.mediaInfo,null,Se),Ta=Ae.getEventsFor(_n,_n,Se);if(xn&&xn.length>0||Ta&&Ta.length>0){const Wa=Ze.request;Ln=Ln||Q.parse(Zt);const tr=function(Zn,va,na,oa){try{const ua={},ri=[],ei=na.concat(oa);for(let si=0,ds=ei.length;si<ds;si++)ua[ei[si].schemeIdUri+"/"+ei[si].value]=ei[si];const yi=Zn.getBoxes("emsg");if(!yi||yi.length===0)return ri;const Ir=Zn.getBox("sidx"),nr=!Ir||isNaN(Ir.earliest_presentation_time)||isNaN(Ir.timescale)?va&&!isNaN(va.mediaStartTime)?va.mediaStartTime:0:Ir.earliest_presentation_time/Ir.timescale,Ua=Math.max(nr,0),Ci=D.getCurrentRepresentation();for(let si=0,ds=yi.length;si<ds;si++){const Ai=Ae.getEvent(yi[si],ua,Ua,Ci);Ai&&ri.push(Ai)}return ri}catch{return[]}}(Ln,Wa,xn,Ta);se.trigger(P.default.INBAND_EVENTS,{events:tr},{streamId:Se.id})}}}function pt(){const Ze=ze.getTime();X.get().streaming.buffer.flushBufferAtTrackSwitch&&ze.seek(Ze+.001,!1,!0),Tt(Ze),y.setSeekTarget(Ze),M.startScheduleTimer()}function ke(){const Ze=ze.getTime(),Ut=y.getContinuousBufferTimeForTargetTime(Ze);Tt(isNaN(Ut)?Ze:Ut),M.startScheduleTimer()}function Qe(Ze){Ze&&!isNaN(Ze.time)&&(Tt(Ze.time),y.setSeekTarget(Ze.time))}function Tt(Ze){v=Ze,ne=!0}return w={checkAndHandleCompletedBuffering:at,clearScheduleTimer:an,createBufferSinks:function(Ze,Ut){const Zt=dn();return Zt?Promise.resolve(Zt):y?y.createBufferSink(_,Ze,Ut):Promise.resolve(null)},dischargePreBuffer:function(){y.dischargePreBuffer()},finalisePlayList:function(Ze,Ut){V.pushPlayListTraceMetrics(Ze,Ut)},getAllMediaInfos:function(){return x},getBuffer:dn,getBufferController:function(){return y},getBufferLevel:function(){return y?y.getBufferLevel():0},getFragmentModel:function(){return ce},getMediaInfo:function(){return _},getMediaSource:function(){return y.getMediaSource()},getRepresentation:et,getRepresentationController:function(){return D},getScheduleController:$t,getStreamId:he,getStreamInfo:function(){return Se},getType:le,initialize:function(Ze,Ut,Zt){B=At(re).create({events:P.default,eventBus:se,streamInfo:Se,timelineConverter:J,dashConstants:k.default,segmentBaseController:S.segmentBaseController,type:ue}),I=wt(re).create({streamInfo:Se,type:ue,timelineConverter:J,dashMetrics:V,mediaPlayerModel:ve,baseURLController:S.baseURLController,errHandler:$,segmentsController:B,settings:X,boxParser:Q,events:P.default,eventBus:se,errors:Y,debug:(0,Ve.default)(re).getInstance(),dashConstants:k.default,constants:q.default,urlUtils:jt(re).getInstance()}),z=Se.manifestInfo.isDynamic,I.initialize(z),oe.registerStreamType(ue,w),D=Jt(re).create({streamInfo:Se,type:ue,abrController:oe,dashMetrics:V,playbackController:ze,timelineConverter:J,dashConstants:k.default,events:P.default,eventBus:se,errors:Y,isDynamic:z,adapter:Ae,segmentsController:B}),y=function(_n,Ln){let xn=null;return _n?(xn=_n!==q.default.TEXT||Ln?Je(re).create({abrController:oe,capabilities:U,errHandler:$,fragmentModel:ce,manifestModel:Te,mediaController:ge,mediaPlayerModel:ve,playbackController:ze,representationController:D,settings:X,streamInfo:Se,textController:ye,type:_n}):Mt(re).create({errHandler:$,fragmentModel:ce,mimeType:Me,settings:X,streamInfo:Se,textController:ye,type:_n}),xn):($.error(new Ce.default(Y.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Y.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ue,Zt),y&&y.initialize(Ze),M=tn(re).create({streamInfo:Se,type:ue,mimeType:Me,adapter:Ae,dashMetrics:V,mediaPlayerModel:ve,fragmentModel:ce,abrController:oe,playbackController:ze,textController:ye,mediaController:ge,bufferController:y,representationController:D,settings:X}),M.initialize(Ut),v=0,ne=!1,Z=!1},isBufferingCompleted:Ct,prepareInnerPeriodPlaybackSeeking:function(Ze){return new Promise(Ut=>{if(y.hasBufferAtTime(Ze.seekTime))return y.pruneBuffer(),we(y.getContinuousBufferTimeForTargetTime(Ze.seekTime))&&y.setIsBufferingCompleted(!0),void Ut();an(),ce.abortRequests(),y.prepareForPlaybackSeek().then(()=>{const Zt=y.getAllRangesWithSafetyFactor(Ze.seekTime);return y.clearBuffers(Zt)}).then(()=>{const Zt=y.getContinuousBufferTimeForTargetTime(Ze.seekTime);if(we(Zt))y.setIsBufferingCompleted(!0),Ut();else{const _n=isNaN(Zt)?Ze.seekTime:Zt;Tt(_n),y.setSeekTarget(_n);const Ln=[];Ln.push(y.updateAppendWindow());const xn=et();Ln.push(y.updateBufferTimestampOffset(xn)),Promise.all(Ln).then(()=>{M.setInitSegmentRequired(!0),M.setCheckPlaybackQuality(!1),M.startScheduleTimer(),Ut()})}}).catch(Zt=>{F.error(Zt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((Ze,Ut)=>{try{an(),ce.abortRequests(),y.prepareForPlaybackSeek().then(()=>y.pruneAllSafely()).then(()=>{Ze()})}catch(Zt){Ut(Zt)}})},prepareQualityChange:function(Ze){Ze.newRepresentation&&(H&&H.enabled&&F.warn(`Canceling queued representation switch to ${H.newRepresentation.id} for ${ue}`),Ze.isAdaptationSetSwitch?(F.debug(`Preparing quality switch to different AdaptationSet for type ${ue}`),function(Ut){const Zt=Ut.newRepresentation;G=!0,an(),M.setSwitchTrack(!0);const _n=Zt.mediaInfo;gn(_n),Lt(new mn({newMediaInfo:_n,newRepresentation:Zt})).then(()=>{vn(Ut)})}(Ze)):(F.debug(`Preparing quality within the same AdaptationSet for type ${ue}`),function(Ut){const Zt=Ut.newRepresentation;G=!0,an(),D.prepareQualityChange(Zt),vn(Ut)}(Ze)))},prepareTrackSwitch:function(Ze){let Ut=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(Zt=>{F.debug(`Preparing track switch for type ${ue}`);const _n=ue===q.default.TEXT||Ut||X.get().streaming.trackSwitchMode[ue]===q.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&ze.getTimeToStreamEnd(Se)>X.get().streaming.buffer.stallThreshold;y.getIsBufferingCompleted()&&!_n?function(Ln){return new Promise(xn=>{const Ta=D.getCurrentRepresentation();y.prepareForNonReplacementTrackSwitch(Ta,Ln).then(()=>{se.trigger(P.default.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:ue}),xn()}).catch(()=>{se.trigger(P.default.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:ue}),xn()})})}(Ze).then(()=>{Zt()}):(M.setSwitchTrack(!0),_n?function(Ln){return new Promise(xn=>{se.trigger(P.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ue,streamId:Se.id},{mediaType:ue,streamId:Se.id}),ce.abortRequests();const Ta=et();y.prepareForReplacementTrackSwitch(Ta,Ln).then(()=>{pt(),xn()}).catch(()=>{pt(),xn()})})}(Ze).then(()=>{Zt()}):function(Ln){return new Promise(xn=>{const Ta=()=>{const Wa=ce.getRequests({state:zt.FRAGMENT_MODEL_LOADING});if(Wa&&Wa.length!==0)se.once(be.default.FRAGMENT_LOADING_COMPLETED,Ta,w);else{const tr=et();y.prepareForNonReplacementTrackSwitch(tr,Ln).then(()=>{ke(),xn()}).catch(Zn=>{F.error(Zn),ke(),xn()})}};Ta()})}(Ze).then(()=>{Zt()}))})},probeNextRequest:function(){const Ze=et();return I.getNextSegmentRequestIdempotent(_,Ze)},reset:function(Ze,Ut){I&&I.reset(),y&&(y.reset(Ze,Ut),y=null),M&&(M.reset(),M=null),D&&(D.reset(),D=null),B&&(B=null),oe&&oe.unRegisterStreamType(he(),ue),se.off(P.default.INIT_FRAGMENT_NEEDED,Fe,w),se.off(P.default.MEDIA_FRAGMENT_NEEDED,je,w),se.off(P.default.INIT_FRAGMENT_LOADED,rn,w),se.off(P.default.MEDIA_FRAGMENT_LOADED,Qt,w),se.off(P.default.BUFFER_LEVEL_STATE_CHANGED,ot,w),se.off(P.default.BUFFER_CLEARED,qt,w),se.off(P.default.SEEK_TARGET,Qe,w),se.off(P.default.FRAGMENT_LOADING_ABANDONED,St,w),se.off(P.default.FRAGMENT_LOADING_COMPLETED,ln,w),se.off(P.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Sn,w),se.off(P.default.SET_NON_FRAGMENTED_TEXT,ft,w),se.off(P.default.QUOTA_EXCEEDED,Gt,w),se.off(P.default.SOURCE_BUFFER_ERROR,Kt,w),se.off(P.default.BYTES_APPENDED_END_FRAGMENT,Xt,w),Ie(),ue=null,Se=null},selectMediaInfo:Lt,setExplicitBufferingTime:Tt,setMediaInfoArray:function(Ze){x=Ze},setMediaSource:function(Ze){return y.setMediaSource(Ze,_)},setTrackSwitchInProgress:function(Ze){ie=Ze},updateStreamInfo:function(Ze){return Se=Ze,Ct()?Promise.resolve():y.updateAppendWindow()}},F=(0,Ve.default)(re).getInstance().getLogger(w),Ie(),se.on(P.default.INIT_FRAGMENT_NEEDED,Fe,w),se.on(P.default.MEDIA_FRAGMENT_NEEDED,je,w),se.on(P.default.INIT_FRAGMENT_LOADED,rn,w),se.on(P.default.MEDIA_FRAGMENT_LOADED,Qt,w),se.on(P.default.BUFFER_LEVEL_STATE_CHANGED,ot,w),se.on(P.default.BUFFER_CLEARED,qt,w),se.on(P.default.SEEK_TARGET,Qe,w),se.on(P.default.FRAGMENT_LOADING_ABANDONED,St,w),se.on(P.default.FRAGMENT_LOADING_COMPLETED,ln,w),se.on(P.default.QUOTA_EXCEEDED,Gt,w),se.on(P.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Sn,w),se.on(P.default.SET_NON_FRAGMENTED_TEXT,ft,w),se.on(P.default.SOURCE_BUFFER_ERROR,Kt,w),se.on(P.default.BYTES_APPENDED_END_FRAGMENT,Xt,w),w}On.__dashjs_factory_name="StreamProcessor";var ra=xe.default.getClassFactory(On),ga=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},sa=t(7263);function ba(){let S,y;function v(){y&&(y.onloadend=y.onerror=y.onprogress=y.onload=null,y.abort(),y=null)}return S={load:function(_,I){if(y=null,y=new XMLHttpRequest,y.open(_.method,_.url,!0),_.responseType&&(y.responseType=_.responseType),_.headers)for(let w in _.headers){let z=_.headers[w];z&&y.setRequestHeader(w,z)}return y.withCredentials=_.credentials==="include",y.timeout=_.timeout,y.onload=function(){I.url=this.responseURL,I.status=this.status,I.statusText=this.statusText,I.headers=sa.default.parseHttpHeaders(this.getAllResponseHeaders()),I.data=this.response},_.customData&&(y.onloadend=_.customData.onloadend,y.onprogress=_.customData.onprogress,y.onabort=_.customData.onabort,y.ontimeout=_.customData.ontimeout),y.send(),_.customData.abort=v.bind(this),!0},abort:v,getXhr:function(){return y},reset:function(){v(),S=null},resetInitialSettings:function(){v()}},S}ba.__dashjs_factory_name="XHRLoader";var Na=xe.default.getClassFactory(ba);function Da(){const S=this.context,y=(0,W.default)(S).getInstance();let v,_,I;function w(D,M,B){D.customData.reader.read().then(B).catch(function(){z(D)})}function z(D){D.customData.onloadend&&D.customData.onloadend()}function F(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function x(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function H(D,M){try{if((D=D.filter(B=>B.bytes>M/4/D.length)).length>1){let B=0;const Z=(D[D.length-1].timestamp-D[0].timestamp)/D.length;return D.forEach((ne,ie)=>{const re=D[ie+1];if(re){const se=re.timestamp-ne.timestamp;B+=se<Z?se:0}}),B}return null}catch{return null}}function G(D,M){return 8*D/M}return I=(0,Ve.default)(S).getInstance().getLogger(v),v={abort:x,calculateDownloadedTime:H,load:function(D,M){const B=function(ie){const re=new Headers;if(ie.headers)for(let se in ie.headers){let oe=ie.headers[se];oe&&re.append(se,oe)}return re}(D),Z=function(ie){let re;return typeof window.AbortController=="function"&&(re=new AbortController,ie.customData.abortController=re,re.signal.onabort=ie.customData.onabort),ie.customData.abort=x.bind(ie),re}(D),ne=function(ie,re,se){return new Request(ie.url,{method:ie.method,headers:re,credentials:ie.credentials,signal:se?se.signal:void 0})}(D,B,Z);fetch(ne).then(ie=>{(function(re,se,oe){(function(ze,K){ze.status=K.status,ze.statusText=K.statusText,ze.url=K.url;const X={};for(const Se of K.headers.keys())X[Se]=K.headers.get(Se);ze.headers=X})(oe,re),re.ok||se.customData.onloadend();let Ae=0,Q=!1,U=new Uint8Array,V=0;se.customData.reader=re.body.getReader();let $=[],ce=[],Te=[],ge=!0;const ve=y.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,Me=ze=>{let{value:K,done:X}=ze;X?function(){if(U){const Se=function(){let ye=null;return ve===q.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?ye=function(){const J=function(ue,he){try{let le,Ie;if(le=ue.slice(0,-1),Ie=he.slice(0,-1),le.length!==Ie.length&&I.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${le.length}, Mdat: ${Ie.length}`),le.length<=1)return null;let we=[],Fe=0,je=0;for(let at=0;at<le.length;at++)if(le[at]&&Ie[at]){let lt=Ie[at].timestamp-le[at].timestamp;if(lt>1){const ot=G(Ie[at].bytes,lt);we.push(ot),je=0}else{je===0&&(je=le[at].timestamp,Fe=0);let ot=Ie[at].timestamp-je;if(ot>1){Fe+=Ie[at].bytes;const qt=G(Fe,ot);we.push(qt),je=0}else Fe+=Ie[at].bytes}}return we.length>0?we.reduce((at,lt)=>at+lt,0)/we.length:null}catch{return null}}(ce,Te);return J?8*Ae/J:null}():ve===q.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(ye=H($,Ae)),ye}();se.customData.onprogress({loaded:Ae,total:Ae,lengthComputable:!0,time:Se}),oe.data=U.buffer}se.customData.onloadend()}():(K&&K.length>0&&function(Se){U=function(J,ue){if(J.length===0)return ue;const he=new Uint8Array(J.length+ue.length);return he.set(J),he.set(ue,J.length),he}(U,Se),Ae+=Se.length,$.push({timestamp:F(),bytes:Se.length}),ve===q.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&ge&&_.findLastTopIsoBoxCompleted(["moof"],U,V).found&&(ge=!1,ce.push({timestamp:F()}));const ye=_.findLastTopIsoBoxCompleted(["moov","mdat"],U,V);ye.found?function(J){const ue=function(he){let le;return he===U.length?(le=U,U=new Uint8Array):(le=new Uint8Array(U.subarray(0,he)),U=U.subarray(he)),le}(J.startOffsetOfLastFoundTargetBox+J.sizeOfLastFoundTargetBox);ve!==q.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||ge||(ge=!0,Te.push({timestamp:F(),bytes:ue.length})),se.customData.onprogress({data:ue.buffer,lengthComputable:!1,noTrace:!0}),V=0}(ye):function(J){V=J.startOffsetOfLastCompletedBox+J.sizeOfLastCompletedBox,Q||(se.customData.onprogress({lengthComputable:!1,noTrace:!0}),Q=!0)}(ye)}(K),w(se,0,Me))};w(se,0,Me)})(ie,D,M)}).catch(()=>{z(D)})},reset:function(){},setConfig:function(D){_=D.boxParser}},v}Da.__dashjs_factory_name="FetchLoader";var gi=xe.default.getClassFactory(Da),Ra=t(913),pr=class{constructor(){this.period=null,this.index=-1,this.type=null}};class ui{constructor(y,v,_,I){this.url=y||"",this.serviceLocation=v||y||"",this.dvbPriority=_||1,this.dvbWeight=I||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}ui.DEFAULT_DVB_PRIORITY=1,ui.DEFAULT_DVB_WEIGHT=1;var Ka=ui,$a=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(S){S&&(this.schemeIdUri=S.schemeIdUri?S.schemeIdUri:null,this.value=S.value!==null&&S.value!==void 0?S.value.toString():null,this.id=S.id?S.id:null,S[k.default.DVB_URL]&&(this.dvbUrl=S[k.default.DVB_URL]),S[k.default.DVB_MIMETYPE]&&(this.dvbMimeType=S[k.default.DVB_MIMETYPE]),S[k.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=S[k.default.DVB_FONTFAMILY]))}inArray(S){return!!S&&S.some(y=>this.schemeIdUri===y.schemeIdUri&&(this.value?this.value.toString().match(y.value):"".match(y.value)))}},So=class extends $a{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(S){super.init(S),S&&(this.version=S.version,this.sessionID=S.sessionID,this.contentID=S.contentID,this.mode=S.mode??"query",this.keys=S.keys?S.keys.split(" "):null,this.includeInRequests=S.includeInRequests?S.includeInRequests.split(" "):["segment"],this.schemeIdUri=S.schemeIdUri)}},Bl=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},jl=class extends $a{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(S){super.init(S),S&&(this.ref=S.hasOwnProperty(k.default.REF)?S[k.default.REF]:null,this.refId=S.hasOwnProperty(k.default.REF_ID)?S[k.default.REF_ID]:null,this.robustness=S.hasOwnProperty(k.default.ROBUSTNESS)?S[k.default.ROBUSTNESS]:null,this.cencDefaultKid=S.hasOwnProperty(k.default.CENC_DEFAULT_KID)?S[k.default.CENC_DEFAULT_KID]:null,this.pssh=S.hasOwnProperty(k.default.PSSH)?S[k.default.PSSH]:null,this.pro=S.hasOwnProperty(k.default.PRO)?S[k.default.PRO]:null,this.laUrl=S.hasOwnProperty(k.default.LA_URL)?S[k.default.LA_URL]:S.hasOwnProperty(k.default.LA_URL_LOWER_CASE)?S[k.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(S){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach(y=>{this[y]===null&&(this[y]=S[y])})}},_o=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},Lr=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},Qr=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},Vt=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},Tn=class{constructor(S,y){this.url=S||"",this.serviceLocation=y||null,this.queryParams={}}},Mn=t(7393),ia=class{constructor(S,y,v){this.url=S||"",this.serviceLocation=y||null,this.ttl=v||NaN,this.queryParams={}}};class ea{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}ea.DEFAULT_ID="defaultId";var Ga=ea,Ca=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},fa=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN,this.endNumber=null}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==k.default.BASE_URL&&this.segmentInfoType!==k.default.SEGMENT_BASE&&!this.indexRange}},$n=t(5717);function da(){let S,y,v,_;const I=this.context,w=jt(I).getInstance(),z=Number.isInteger||function(K){return typeof K=="number"&&isFinite(K)&&Math.floor(K)===K};function F(K,X){if(!K)throw new Error("adaptation is not defined");if(!X)throw new Error("type is not defined");if(K.Representation&&K.Representation.length){const ye=U(K.Representation[0]);if(ye&&ye.some(J=>q.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(J.schemeIdUri)>=0))return X===q.default.IMAGE}if(K.ContentComponent&&K.ContentComponent.length>0){if(K.ContentComponent.length>1)return X===q.default.MUXED;if(K.ContentComponent[0].contentType===X)return!0}const Se=X===q.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(X);if(K.Representation&&K.Representation.length){const ye=K.Representation[0].codecs;if(Se.test(ye))return!0}if(K.hasOwnProperty(k.default.MIME_TYPE))return Se.test(K.mimeType);if(K.Representation){let ye;for(let J=0;J<K.Representation.length;J++)if(ye=K.Representation[J],ye.hasOwnProperty(k.default.MIME_TYPE))return Se.test(ye.mimeType)}return!1}function x(K){if(!K)throw new Error("adaptation is not defined");if(K.hasOwnProperty(k.default.SEGMENT_TEMPLATE)||K.hasOwnProperty(k.default.SEGMENT_TIMELINE)||K.hasOwnProperty(k.default.SEGMENT_LIST)||K.hasOwnProperty(k.default.SEGMENT_BASE))return!0;if(K.Representation&&K.Representation.length>0){const X=K.Representation[0];if(X.hasOwnProperty(k.default.SEGMENT_TEMPLATE)||X.hasOwnProperty(k.default.SEGMENT_TIMELINE)||X.hasOwnProperty(k.default.SEGMENT_LIST)||X.hasOwnProperty(k.default.SEGMENT_BASE))return!0}return!1}function H(K){return F(K,q.default.VIDEO)}function G(K){return F(K,q.default.TEXT)}function D(K){return F(K,q.default.IMAGE)}function M(K){return K&&K.Representation&&K.Representation.sort((X,Se)=>X.bandwidth-Se.bandwidth),K}function B(K,X){return K&&K.Period&&z(X)&&K.Period[X]?K.Period[X].AdaptationSet:[]}function Z(K){return K&&K.Period?K.Period:[]}function ne(K){const X=ie(K);return X&&X.length>0}function ie(K){let X=[];if(!K)return X;const Se=re(K);return X=X.concat(Se),K.hasOwnProperty(k.default.ADAPTATION_SET)&&K[k.default.ADAPTATION_SET].length>0&&K[k.default.ADAPTATION_SET].forEach(ye=>{const J=re(ye);X=X.concat(J)}),X}function re(K){return K&&K.hasOwnProperty(k.default.CONTENT_PROTECTION)&&K.ContentProtection.length!==0?K[k.default.CONTENT_PROTECTION].map(X=>{const Se=new jl;return Se.init(X),Se}):[]}function se(K){let X=!1;return K&&K.hasOwnProperty("type")&&(X=K.type===k.default.DYNAMIC),X}function oe(K){if(!K)return null;const X=K[k.default.FRAMERATE];if(!X)return null;if(typeof X=="string"&&X.includes("/")){const[Se,ye]=X.split("/").map(J=>parseInt(J,10));if(!isNaN(Se)&&!isNaN(ye)&&ye!==0)return Se/ye}return parseInt(X)}function Ae(K,X){return X&&X.hasOwnProperty(K)&&X[K].length?X[K].map(Se=>{const ye=new $a;return ye.init(Se),ye}):[]}function Q(K,X){if(!X)return[];let Se=function(ye,J){if(!J||!J.length)return[];let ue=J[0][ye]||[];return ue.length===0?[]:J.length===1?ue:ue.filter(he=>J.slice(1).every(le=>le.hasOwnProperty(ye)&&le[ye].some(Ie=>Ie.schemeIdUri===he.schemeIdUri&&Ie.value===he.value)))}(K,X[k.default.REPRESENTATION]);return X.hasOwnProperty(K)&&X[K].length&&Se.push(...X[K]),Se.map(ye=>{const J=new $a;return J.init(ye),J})}function U(K){return Ae(k.default.ESSENTIAL_PROPERTY,K)}function V(K){return Ae(k.default.SUPPLEMENTAL_PROPERTY,K)}function $(K){if(!K||!K.S)return NaN;let X=K.S[0],Se=K.S[1];return X.hasOwnProperty("d")?X.d:Se.t-X.t}function ce(K){const X=K.presentationTimeOffset;return K.adaptation.period.start-X}function Te(K,X){if(!K)throw new Error("Period cannot be null or undefined");let Se=Ga.DEFAULT_ID+"_"+X;return K.hasOwnProperty(k.default.ID)&&K.id.toString().length>0&&K.id!=="__proto__"&&(Se=K.id.toString()),Se}function ge(K,X,Se){const ye=[];let J;if(!K)return ye;for(J=0;J<K.length;J++){const ue=new Qr;if(ue.timescale=1,ue.representation=X,!K[J].hasOwnProperty(q.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");ue.schemeIdUri=K[J].schemeIdUri,K[J].hasOwnProperty(k.default.TIMESCALE)&&(ue.timescale=K[J].timescale),K[J].hasOwnProperty(k.default.VALUE)&&(ue.value=K[J].value),ye.push(ue),ue.period=Se}return ye}function ve(K){const X=[],Se=K.BaseURL||[K.baseUri];let ye=!1;return Se.some(J=>{if(J){const ue=new Ka;let he=J.__text||J;return w.isRelative(he)&&(ye=!0,K.baseUri&&(he=w.resolve(he,K.baseUri))),ue.url=he,J.hasOwnProperty(k.default.SERVICE_LOCATION)&&J.serviceLocation.length?ue.serviceLocation=J.serviceLocation:ue.serviceLocation=he,J.hasOwnProperty(k.default.DVB_PRIORITY)&&(ue.dvbPriority=J[k.default.DVB_PRIORITY]),J.hasOwnProperty(k.default.DVB_WEIGHT)&&(ue.dvbWeight=J[k.default.DVB_WEIGHT]),J.hasOwnProperty(k.default.AVAILABILITY_TIME_OFFSET)&&(ue.availabilityTimeOffset=J[k.default.AVAILABILITY_TIME_OFFSET]),J.hasOwnProperty(k.default.AVAILABILITY_TIME_COMPLETE)&&(ue.availabilityTimeComplete=J[k.default.AVAILABILITY_TIME_COMPLETE]!=="false"),X.push(ue),ye}}),X}function Me(K){const X=new _o;return X.serverUrl=K.__text,K.hasOwnProperty(k.default.DEFAULT_SERVICE_LOCATION)&&(X.defaultServiceLocation=K[k.default.DEFAULT_SERVICE_LOCATION],X.defaultServiceLocationArray=X.defaultServiceLocation.split(" ")),K.hasOwnProperty(k.default.QUERY_BEFORE_START)&&(X.queryBeforeStart=K[k.default.QUERY_BEFORE_START].toLowerCase()==="true"),K.hasOwnProperty(k.default.CLIENT_REQUIREMENT)&&(X.clientRequirement=K[k.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),X}function ze(K){const X=new Bl;return K.hasOwnProperty(k.default.CMCD_PARAMETERS)&&K[k.default.CMCD_PARAMETERS].schemeIdUri===q.default.CTA_5004_2023_SCHEME&&(X.cmcdParameters=new So,X.cmcdParameters.init(K[k.default.CMCD_PARAMETERS])),K.hasOwnProperty(k.default.SERVICE_LOCATIONS)&&K[k.default.SERVICE_LOCATIONS]!==""&&(X.serviceLocations=K[k.default.SERVICE_LOCATIONS],X.serviceLocationsArray=X.serviceLocations.toString().split(" ")),K.hasOwnProperty(k.default.ADAPTATION_SETS)&&K[k.default.ADAPTATION_SETS]!==""&&(X.adaptationSets=K[k.default.ADAPTATION_SETS],X.adaptationSetsArray=X.adaptationSets.toString().split(" ")),X}return S={getAccessibilityForAdaptation:function(K){return K&&K.hasOwnProperty(k.default.ACCESSIBILITY)&&K[k.default.ACCESSIBILITY].length?K[k.default.ACCESSIBILITY].map(X=>{const Se=new $a;return Se.init(X),Se}):[]},getAdaptationForId:function(K,X,Se){const ye=B(X,Se);let J,ue;for(J=0,ue=ye.length;J<ue;J++)if(ye[J].hasOwnProperty(k.default.ID)&&ye[J].id===K)return ye[J];return null},getAdaptationForIndex:function(K,X,Se){const ye=B(X,Se);return ye.length>0&&z(K)?ye[K]:null},getAdaptationsForPeriod:function(K){const X=K&&z(K.index)?K.mpd.manifest.Period[K.index]:null,Se=[];let ye,J,ue;if(X&&X.AdaptationSet)for(ue=0;ue<X.AdaptationSet.length;ue++)J=X.AdaptationSet[ue],ye=new pr,J.hasOwnProperty(k.default.ID)&&(ye.id=J.id),ye.index=ue,ye.period=K,F(J,q.default.MUXED)?ye.type=q.default.MUXED:F(J,q.default.AUDIO)?ye.type=q.default.AUDIO:H(J)?ye.type=q.default.VIDEO:G(J)?ye.type=q.default.TEXT:D(J)?ye.type=q.default.IMAGE:y.warn("Unknown Adaptation stream type"),Se.push(ye);return Se},getAdaptationsForType:function(K,X,Se){const ye=B(K,X);let J,ue;const he=[];for(J=0,ue=ye.length;J<ue;J++)F(ye[J],Se)&&he.push(M(ye[J]));return he},getAudioChannelConfigurationForAdaptation:function(K){return K&&K.hasOwnProperty(k.default.AUDIO_CHANNEL_CONFIGURATION)&&K[k.default.AUDIO_CHANNEL_CONFIGURATION].length?K[k.default.AUDIO_CHANNEL_CONFIGURATION].map(X=>{const Se=new $a;return Se.init(X),Se}):[]},getAudioChannelConfigurationForRepresentation:function(K){return K&&K.hasOwnProperty(k.default.AUDIO_CHANNEL_CONFIGURATION)&&K[k.default.AUDIO_CHANNEL_CONFIGURATION].length?K[k.default.AUDIO_CHANNEL_CONFIGURATION].map(X=>{const Se=new $a;return Se.init(X),Se}):[]},getAvailabilityStartTime:function(K){return K&&K.hasOwnProperty(k.default.AVAILABILITY_START_TIME)&&K.availabilityStartTime!==null?K.availabilityStartTime.getTime():null},getBandwidth:function(K){return K&&K.bandwidth?K.bandwidth:NaN},getBaseURLsFromElement:ve,getBitrateListForAdaptation:function(K){const X=M(K);return(X&&X.Representation?X.Representation:[]).map(Se=>({bandwidth:Se.bandwidth,width:Se.width||0,height:Se.height||0,scanType:Se.scanType||null,id:Se.id||null}))},getCodec:function(K,X,Se){let ye=null;if(K&&K.Representation&&K.Representation.length>0){const J=z(X)&&X>=0&&X<K.Representation.length?K.Representation[X]:K.Representation[0];J&&(ye=J.mimeType+';codecs="'+J.codecs+'"',Se&&J.width!==void 0&&(ye+=';width="'+J.width+'";height="'+J.height+'"'))}return ye&&(ye=ye.replace(/\sprofiles=[^;]*/g,"")),ye},getCombinedEssentialPropertiesForAdaptationSet:function(K){return Q(k.default.ESSENTIAL_PROPERTY,K)},getCombinedSupplementalPropertiesForAdaptationSet:function(K){return Q(k.default.SUPPLEMENTAL_PROPERTY,K)},getContentProtectionByAdaptation:function(K){return re(K)},getContentProtectionByManifest:function(K){let X=[];if(!K)return X;const Se=re(K);return X=X.concat(Se),K.hasOwnProperty(k.default.PERIOD)&&K[k.default.PERIOD].length>0&&K[k.default.PERIOD].forEach(ye=>{const J=ie(ye);X=X.concat(J)}),X},getContentProtectionByPeriod:ie,getContentSteering:function(K){if(K&&K.hasOwnProperty(k.default.CONTENT_STEERING))return Me(K[k.default.CONTENT_STEERING][0])},getDuration:function(K){let X;return X=K&&K.hasOwnProperty(k.default.MEDIA_PRESENTATION_DURATION)?K.mediaPresentationDuration:K&&K.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,X},getEssentialPropertiesForAdaptationSet:function(K){return Ae(k.default.ESSENTIAL_PROPERTY,K)},getEssentialPropertiesForRepresentation:U,getEventStreamForAdaptationSet:function(K,X,Se){let ye,J,ue;return K&&K.Period&&X&&X.period&&z(X.period.index)&&(J=K.Period[X.period.index],J&&J.AdaptationSet&&z(X.index)&&(ue=J.AdaptationSet[X.index],ue&&(ye=ue.InbandEventStream))),ge(ye,null,Se)},getEventStreamForRepresentation:function(K,X,Se){let ye,J,ue,he;return K&&K.Period&&X&&X.adaptation&&X.adaptation.period&&z(X.adaptation.period.index)&&(J=K.Period[X.adaptation.period.index],J&&J.AdaptationSet&&z(X.adaptation.index)&&(ue=J.AdaptationSet[X.adaptation.index],ue&&ue.Representation&&z(X.index)&&(he=ue.Representation[X.index],he&&(ye=he.InbandEventStream)))),ge(ye,X,Se)},getEventsForPeriod:function(K){const X=K&&K.mpd&&K.mpd.manifest?K.mpd.manifest:null,Se=X?X.Period:null,ye=Se&&K&&z(K.index)?Se[K.index].EventStream:null,J=[];let ue,he;if(ye)for(ue=0;ue<ye.length;ue++){const le=new Qr;if(le.period=K,le.timescale=1,!ye[ue].hasOwnProperty(q.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(le.schemeIdUri=ye[ue][q.default.SCHEME_ID_URI],ye[ue].hasOwnProperty(k.default.TIMESCALE)&&(le.timescale=ye[ue][k.default.TIMESCALE]),ye[ue].hasOwnProperty(k.default.VALUE)&&(le.value=ye[ue][k.default.VALUE]),ye[ue].hasOwnProperty(k.default.PRESENTATION_TIME_OFFSET)&&(le.presentationTimeOffset=ye[ue][k.default.PRESENTATION_TIME_OFFSET]),he=0;ye[ue].Event&&he<ye[ue].Event.length;he++){const Ie=ye[ue].Event[he],we=new Lr;we.presentationTime=0,we.eventStream=le,Ie.hasOwnProperty(k.default.PRESENTATION_TIME)&&(we.presentationTime=Ie.presentationTime);const Fe=le.presentationTimeOffset?le.presentationTimeOffset/le.timescale:0;we.calculatedPresentationTime=we.presentationTime/le.timescale+K.start-Fe,Ie.hasOwnProperty(k.default.DURATION)&&(we.duration=Ie.duration/le.timescale),Ie.hasOwnProperty(k.default.ID)?we.id=parseInt(Ie.id):we.id=null,Ie.Signal&&Ie.Signal.Binary?we.messageData=_.decodeArray(Ie.Signal.Binary.toString()):we.messageData=Ie.messageData||Ie.__cdata||Ie.__text,J.push(we)}}return J},getFramerate:oe,getId:function(K){return K&&K[k.default.ID]||null},getIndexForAdaptation:function(K,X,Se){if(!K)return-1;const ye=B(X,Se);for(let J=0;J<ye.length;J++)if((0,Mn.default)(I).getInstance().areEqual(ye[J],K))return J;return-1},getIsDynamic:se,getIsFragmented:x,getIsText:G,getIsTypeOf:F,getLabelsForAdaptation:function(K){if(!K||!K.Label)return[];const X=[];for(let Se=0;Se<K.Label.length;Se++)X.push({lang:K.Label[Se].lang,text:K.Label[Se].__text||K.Label[Se]});return X},getLanguageForAdaptation:function(K){let X="";return K&&K.hasOwnProperty(k.default.LANG)&&(X=K.lang),X},getLocation:function(K){return K&&K.hasOwnProperty(k.default.LOCATION)?K[k.default.LOCATION].map(X=>{const Se=X.__text||X,ye=X.hasOwnProperty(k.default.SERVICE_LOCATION)?X[k.default.SERVICE_LOCATION]:null;return new Tn(Se,ye)}):[]},getManifestUpdatePeriod:function(K){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Se=NaN;return K&&K.hasOwnProperty(k.default.MINIMUM_UPDATE_PERIOD)&&(Se=K.minimumUpdatePeriod),isNaN(Se)?Se:Math.max(Se-X,1)},getMimeType:function(K){return K&&K.Representation&&K.Representation.length>0?K.Representation[0].mimeType:null},getMpd:function(K){const X=new Vt;return K&&(X.manifest=K,K.hasOwnProperty(k.default.AVAILABILITY_START_TIME)?X.availabilityStartTime=new Date(K.availabilityStartTime.getTime()):K.loadedTime&&(X.availabilityStartTime=new Date(K.loadedTime.getTime())),K.hasOwnProperty(k.default.AVAILABILITY_END_TIME)&&(X.availabilityEndTime=new Date(K.availabilityEndTime.getTime())),K.hasOwnProperty(k.default.MINIMUM_UPDATE_PERIOD)&&(X.minimumUpdatePeriod=K.minimumUpdatePeriod),K.hasOwnProperty(k.default.MEDIA_PRESENTATION_DURATION)&&(X.mediaPresentationDuration=K.mediaPresentationDuration),K.hasOwnProperty(k.default.SUGGESTED_PRESENTATION_DELAY)&&(X.suggestedPresentationDelay=K.suggestedPresentationDelay),K.hasOwnProperty(k.default.TIMESHIFT_BUFFER_DEPTH)&&(X.timeShiftBufferDepth=K.timeShiftBufferDepth),K.hasOwnProperty(k.default.MAX_SEGMENT_DURATION)&&(X.maxSegmentDuration=K.maxSegmentDuration),K.hasOwnProperty(k.default.PUBLISH_TIME)&&(X.publishTime=new Date(K.publishTime))),X},getPatchLocation:function(K){return K&&K.hasOwnProperty(k.default.PATCH_LOCATION)?K[k.default.PATCH_LOCATION].map(X=>{const Se=X.__text||X,ye=X.hasOwnProperty(k.default.SERVICE_LOCATION)?X[k.default.SERVICE_LOCATION]:null;let J=X.hasOwnProperty(k.default.TTL)?1e3*parseFloat(X[k.default.TTL]):NaN;return new ia(Se,ye,J)}):[]},getProducerReferenceTimesForAdaptation:function(K){const X=K&&K.hasOwnProperty(k.default.PRODUCER_REFERENCE_TIME)?K[k.default.PRODUCER_REFERENCE_TIME]:[];(K&&K.hasOwnProperty(k.default.REPRESENTATION)?K[k.default.REPRESENTATION]:[]).forEach(ye=>{ye.hasOwnProperty(k.default.PRODUCER_REFERENCE_TIME)&&X.push(...ye[k.default.PRODUCER_REFERENCE_TIME])});const Se=[];return X.forEach(ye=>{const J=new Ca;ye.hasOwnProperty(k.default.ID)&&(J[k.default.ID]=parseInt(ye[k.default.ID]),ye.hasOwnProperty(k.default.WALL_CLOCK_TIME)&&(J[k.default.WALL_CLOCK_TIME]=ye[k.default.WALL_CLOCK_TIME],ye.hasOwnProperty(k.default.PRESENTATION_TIME)&&(J[k.default.PRESENTATION_TIME]=ye[k.default.PRESENTATION_TIME],ye.hasOwnProperty(k.default.INBAND)&&(J[k.default.INBAND]=ye[k.default.INBAND]!=="false"),ye.hasOwnProperty(k.default.TYPE)&&(J[k.default.TYPE]=ye[k.default.TYPE]),Se.push(J))))}),Se},getPublishTime:function(K){return K&&K.hasOwnProperty(k.default.PUBLISH_TIME)?new Date(K[k.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(K,X){const Se=Z(X);return Se.length>0&&z(K)?Se[K]:null},getRealPeriods:Z,getRegularPeriods:function(K){const X=!!K&&se(K.manifest),Se=[];let ye,J,ue=null,he=null,le=null,Ie=null;for(J=0,ye=K&&K.manifest&&K.manifest.Period?K.manifest.Period.length:0;J<ye;J++)he=K.manifest.Period[J],he.hasOwnProperty(k.default.START)?(Ie=new Ga,Ie.start=he.start):ue!==null&&ue.hasOwnProperty(k.default.DURATION)&&le!==null?(Ie=new Ga,Ie.start=parseFloat((le.start+le.duration).toFixed(5))):J!==0||X||(Ie=new Ga,Ie.start=0),le!==null&&isNaN(le.duration)&&(Ie!==null?le.duration=parseFloat((Ie.start-le.start).toFixed(5)):y.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Ie!==null&&(Ie.id=Te(he,J),Ie.index=J,Ie.mpd=K,Ie.isEncrypted=ne(he),he.hasOwnProperty(k.default.DURATION)&&(Ie.duration=he.duration),le&&(le.nextPeriodId=Ie.id),Se.push(Ie),ue=he,le=Ie),he=null,Ie=null;return Se.length===0||le!==null&&isNaN(le.duration)&&(le.duration=parseFloat((function(we){(function(){if(!v||!v.hasOwnProperty("error"))throw new Error(q.default.MISSING_CONFIG_ERROR)})();const Fe=se(we.mpd.manifest);let je;return we.mpd.manifest.mediaPresentationDuration?je=we.mpd.manifest.mediaPresentationDuration:we.duration?je=we.duration:Fe?je=Number.POSITIVE_INFINITY:v.error(new Ce.default(Y.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",we)),je}(le)-le.start).toFixed(5))),Se},getRepresentationCount:function(K){return K&&K.Representation?K.Representation.length:0},getRepresentationFor:function(K,X){return X&&X.Representation&&X.Representation.length>0&&z(K)?X.Representation[K]:null},getRepresentationSortFunction:function(){return(K,X)=>K.bandwidth-X.bandwidth},getRepresentationsForAdaptation:function(K,X){const Se=[],ye=function(he){if(he&&he.period&&z(he.period.index)){const le=he.period.mpd.manifest.Period[he.period.index];if(le&&le.AdaptationSet&&z(he.index))return M(le.AdaptationSet[he.index])}}(K);let J,ue;if(ye&&ye.Representation){if(K&&K.period&&z(K.period.index)){const he=ve(K.period.mpd.manifest);he&&(ue=he[0])}for(let he=0,le=ye.Representation.length;he<le;++he){const Ie=ye.Representation[he],we=new fa;if(we.index=he,we.adaptation=K,we.mediaInfo=X,Ie.hasOwnProperty(k.default.ID)&&(we.id=Ie.id),Ie.hasOwnProperty(k.default.CODECS)&&(we.codecs=Ie.codecs,we.codecFamily=sa.default.getCodecFamily(we.codecs)),Ie.hasOwnProperty(k.default.MIME_TYPE)&&(we.mimeType=Ie[k.default.MIME_TYPE]),Ie.hasOwnProperty(k.default.CODEC_PRIVATE_DATA)&&(we.codecPrivateData=Ie.codecPrivateData),Ie.hasOwnProperty(k.default.BANDWITH)&&(we.bandwidth=Ie.bandwidth,we.bitrateInKbit=Ie.bandwidth/1e3),Ie.hasOwnProperty(k.default.WIDTH)&&(we.width=Ie.width),Ie.hasOwnProperty(k.default.HEIGHT)&&(we.height=Ie.height),Ie.hasOwnProperty(k.default.SCAN_TYPE)&&(we.scanType=Ie.scanType),Ie.hasOwnProperty(k.default.FRAMERATE)&&(we.frameRate=oe(Ie)),Ie.hasOwnProperty(k.default.QUALITY_RANKING)&&(we.qualityRanking=Ie[k.default.QUALITY_RANKING]),Ie.hasOwnProperty(k.default.MAX_PLAYOUT_RATE)&&(we.maxPlayoutRate=Ie.maxPlayoutRate),Ie.hasOwnProperty(k.default.SEGMENT_BASE)?(J=Ie.SegmentBase,we.segmentInfoType=k.default.SEGMENT_BASE):Ie.hasOwnProperty(k.default.SEGMENT_LIST)?(J=Ie.SegmentList,J.hasOwnProperty(k.default.SEGMENT_TIMELINE)?we.segmentInfoType=k.default.SEGMENT_TIMELINE:we.segmentInfoType=k.default.SEGMENT_LIST):Ie.hasOwnProperty(k.default.SEGMENT_TEMPLATE)?(J=Ie.SegmentTemplate,J.hasOwnProperty(k.default.SEGMENT_TIMELINE)?we.segmentInfoType=k.default.SEGMENT_TIMELINE:we.segmentInfoType=k.default.SEGMENT_TEMPLATE,J.hasOwnProperty(k.default.INITIALIZATION_MINUS)&&(we.initialization=J.initialization.split("$Bandwidth$").join(Ie.bandwidth).split("$RepresentationID$").join(Ie.id))):we.segmentInfoType=k.default.BASE_URL,we.essentialProperties=U(Ie),we.supplementalProperties=V(Ie),J){if(J.hasOwnProperty(k.default.INITIALIZATION)){const Fe=J.Initialization;Fe.hasOwnProperty(k.default.SOURCE_URL)&&(we.initialization=Fe.sourceURL),Fe.hasOwnProperty(k.default.RANGE)&&(we.range=Fe.range)}else G(ye)&&x(ye)&&ye.mimeType&&ye.mimeType.indexOf("application/mp4")===-1&&(we.range=0);J.hasOwnProperty(k.default.TIMESCALE)&&(we.timescale=J.timescale),J.hasOwnProperty(k.default.DURATION)?we.segmentDuration=J.duration/we.timescale:Ie.hasOwnProperty(k.default.SEGMENT_TEMPLATE)&&(J=Ie.SegmentTemplate,J.hasOwnProperty(k.default.SEGMENT_TIMELINE)&&(we.segmentDuration=$(J.SegmentTimeline)/we.timescale)),J.hasOwnProperty(k.default.MEDIA)&&(we.media=J.media),J.hasOwnProperty(k.default.START_NUMBER)&&(we.startNumber=parseInt(J.startNumber)),J.hasOwnProperty(k.default.INDEX_RANGE)&&(we.indexRange=J.indexRange),J.hasOwnProperty(k.default.PRESENTATION_TIME_OFFSET)&&(we.presentationTimeOffset=J.presentationTimeOffset/we.timescale),J.hasOwnProperty(k.default.AVAILABILITY_TIME_OFFSET)?we.availabilityTimeOffset=J.availabilityTimeOffset:ue&&ue.availabilityTimeOffset!==void 0&&(we.availabilityTimeOffset=ue.availabilityTimeOffset),J.hasOwnProperty(k.default.AVAILABILITY_TIME_COMPLETE)?we.availabilityTimeComplete=J.availabilityTimeComplete!=="false":ue&&ue.availabilityTimeComplete!==void 0&&(we.availabilityTimeComplete=ue.availabilityTimeComplete),J.hasOwnProperty(k.default.END_NUMBER)&&(we.endNumber=J[k.default.END_NUMBER])}we.mseTimeOffset=ce(we),we.path=[K.period.index,K.index,he],isNaN(we.width)||isNaN(we.height)||isNaN(we.frameRate)||(we.pixelsPerSecond=Math.max(1,we.width*we.height*we.frameRate),isNaN(we.bandwidth)||(we.bitsPerPixel=we.bandwidth/we.pixelsPerSecond)),Se.push(we)}}return Se},getRolesForAdaptation:function(K){return K&&K.hasOwnProperty(k.default.ROLE)&&K[k.default.ROLE].length?K[k.default.ROLE].map(X=>{X.schemeIdUri===q.default.DASH_ROLE_SCHEME_ID&&X.value==="Main"&&(X.value=k.default.MAIN);const Se=new $a;return Se.init(X),Se}):[]},getSegmentAlignment:function(K){return!(!K||!K.hasOwnProperty(k.default.SEGMENT_ALIGNMENT))&&K[k.default.SEGMENT_ALIGNMENT]==="true"},getSelectionPriority:function(K){try{const X=K&&K.selectionPriority!==void 0?parseInt(K.selectionPriority):1;return isNaN(X)?1:X}catch{return 1}},getServiceDescriptions:function(K){const X=[];if(K&&K.hasOwnProperty(k.default.SERVICE_DESCRIPTION))for(const Se of K.ServiceDescription){let ye=null,J=null,ue=null,he=null,le=null,Ie=null,we=null,Fe=null;for(const je in Se)if(Se.hasOwnProperty(je))if(je===k.default.ID)ye=Se[je];else if(je===k.default.SERVICE_DESCRIPTION_SCOPE)J=Se[je].schemeIdUri;else if(je===k.default.SERVICE_DESCRIPTION_LATENCY)ue={target:parseInt(Se[je].target),max:parseInt(Se[je].max),min:parseInt(Se[je].min),referenceId:parseInt(Se[je].referenceId)};else if(je===k.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)he={max:parseFloat(Se[je].max),min:parseFloat(Se[je].min)};else if(je===k.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)le={mediaType:Se[je].mediaType,max:parseInt(Se[je].max),min:parseInt(Se[je].min),target:parseInt(Se[je].target),type:Se[je].type,maxQualityDifference:parseInt(Se[je].maxQualityDifference)};else if(je===k.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)Ie={mediaType:Se[je].mediaType,max:parseInt(Se[je].max),min:parseInt(Se[je].min),target:parseInt(Se[je].target)};else if(je===k.default.CONTENT_STEERING){let at=Se[je];at=Array.isArray(at)?at.at(at.length-1):at,we=Me(at)}else je===k.default.CLIENT_DATA_REPORTING&&(Fe=ze(Se[je]));X.push({id:ye,schemeIdUri:J,latency:ue,playbackRate:he,operatingQuality:le,operatingBandwidth:Ie,contentSteering:we,clientDataReporting:Fe})}return X},getSubSegmentAlignment:function(K){return!(!K||!K.hasOwnProperty(k.default.SUB_SEGMENT_ALIGNMENT))&&K[k.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(K){return K&&K.hasOwnProperty(k.default.SUGGESTED_PRESENTATION_DELAY)?K.suggestedPresentationDelay:null},getSupplementalPropertiesForAdaptationSet:function(K){return Ae(k.default.SUPPLEMENTAL_PROPERTY,K)},getSupplementalPropertiesForRepresentation:V,getUTCTimingSources:function(K){const X=se(K),Se=!!K&&K.hasOwnProperty(k.default.AVAILABILITY_START_TIME),ye=K?K.UTCTiming:null,J=[];return(X||Se)&&ye&&ye.forEach(function(ue){const he=new $n.default;ue.hasOwnProperty(q.default.SCHEME_ID_URI)&&(he.schemeIdUri=ue.schemeIdUri,ue.hasOwnProperty(k.default.VALUE)&&(he.value=ue.value.toString(),J.push(he)))}),J},getViewpointForAdaptation:function(K){return K&&K.hasOwnProperty(k.default.VIEWPOINT)&&K[k.default.VIEWPOINT].length?K[k.default.VIEWPOINT].map(X=>{const Se=new $a;return Se.init(X),Se}):[]},hasProfile:function(K,X){let Se=!1;return K&&K.profiles&&K.profiles.length>0&&(Se=K.profiles.indexOf(X)!==-1),Se},isPeriodEncrypted:ne,setConfig:function(K){K&&(K.errHandler&&(v=K.errHandler),K.BASE64&&(_=K.BASE64))}},y=(0,Ve.default)(I).getInstance().getLogger(S),S}da.__dashjs_factory_name="DashManifestModel";var Ia=xe.default.getSingletonFactory(da);const Gi={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},ci=Gi,sr="v",Zr="l",xi="d",Jr="s";class Mi{constructor(y,v){Array.isArray(y)&&(y=y.map(_=>_ instanceof Mi?_:new Mi(_))),this.value=y,this.params=v}}const yr="Dict";function Nr(S,y,v,_){return new Error(`failed to ${S} "${I=y,Array.isArray(I)?JSON.stringify(I):I instanceof Map?"Map{}":I instanceof Set?"Set{}":typeof I=="object"?JSON.stringify(I):String(I)}" as ${v}`,{cause:_});var I}function Hi(S,y,v){return Nr("serialize",S,y,v)}class ql{constructor(y){this.description=y}}const Er="Bare Item",Gl="Boolean",Ws="Byte Sequence",Hl="Integer";function Xs(S){return S<-999999999999999||999999999999999<S}function Vl(S){if(Xs(S))throw Hi(S,Hl);return S.toString()}function Ao(S,y){if(S<0)return-Ao(-S,y);const v=Math.pow(10,y);if(Math.abs(S*v%1-.5)<Number.EPSILON){const _=Math.floor(S*v);return(_%2==0?_:_+1)/v}return Math.round(S*v)/v}const Sa="Decimal";function Mr(S){const y=Ao(S,3);if(Math.floor(Math.abs(y)).toString().length>12)throw Hi(S,Sa);const v=y.toString();return v.includes(".")?v:`${v}.0`}const Vi="String",Yi=/[\x00-\x1f\x7f]+/;function Or(S){return S.description||S.toString().slice(7,-1)}const wi="Token";function Qs(S){const y=Or(S);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(y)===!1)throw Hi(y,wi);return y}function Ki(S){switch(typeof S){case"number":if(!Number.isFinite(S))throw Hi(S,Er);return Number.isInteger(S)?Vl(S):Mr(S);case"string":return function(y){if(Yi.test(y))throw Hi(y,Vi);return`"${y.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(S);case"symbol":return Qs(S);case"boolean":return function(y){if(typeof y!="boolean")throw Hi(y,Gl);return y?"?1":"?0"}(S);case"object":if(S instanceof Date)return function(y){return`@${Vl(y.getTime()/1e3)}`}(S);if(S instanceof Uint8Array)return function(y){if(ArrayBuffer.isView(y)===!1)throw Hi(y,Ws);return`:${v=y,btoa(String.fromCharCode(...v))}:`;var v}(S);if(S instanceof ql)return Qs(S);default:throw Hi(S,Er)}}const Zs="Key";function lr(S){if(/^[a-z*][a-z0-9\-_.*]*$/.test(S)===!1)throw Hi(S,Zs);return S}function Yl(S){return S==null?"":Object.entries(S).map(y=>{let[v,_]=y;return _===!0?`;${lr(v)}`:`;${lr(v)}=${Ki(_)}`}).join("")}function Js(S){return S instanceof Mi?`${Ki(S.value)}${Yl(S.params)}`:Ki(S)}const or=S=>Math.round(S),el=S=>100*or(S/100),Ro={br:or,d:or,bl:el,dl:el,mtp:el,nor:(S,y)=>(y?.baseUrl&&(S=function(v,_){const I=new URL(v),w=new URL(_);if(I.origin!==w.origin)return v;const z=I.pathname.split("/").slice(1),F=w.pathname.split("/").slice(1,-1);for(;z[0]===F[0];)z.shift(),F.shift();for(;F.length;)F.shift(),z.unshift("..");return z.join("/")}(S,y.baseUrl)),encodeURIComponent(S)),rtp:el,tb:or};function Ou(S){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S?function(v,_){return function(I){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{whitespace:!0};if(typeof I!="object")throw Hi(I,yr);const z=I instanceof Map?I.entries():Object.entries(I),F=w?.whitespace?" ":"";return Array.from(z).map(x=>{let[H,G]=x;G instanceof Mi==0&&(G=new Mi(G));let D=lr(H);var M;return G.value===!0?D+=Yl(G.params):(D+="=",Array.isArray(G.value)?D+=`(${(M=G).value.map(Js).join(" ")})${Yl(M.params)}`:D+=Js(G)),D}).join(`,${F}`)}(v,_)}(function(v,_){const I={};if(v==null||typeof v!="object")return I;const w=Object.keys(v).sort(),z=Object.assign({},Ro,_?.formatters),F=_?.filter;return w.forEach(x=>{if(F?.(x))return;let H=v[x];const G=z[x];G&&(H=G(H,_)),x==="v"&&H===1||x=="pr"&&H===1||function(D){return typeof D=="number"?Number.isFinite(D):D!=null&&D!==""&&D!==!1}(H)&&(function(D){return D==="ot"||D==="sf"||D==="st"}(x)&&typeof H=="string"&&(H=new ql(H)),I[x]=H)}),I}(S,y),Object.assign({whitespace:!1},y)):""}const Io="CMCD-Object",tl="CMCD-Request",Pu="CMCD-Session",Oi="CMCD-Status",vs={[Io]:["br","d","ot","tb"],[tl]:["bl","dl","mtp","nor","nrr","su"],[Pu]:["cid","pr","sf","sid","st","v"],[Oi]:["bs","rtp"]},Kl="segment";function nl(){let S,y,v,_,I,w,z,F,x,H,G,D,M,B,Z,ne,ie=this.context,re=(0,Ee.default)(ie).getInstance(),se=(0,W.default)(ie).getInstance(),oe=(0,Ve.default)(ie).getInstance();function Ae(){_={pr:1,nor:null,st:null,sf:null,sid:`${sa.default.generateUuid()}`,cid:null},M={},D={},B={},G=void 0,Z=void 0,ne=!1,$()}function Q(){$()}function U(){Z||(Z=Date.now())}function V(){Z&&!_.msd&&(_.msd=Date.now()-Z)}function $(){if(!z)return;const he=z.getStreamController();if(!he||typeof he.getActiveStream!="function")return;const le=he.getActiveStream();le&&(H=le.getStreamProcessors())}function ce(he){try{const le=ge(),Ie=le.version?le.keys:se.get().streaming.cmcd.enabledKeys;return Object.keys(he).filter(we=>Ie.includes(we)).reduce((we,Fe)=>(we[Fe]=he[Fe],we),{})}catch{return he}}function Te(){const he=ge();return function(le){if(Object.keys(le).length){if(parseInt(le.version)!==1)return v.error("version parameter must be defined in 1."),!1;if(!le.keys)return v.error("keys parameter must be defined."),!1}const Ie=le.version,we=se.get().streaming.cmcd&&se.get().streaming.cmcd.enabled;return Ie||we}(he)&&function(le){let Ie=se.get().streaming.cmcd.includeInRequests;le.version&&(Ie=le.includeInRequests??[Kl]);const we=q.default.CMCD_AVAILABLE_REQUESTS,Fe=Ie.filter(je=>!we.includes(je));return Fe.length===Ie.length?(v.error("None of the request types are supported."),!1):(Fe.map(je=>{v.warn(`request type ${je} is not supported.`)}),!0)}(he)&&function(le){const Ie=q.default.CMCD_AVAILABLE_KEYS,we=q.default.CMCD_V2_AVAILABLE_KEYS,Fe=le.version?le.keys:se.get().streaming.cmcd.enabledKeys,je=se.get().streaming.cmcd.version,at=Fe.filter(lt=>!(Ie.includes(lt)||je===2&&we.includes(lt)));return at.length===Fe.length&&Fe.length>0?(v.error(`None of the keys are implemented for CMCD version ${je}.`),!1):(at.map(lt=>{v.warn(`key parameter ${lt} is not implemented for CMCD version ${je}.`)}),!0)}(he)}function ge(){let he={};if(F){const le=F.getServiceDescriptionSettings();se.get().streaming.cmcd.applyParametersFromMpd&&le.clientDataReporting&&le.clientDataReporting.cmcdParameters&&(he=le.clientDataReporting.cmcdParameters)}return he}function ve(he){try{let Ie=null;if(he.type,(le=he.mediaType)!==q.default.VIDEO&&le!==q.default.AUDIO||G&&G!=q.default.AUDIO||(G=le),function(we){const Fe=ge();let je=se.get().streaming.cmcd.includeInRequests;Fe.version&&(je=Fe.includeInRequests?Fe.includeInRequests:[Kl]);const at={[_e.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[_e.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[_e.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[_e.HTTPRequest.MPD_TYPE]:"mpd",[_e.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[_e.HTTPRequest.OTHER_TYPE]:"other"};return je.some(lt=>at[we]===lt)}(he.type)){if(he.type===_e.HTTPRequest.MPD_TYPE)return function(){const we=K();return we.ot=ci.MANIFEST,we}();if(he.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE)return ze(he.mediaType),Me(he,he.mediaType);if(he.type===_e.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const we=K();return we.ot=ci.INIT,we.su=!0,we}();if(he.type===_e.HTTPRequest.OTHER_TYPE||he.type===_e.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const we=K();return we.ot=ci.OTHER,we}();if(he.type===_e.HTTPRequest.LICENSE)return function(){const we=K();return we.ot=ci.KEY,we}();if(he.type===_e.HTTPRequest.CONTENT_STEERING_TYPE)return function(we){const Fe=G?Me(we,G):K();return Fe.ot=ci.OTHER,Fe}(he)}return Ie}catch{return null}var le}function Me(he,le){ze(le);const Ie=K(),we=function(Lt){try{return parseInt(Lt.bandwidth/1e3)}catch{return null}}(he),Fe=function(Lt){try{return isNaN(Lt.duration)?NaN:Math.round(1e3*Lt.duration)}catch{return null}}(he),je=function(Lt){try{return 100*parseInt(x.getSafeAverageThroughput(Lt)/100)}catch{return null}}(le),at=function(Lt){try{const gn=_.pr,vn=w.getCurrentBufferLevel(Lt);return isNaN(gn)||isNaN(vn)?null:100*parseInt(vn/gn*10)}catch{return null}}(le),lt=X(le),ot=function(Lt){try{const gn=I.getPossibleVoRepresentationsFilteredBySettings(Lt).map(vn=>vn.bitrateInKbit);return Math.max(...gn)}catch{return null}}(he.representation?.mediaInfo),qt=_.pr,Kt=function(Lt){if(H&&H.length!==0){for(let gn of H)if(gn.getType()===Lt)return gn.probeNextRequest()}}(le);let Xt;le===q.default.VIDEO&&(Xt=ci.VIDEO),le===q.default.AUDIO&&(Xt=ci.AUDIO),le===q.default.TEXT&&(Xt=he.representation.mediaInfo.mimeType==="application/mp4"?ci.TIMED_TEXT:ci.CAPTION);let In=se.get().streaming.cmcd.rtp;return In||(In=function(Lt){try{let gn=z.getPlaybackRate();gn||(gn=1);let{bandwidth:vn,mediaType:Cn,representation:Nn,duration:Ke}=Lt;if(!Nn.mediaInfo)return NaN;let bt=X(Cn);bt===0&&(bt=500);let ht=vn*Ke/1e3/(bt/gn/1e3),St=se.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(se.get().streaming.cmcd.rtpSafetyFactor)?se.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(ht*St/100)+1)}catch{return NaN}}(he)),isNaN(In)||(Ie.rtp=In),Kt&&(he.url!==Kt.url?Ie.nor=encodeURIComponent(sa.default.getRelativeUrl(he.url,Kt.url)):Kt.range&&(Ie.nrr=Kt.range)),we&&(Ie.br=we),Xt&&(Ie.ot=Xt),isNaN(Fe)||(Ie.d=Fe),isNaN(je)||(Ie.mtp=je),isNaN(at)||(Ie.dl=at),isNaN(lt)||(Ie.bl=lt),isNaN(ot)||(Ie.tb=ot),isNaN(qt)||qt===1||(Ie.pr=qt),M[le]&&(Ie.bs=!0,M[le]=!1),!D[le]&&B[le]||(Ie.su=!0,D[le]=!1,B[le]=!0),Ie}function ze(he){B.hasOwnProperty(he)||(B[he]=!1),D.hasOwnProperty(he)||(D[he]=!1),M.hasOwnProperty(he)||(M[he]=!1)}function K(){const he=ge(),le={};let Ie=se.get().streaming.cmcd.cid?se.get().streaming.cmcd.cid:_.cid;if(Ie=he.contentID?he.contentID:Ie,le.v=se.get().streaming.cmcd.version??1,le.sid=se.get().streaming.cmcd.sid?se.get().streaming.cmcd.sid:_.sid,le.sid=he.sessionID?he.sessionID:le.sid,le.sid=`${le.sid}`,Ie&&(le.cid=`${Ie}`),isNaN(_.pr)||_.pr===1||_.pr===null||(le.pr=_.pr),_.st&&(le.st=_.st),_.sf&&(le.sf=_.sf),le.v===2){let we=1e3*z.getCurrentLiveLatency();isNaN(we)||(le.ltc=we);const Fe=_.msd;ne||isNaN(Fe)||(le.msd=Fe,ne=!0)}return le}function X(he){try{const le=w.getCurrentBufferLevel(he);return isNaN(le)?null:100*parseInt(10*le)}catch{return null}}function Se(he){try{_.pr=he.playbackRate}catch{}}function ye(he){try{const le=S.getIsDynamic(he.data)?Zr:sr,Ie=he.protocol&&he.protocol==="MSS"?Jr:xi;_.st=`${le}`,_.sf=`${Ie}`}catch{}}function J(he){try{he.state&&he.mediaType&&he.state===be.default.BUFFER_EMPTY&&(M[he.mediaType]||(M[he.mediaType]=!0),D[he.mediaType]||(D[he.mediaType]=!0))}catch{}}function ue(){for(let he in M)M.hasOwnProperty(he)&&(M[he]=!0);for(let he in D)D.hasOwnProperty(he)&&(D[he]=!0)}return y={getCmcdData:ve,getQueryParameter:function(he){try{if(Te()){const le=ve(he),Ie=Ou(ce(le));return re.trigger(Ra.default.CMCD_DATA_GENERATED,{url:he.url,mediaType:he.mediaType,cmcdData:le,cmcdString:Ie}),{key:"CMCD",value:Ie}}return null}catch{return null}},getHeaderParameters:function(he){try{if(Te()){const le=ve(he),Ie=function(we){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const je={};if(!we)return je;const at=Object.entries(we),lt=Object.entries(vs).concat(Object.entries(Fe?.customHeaderMap||{})),ot=at.reduce((qt,Kt)=>{var Xt,In;const[Lt,gn]=Kt,vn=((Xt=lt.find(Cn=>Cn[1].includes(Lt)))===null||Xt===void 0?void 0:Xt[0])||tl;return(In=qt[vn])!==null&&In!==void 0||(qt[vn]={}),qt[vn][Lt]=gn,qt},{});return Object.entries(ot).reduce((qt,Kt)=>{let[Xt,In]=Kt;return qt[Xt]=Ou(In,Fe),qt},je)}(ce(le),se.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[tl]:["ltc"],[Pu]:["msd"]}});return re.trigger(Ra.default.CMCD_DATA_GENERATED,{url:he.url,mediaType:he.mediaType,cmcdData:le,headers:Ie}),Ie}return null}catch{return null}},getCmcdParametersFromManifest:ge,setConfig:function(he){he&&(he.abrController&&(I=he.abrController),he.dashMetrics&&(w=he.dashMetrics),he.throughputController&&(x=he.throughputController),he.playbackController&&(z=he.playbackController),he.serviceDescriptionController&&(F=he.serviceDescriptionController))},reset:function(){re.off(be.default.PLAYBACK_RATE_CHANGED,Se,this),re.off(be.default.MANIFEST_LOADED,ye,this),re.off(be.default.BUFFER_LEVEL_STATE_CHANGED,J,y),re.off(be.default.PLAYBACK_SEEKED,ue,y),re.off(be.default.PLAYBACK_STARTED,U,y),re.off(be.default.PLAYBACK_PLAYING,V,y),Ae()},initialize:function(he){re.on(be.default.PLAYBACK_RATE_CHANGED,Se,y),re.on(be.default.MANIFEST_LOADED,ye,y),re.on(be.default.BUFFER_LEVEL_STATE_CHANGED,J,y),re.on(be.default.PLAYBACK_SEEKED,ue,y),re.on(be.default.PERIOD_SWITCH_COMPLETED,Q,y),he?re.on(be.default.MANIFEST_LOADING_STARTED,U,y):re.on(be.default.PLAYBACK_STARTED,U,y),re.on(be.default.PLAYBACK_PLAYING,V,y)},isCmcdEnabled:Te},S=Ia(ie).getInstance(),v=oe.getLogger(y),Ae(),y}nl.__dashjs_factory_name="CmcdModel";var Dd=xe.default.getSingletonFactory(nl);const Ss="CMSD-Dynamic",xo="CMSD-Static",es=Gi;function xa(S,y,v){return Nr("parse",S,y,v)}const $l="List";function vi(S,y){return{value:S,src:y}}const zu="Inner List",Cd="Date",wo=`${Hl} or ${Sa}`;function Ld(S){let y,v=1,_="";const I=xa(S,wo);if(S[0]==="-"&&(v=-1,S=S.substring(1)),S.length<=0)throw I;const w=/^(\d+)?/g,z=w.exec(S);if(z[0].length===0)throw I;if(_+=z[1],(S=S.substring(w.lastIndex))[0]==="."){if(_.length>12)throw I;const F=/^(\.\d+)?/g,x=F.exec(S);if(S=S.substring(F.lastIndex),x[0].length===0||x[1].length>4||(_+=x[1],_.length>16))throw I;y=parseFloat(_)*v}else{if(_.length>15)throw I;if(y=parseInt(_)*v,Xs(y))throw xa(_,wo)}return vi(y,S)}function Nd(S,y){const v=S[0];if(v==='"')return function(_){let I="",w=0;if(_[w]!=='"')throw xa(_,Vi);for(w++;_.length>w;){if(_[w]==="\\"){if(_.length<=w+1||(w++,_[w]!=='"'&&_[w]!=="\\"))throw xa(_,Vi);I+=_[w]}else{if(_[w]==='"')return vi(I,_.substring(++w));if(Yi.test(_[w]))throw xa(_,Vi);I+=_[w]}w++}throw xa(_,Vi)}(S);if(/^[-0-9]/.test(v))return Ld(S);if(v==="?")return function(_){let I=0;if(_[I]!=="?")throw xa(_,Gl);if(I++,_[I]==="1")return vi(!0,_.substring(++I));if(_[I]==="0")return vi(!1,_.substring(++I));throw xa(_,Gl)}(S);if(v===":")return function(_){if(_[0]!==":"||(_=_.substring(1)).includes(":")===!1)throw xa(_,Ws);const I=/(^.*?)(:)/g,w=I.exec(_)[1];return _=_.substring(I.lastIndex),vi(new Uint8Array([...atob(w)].map(z=>z.charCodeAt(0))),_)}(S);if(/^[a-zA-Z*]/.test(v))return function(_,I){if(/^[a-zA-Z*]$/.test(_[0])===!1)throw xa(_,wi);const w=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,z=w.exec(_)[1];return _=_.substring(w.lastIndex),vi(Symbol.for(z),_)}(S);if(v==="@")return function(_){let I=0;if(_[I]!=="@")throw xa(_,Cd);I++;const w=Ld(_.substring(I));if(Number.isInteger(w.value)===!1)throw xa(_,Cd);return vi(new Date(1e3*w.value),w.src)}(S);throw xa(S,Er)}function Md(S){let y=0;if(/^[a-z*]$/.test(S[y])===!1)throw xa(S,Zs);let v="";for(;S.length>y;){if(/^[a-z0-9_\-.*]$/.test(S[y])===!1)return vi(v,S.substring(y));v+=S[y],y++}return vi(v,S.substring(y))}function Fu(S,y){let v;for(;S.length>0&&S[0]===";";){const _=Md(S=S.substring(1).trim()),I=_.value;let w=!0;if((S=_.src)[0]==="="){const z=Nd(S=S.substring(1));w=z.value,S=z.src}v==null&&(v={}),v[I]=w}return vi(v,S)}function Od(S,y){const v=Nd(S),_=Fu(S=v.src);return S=_.src,vi(new Mi(v.value,_.value),S)}function Uu(S,y){return S[0]==="("?function(v,_){if(v[0]!=="(")throw xa(v,zu);v=v.substring(1);const I=[];for(;v.length>0;){if((v=v.trim())[0]===")"){const z=Fu(v=v.substring(1));return vi(new Mi(I,z.value),z.src)}const w=Od(v);if(I.push(w.value),(v=w.src)[0]!==" "&&v[0]!==")")throw xa(v,zu)}throw xa(v,zu)}(S):Od(S)}const qh=xo.toLowerCase(),Gh=Ss.toLowerCase(),Hh=["mb","st","sf","v"],Bu="stream",ju={video:es.VIDEO,audio:es.AUDIO,text:es.TIMED_TEXT,stream:Bu};function Pd(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w;function z(){I={},w={}}function F(M){M&&Object.keys(M).forEach(B=>{Hh.includes(B)||delete M[B]})}function x(M){try{return(B=M)?Object.entries(function(Z,ne){try{const{src:ie,value:re}=function(se,oe){const Ae={};for(;se.length>0;){let Q;const U=Md(se),V=U.value;if((se=U.src)[0]==="="){const $=Uu(se.substring(1),oe);Q=$.value,se=$.src}else{const $=Fu(se,oe);Q=new Mi(!0,$.value),se=$.src}if(Ae[V]=Q,(se=se.trim()).length===0)return vi(Ae,se);if(se[0]!==","||(se=se.substring(1).trim()).length===0||se[0]===",")throw xa(se,yr)}return vi(Ae,se)}(Z.trim(),ne);if(ie!=="")throw xa(ie,yr);return re}catch(ie){throw xa(Z,yr,ie)}}(B)).reduce((Z,ne)=>{let[ie,re]=ne;const{value:se}=re;return Z[ie]=typeof se=="symbol"?Or(se):se,Z},{}):{}}catch(Z){_.error("Failed to parse CMSD-Static response header value:",Z)}var B}function H(M){try{const Z=(B=M)?function(ie,re){try{const{src:se,value:oe}=function(Ae,Q){const U=[];for(;Ae.length>0;){const V=Uu(Ae,Q);if(U.push(V.value),(Ae=V.src.trim()).length===0)return vi(U,Ae);if(Ae[0]!==","||(Ae=Ae.substring(1).trim()).length===0||Ae[0]===",")throw xa(Ae,$l)}return vi(U,Ae)}(ie.trim(),re);if(se!=="")throw xa(se,$l);return oe}catch(se){throw xa(ie,$l,se)}}(B):[];return Z[Z.length-1]?.params||{}}catch(Z){return _.error("Failed to parse CMSD-Dynamic response header value:",Z),{}}var B}function G(M){return ju[M]||es.OTHER}function D(M,B,Z){const ne=M===xo?I:w,ie=ne[B]||{},re=ne[Bu]||{};return ie[Z]||re[Z]}return v={setConfig:function(){},initialize:function(){},reset:function(){z()},parseResponseHeaders:function(M,B){let Z=null,ne=null;for(const re in M){const se=M[re];switch(re){case qh:Z=x(se),y.trigger(P.default.CMSD_STATIC_HEADER,Z);break;case Gh:ne||(ne=H(se))}}let ie=Bu;return Z&&Z.ot?ie=Z.ot:B&&(ie=G(B)),F(I[ie]),F(w[ie]),Z&&(I[ie]=Object.assign(I[ie]||{},Z)),ne&&(w[ie]=Object.assign(w[ie]||{},ne)),{static:Z,dynamic:ne}},getMaxBitrate:function(M){let B=G(M);return D(Ss,B,"mb")||-1},getEstimatedThroughput:function(M){let B=G(M);return D(Ss,B,"etp")||null},getResponseDelay:function(M){let B=G(M);return D(Ss,B,"rd")||null},getRoundTripTime:function(M){let B=G(M);return D(Ss,B,"rtt")||null}},_=(0,Ve.default)(S).getInstance().getLogger(v),z(),v}Pd.__dashjs_factory_name="CmsdModel";var zd=xe.default.getSingletonFactory(Pd),Fd=t(1926);function qu(){let S,y;function v(){y={}}return S={reset:function(){v()},processResponseHeaders:function(_){if(!(_&&_.headers&&_.request&&_.request.url))return;const I=_.headers[q.default.COMMON_ACCESS_TOKEN_HEADER];if(I){const w=sa.default.getHostFromUrl(_.request.url);w&&(y[w]=I)}},getCommonAccessTokenForUrl:function(_){if(!_)return null;const I=sa.default.getHostFromUrl(_);return I?y[I]?y[I]:null:void 0}},v(),S}qu.__dashjs_factory_name="CommonAccessTokenController";var Vh=xe.default.getSingletonFactory(qu);function Ud(){let S,y;return S={setConfig:function(v){v&&v.serviceDescriptionController&&(y=v.serviceDescriptionController)},isAdaptationsIncluded:function(v){const{adaptationSetsArray:_}=y?.getServiceDescriptionSettings()?.clientDataReporting??{};return!_||_?.length===0||_.includes(v)},isServiceLocationIncluded:function(v,_){if(v===_e.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:I}=y?.getServiceDescriptionSettings()?.clientDataReporting??{};return!I||I?.length===0||I.includes(_)}},S}Ud.__dashjs_factory_name="ClientDataReportingController";var Bd=xe.default.getSingletonFactory(Ud);function jd(){let S,y,v;const _=this.context;function I(w,z,F,x,H){const G=function(D,M){let B=[];return B=M===k.default.PERIOD?D[k.default.SUPPLEMENTAL_PROPERTY]||[]:[...D[k.default.ESSENTIAL_PROPERTY]||[],...D[k.default.SUPPLEMENTAL_PROPERTY]||[]],B.find(Z=>Z.schemeIdUri===q.default.URL_QUERY_INFO_SCHEME&&Z.UrlQueryInfo||Z.schemeIdUri===q.default.EXT_URL_QUERY_INFO_SCHEME&&Z.ExtUrlQueryInfo)}(z,H);(function(D,M,B,Z){B.initialQueryString="";let ne="";const ie=D?.ExtUrlQueryInfo||D?.UrlQueryInfo;ne=ie&&ie.queryString?M&&M.length>0?M+"&"+ie.queryString:ie.queryString:M,ie?.useMPDUrlQuery==="true"&&Z&&(ne=ne?ne+"&"+Z:Z),B.initialQueryString=ne})(G,x.initialQueryString,w,F),function(D,M,B){if(!D)return void(M.finalQueryString=B);const Z=D?.ExtUrlQueryInfo?.queryTemplate||D?.UrlQueryInfo?.queryTemplate||"";M.finalQueryString=Z===k.default.QUERY_PART?M?.initialQueryString:""}(G,w,x.finalQueryString),w.sameOriginOnly=G?.ExtUrlQueryInfo?.sameOriginOnly,w.queryParams=sa.default.parseQueryParams(w?.finalQueryString),w.includeInRequests=function(D,M){return D?D.ExtUrlQueryInfo?.includeInRequests?D.ExtUrlQueryInfo.includeInRequests.split(" "):[k.default.SEGMENT_TYPE]:M}(G,x.includeInRequests)}return y=(0,Ve.default)(_).getInstance().getLogger(S),S={getFinalQueryString:function(w){try{if(!v)return null;if(w.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE||w.type===_e.HTTPRequest.INIT_SEGMENT_TYPE){const z=w.representation;if(!z)return null;const F=z.adaptation,x=F.period,H=v.period[x.index].adaptation[F.index].representation[z.index],G=new URL(w.url),D=!H.sameOriginOnly||v.origin===G.origin;if(H.includeInRequests.includes(k.default.SEGMENT_TYPE)&&D)return H.queryParams}else if(w.type===_e.HTTPRequest.MPD_TYPE){if([k.default.MPD_TYPE,k.default.MPD_PATCH_TYPE].some(z=>v.includeInRequests.includes(z)))return v.queryParams}else if(w.type===_e.HTTPRequest.CONTENT_STEERING_TYPE&&v.includeInRequests.includes(k.default.STEERING_TYPE))return v.queryParams}catch(z){return y.error(z),null}},createFinalQueryStrings:function(w){v={origin:new URL(w.url).origin,period:[]};const z=w.url.split("?")[1];I(v,w,z,{initialQueryString:"",includeInRequests:[]},k.default.MPD),w.Period.forEach(F=>{const x={adaptation:[]};I(x,F,z,v,k.default.PERIOD),F.AdaptationSet.forEach(H=>{const G={representation:[]};I(G,H,z,x,k.default.ADAPTATION_SET),H.Representation.forEach(D=>{const M={};I(M,D,z,G,k.default.REPRESENTATION),G.representation.push(M)}),x.adaptation.push(G)}),v.period.push(x)})}},S}jd.__dashjs_factory_name="ExtUrlQueryInfoController";var qd=xe.default.getSingletonFactory(jd),Gu=class{constructor(S){this.url=S.url,this.method=S.method,this.responseType=S.responseType!==void 0?S.responseType:null,this.headers=S.headers!==void 0?S.headers:{},this.credentials=S.credentials!==void 0?S.credentials:null,this.mode=S.mode!==void 0?S.mode:null,this.timeout=S.timeout!==void 0?S.timeout:0,this.cmcd=S.cmcd!==void 0?S.cmcd:null,this.customData=S.customData!==void 0?S.customData:null}},Hu=class{constructor(S){this.request=S.request,this.url=S.url!==void 0?S.url:null,this.redirected=S.redirected!==void 0&&S.redirected,this.status=S.status!==void 0?S.status:null,this.statusText=S.statusText!==void 0?S.statusText:"",this.type=S.type!==void 0?S.type:"",this.headers=S.headers!==void 0?S.headers:{},this.data=S.data!==void 0?S.data:null,this.resourceTiming=S.resourceTiming!==void 0?S.resourceTiming:null}};function Gd(S){S=S||{};const y=this.context,v=S.errHandler,_=S.dashMetrics,I=S.mediaPlayerModel,w=S.boxParser,z=S.errors,F=S.requestTimeout||0,x=(0,Ee.default)(y).getInstance(),H=(0,W.default)(y).getInstance();let G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V;function $(ce,Te){const ge=function(){K()},ve=function(Lt){const gn=new Date;le&&(le=!1,(!Lt.lengthComputable||Lt.lengthComputable&&Lt.total!==Lt.loaded)&&(ue.firstByteDate=gn,lt.resourceTiming.responseStart=gn.getTime())),Lt.lengthComputable&&(ue.bytesLoaded=lt.length=Lt.loaded,ue.bytesTotal=lt.resourceTiming.encodedBodySize=Lt.total,lt.length=Lt.total,lt.resourceTiming.encodedBodySize=Lt.loaded),Lt.noTrace||(he.push({s:we,d:Lt.time?Lt.time:gn.getTime()-we.getTime(),b:[Lt.loaded?Lt.loaded-Fe:0],t:Lt.throughput}),ue.traces=he,we=gn,Fe=Lt.loaded),je&&(clearTimeout(je),je=null),H.get().streaming.fragmentRequestProgressTimeout>0&&(je=setTimeout(function(){V.warn("Abort request "+at.url+" due to progress timeout"),qt.abort(at),ge()},H.get().streaming.fragmentRequestProgressTimeout)),ce.progress&&Lt&&ce.progress(Lt)},Me=function(){K(!0)},ze=function(Lt){let gn;if(Lt.lengthComputable){let vn=Lt.loaded/Lt.total*100;gn="Request timeout: loaded: "+Lt.loaded+", out of: "+Lt.total+" : "+vn.toFixed(3)+"% Completed"}else gn="Request timeout: non-computable download size";V.warn(gn)},K=function(){let Lt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];D.indexOf(at)!==-1&&D.splice(D.indexOf(at),1),je&&(clearTimeout(je),je=null),Ae.processResponseHeaders(lt),X(),Se(),function(gn){const vn=oe.getResponseInterceptors();return vn?vn.reduce((Cn,Nn)=>Cn.then(Ke=>Nn(Ke)),Promise.resolve(gn)):Promise.resolve(gn)}(lt).then(gn=>{if(lt=gn,function(vn,Cn,Nn){const Ke=vn.customData.request,bt=H.get().streaming.cmsd&&H.get().streaming.cmsd.enabled?ie.parseResponseHeaders(Cn.headers,Ke.mediaType):null;_.addHttpRequest(Ke,Cn.url,Cn.status,Cn.headers,Nn,bt)}(at,lt,he),Lt)ce.abort&&ce.abort(ue);else if(ue.type===_e.HTTPRequest.MPD_TYPE&&(_.addManifestUpdate(ue),x.trigger(P.default.MANIFEST_LOADING_FINISHED,{requestObject:ue})),lt.status>=200&&lt.status<=299&&lt.data)ce.success&&ce.success(lt.data,lt.statusText,lt.url),ce.complete&&ce.complete(ue,lt.statusText);else{try{lt.status===404&&H.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&ue.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE&&I.getRetryAttemptsForType(_e.HTTPRequest.MEDIA_SEGMENT_TYPE)===Te&&x.trigger(P.default.ATTEMPT_BACKGROUND_SYNC)}catch{}J()}})},X=function(){ue.startDate=Ie,ue.endDate=new Date,ue.firstByteDate=ue.firstByteDate||Ie},Se=function(){lt.resourceTiming.responseEnd=Date.now(),function(Lt,gn){if(!H.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||Lt.range)return;const vn=performance.getEntriesByType("resource");if(vn===void 0||vn.length<=0)return;let Cn=0,Nn=null;for(;Cn<vn.length;){if(vn[Cn].name===Lt.url){Nn=vn[Cn];break}Cn+=1}(function(Ke){return Ke&&!isNaN(Ke.responseStart)&&Ke.responseStart>0&&!isNaN(Ke.responseEnd)&&Ke.responseEnd>0&&!isNaN(Ke.transferSize)&&Ke.transferSize>0})(Nn)&&(Lt.customData.request.resourceTimingValues=Nn,gn.resourceTiming.startTime=Nn.startTime,gn.resourceTiming.encodedBodySize=Nn.encodedBodySize,gn.resourceTiming.responseStart=Nn.startTime,gn.resourceTiming.responseEnd=Nn.responseEnd,gn.resourceTiming.duration=Nn.duration)}(at,lt)},ye=function(Lt,gn,vn){return new Promise(Cn=>{(function(Nn){const Ke=oe.getRequestInterceptors();return Ke?Ke.reduce((bt,ht)=>bt.then(St=>ht(St)),Promise.resolve(Nn)):Promise.resolve(Nn)})(gn).then(Nn=>{(gn=Nn).customData.onloadend=ge,gn.customData.onprogress=ve,gn.customData.onabort=Me,gn.customData.ontimeout=ze,vn.resourceTiming.startTime=Date.now(),Lt.load(gn,vn),Cn()})})},J=function(){if(Te>0){Te--,ce&&ce.request&&(ce.request.retryAttempts+=1);let Lt={config:ce};B.push(Lt),Lt.timeout=setTimeout(function(){B.indexOf(Lt)!==-1&&(B.splice(B.indexOf(Lt),1),$(ce,Te))},I.getRetryIntervalsForType(ue.type))}else{if(ue.type===_e.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;v.error(new Ce.default(Z[ue.type],ue.url+" is not available",{request:ue,response:lt})),ce.error&&ce.error(ue,"error",lt.statusText,lt),ce.complete&&ce.complete(ue,lt.statusText)}},ue=ce.request,he=[];let le,Ie,we,Fe,je,at,lt;if(ue.bytesLoaded=NaN,ue.bytesTotal=NaN,ue.firstByteDate=null,ue.traces=[],le=!0,Ie=new Date,we=Ie,Fe=0,je=null,!_||!v)throw new Error("config object is not correct or missing");const ot=function(Lt){let gn,vn;return Lt.hasOwnProperty("availabilityTimeComplete")&&Lt.availabilityTimeComplete===!1&&window.fetch&&Lt.responseType==="arraybuffer"&&Lt.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE?(se||(se=gi(y).create(),se.setConfig({dashMetrics:_,boxParser:w})),gn=se,vn=q.default.FILE_LOADER_TYPES.FETCH):(re||(re=Na(y).create()),gn=re,vn=q.default.FILE_LOADER_TYPES.XHR),{loader:gn,fileLoaderType:vn}}(ue),qt=ot.loader;var Kt;ue.fileLoaderType=ot.fileLoaderType,ue.headers={},function(Lt){const gn=Lt?.serviceLocation,vn=Lt?.mediaInfo?.id?.toString();if(Q.isServiceLocationIncluded(Lt.type,gn)&&Q.isAdaptationsIncluded(vn)&&ne.isCmcdEnabled()){const Cn=ne.getCmcdParametersFromManifest(),Nn=Cn.mode?Cn.mode:H.get().streaming.cmcd.mode;if(Nn===q.default.CMCD_MODE_QUERY){Lt.url=sa.default.removeQueryParameterFromUrl(Lt.url,q.default.CMCD_QUERY_KEY);const Ke=function(bt){try{const ht=[],St=ne.getQueryParameter(bt);return St&&ht.push(St),ht}catch{return[]}}(Lt);Lt.url=sa.default.addAdditionalQueryParameterToUrl(Lt.url,Ke)}else Nn===q.default.CMCD_MODE_HEADER&&(Lt.headers=Object.assign(Lt.headers,ne.getHeaderParameters(Lt)))}}(Kt=ue),Kt.retryAttempts===0&&function(Lt){let gn=U.getFinalQueryString(Lt);gn&&(Lt.url=sa.default.addAdditionalQueryParameterToUrl(Lt.url,gn))}(Kt),function(Lt){if(Lt.queryParams){const gn=Object.keys(Lt.queryParams).map(vn=>({key:vn,value:Lt.queryParams[vn]}));Lt.url=sa.default.addAdditionalQueryParameterToUrl(Lt.url,gn)}}(Kt),function(Lt){const gn=Ae.getCommonAccessTokenForUrl(Lt.url);gn&&(Lt.headers[q.default.COMMON_ACCESS_TOKEN_HEADER]=gn)}(Kt),ue.range&&(ue.headers.Range="bytes="+ue.range);const Xt=oe.getXHRWithCredentialsForType(ue.type);at=new Gu({url:ue.url,method:_e.HTTPRequest.GET,responseType:ue.responseType,headers:ue.headers,credentials:Xt?"include":"omit",timeout:F,cmcd:ne.getCmcdData(ue),customData:{request:ue}}),lt=new Hu({request:at,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let In=new Date().getTime();if(isNaN(ue.delayLoadingTime)||In>=ue.delayLoadingTime)return D.push(at),ye(qt,at,lt);{let Lt={httpRequest:at,httpResponse:lt};return M.push(Lt),Lt.delayTimeout=setTimeout(function(){if(M.indexOf(Lt)!==-1){M.splice(M.indexOf(Lt),1);try{Ie=new Date,we=Ie,D.push(Lt.httpRequest),ye(qt,Lt.httpRequest,Lt.httpResponse)}catch{Lt.httpRequest.onloadend()}}},ue.delayLoadingTime-In),Promise.resolve()}}return G={abort:function(){B.forEach(ce=>{clearTimeout(ce.timeout),ce.config.request&&ce.config.abort&&ce.config.abort(ce.config.request)}),B=[],M.forEach(ce=>clearTimeout(ce.delayTimeout)),M=[],D.forEach(ce=>{const Te=ce.customData;Te&&(Te.request&&Te.request.type===_e.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(Te.onloadend=Te.onprogress=void 0,Te.abort&&Te.abort()))}),D=[]},load:function(ce){return ce.request?$(ce,I.getRetryAttemptsForType(ce.request.type)):(ce.error&&ce.error(ce.request,"error"),Promise.resolve())},reset:function(){D=[],M=[],B=[],re&&re.reset(),se&&se.reset(),re=null,se=null},resetInitialSettings:function(){re&&re.resetInitialSettings()},setConfig:function(ce){ce&&(ce.commonAccessTokenController&&(Ae=ce.commonAccessTokenController),ce.extUrlQueryInfoController&&(U=ce.extUrlQueryInfoController))}},V=(0,Ve.default)(y).getInstance().getLogger(G),D=[],M=[],B=[],ne=Dd(y).getInstance(),Q=Bd(y).getInstance(),ie=zd(y).getInstance(),oe=(0,Fd.default)(y).getInstance(),Ae=Vh(y).getInstance(),U=qd(y).getInstance(),Z={[_e.HTTPRequest.MPD_TYPE]:z.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[_e.HTTPRequest.XLINK_EXPANSION_TYPE]:z.DOWNLOAD_ERROR_ID_XLINK_CODE,[_e.HTTPRequest.INIT_SEGMENT_TYPE]:z.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[_e.HTTPRequest.MEDIA_SEGMENT_TYPE]:z.DOWNLOAD_ERROR_ID_CONTENT_CODE,[_e.HTTPRequest.INDEX_SEGMENT_TYPE]:z.DOWNLOAD_ERROR_ID_CONTENT_CODE,[_e.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:z.DOWNLOAD_ERROR_ID_CONTENT_CODE,[_e.HTTPRequest.OTHER_TYPE]:z.DOWNLOAD_ERROR_ID_CONTENT_CODE},G}Gd.__dashjs_factory_name="HTTPLoader";var Yh=xe.default.getClassFactory(Gd);function ko(){let S,y;function v(){y={}}function _(){v()}return _(),S={getLoader:function(I){for(var w in y)if(y.hasOwnProperty(w)&&I.startsWith(w))return y[w];return Yh},registerLoader:function(I,w){y[I]=w},unregisterLoader:function(I){y[I]&&delete y[I]},unregisterAllLoader:v,reset:_},S}ko.__dashjs_factory_name="SchemeLoaderFactory";var al=xe.default.getSingletonFactory(ko);function Hd(S){S=S||{};const y=this.context;let v,_,I;return _=al(y).getInstance(),v={abort:function(){I&&I.abort()},load:function(w){I||(I=_.getLoader(w&&w.request?w.request.url:null)(y).create({errHandler:S.errHandler,mediaPlayerModel:S.mediaPlayerModel,dashMetrics:S.dashMetrics,boxParser:S.boxParser?S.boxParser:null,constants:S.constants?S.constants:null,dashConstants:S.dashConstants?S.dashConstants:null,urlUtils:S.urlUtils?S.urlUtils:null,requestTimeout:isNaN(S.requestTimeout)?0:S.requestTimeout,errors:S.errors})),I.load(w)},reset:function(){_&&(_.reset(),_=null),I&&typeof I.reset=="function"&&I.reset(),I=null},resetInitialSettings:function(){I&&typeof I.resetInitialSettings=="function"&&I.resetInitialSettings()}},v}Hd.__dashjs_factory_name="URLLoader";var _s=xe.default.getClassFactory(Hd),Vd=class extends nt{constructor(S){super(S),this.checkForExistenceOnly=!0}};function Vu(S){S=S||{};const y=this.context,v=S.eventBus,_=S.events,I=S.urlUtils,w=S.errors,z=S.streamId;let F,x;return F={abort:function(){x&&x.abort()},checkForExistence:function(H){const G=function(D){v.trigger(_.CHECK_FOR_EXISTENCE_COMPLETED,{request:H,exists:D})};if(H){let D=new Vd(H.url);x.load({request:D,success:function(){G(!0)},error:function(){G(!1)}})}else G(!1)},load:function(H){const G=function(D,M){v.trigger(_.LOADING_COMPLETED,{request:H,response:D||null,error:M||null,sender:F})};H?x.load({request:H,progress:function(D){v.trigger(_.LOADING_PROGRESS,{request:H,stream:D.stream,streamId:z}),D.data&&v.trigger(_.LOADING_DATA_PROGRESS,{request:H,response:D.data||null,error:null,sender:F})},success:function(D){G(D)},error:function(D,M,B){G(void 0,new Ce.default(w.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,B,M))},abort:function(D){D&&v.trigger(_.LOADING_ABANDONED,{mediaType:D.mediaType,request:D,sender:F})}}):G(void 0,new Ce.default(w.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,w.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){x&&(x.abort(),x.reset(),x=null)},resetInitialSettings:function(){x&&x.resetInitialSettings()}},x=_s(y).create({errHandler:S.errHandler,errors:w,dashMetrics:S.dashMetrics,mediaPlayerModel:S.mediaPlayerModel,urlUtils:I,constants:q.default,boxParser:S.boxParser,dashConstants:S.dashConstants,requestTimeout:S.settings.get().streaming.fragmentRequestTimeout}),F}Vu.__dashjs_factory_name="FragmentLoader";var Yd=xe.default.getClassFactory(Vu);function Yu(S){S=S||{};const y=this.context,v=(0,Ee.default)(y).getInstance(),_=S.errHandler,I=S.mediaPlayerModel,w=S.dashMetrics,z=(0,Ve.default)(y).getInstance(),F=S.streamInfo;let x,H,G;function D(){return F.id}function M(){for(let Z in G)G[Z].reset();G={}}function B(Z){if(!Z.sender)return;const ne=Z.request,ie=Z.response,re=ne.isInitializationRequest(),se=ne.representation.mediaInfo.streamInfo;if(Z.error&&(ne.mediaType===q.default.AUDIO||ne.mediaType===q.default.VIDEO||ne.mediaType===q.default.TEXT&&ne.representation.mediaInfo.isFragmented)&&v.trigger(P.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Z.request.serviceLocation}),!ie||!se)return void H.warn("No "+ne.mediaType+" bytes to push or stream is inactive.");const oe=function(Ae,Q,U,V){const $=new ga;return $.streamId=U,$.segmentType=Q.type,$.start=Q.startTime,$.duration=Q.duration,$.end=$.start+$.duration,$.bytes=Ae,$.index=Q.index,$.representation=Q.representation,$.endFragment=V,$}(ie,ne,F.id,Z.type!==P.default.FRAGMENT_LOADING_PROGRESS);v.trigger(re?P.default.INIT_FRAGMENT_LOADED:P.default.MEDIA_FRAGMENT_LOADED,{chunk:oe,request:ne},{streamId:se.id,mediaType:ne.mediaType})}return x={getStreamId:D,getModel:function(Z){let ne=G[Z];return ne||(ne=zt(y).create({streamInfo:F,type:Z,dashMetrics:w,fragmentLoader:Yd(y).create({dashMetrics:w,mediaPlayerModel:I,errHandler:_,settings:S.settings,boxParser:S.boxParser,eventBus:v,events:P.default,errors:Y,dashConstants:S.dashConstants,urlUtils:S.urlUtils,streamId:D()}),debug:z,eventBus:v,events:P.default}),G[Z]=ne),ne},reset:function(){v.off(be.default.FRAGMENT_LOADING_COMPLETED,B,this),v.off(be.default.FRAGMENT_LOADING_PROGRESS,B,this),M()}},H=z.getLogger(x),M(),v.on(be.default.FRAGMENT_LOADING_COMPLETED,B,x),v.on(be.default.FRAGMENT_LOADING_PROGRESS,B,x),x}Yu.__dashjs_factory_name="FragmentController";var il=xe.default.getClassFactory(Yu),Kh=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},$h=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};class Ku{constructor(y){if(this.offset=y._offset,this.type=y.type,this.size=y.size,this.boxes=[],y.boxes)for(let v=0;v<y.boxes.length;v++)this.boxes.push(new Ku(y.boxes[v]));switch(this.isComplete=!0,y.type){case"sidx":if(this.timescale=y.timescale,this.earliest_presentation_time=y.earliest_presentation_time,this.first_offset=y.first_offset,this.references=y.references,y.references){this.references=[];for(let v=0;v<y.references.length;v++){let _={reference_type:y.references[v].reference_type,referenced_size:y.references[v].referenced_size,subsegment_duration:y.references[v].subsegment_duration};this.references.push(_)}}break;case"emsg":this.id=y.id,this.version=y.version===1?1:0,this.value=y.value,this.timescale=y.timescale,this.scheme_id_uri=y.scheme_id_uri,this.presentation_time_delta=y.version===1?y.presentation_time:y.presentation_time_delta,this.event_duration=y.event_duration,this.message_data=y.message_data;break;case"mdhd":this.timescale=y.timescale;break;case"mfhd":this.sequence_number=y.sequence_number;break;case"subs":this.entry_count=y.entry_count,this.entries=y.entries;break;case"tfhd":this.base_data_offset=y.base_data_offset,this.sample_description_index=y.sample_description_index,this.default_sample_duration=y.default_sample_duration,this.default_sample_size=y.default_sample_size,this.default_sample_flags=y.default_sample_flags,this.flags=y.flags;break;case"tfdt":this.version=y.version,this.baseMediaDecodeTime=y.baseMediaDecodeTime,this.flags=y.flags;break;case"trun":if(this.sample_count=y.sample_count,this.first_sample_flags=y.first_sample_flags,this.data_offset=y.data_offset,this.flags=y.flags,this.samples=y.samples,y.samples){this.samples=[];for(let v=0,_=y.samples.length;v<_;v++){let I={sample_size:y.samples[v].sample_size,sample_duration:y.samples[v].sample_duration,sample_composition_time_offset:y.samples[v].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=y.version,this.reference_track_ID=y.reference_track_ID,this.ntp_timestamp_sec=y.ntp_timestamp_sec,this.ntp_timestamp_frac=y.ntp_timestamp_frac,this.media_time=y.media_time,this.flags=y.flags}}getChildBox(y){for(let v=0;v<this.boxes.length;v++)if(this.boxes[v].type===y)return this.boxes[v]}getChildBoxes(y){let v=[];for(let _=0;_<this.boxes.length;_++)this.boxes[_].type===y&&v.push(this.boxes[_]);return v}}var Kd=Ku;function $u(){let S,y;function v(I){let w=[];if(!I||!y||typeof y.fetchAll!="function")return w;let z,F=y.fetchAll(I);for(let x=0,H=F.length;x<H;x++)z=_(F[x]),z&&w.push(z);return w}function _(I){if(!I)return null;let w=new Kd(I);return I.hasOwnProperty("_incomplete")&&(w.isComplete=!I._incomplete),w}return S={getBox:function(I){return I&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?_(y.fetch(I)):null},getBoxes:v,setData:function(I){y=I},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;let I=v(y.boxes[y.boxes.length-1].type);return I.length>0?I[I.length-1]:null}},S}$u.__dashjs_factory_name="IsoFile";var Wl=xe.default.getClassFactory($u),Pr=t(6877),Wu=class{constructor(S){let{found:y,sizeOfLastCompletedBox:v,sizeOfLastFoundTargetBox:_,startOffsetOfLastCompletedBox:I,startOffsetOfLastFoundTargetBox:w,typeOfLastCompletedBox:z,typeOfLastTargetBox:F}=S;this.found=y!==void 0&&y,this.sizeOfLastCompletedBox=v!==void 0?v:0,this.sizeOfLastFoundTargetBox=_!==void 0?_:0,this.startOffsetOfLastCompletedBox=I!==void 0?I:0,this.startOffsetOfLastFoundTargetBox=w!==void 0?w:0,this.typeOfLastCompletedBox=z!==void 0?z:null,this.typeOfLastTargetBox=F!==void 0?F:null}};function Xl(){let S,y,v=this.context;function _(z){if(!z)return null;z.fileStart===void 0&&(z.fileStart=0);let F=Pr.parseBuffer(z),x=Wl(v).create();return x.setData(F),x}function I(z,F){return z[F+3]>>>0|z[F+2]<<8>>>0|z[F+1]<<16>>>0|z[F]<<24>>>0}function w(z,F){return String.fromCharCode(z[F++])+String.fromCharCode(z[F++])+String.fromCharCode(z[F++])+String.fromCharCode(z[F])}return y={findInitRange:function(z){let F,x,H=null;const G=_(z);if(!G)return H;const D=G.getBox("ftyp"),M=G.getBox("moov");return S.debug("Searching for initialization."),M&&M.isComplete&&(F=D?D.offset:M.offset,x=M.offset+M.size-1,H=F+"-"+x,S.debug("Found the initialization.  Range: "+H)),H},findLastTopIsoBoxCompleted:function(z,F,x){if(x===void 0&&(x=0),!F||x+8>=F.byteLength)return new Wu({found:!1});const H=F instanceof ArrayBuffer?new Uint8Array(F):F;let G,D=0,M=0,B=null;for(;x<H.byteLength;){const Z=I(H,x),ne=w(H,x+4);if(Z===0)break;x+Z<=H.byteLength&&(z.indexOf(ne)>=0?G=new Wu({found:!0,startOffsetOfLastFoundTargetBox:x,sizeOfLastFoundTargetBox:Z,typeOfLastTargetBox:ne}):(D=x,M=Z,B=ne)),x+=Z}return G||new Wu({found:!1,startOffsetOfLastCompletedBox:D,sizeOfLastCompletedBox:M,typeOfLastCompletedBox:B})},getMediaTimescaleFromMoov:function(z){let F=_(z),x=F?F.getBox("mdhd"):void 0;return x?x.timescale:NaN},getSamplesInfo:function(z){if(!z||z.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let F,x,H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$=_(z),ce=$.getBoxes("moof"),Te=$.getBoxes("mfhd");U=$.getBoxes("moof").length,Q=Te[Te.length-1].sequence_number,H=0,M=[];let ge=-1,ve=-1;for(re=0;re<ce.length;re++){let Me=ce[re],ze=Me.getChildBoxes("traf");for(ne=0;ne<ze.length;ne++){let K=ze[ne],X=K.getChildBox("tfhd"),Se=K.getChildBox("tfdt");D=Se.baseMediaDecodeTime;let ye=K.getChildBoxes("trun"),J=K.getChildBoxes("subs");for(ie=0;ie<ye.length;ie++){let ue=ye[ie];for(H=ue.sample_count,Ae=(X.base_data_offset||0)+(ue.data_offset||0),Z=0;Z<H;Z++){B=ue.samples[Z],F=B.sample_duration!==void 0?B.sample_duration:X.default_sample_duration,G=B.sample_size!==void 0?B.sample_size:X.default_sample_size,x=B.sample_composition_time_offset!==void 0?B.sample_composition_time_offset:0;let he={dts:D,cts:D+x,duration:F,offset:Me.offset+Ae,size:G,subSizes:[G]};if(J)for(se=0;se<J.length;se++){let le=J[se];if(ge<le.entry_count-1&&Z>ve&&(ge++,ve+=le.entries[ge].sample_delta),Z==ve){he.subSizes=[];let Ie=le.entries[ge];for(oe=0;oe<Ie.subsample_count;oe++)he.subSizes.push(Ie.subsamples[oe].subsample_size)}}M.push(he),Ae+=G,D+=F}}V=D-Se.baseMediaDecodeTime}}return{sampleList:M,lastSequenceNumber:Q,totalDuration:V,numSequences:U}},parse:_},S=(0,Ve.default)(v).getInstance().getLogger(y),y}Xl.__dashjs_factory_name="BoxParser";var Ql=xe.default.getSingletonFactory(Xl);function Xu(S){const y=this.context,v=S.adapter,_=S.baseURLController,I=S.streamInfo,w=S.timelineConverter,z=S.debug,F=S.eventBus,x=S.events,H=S.dashConstants,G=jt(y).getInstance();let D,M,B,Z,ne,ie,re,se,oe;function Ae(U,V){const $=new $h;$.id=U.id,$.bitrate=U.bandwidth,$.width=U.width,$.height=U.height,$.tilesHor=1,$.tilesVert=1,U.essentialProperties&&U.essentialProperties.forEach(ce=>{if(q.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(ce.schemeIdUri)>=0&&ce.value){const Te=ce.value.split("x");Te.length!==2||isNaN(Te[0])||isNaN(Te[1])||($.tilesHor=parseInt(Te[0],10),$.tilesVert=parseInt(Te[1],10))}}),V?re.updateSegmentData(U).then(ce=>{(function(Te,ge,ve){let Me=[];const ze=function(K,X){const Se=[];let ye,J,ue,he,le=0;for(ye=0,J=K.segments.length;ye<J;ye++)ue=K.segments[ye],he=La(w,v.getIsDynamic(),X,ue.startTime,ue.duration,ue.timescale,ue.media,ue.mediaRange,le),he&&(Se.push(he),he=null,le++);return Se}(ve,ge);ge.segments=ze,ge.fragmentDuration=ge.segmentDuration||(ge.segments&&ge.segments.length>0?ge.segments[0].duration:NaN),Te.segmentDuration=ge.segments[0].duration,Te.readThumbnail=function(K,X){let Se=null;Me.some(ye=>{if(ye.start<=K&&ye.end>K)return Se=ye.url,!0}),Se?X(Se):ge.segments.some(ye=>{if(ye.mediaStartTime<=K&&ye.mediaStartTime+ye.duration>K){const J=_.resolve(ge.path),ue=new Gu({method:"get",url:J.url,responseType:"arraybuffer",customData:{request:{range:ye.mediaRange},onloadend:function(le){let Ie=oe.getSamplesInfo(le.target.response),we=new Blob([le.target.response.slice(Ie.sampleList[0].offset,Ie.sampleList[0].offset+Ie.sampleList[0].size)],{type:"image/jpeg"}),Fe=window.URL.createObjectURL(we);Me.push({start:ye.mediaStartTime,end:ye.mediaStartTime+ye.duration,url:Fe}),X&&X(Fe)}}}),he=new Hu({request:ue});return se.load(ue,he),!0}})}})($,U,ce)}):($.startNumber=U.startNumber,$.segmentDuration=U.segmentDuration,$.timescale=U.timescale,$.templateUrl=function(ce){const Te=G.isRelative(ce.media)?G.resolve(ce.media,_.resolve(ce.path).url):ce.media;return Te?ta(Te,ce.id):""}(U)),$.tilesHor>0&&$.tilesVert>0&&($.widthPerTile=$.width/$.tilesHor,$.heightPerTile=$.height/$.tilesVert,M.push($))}function Q(){M=[],B=[],ne=-1,ie=null,Z&&(Z.reset(),Z=null)}return D={addTracks:function(){if(!I||!v||(ie=v.getMediaInfoForType(I,q.default.IMAGE),!ie))return;const U=v.getVoRepresentations(ie);U&&U.length>0&&U.forEach(V=>{(V.segmentInfoType===k.default.SEGMENT_TEMPLATE&&V.segmentDuration>0&&V.media||V.segmentInfoType===k.default.SEGMENT_TIMELINE)&&Ae(V),V.segmentInfoType===k.default.SEGMENT_BASE&&Ae(V,!0),B.push(V)}),M.length>0&&M.sort((V,$)=>V.bitrate-$.bitrate)},getCurrentTrack:function(){return ne<0?null:M[ne]},getCurrentTrackIndex:function(){return ne},getRepresentations:function(){return B},getThumbnailRequestForTime:function(U){let V;const $=v.getVoRepresentations(ie);for(let ce=0;ce<$.length;ce++)if(M[ne].id===$[ce].id){V=$[ce];break}return Z.getSegmentRequestForTime(ie,V,U)},getTracks:function(){return M},reset:Q,setTrackById:function(U){if(!M||M.length===0)return;const V=M.findIndex($=>$.id===U);V!==-1&&(ne=V)},setTrackByIndex:function(U){M&&M.length!==0&&(U>=M.length&&(U=M.length-1),ne=U)}},Q(),se=Na(y).create({}),oe=Ql(y).getInstance(),re=At(y).create({events:x,eventBus:F,streamInfo:I,timelineConverter:w,dashConstants:H,dashMetrics:S.dashMetrics,segmentBaseController:S.segmentBaseController,type:q.default.IMAGE}),Z=wt(y).create({streamInfo:I,type:q.default.IMAGE,timelineConverter:w,segmentsController:re,baseURLController:_,debug:z,eventBus:F,events:x,dashConstants:H,urlUtils:G}),Z.initialize(!!v&&v.getIsDynamic()),D}Xu.__dashjs_factory_name="ThumbnailTracks";var Qu=xe.default.getClassFactory(Xu);function Do(S){const y=this.context,v=S.streamInfo;let _,I;function w(F){I.setTrackByIndex(F)}function z(){I&&I.reset()}return _={getCurrentTrack:function(){return I.getCurrentTrack()},getCurrentTrackIndex:function(){return I.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return I.getRepresentations()},getStreamId:function(){return v.id},initialize:function(){I.addTracks();const F=I.getTracks();F&&F.length>0&&w(0)},provide:function(F,x){if(typeof x!="function")return;const H=I.getCurrentTrack();let G,D;if(!H||H.segmentDuration<=0||F==null)return void x(null);D=I.getThumbnailRequestForTime(F),D&&(H.segmentDuration=D.duration),G=F%H.segmentDuration;const M=Math.floor(G*H.tilesHor*H.tilesVert/H.segmentDuration),B=new Kh;if(B.width=Math.floor(H.widthPerTile),B.height=Math.floor(H.heightPerTile),B.x=Math.floor(M%H.tilesHor)*H.widthPerTile,B.y=Math.floor(M/H.tilesHor)*H.heightPerTile,"readThumbnail"in H)return H.readThumbnail(F,Z=>{B.url=Z,x(B)});if(D)B.url=D.url,H.segmentDuration=NaN;else{const Z=Math.floor(F/H.segmentDuration);B.url=function(ne,ie){const re=ie+ne.startNumber;return ta(ne.templateUrl,void 0,re,void 0,ne.bandwidth,(re-1)*ne.segmentDuration*ne.timescale)}(H,Z)}x(B)},reset:z,setTrackByIndex:w,setTrackById:function(F){I.setTrackById(F)}},z(),I=Qu(y).create({streamInfo:v,adapter:S.adapter,baseURLController:S.baseURLController,timelineConverter:S.timelineConverter,debug:S.debug,eventBus:S.eventBus,events:S.events,dashConstants:S.dashConstants,dashMetrics:S.dashMetrics,segmentBaseController:S.segmentBaseController}),_}Do.__dashjs_factory_name="ThumbnailController";var $d=xe.default.getClassFactory(Do);function Zu(S){let y;S=S||{};let v=[];const _=(0,Ee.default)(this.context).getInstance(),I=S.updateEventName,w=S.addBlacklistEventName;function z(x){v.indexOf(x)===-1&&(v.push(x),_.trigger(I,{entry:x}))}function F(x){z(x.entry)}return y={add:z,remove:function(x){const H=v.indexOf(x);H!==-1&&v.splice(H,1)},contains:function(x){return!!(v.length&&x&&x.length)&&v.indexOf(x)!==-1},reset:function(){w&&_.off(w,F,y),v=[]}},w&&_.on(w,F,y),y}Zu.__dashjs_factory_name="BlackListController";var Co=xe.default.getClassFactory(Zu);const Wh=[q.default.VIDEO,q.default.AUDIO,q.default.TEXT,q.default.MUXED,q.default.IMAGE];function Wd(S){S=S||{};const y=this.context,v=(0,Ee.default)(y).getInstance(),_=jt(y).getInstance(),I=S.manifestModel,w=S.mediaPlayerModel,z=S.dashMetrics,F=S.manifestUpdater,x=S.adapter,H=S.timelineConverter,G=S.capabilities,D=S.errHandler,M=S.abrController,B=S.playbackController,Z=S.throughputController,ne=S.eventController,ie=S.mediaController,re=S.protectionController,se=S.textController,oe=S.videoModel;let Ae=S.streamInfo;const Q=S.settings;let U,V,$,ce,Te,ge,ve,Me,ze,K,X,Se,ye,J,ue,he;function le(ft,Gt,dn){return new Promise(($t,an)=>{qt(),Xt();let et=oe.getElement();const Ct=[];Wh.forEach(rn=>{if((rn!==q.default.TEXT||ft)&&(rn!==q.default.VIDEO||!et||et&&/^VIDEO$/i.test(et.nodeName))){const Qt=dn.find(pt=>pt.mediaInfo.type===rn);Ct.push(Ie(rn,ft,Qt))}}),Promise.all(Ct).then(()=>{return rn=Gt,new Promise(Qt=>{const pt={},ke=$.map(Qe=>{const Tt=Qe.getRepresentation();return Qe.createBufferSinks(rn,Tt)});Promise.all(ke).then(Qe=>{Qe.forEach(Tt=>{Tt&&(pt[Tt.getType()]=Tt)}),Qt(pt)}).catch(()=>{Qt(pt)})});var rn}).then(rn=>{if($.length===0){const Qt="No streams to play.";D.error(new Ce.default(Y.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Qt,I.getValue())),V.fatal(Qt)}else St();ft&&se.createTracks(Ae),$t(rn)}).catch(rn=>{an(rn)})})}function Ie(ft,Gt,dn){let $t,an=x.getAllMediaInfoForType(Ae,ft),et=[],Ct=null;if(!an||an.length===0)return V.info("No "+ft+" data."),Promise.resolve();ft===q.default.VIDEO&&(ve=!0),ft===q.default.AUDIO&&(Me=!0);for(let Qt=0,pt=an.length;Qt<pt;Qt++)Ct=an[Qt],ft===q.default.TEXT&&Ct.isEmbedded&&(se.addEmbeddedTrack(Ae,Ct),et.push(Ct)),we(Ct)&&ie.addTrack(Ct);if(et.length>0&&(ie.setInitialMediaSettingsForType(ft,Ae),se.addMediaInfosToBuffer(Ae,ft,et)),an=an.filter(Qt=>!Qt.isEmbedded),an.length===0)return Promise.resolve();if(ft===q.default.IMAGE)return K=$d(y).create({streamInfo:Ae,adapter:x,baseURLController:S.baseURLController,timelineConverter:S.timelineConverter,debug:J,eventBus:v,events:P.default,dashConstants:k.default,dashMetrics:S.dashMetrics,segmentBaseController:S.segmentBaseController}),K.initialize(),Promise.resolve();v.trigger(P.default.STREAM_INITIALIZING,{streamInfo:Ae,mediaInfo:Ct}),ie.setInitialMediaSettingsForType(ft,Ae);let rn=function(Qt,pt){const ke=Qt&&Qt.length>0?Qt[0]:null;let Qe=ze.getModel(ke?ke.type:null);const Tt=ke?ke.type:null,Ze=ke?ke.mimeType:null,Ut=ke?ke.isFragmented:null;let Zt=ra(y).create({abrController:M,adapter:x,baseURLController:S.baseURLController,boxParser:ye,capabilities:G,dashMetrics:S.dashMetrics,errHandler:D,fragmentModel:Qe,manifestModel:I,mediaController:ie,mediaPlayerModel:w,mimeType:Ze,playbackController:B,segmentBaseController:S.segmentBaseController,segmentBlacklistController:X,settings:Q,streamInfo:Ae,textController:se,throughputController:Z,timelineConverter:H,type:Tt});return Zt.initialize(pt,ve,Ut),$.push(Zt),Zt.setMediaInfoArray(Qt),Tt===q.default.TEXT&&se.addMediaInfosToBuffer(Ae,Tt,Qt,Qe),Zt}(an,Gt);if($t=ie.getCurrentTrackFor(ft,Ae.id),$t){const Qt=ft===q.default.TEXT&&$t.isEmbedded?an[0]:$t,pt=new mn({newMediaInfo:Qt,previouslySelectedRepresentation:dn});return rn.selectMediaInfo(pt)}return Promise.resolve()}function we(ft){const Gt=ft?ft.type:null;let dn;return Gt===q.default.MUXED?(dn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",V.fatal(dn),D.error(new Ce.default(Y.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,dn,I.getValue())),!1):!(Gt!==q.default.TEXT&&Gt!==q.default.IMAGE&&ft.contentProtection&&ft.contentProtection.length>0&&!G.supportsEncryptedMedia()&&(D.error(new Ce.default(Y.CAPABILITY_MEDIAKEYS_ERROR_CODE,Y.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Fe(ft){let Gt=$?$.length:0;for(let dn=0;dn<Gt;dn++){let $t=$[dn].getFragmentModel();$t.abortRequests(),$t.resetInitialSettings(),$[dn].reset(!1,ft)}se&&se.deactivateStream(Ae),K&&(K.reset(),K=null),$=[],Te=!1,ge=!1,ln(!1),at(!1),v.trigger(P.default.STREAM_DEACTIVATED,{streamInfo:Ae})}function je(ft){Fe(ft),ce=!1,ve=!1,Me=!1,ue=!1,he=[]}function at(ft){ue=ft}function lt(){return Ae?Ae.start:NaN}function ot(){return Ae?Ae.id:null}function qt(){if(!oe||!M)throw new Error(q.default.MISSING_CONFIG_ERROR)}function Kt(ft){ft.error&&(D.error(ft.error),V.fatal(ft.error.message))}function Xt(){if(ne){const ft=x.getEventsFor(Ae);ft&&ft.length>0&&ne.addInlineEvents(ft,Ae.id)}}function In(ft){let Gt=Lt(ft);return Gt?Gt.getMediaInfo():null}function Lt(ft){return ft?$.find(Gt=>Gt.getType()===ft):null}function gn(){let ft=bt();const Gt=ft.length;if(Gt!==0){for(let dn=0;dn<Gt;dn++)if(!ft[dn].isBufferingCompleted()&&(ft[dn].getType()===q.default.AUDIO||ft[dn].getType()===q.default.VIDEO))return void V.debug("onBufferingCompleted - One streamProcessor has finished but",ft[dn].getType(),"one is not buffering completed");V.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),ge=!0,v.trigger(P.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Ae},{streamInfo:Ae})}else V.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function vn(ft){ne&&ne.addInbandEvents(ft.events,Ae.id)}function Cn(){St()}function Nn(ft){return ft&&ft.type?Ke(ft.type):null}function Ke(ft){return ft?bt().filter(function(Gt){return Gt.getType()===ft})[0]:null}function bt(){let ft,Gt,dn=[];for(let $t=0;$t<$.length;$t++)Gt=$[$t],ft=Gt.getType(),ft!==q.default.AUDIO&&ft!==q.default.VIDEO&&ft!==q.default.TEXT||dn.push(Gt);return dn}function ht(){const ft=$.length;for(let Gt=0;Gt<ft&&$[Gt];Gt++)$[Gt].getScheduleController().startScheduleTimer()}function St(){const ft=$.length;if(re){re.clearMediaInfoArray();for(let Gt=0;Gt<ft&&$[Gt];Gt++){const dn=$[Gt].getType(),$t=$[Gt].getMediaInfo();if(dn===q.default.AUDIO||dn===q.default.VIDEO||dn===q.default.TEXT&&$t&&$t.isFragmented){let an=$[Gt].getMediaInfo();an&&re.initializeForMedia(an)}}re.handleKeySystemFromManifest()}ce||(ce=!0,oe.waitForReadyState(q.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{v.trigger(P.default.STREAM_INITIALIZED,{streamInfo:Ae})}))}function ln(ft){Se=ft}function Sn(){return Se}return U={activate:function(ft,Gt){let dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(($t,an)=>{if(!Te)return Sn()?(Te=!0,v.trigger(P.default.STREAM_ACTIVATED,{streamInfo:Ae}),void $t(Gt)):void function(et,Ct){return le(et,Ct,arguments.length>2&&arguments[2]!==void 0?arguments[2]:[])}(ft,Gt,dn).then(et=>{Te=!0,dn&&dn.length>0&&ht(),v.trigger(P.default.STREAM_ACTIVATED,{streamInfo:Ae}),$t(et)}).catch(et=>{an(et)});$t(Gt)})},checkAndHandleCompletedBuffering:function(){ge||$.forEach(ft=>{ft.checkAndHandleCompletedBuffering()})},deactivate:Fe,getAdapter:function(){return x},getCurrentMediaInfoForType:function(ft){const Gt=Ke(ft);return Gt?Gt.getMediaInfo():null},getCurrentRepresentationForType:function(ft){const Gt=Ke(ft);return Gt?Gt.getRepresentation():null},getDuration:function(){return Ae?Ae.duration:NaN},getHasAudioTrack:function(){return Me},getHasFinishedBuffering:function(){return ge},getHasVideoTrack:function(){return ve},getId:ot,getIsActive:function(){return Te},getIsEndedEventSignaled:function(){return ue},getPreloaded:Sn,getRepresentationForTypeById:function(ft,Gt){let dn;if(ft===q.default.IMAGE){if(!K)return null;dn=K.getPossibleVoRepresentations()}else dn=function(et){let Ct=Lt(et);return Ct?Ct.getAllMediaInfos():[]}(ft).flatMap(et=>M.getPossibleVoRepresentationsFilteredBySettings(et,!0));if(!dn||dn.length===0)return null;const $t=dn.filter(an=>an.id===Gt);return $t&&$t.length>0?$t[0]:null},getRepresentationForTypeByIndex:function(ft,Gt){let dn;if(ft===q.default.IMAGE){if(!K)return null;dn=K.getPossibleVoRepresentations()}else{const $t=In(ft);dn=M.getPossibleVoRepresentationsFilteredBySettings($t,!0)}return dn[Gt=Math.max(Math.min(Gt,dn.length-1),0)]},getRepresentationsByType:function(ft){if(qt(),ft===q.default.IMAGE)return K?K.getPossibleVoRepresentations():[];const Gt=In(ft);return M.getPossibleVoRepresentationsFilteredBySettings(Gt,!0)},getStartTime:lt,getStreamId:function(){return Ae?Ae.id:null},getStreamInfo:function(){return Ae},getStreamProcessors:bt,getThumbnailController:function(){return K},initialize:function(){v.on(P.default.BUFFERING_COMPLETED,gn,U),v.on(P.default.INBAND_EVENTS,vn,U),v.on(P.default.DATA_UPDATE_COMPLETED,Cn,U),re&&(v.on(P.default.KEY_ERROR,Kt,U),v.on(P.default.SERVER_CERTIFICATE_UPDATED,Kt,U),v.on(P.default.LICENSE_REQUEST_COMPLETE,Kt,U),v.on(P.default.KEY_SYSTEM_SELECTED,Kt,U),v.on(P.default.KEY_SESSION_CREATED,Kt,U)),se.initializeForStream(Ae),v.trigger(P.default.STREAM_UPDATED,{streamInfo:Ae})},initializeForTextWithMediaSource:function(ft){return new Promise((Gt,dn)=>{Ie(q.default.TEXT,ft,null).then(()=>function(){const $t=Ke(q.default.TEXT);return $t?$t.createBufferSinks():Promise.resolve()}()).then(()=>{se.createTracks(Ae),Gt()}).catch($t=>{dn($t)})})},prepareQualityChange:function(ft){const Gt=Ke(ft.mediaType);Gt&&Gt.prepareQualityChange(ft)},prepareTrackChange:function(ft){if(!Te||!Ae)return;ge=!1;let Gt=ft.newMediaInfo,dn=I.getValue(),$t=Nn(Gt);if(!$t)return;let an=B.getTime();if(V.info("Stream -  Process track changed at current time "+an),dn.refreshManifestOnSwitchTrack)he.push(ft),F.getIsUpdating()||(V.debug("Stream -  Refreshing manifest for switch track"),F.refreshManifest());else{$t.clearScheduleTimer(),$t.setTrackSwitchInProgress(!0);const et=$t.getRepresentation();$t.selectMediaInfo(new mn({newMediaInfo:Gt})).then(()=>{const Ct=!!(ft&&ft.options&&ft.options.hasOwnProperty("replaceBuffer"))&&ft.options.replaceBuffer;return $t.prepareTrackSwitch(et,Ct)}).then(()=>{$t.setTrackSwitchInProgress(!1)})}},reset:function(ft){ze&&(ze.reset(),ze=null),M&&Ae&&M.clearDataForStream(Ae.id),X&&(X.reset(),X=null),se&&Ae&&se.clearDataForStream(Ae.id),ie&&Ae&&ie.clearDataForStream(Ae.id),je(ft),Ae=null,v.off(P.default.BUFFERING_COMPLETED,gn,U),v.off(P.default.INBAND_EVENTS,vn,U),v.off(P.default.DATA_UPDATE_COMPLETED,Cn,U),re&&(v.off(P.default.KEY_ERROR,Kt,U),v.off(P.default.SERVER_CERTIFICATE_UPDATED,Kt,U),v.off(P.default.LICENSE_REQUEST_COMPLETE,Kt,U),v.off(P.default.KEY_SYSTEM_SELECTED,Kt,U),v.off(P.default.KEY_SESSION_CREATED,Kt,U))},setIsEndedEventSignaled:at,setMediaSource:function(ft){return new Promise((Gt,dn)=>{const $t=[];for(let an=0;an<$.length;)we($[an].getMediaInfo())?($t.push($[an].setMediaSource(ft)),an++):($[an].reset(),$.splice(an,1));Promise.all($t).then(()=>{for(let an=0;an<$.length;an++)$[an].dischargePreBuffer();if($.length===0){const an="No streams to play.";D.error(new Ce.default(Y.MANIFEST_ERROR_ID_NOSTREAMS_CODE,an+"nostreams",I.getValue())),V.fatal(an)}Gt()}).catch(an=>{V.error(an),dn(an)})})},startPreloading:function(ft,Gt){let dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(($t,an)=>{Sn()?an():(V.info(`[startPreloading] Preloading next stream with id ${ot()}`),ln(!0),le(ft,Gt,dn).then(()=>{for(let et=0;et<$.length&&$[et];et++)$[et].setExplicitBufferingTime(lt()),$[et].getScheduleController().startScheduleTimer();$t()}).catch(()=>{ln(!1),an()}))})},startScheduleControllers:ht,triggerProtectionError:function(ft){Kt(ft)},updateData:function(ft){return new Promise(Gt=>{Ae=ft,ne&&Xt();let dn,$t=[];for(let an=0,et=$.length;an<et;an++){let Ct=$[an];const rn=Ct.getMediaInfo();$t.push(Ct.updateStreamInfo(Ae));let Qt=x.getAllMediaInfoForType(Ae,Ct.getType());if(Qt=Qt.filter(pt=>!pt.isEmbedded),Ct.setMediaInfoArray(Qt),Qt)for(let pt=0;pt<Qt.length;pt++)x.areMediaInfosEqual(rn,Qt[pt])&&$t.push(Ct.selectMediaInfo(new mn({newMediaInfo:Qt[pt]})))}Promise.all($t).then(()=>{let an=[];for(;he.length>0;){let et=he.pop(),Ct=et.newMediaInfo;if(dn=Nn(et.oldMediaInfo),!dn)return;const rn=dn.getRepresentation();dn.setTrackSwitchInProgress(!0),an.push(dn.prepareTrackSwitch(rn)),an.push(dn.selectMediaInfo(new mn({newMediaInfo:Ct})))}return Promise.all(an)}).then(()=>{St(),dn&&dn.setTrackSwitchInProgress(!1),v.trigger(P.default.STREAM_UPDATED,{streamInfo:Ae}),Gt()}).catch(an=>{D.error(an)})})}},function(){try{J=(0,Ve.default)(y).getInstance(),V=J.getLogger(U),je(),ye=Ql(y).getInstance(),X=Co(y).create({updateEventName:P.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:P.default.SEGMENT_LOCATION_BLACKLIST_ADD}),ze=il(y).create({streamInfo:Ae,mediaPlayerModel:w,dashMetrics:z,errHandler:D,settings:Q,boxParser:ye,dashConstants:k.default,urlUtils:_})}catch(ft){throw ft}}(),U}Wd.__dashjs_factory_name="Stream";var Xh=xe.default.getClassFactory(Wd),Qh=class{constructor(S){this.url=S||null,this.type=_e.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},Zh=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function Pi(){const S=this.context,y=jt(S).getInstance();let v,_,I,w,z,F,x,H,G,D,M,B,Z,ne,ie;function re(ve){Ae(ve,"baseUrl")}function se(ve){Ae(ve,"location")}function oe(ve){var Me,ze;ve&&ve.throughputValues&&ve.throughputValues.serviceLocation&&(Me=ve.throughputValues.serviceLocation,ze=ve.throughputValues,z[Me]||(z[Me]=[]),z[Me].push(ze),z[Me].length>4&&z[Me].shift())}function Ae(ve,Me){if(ve&&ve.request&&ve.request.serviceLocation){const ze=ve.request.serviceLocation;w[Me].all.indexOf(ze)===-1&&w[Me].all.push(ze),w[Me].current=ze}}function Q(){const ve=M.getValue();let Me=ie.getContentSteering(ve);return Me||(Me=B.getServiceDescriptionSettings().contentSteering),Me}function U(){return new Promise(ve=>{try{const Me=Q();if(!Me||!Me.serverUrl)return void ve();const ze=function(X){let Se=X.serverUrl;I&&I.reloadUri&&(Se=y.isRelative(I.reloadUri)?y.resolve(I.reloadUri,X.serverUrl):I.reloadUri);const ye=[],J=w.baseUrl.all.concat(w.location.all);if(J.length>0){const ue=J.map(Ie=>{const we=function(Fe){if(!Fe||!z[Fe]||z[Fe].length===0)return-1;const je=Z.getArithmeticMean(z[Fe],z[Fe].length,!0);return parseInt(1e3*je)}(Ie);return{serviceLocation:Ie,throughput:we}});let he="",le="";ue.forEach((Ie,we)=>{we!==0&&(he+=",",le+=","),he+=Ie.serviceLocation,le+=Ie.throughput>-1?Ie.throughput:""}),ye.push({key:"_DASH_pathway",value:`"${he}"`}),ye.push({key:"_DASH_throughput",value:le})}return Se=sa.default.addAdditionalQueryParameterToUrl(Se,ye),Se}(Me),K=new Qh(ze);x.load({request:K,success:X=>{(function(Se){Se&&Se[k.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(Se[k.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(I=new Zh,I.version=Se[k.default.CONTENT_STEERING_RESPONSE.VERSION],Se[k.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Se[k.default.CONTENT_STEERING_RESPONSE.TTL])&&(I.ttl=Se[k.default.CONTENT_STEERING_RESPONSE.TTL]),Se[k.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(I.reloadUri=Se[k.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Se[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(I.pathwayPriority=Se[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),Se[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(I.pathwayClones=Se[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],I.pathwayClones=I.pathwayClones.filter(ye=>function(J){return J[k.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&J[k.default.CONTENT_STEERING_RESPONSE.ID]&&J[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&J[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][k.default.CONTENT_STEERING_RESPONSE.HOST]}(ye))),ce())})(X),ne.trigger(be.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:I,url:ze}),ve()},error:(X,Se,ye,J)=>{(function(ue,he){try{switch(_.warn("Error fetching data from content steering server",ue),he.status){case 410:break;case 429:const le=he&&he.getResponseHeader?he.getResponseHeader("retry-after"):null;le!==null&&(I||(I={}),I.ttl=parseInt(le)),ce();break;default:ce()}}catch(le){_.error(le)}})(X,J),ve(X)},complete:()=>{w.baseUrl.all=V(w.baseUrl),w.location.all=V(w.location)}})}catch(Me){ve(Me)}})}function V(ve){return ve.all&&ve.all.length!==0&&ve.current?ve.all.filter(Me=>Me===ve.current):[]}function $(ve){try{const Me=[];return ve&&ve.length!==0&&I&&I.pathwayClones&&I.pathwayClones.length!==0&&I.pathwayClones.forEach(ze=>{let K=ve.filter(Se=>ze[k.default.CONTENT_STEERING_RESPONSE.BASE_ID]===Se.serviceLocation),X=null;if(K&&K.length>0&&(X=K[0]),X){const Se=new URL(X.url);let ye=ze[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][k.default.CONTENT_STEERING_RESPONSE.HOST];ye=sa.default.stringHasProtocol(ye)?ye:`${Se.protocol}//${ye}`;const J={synthesizedUrl:`${ye}${Se.pathname}`,serviceLocation:ze[k.default.CONTENT_STEERING_RESPONSE.ID],queryParams:ze[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][k.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:X};Me.push(J)}}),Me}catch(Me){return _.error(Me),[]}}function ce(){I&&I.ttl&&!isNaN(I.ttl)&&(F&&clearTimeout(F),F=setTimeout(()=>{U()},1e3*I.ttl))}function Te(){F&&clearTimeout(F),F=null}function ge(){I=null,z={},w={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Te()}return v={reset:function(){ge(),ne.off(be.default.FRAGMENT_LOADING_STARTED,re,v),ne.off(be.default.MANIFEST_LOADING_STARTED,se,v),ne.off(be.default.THROUGHPUT_MEASUREMENT_STORED,oe,v)},setConfig:function(ve){ve&&(ve.adapter&&(ie=ve.adapter),ve.errHandler&&(H=ve.errHandler),ve.dashMetrics&&(G=ve.dashMetrics),ve.mediaPlayerModel&&(D=ve.mediaPlayerModel),ve.manifestModel&&(M=ve.manifestModel),ve.serviceDescriptionController&&(B=ve.serviceDescriptionController),ve.throughputController&&(Z=ve.throughputController),ve.eventBus&&(ne=ve.eventBus))},loadSteeringData:U,getCurrentSteeringResponseData:function(){return I},shouldQueryBeforeStart:function(){const ve=Q();return!!ve&&ve.queryBeforeStart},getSteeringDataFromManifest:Q,stopSteeringRequestTimer:Te,getSynthesizedBaseUrlElements:function(ve){try{return $(ve).map(Me=>{const ze=new Ka(Me.synthesizedUrl,Me.serviceLocation);return ze.queryParams=Me.queryParams,ze.dvbPriority=Me.reference.dvbPriority,ze.dvbWeight=Me.reference.dvbWeight,ze.availabilityTimeOffset=Me.reference.availabilityTimeOffset,ze.availabilityTimeComplete=Me.reference.availabilityTimeComplete,ze})}catch(Me){return _.error(Me),[]}},getSynthesizedLocationElements:function(ve){try{return $(ve).map(Me=>{const ze=new Tn(Me.synthesizedUrl,Me.serviceLocation);return ze.queryParams=Me.queryParams,ze})}catch(Me){return _.error(Me),[]}},initialize:function(){x=_s(S).create({errHandler:H,dashMetrics:G,mediaPlayerModel:D,errors:Y}),ne.on(be.default.FRAGMENT_LOADING_STARTED,re,v),ne.on(be.default.MANIFEST_LOADING_STARTED,se,v),ne.on(be.default.THROUGHPUT_MEASUREMENT_STORED,oe,v)}},_=(0,Ve.default)(S).getInstance().getLogger(v),ge(),v}Pi.__dashjs_factory_name="ContentSteeringController";var As=xe.default.getSingletonFactory(Pi);function Ju(){const S=this.context,y=(0,W.default)(S).getInstance();let v,_,I;return v={select:function(w){if(!w||w.length===0)return null;let z=null;return y.get().streaming.applyContentSteering&&(z=function(F){const x=I.getCurrentSteeringResponseData();return x&&x.pathwayPriority&&x.pathwayPriority.length>0?function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=0,M=null;for(;D<H.length;){const B=H[D],Z=G.findIndex(ne=>ne.serviceLocation&&ne.serviceLocation===B);if(Z!==-1&&!_.contains(G[Z].serviceLocation)){M=G[Z];break}D+=1}return M}(x.pathwayPriority,F):null}(w)),z||(z=function(F){return F[0]}(w)),z},setConfig:function(w){w.blacklistController&&(_=w.blacklistController),w.contentSteeringController&&(I=w.contentSteeringController)},reset:function(){_.reset()}},_=Co(S).create({updateEventName:P.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:P.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),I=As(S).getInstance(),v}Ju.__dashjs_factory_name="LocationSelector";var Xd=xe.default.getClassFactory(Ju);function ec(){const S=this.context,y=(0,Ee.default)(S).getInstance(),v=jt(S).getInstance();let _,I,w,z,F,x,H,G,D,M,B,Z,ne,ie;function re(){w=NaN,H=!1,F=!0,x=!1,se()}function se(){z!==null&&(clearTimeout(z),z=null)}function oe(ge){se(),x||(isNaN(ge)&&!isNaN(w)&&(ge=1e3*w),isNaN(ge)||(I.debug("Refresh manifest in "+ge+" milliseconds."),z=setTimeout(U,ge)))}function Ae(){let ge=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;const ve=D.getValue();let Me=ve.url;Me&&(Me=sa.default.removeQueryParameterFromUrl(Me,q.default.CMCD_QUERY_KEY));let ze=null;const K=B.getPatchLocation(ve),X=M.select(K);let Se=null;if(X&&!ge)Me=X.url,ze=X.serviceLocation,Se=X.queryParams;else{const ye=function(ue){const he=B.getLocation(ue),le=ne.getSynthesizedLocationElements(he);return he.concat(le)}(ve),J=M.select(ye);J&&(Me=J.url,ze=J.serviceLocation,Se=J.queryParams)}v.isRelative(Me)&&(Me=v.resolve(Me,ve.url)),G.load(Me,ze,Se)}function Q(ge){if(ge){if(B.getIsPatch(ge)){let ze=ge;ge=D.getValue();let K=B.isPatchValid(ge,ze),X=K;if(K){let Se=B.getPublishTime(ge);B.applyPatchToManifest(ge,ze);let ye=B.getPublishTime(ge);X=Se.getTime()!==ye.getTime()}if(!X)return I.debug("Patch provided is invalid, performing full manifest refresh"),void Ae(!0);ge.loadedTime=new Date}}else(ge=D.getValue()).loadedTime=new Date;if(D.getValue()&&D.getValue().type===k.default.DYNAMIC&&ge.type===k.default.STATIC)return y.trigger(P.default.DYNAMIC_TO_STATIC),H=!1,void(x=!0);D.setValue(ge);const ve=new Date,Me=(ve.getTime()-ge.loadedTime.getTime())/1e3;w=B.getManifestUpdatePeriod(ge,Me),1e3*w>2147483647&&(w=2147483647e-3),y.trigger(P.default.MANIFEST_UPDATED,{manifest:ge}),I.info("Manifest has been refreshed at "+ve+"["+ve.getTime()/1e3+"] "),F||oe()}function U(){F||(H?oe(ie.get().streaming.manifestUpdateRetryInterval):Ae())}function V(ge){ge.error?ge.error.code===Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&Z.error(ge.error):Q(ge.manifest)}function $(){F=!1,oe()}function ce(){F=!ie.get().streaming.scheduling.scheduleWhilePaused,F&&se()}function Te(){H=!1}return _={initialize:function(){re(),y.on(P.default.STREAMS_COMPOSED,Te,this),y.on(be.default.PLAYBACK_STARTED,$,this),y.on(be.default.PLAYBACK_PAUSED,ce,this),y.on(P.default.INTERNAL_MANIFEST_LOADED,V,this)},setManifest:function(ge){Q(ge)},refreshManifest:Ae,getIsUpdating:function(){return H},setConfig:function(ge){ge&&(ge.manifestModel&&(D=ge.manifestModel),ge.adapter&&(B=ge.adapter),ge.manifestLoader&&(G=ge.manifestLoader),ge.errHandler&&(Z=ge.errHandler),ge.locationSelector&&(M=ge.locationSelector),ge.settings&&(ie=ge.settings),ge.contentSteeringController&&(ne=ge.contentSteeringController))},reset:function(){y.off(be.default.PLAYBACK_STARTED,$,this),y.off(be.default.PLAYBACK_PAUSED,ce,this),y.off(P.default.STREAMS_COMPOSED,Te,this),y.off(P.default.INTERNAL_MANIFEST_LOADED,V,this),re()}},I=(0,Ve.default)(S).getInstance().getLogger(_),M=Xd(S).create(),_}ec.__dashjs_factory_name="ManifestUpdater";var tc=xe.default.getClassFactory(ec);function Zl(){const S=this.context,y=(0,Ee.default)(S).getInstance(),v=jt(S).getInstance();let _,I,w,z,F,x,H,G,D,M,B,Z,ne,ie,re,se;function oe(){G=[],D=[],M=null,B=null,ne=null,Z=NaN,w=!1,z=!1,ie=F.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ae(){F.get().streaming.utcSynchronization.enabled&&!w&&!z&&ne&&ne.value&&ne.schemeIdUri&&!isNaN(Z)&&!isNaN(F.get().streaming.utcSynchronization.backgroundAttempts)&&(B&&(Date.now()-B)/1e3<30||(G=[],z=!0,Q(isNaN(F.get().streaming.utcSynchronization.backgroundAttempts)?2:F.get().streaming.utcSynchronization.backgroundAttempts)))}function Q(J){try{if(J<=0)return void Se();const ue=Date.now();x[ne.schemeIdUri](ne.value,function(he){const le=Date.now(),Ie=V(ue,le,he);G.push(Ie),Q(J-1)},function(){Se()})}catch{Se()}}function U(){let J=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||0;if(!D||D.length===0||J>=D.length)return void $();let ue=D[J];if(ue)if(x.hasOwnProperty(ue.schemeIdUri)){const he=new Date().getTime();x[ue.schemeIdUri](ue.value,function(le){const Ie=new Date().getTime(),we=V(he,Ie,le);ne=ue,$(we)},function(){U(J+1)})}else U(J+1);else $()}function V(J,ue,he){return he-(ue-(ue-J)/2)}function $(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ue=isNaN(J);ue&&F.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let he=H.getLatestMPDRequestHeaderValueByID("Date"),le=he!==null?new Date(he).getTime():Number.NaN;isNaN(le)?X(!0):X(!1,le-Date.now())}():X(ue,J)}function ce(J){let ue=Date.parse(J);return isNaN(ue)&&(ue=function(he){let le,Ie,we=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(he);return le=Date.UTC(parseInt(we[1],10),parseInt(we[2],10)-1,parseInt(we[3],10),parseInt(we[4],10),parseInt(we[5],10),we[6]&&(parseInt(we[6],10)||0),we[7]&&1e3*parseFloat(we[7])||0),we[9]&&we[10]&&(Ie=60*parseInt(we[9],10)+parseInt(we[10],10),le+=(we[8]==="+"?-1:1)*Ie*60*1e3),new Date(le).getTime()}(J)),ue}function Te(J){return Date.parse(J)}function ge(J){return Date.parse(J)}function ve(J,ue,he){he()}function Me(J,ue,he){let le=ce(J);isNaN(le)?he():ue(le)}function ze(J,ue,he,le,Ie){let we,Fe,je=!1,at=new XMLHttpRequest,lt=Ie?_e.HTTPRequest.HEAD:_e.HTTPRequest.GET,ot=ue.match(/\S+/g);if(ue=ot.shift(),we=function(){je||(je=!0,ot.length?ze(J,ot.join(" "),he,le,Ie):le())},Fe=function(){let qt,Kt;at.status===200&&(qt=Ie?at.getResponseHeader("Date"):at.response,Kt=J(qt),isNaN(Kt)||(he(Kt),je=!0))},v.isRelative(ue)){const qt=se.resolve();qt&&(ue=v.resolve(ue,qt.url))}at.open(lt,ue),at.timeout=5e3,at.onload=Fe,at.onloadend=we,at.send()}function K(J,ue,he){ze(ge,J,ue,he,!0)}function X(J,ue){if(isNaN(Z)||isNaN(ue)||J||function(he){try{const le=ye(he),Ie=isNaN(ie)?30:ie,we=isNaN(F.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:F.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Fe=isNaN(F.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:F.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,je=isNaN(F.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:F.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let at;le?(at=Math.min(Ie*we,Fe),I.debug(`Increasing timeBetweenSyncAttempts to ${at}`)):(at=Math.max(Ie/we,je),I.debug(`Decreasing timeBetweenSyncAttempts to ${at}`)),ie=at}catch{}}(ue),!J&&!isNaN(ue)){M=Date.now(),w=!1;const he=isNaN(Z);Z=ue,he&&Ae(),I.debug(`Completed UTC sync. Setting client - server offset to ${ue}`)}J&&(ne=null,w=!1,re.error(new Ce.default(Y.TIME_SYNC_FAILED_ERROR_CODE,Y.TIME_SYNC_FAILED_ERROR_MESSAGE))),y.trigger(P.default.UPDATE_TIME_SYNC_OFFSET,{offset:ue}),y.trigger(P.default.TIME_SYNCHRONIZATION_COMPLETED)}function Se(){if(!G||G.length===0)return;const J=G.reduce((ue,he)=>ue+he,0)/G.length;ye(J)?I.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(I.debug(`Completed background UTC sync. Setting client - server offset to ${J}`),Z=J,y.trigger(P.default.UPDATE_TIME_SYNC_OFFSET,{offset:Z})),z=!1,B=Date.now()}function ye(J){try{if(isNaN(Z))return!0;const ue=F.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(F.get().streaming.utcSynchronization.maximumAllowedDrift)?F.get().streaming.utcSynchronization.maximumAllowedDrift:100;return J>=Z-ue&&J<=Z+ue}catch{return!0}}return _={initialize:function(){oe(),x={"urn:mpeg:dash:utc:http-head:2014":K,"urn:mpeg:dash:utc:http-xsdate:2014":ze.bind(null,ce),"urn:mpeg:dash:utc:http-iso:2014":ze.bind(null,Te),"urn:mpeg:dash:utc:direct:2014":Me,"urn:mpeg:dash:utc:http-head:2012":K,"urn:mpeg:dash:utc:http-xsdate:2012":ze.bind(null,ce),"urn:mpeg:dash:utc:http-iso:2012":ze.bind(null,Te),"urn:mpeg:dash:utc:direct:2012":Me,"urn:mpeg:dash:utc:http-ntp:2014":ve,"urn:mpeg:dash:utc:ntp:2014":ve,"urn:mpeg:dash:utc:sntp:2014":ve}},attemptSync:function(J,ue){D=J,w||(function(he){try{if(!he||!F.get().streaming.utcSynchronization.enabled)return!1;const le=isNaN(ie)?30:ie;return!(M&&le&&!isNaN(le))||(Date.now()-M)/1e3>=le}catch{return!0}}(ue)?(w=!0,U()):y.trigger(P.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(J){J&&(J.dashMetrics&&(H=J.dashMetrics),J.baseURLController&&(se=J.baseURLController),J.errHandler&&(re=J.errHandler),J.settings&&(F=J.settings))},reset:function(){oe(),y.off(P.default.ATTEMPT_BACKGROUND_SYNC,Ae,_)}},I=(0,Ve.default)(S).getInstance().getLogger(_),y.on(P.default.ATTEMPT_BACKGROUND_SYNC,Ae,_),_}Zl.__dashjs_factory_name="TimeSyncController";const nc=xe.default.getSingletonFactory(Zl);nc.HTTP_TIMEOUT_MS=5e3,xe.default.updateSingletonFactory(Zl.__dashjs_factory_name,nc);var rl=nc;function Lo(){let S,y,v,_,I;const w=this.context,z=(0,Ee.default)(w).getInstance();return S={attachMediaSource:function(F){let x=window.URL.createObjectURL(y);return F.setSource(x),_==="managedMediaSource"&&(F.setDisableRemotePlayback(!0),y.addEventListener("startstreaming",()=>{z.trigger(be.default.MANAGED_MEDIA_SOURCE_START_STREAMING)}),y.addEventListener("endstreaming",()=>{z.trigger(be.default.MANAGED_MEDIA_SOURCE_END_STREAMING)})),x},createMediaSource:function(){let F="WebKitMediaSource"in window,x="MediaSource"in window;return"ManagedMediaSource"in window?(y=new ManagedMediaSource,_="managedMediaSource",I.info("Created ManagedMediaSource")):x?(y=new MediaSource,_="mediaSource",I.info("Created MediaSource")):F&&(y=new WebKitMediaSource,I.info("Created WebkitMediaSource")),y},detachMediaSource:function(F){F.setSource(null)},setConfig:function(F){F&&F.settings&&(v=F.settings)},setDuration:function F(x){y&&y.readyState==="open"&&(x===null&&isNaN(x)||y.duration!==x&&(x!==1/0||v.get().streaming.buffer.mediaSourceDurationInfinity||(x=Math.pow(2,32)),function(H){let G=H.sourceBuffers;for(let D=0;D<G.length;D++)if(G[D].updating)return!0;return!1}(y)?setTimeout(F.bind(null,x),50):(I.info("Set MediaSource duration:"+x),y.duration=x)))},setSeekable:function(F,x){y&&typeof y.setLiveSeekableRange=="function"&&typeof y.clearLiveSeekableRange=="function"&&y.readyState==="open"&&F>=0&&F<x&&(y.clearLiveSeekableRange(),y.setLiveSeekableRange(F,x))},signalEndOfStream:function(F){if(!F||F.readyState!=="open")return;let x=F.sourceBuffers;for(let H=0;H<x.length;H++)if(x[H].updating||x[H].buffered.length===0)return;I.info("call to mediaSource endOfStream"),F.endOfStream()}},I=(0,Ve.default)(w).getInstance().getLogger(S),S}Lo.__dashjs_factory_name="MediaSourceController";var Jl=xe.default.getSingletonFactory(Lo);function No(){const S="urn:mpeg:dash:event:2012",v="urn:mpeg:dash:event:callback:2015",w="discarded",z="updated",F="added",x=this.context,H=(0,Ee.default)(x).getInstance();let G,D,M,B,Z,ne,ie,re,se,oe,Ae;function Q(){if(!ie||!re)throw new Error("setConfig function has to be called previously")}function U(){Ae=!1,M={},B={},Z=null,oe=!1,ne=Date.now()/1e3}function V(){try{if(!oe){oe=!0;const X=re.getTime();let Se=X-ne;Se=ne>0?Math.max(0,Se):0,$(B,Se,X),$(M,Se,X),ce(B),ce(M),ne=X,oe=!1}}catch(X){oe=!1,D.error(X)}}function $(X,Se,ye){try{Me(X,function(ue){if(ue!==void 0){const he=isNaN(ue.duration)?0:ue.duration;ue.calculatedPresentationTime<=ye&&ue.calculatedPresentationTime+Se+he>=ye?K(ue,be.default.EVENT_MODE_ON_START):(ze(ye,he+Se,ue.calculatedPresentationTime)||function(le){try{const Ie=le.eventStream.period.start+le.eventStream.period.duration;return le.calculatedPresentationTime>Ie}catch(Ie){return D.error(Ie),!1}}(ue))&&(D.debug(`Removing event ${ue.id} from period ${ue.eventStream.period.id} as it is expired or invalid`),function(le,Ie){try{const we=Ie.eventStream.schemeIdUri,Fe=Ie.eventStream.period.id,je=Ie.eventStream.value,at=Ie.id;le[Fe][we]=le[Fe][we].filter(lt=>je&&lt.eventStream.value&&lt.eventStream.value!==je||lt.id!==at),le[Fe][we].length===0&&delete le[Fe][we]}catch(we){D.error(we)}}(X,ue))}})}catch(J){D.error(J)}}function ce(X){try{for(const Se in X)X.hasOwnProperty(Se)&&Object.keys(X[Se]).length===0&&delete X[Se]}catch(Se){D.error(Se)}}function Te(X,Se){let ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const J=X.eventStream.schemeIdUri,ue=X.eventStream.value,he=X.id;let le=w;Se[J]||(Se[J]=[]);const Ie=Se[J].findIndex(we=>(!ue||we.eventStream.value&&we.eventStream.value===ue)&&we.id===he);if(Ie===-1)Se[J].push(X),X.triggeredReceivedEvent=!1,X.triggeredStartEvent=!1,le=F;else if(ye){const we=Se[J][Ie];X.triggeredReceivedEvent=we.triggeredReceivedEvent,X.triggeredStartEvent=we.triggeredStartEvent,Se[J][Ie]=X,le=z}return le}function ge(X){try{if(X.eventStream.value==1){const Se=X.calculatedPresentationTime;let ye;ye=X.calculatedPresentationTime==4294967295?NaN:X.calculatedPresentationTime+X.duration,H.trigger(be.default.MANIFEST_VALIDITY_CHANGED,{id:X.id,validUntil:Se,newDuration:ye,newManifestValidAfter:NaN},{mode:be.default.EVENT_MODE_ON_START})}}catch(Se){D.error(Se)}}function ve(X){try{const Se=re.getTime();Me(X,function(ye){const J=ye.eventStream&&ye.eventStream.period&&!isNaN(ye.eventStream.period.duration)?ye.eventStream.period.duration:NaN,ue=ye.eventStream&&ye.eventStream.period&&!isNaN(ye.eventStream.period.start)?ye.eventStream.period.start:NaN;if(isNaN(J)||isNaN(ue))return;const he=ye.calculatedPresentationTime;Math.abs(he-Se)<300&&K(ye,be.default.EVENT_MODE_ON_START)})}catch(Se){D.error(Se)}}function Me(X,Se){try{if(X){const ye=Object.keys(X);for(let J=0;J<ye.length;J++){const ue=X[ye[J]],he=Object.keys(ue);for(let le=0;le<he.length;le++)ue[he[le]].forEach(Ie=>{Ie!==void 0&&Se(Ie)})}}}catch(ye){D.error(ye)}}function ze(X,Se,ye){try{return X-Se>ye}catch(J){return D.error(J),!1}}function K(X,Se){try{const ye=re.getTime(),J=X.id;if(Se===be.default.EVENT_MODE_ON_RECEIVE&&!X.triggeredReceivedEvent)return D.debug(`Received event ${J}`),X.triggeredReceivedEvent=!0,void H.trigger(X.eventStream.schemeIdUri,{event:X},{mode:Se});X.triggeredStartEvent||(X.eventStream.schemeIdUri===S&&X.eventStream.value==1?X.duration===0&&X.presentationTimeDelta===0||(D.debug(`Starting manifest refresh event ${J} at ${ye}`),function(){try{Q(),ie.refreshManifest()}catch(ue){D.error(ue)}}()):X.eventStream.schemeIdUri===v&&X.eventStream.value==1?(D.debug(`Starting callback event ${J} at ${ye}`),function(ue){try{let he=Na(x).create({});const le=new Gu({method:"get",url:ue,responseType:"arraybuffer",customData:{}}),Ie=new Hu({request:le});he.load(le,Ie)}catch(he){D.error(he)}}(X.messageData instanceof Uint8Array?sa.default.uint8ArrayToString(X.messageData):X.messageData)):(D.debug(`Starting event ${J} from period ${X.eventStream.period.id} at ${ye}`),H.trigger(X.eventStream.schemeIdUri,{event:X},{mode:Se}),se.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout(()=>{delete X.messageData,delete X.parsedMessageData},se.get().streaming.events.deleteEventMessageDataTimeout)),X.triggeredStartEvent=!0)}catch(ye){D.error(ye)}}return G={addInlineEvents:function(X,Se){try{if(Q(),M[Se]||(M[Se]={}),X)for(let ye=0;ye<X.length;ye++){let J=X[ye];if(!ze(re.getTime(),isNaN(J.duration)?0:J.duration,J.calculatedPresentationTime)){let ue=Te(J,M[Se],!0);ue===F?(D.debug(`Added inline event with id ${J.id} from period ${Se}`),K(J,be.default.EVENT_MODE_ON_RECEIVE)):ue===z&&D.debug(`Updated inline event with id ${J.id} from period ${Se}`)}}}catch(ye){throw ye}},addInbandEvents:function(X,Se){try{Q(),B[Se]||(B[Se]={});for(let ye=0;ye<X.length;ye++){let J=X[ye];ze(re.getTime(),isNaN(J.duration)?0:J.duration,J.calculatedPresentationTime)||(Te(J,B[Se],!1)===F?(J.eventStream.schemeIdUri===S&&ge(J),D.debug(`Added inband event with id ${J.id} from period ${Se}`),K(J,be.default.EVENT_MODE_ON_RECEIVE)):D.debug(`Inband event with scheme_id_uri ${J.eventStream.schemeIdUri}, value ${J.eventStream.value}, period id ${Se} and event id ${J.id} was ignored because it has been added before.`))}V()}catch(ye){throw ye}},getInbandEvents:function(){return B},getInlineEvents:function(){return M},start:function(){try{Q(),D.debug("Start Event Controller");const X=se.get().streaming.events.eventControllerRefreshDelay;Ae||isNaN(X)||(Ae=!0,Z=setInterval(V,X))}catch(X){throw X}},setConfig:function(X){try{if(!X)return;X.manifestUpdater&&(ie=X.manifestUpdater),X.playbackController&&(re=X.playbackController),X.settings&&(se=X.settings)}catch(Se){throw Se}},reset:function(){(function(){try{Z!==null&&Ae&&(clearInterval(Z),Z=null,Ae=!1,function(){try{ve(B),ve(M)}catch(X){D.error(X)}}())}catch(X){throw X}})(),U()}},D=(0,Ve.default)(x).getInstance().getLogger(G),U(),G}No.__dashjs_factory_name="EventController";var Qd=xe.default.getSingletonFactory(No),Xi={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},Rs=t(445),Mo=t(1923);function ac(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w,z,F,x,H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$,ce,Te,ge,ve,Me,ze,K,X,Se,ye,J,ue,he,le,Ie,we,Fe,je,at,lt,ot,qt,Kt,Xt,In,Lt;function gn(){if(!(F&&F.hasOwnProperty("load")&&V&&V.hasOwnProperty("initialize")&&V.hasOwnProperty("reset")&&V.hasOwnProperty("getClientTimeOffset")&&x&&U&&G&&ue))throw new Error(q.default.MISSING_CONFIG_ERROR)}function vn(){(function(){try{const tt=H.getStreamsInfo();if(!ce&&tt.length===0)throw new Error("There are no periods in the MPD");ce&&tt.length>0&&G.updateManifestUpdateInfo({currentTime:ue.getTime(),buffered:J.getBufferRange(),presentationStartTime:tt[0].start,clientTimeOffset:V.getClientTimeOffset()}),$.length>0&&function(En){En.length!==0?$=$.filter(An=>{const Un=En.filter(qn=>qn.id===An.getId()).length>0||An.getId()===ce.getId();return Un||(_.debug(`Removing stream ${An.getId()}`),An.reset(!0),An=null),Un}):_.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(tt);const Yt=[];for(let En=0,An=tt.length;En<An;En++){const Un=tt[En];Yt.push(Nn(Un)),G.addManifestUpdateStreamInfo(Un)}Promise.all(Yt).then(()=>new Promise((En,An)=>{ce?En():Ke(tt,En,An)})).then(()=>{y.trigger(P.default.STREAMS_COMPOSED),Zt()}).catch(En=>{throw En})}catch(tt){U.error(new Ce.default(Y.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tt.message+" nostreamscomposed",x.getValue())),Se=!0,Vr()}})()}function Cn(){Kt=!0}function Nn(tt){let Yt=si(tt.id);return Yt?Yt.updateData(tt):(Yt=Xh(S).create({manifestModel:x,mediaPlayerModel:le,dashMetrics:G,manifestUpdater:z,adapter:H,timelineConverter:V,capabilities:I,capabilitiesFilter:w,errHandler:U,baseURLController:Z,segmentBaseController:ne,textController:ge,abrController:re,playbackController:ue,throughputController:se,eventController:Ae,mediaController:oe,protectionController:Te,videoModel:J,streamInfo:tt,settings:qt}),$.push(Yt),Yt.initialize(),Promise.resolve())}function Ke(tt,Yt,En){try{rn();const An=G.getCurrentDVRInfo().range;if(An.end<An.start){Xt&&clearTimeout(Xt);const qn=Math.min(1e3*(-1*(An.end-An.start)+2),2147483647);return _.debug(`Waiting for ${qn} ms before playback can start`),y.trigger(P.default.AST_IN_FUTURE,{delay:qn}),void(Xt=setTimeout(()=>{Ke(tt,Yt,En)},qn))}qt.get().streaming.applyProducerReferenceTime&&he.calculateProducerReferenceTimeOffsets(tt);const Un=tt[0].manifestInfo;if(qt.get().streaming.applyServiceDescription&&he.applyServiceDescription(Un),H.getIsDynamic()){const qn=va(0,Un);ue.computeAndSetLiveDelay(qn,Un)}(qt.get().streaming.applyContentSteering&&B.shouldQueryBeforeStart()?B.loadSteeringData():Promise.resolve()).then(()=>{const qn=x.getValue();qn&&Z.update(qn),bt(),Yt()}).catch(qn=>{_.error(qn),bt(),Yt()})}catch(An){En(An)}}function bt(){const tt=function(){let An;if(H.getIsDynamic()){const Un=G.getCurrentDVRInfo();An=(Un&&Un.range?Un.range.end:0)-ue.getOriginalLiveDelay();const qn=Un?Un.range:null;if(qn){if(isNaN(In)&&In.toString().indexOf("posix:")===-1){const fi=Wa(!0);isNaN(fi)||(_.info(`Start time from URI parameters: ${fi}`),An=Math.min(An,fi))}else{_.info(`Start time provided by the app: ${In}`);const fi=tr(!0,In);isNaN(fi)||(An=Math.min(An,fi))}const wa=qt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;An=Math.max(An,qn.start+wa)}}else if(An=Ei()[0].getStreamInfo().start,isNaN(In)){const Un=Wa(!1);isNaN(Un)||(_.info(`Start time from URI parameters: ${Un}`),An=Math.max(An,Un))}else{_.info(`Start time provided by the app: ${In}`);const Un=tr(!1,In);isNaN(Un)||(An=Math.max(An,Un))}return An}();let Yt=Ct(tt);const En=Yt!==null?Yt:$[0];y.trigger(P.default.INITIAL_STREAM_SWITCH,{startTime:tt}),ht(En,null,tt),at||(at=setInterval(function(){!K&&ue.getTimeToStreamEnd()<=0&&!ue.isSeeking()&&y.trigger(P.default.PLAYBACK_ENDED,{isLast:Ci().isLast})},200))}function ht(tt,Yt,En){try{if(K||!tt||Yt===tt&&tt.getIsActive())return;K=!0,y.trigger(P.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:Yt?Yt.getStreamInfo():null,toStreamInfo:tt.getStreamInfo()});let An=!1,Un=[];ce=tt,Yt&&(An=an(tt,Yt),Un=Sn(Yt),Yt.deactivate(An)),En=isNaN(En)?!An&&Yt?tt.getStreamInfo().start:NaN:En,_.info(`Switch to stream ${tt.getId()}. Seektime is ${En}, current playback time is ${ue.getTime()}. Seamless period switch is set to ${An}`),ot=ot.filter(qn=>qn.getId()!==ce.getId()),ue.initialize(Ci(),!!Yt),J.getElement()?St({seekTime:En,keepBuffers:An,streamActivated:!1,representationsFromPreviousPeriod:Un}):ln({seekTime:En,keepBuffers:An})}catch{K=!1}}function St(tt){let Yt;function En(){if(!ye||ye.readyState!=="open")return;_.debug("MediaSource is open!"),window.URL.revokeObjectURL(Yt),ye.removeEventListener("sourceopen",En),ye.removeEventListener("webkitsourceopen",En),Ta();const Un=G.getCurrentDVRInfo();D.setSeekable(Un.range.start,Un.range.end),tt.streamActivated?(isNaN(tt.seekTime)||ue.seek(tt.seekTime,!0,!0),ce.setMediaSource(ye).then(()=>{ce.initializeForTextWithMediaSource(ye)})):ln(tt)}function An(){ye.addEventListener("sourceopen",En,!1),ye.addEventListener("webkitsourceopen",En,!1),Yt=D.attachMediaSource(J),_.debug("MediaSource attached to element.  Waiting on open...")}ye?tt.keepBuffers?ln(tt):(D.detachMediaSource(J),An()):(ye=D.createMediaSource(),An())}function ln(tt){const Yt=tt.representationsFromPreviousPeriod||[];ce.activate(ye,tt.keepBuffers?lt:void 0,Yt).then(En=>{En&&(lt=En),isNaN(tt.seekTime)||(y.trigger(P.default.SEEK_TARGET,{time:tt.seekTime},{streamId:ce.getId()}),ue.seek(tt.seekTime,!1,!0),ce.startScheduleControllers()),K=!1,y.trigger(P.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Ci()})})}function Sn(tt){return(tt?tt.getStreamProcessors():[]).map(Yt=>Yt.getRepresentation())}function ft(tt){const Yt=Ct(tt.seekTime);Yt&&Yt!==ce?Yt&&Yt!==ce&&(Gt(),function(En,An){const Un=En&&!isNaN(En.seekTime)?En.seekTime:NaN,qn=ce.getStreamProcessors().map(wa=>wa.prepareOuterPeriodPlaybackSeeking(En));Promise.all(qn).then(()=>{ht(An,ce,Un)}).catch(wa=>{U.error(wa)})}(tt,Yt)):(Gt(),function(En){ce.getStreamProcessors().forEach(An=>An.prepareInnerPeriodPlaybackSeeking(En)),ei(Ot.USER_REQUEST_STOP_REASON)}(tt)),yi(It.SEEK_START_REASON)}function Gt(){dn()}function dn(){ot&&ot.length>0&&(ot.forEach(tt=>{tt.deactivate(!0)}),ot=[])}function $t(tt){if(tt.newMediaInfo.streamInfo.id===ce.getId()){if(dn(),qt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&tt.oldMediaInfo&&tt.oldMediaInfo.codec!==tt.newMediaInfo.codec){const Yt=ue.getTime();return ce.deactivate(!1),void St({seekTime:Yt,keepBuffers:!1,streamActivated:!1})}ce.prepareTrackChange(tt)}}function an(tt,Yt){try{return qt.get().streaming.buffer.reuseExistingSourceBuffers&&(I.isProtectionCompatible(Yt.getStreamInfo(),tt.getStreamInfo())||Kt)&&I.supportsChangeType()&&qt.get().streaming.buffer.useChangeType}catch{return!1}}function et(tt){let Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(ye&&!tt.getPreloaded()&&an(tt,Yt)){const En=Sn(Yt);tt.startPreloading(ye,lt,En).then(()=>{ot.push(tt)})}}function Ct(tt){if(isNaN(tt))return null;const Yt=$.length;for(let En=0;En<Yt;En++){const An=$[En];if(tt<parseFloat((An.getStartTime()+An.getDuration()).toFixed(5)))return An}return null}function rn(){try{const tt=H.getIsDynamic(),Yt=H.getStreamsInfo()[0].manifestInfo,En=ue.getTime(),An=V.calcTimeShiftBufferWindow($,tt),Un=Ln();if(An.start===void 0||An.end===void 0)return;Un&&Un.length!==0?Un.forEach(qn=>{G.addDVRInfo(qn.getType(),En,Yt,An)}):G.addDVRInfo(q.default.VIDEO,En,Yt,An)}catch{}}function Qt(tt){if(Fe&&ze){const Yt=le.getInitialBufferLevel(),En=[q.default.TEXT];(isNaN(Yt)||Yt<=ue.getBufferLevel(En)||H.getIsDynamic()&&Yt>ue.getLiveDelay())&&(Fe=!1,yi(It.INITIAL_PLAYOUT_START_REASON),ue.play())}tt&&tt.mediaType&&G.addBufferLevel(tt.mediaType,new Date,1e3*tt.bufferLevel)}function pt(tt){tt.streamInfo.id===ce.getId()&&dn(),si(tt.streamInfo.id).prepareQualityChange(tt)}function ke(){if(H.getIsDynamic()&&ue.getOriginalLiveDelay()!==0&&ce){const tt=H.getStreamsInfo();if(tt.length>0){const Yt=tt[0].manifestInfo,En=va(0,Yt);ue.computeAndSetLiveDelay(En,Yt)}}}function Qe(){if(ua()){const tt=J.getPlaybackQuality();tt&&G.addDroppedFrames(tt)}}function Tt(){_.debug("[onPlaybackStarted]"),!Fe&&we&&yi(It.RESUME_FROM_PAUSE_START_REASON),Fe&&(Fe=!1),je&&(je=!1,qt.get().streaming.applyContentSteering&&!B.shouldQueryBeforeStart()&&B.loadSteeringData()),we=!1}function Ze(tt){_.debug("[onPlaybackPaused]"),tt.ended||(we=!0,ei(Ot.USER_REQUEST_STOP_REASON))}function Ut(tt){_.debug(`Stream with id ${tt.streamInfo.id} finished buffering`);const Yt=tt.streamInfo.isLast;ye&&Yt?(_.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),D.signalEndOfStream(ye)):Zt()}function Zt(){if(!ce)return;if(!ce.getHasFinishedBuffering())return void ce.checkAndHandleCompletedBuffering();const tt=function(){let En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const An=En||ce||null;if(An){const Un=An.getStreamInfo();return $.filter(function(qn){const wa=qn.getStreamInfo();return wa.start>Un.start&&Un.id!==wa.id})}}catch{return[]}}(ce);let Yt=0;for(;Yt<tt.length;){const En=tt[Yt],An=Yt===0?ce:tt[Yt-1];!En.getPreloaded()&&An.getHasFinishedBuffering()&&ye&&et(En,An),Yt+=1}}function _n(){at&&(clearInterval(at),at=null)}function Ln(){return ce?ce.getStreamProcessors():[]}function xn(tt){if(ce&&!ce.getIsEndedEventSignaled()){ce.setIsEndedEventSignaled(!0);const Yt=function(){const En=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||ce||null;if(!En)return null;const An=En.getStreamInfo(),Un=An.start;let qn=0,wa=-1,fi=NaN;for(;qn<$.length;){const Bs=$[qn].getStreamInfo(),mo=Bs.start-Un;mo>0&&(isNaN(fi)||mo<fi)&&An.id!==Bs.id&&(fi=mo,wa=qn),qn+=1}return wa>=0?$[wa]:null}();Yt?(_.debug(`StreamController onEnded, found next stream with id ${Yt.getStreamInfo().id}. Switching from ${ce.getStreamInfo().id} to ${Yt.getStreamInfo().id}`),ht(Yt,ce,NaN)):(_.debug("StreamController no next stream found"),ce.setIsEndedEventSignaled(!1)),ei(Yt?Ot.END_OF_PERIOD_STOP_REASON:Ot.END_OF_CONTENT_STOP_REASON)}tt&&tt.isLast&&(_n(),B.stopSteeringRequestTimer())}function Ta(tt){const Yt=tt||Ci().manifestInfo.duration;D.setDuration(Yt)}function Wa(tt){const Yt=ie.getURIFragmentData();if(!Yt||!Yt.t)return NaN;const En=Ei()[0].getStreamInfo().start;return Yt.t=Yt.t.split(",")[0],Zn(tt,Yt.t,En)}function tr(tt,Yt){let En=0;return tt||(En=Ei()[0].getStreamInfo().start),Zn(tt,Yt,En)}function Zn(tt,Yt,En){const An=H.getRegularPeriods()[0],Un=Yt.toString(),qn=Un.indexOf("posix:")!==-1?Un.substring(6)==="now"?Date.now()/1e3:parseFloat(Un.substring(6)):NaN;return tt&&!isNaN(qn)?V.calcPresentationTimeFromWallTime(new Date(1e3*qn),An):parseFloat(Un)+En}function va(tt,Yt){try{let En=NaN;return Yt&&!isNaN(Yt.maxFragmentDuration)&&isFinite(Yt.maxFragmentDuration)?Yt.maxFragmentDuration:isFinite(En)?En:NaN}catch{return NaN}}function na(){const tt=x.getValue();Z.initialize(tt)}function oa(tt){if(tt.error)Se=!0,Vr();else{_.info("Manifest updated... updating data system wide.");const Yt=tt.manifest;H.updatePeriods(Yt),w.filterUnsupportedFeatures(Yt).then(()=>{Z.initialize(Yt);let En=H.getUTCTimingSources();!H.getIsDynamic()||En&&En.length!==0||y.trigger(be.default.CONFORMANCE_VIOLATION,{level:Xi.LEVELS.WARNING,event:Xi.EVENTS.NO_UTC_TIMING_ELEMENT});let An=H.getIsDynamic()?En.concat(Ie.getUTCTimingSources()):En;M.attemptSync(An,H.getIsDynamic()),Me.createFinalQueryStrings(Yt)})}}function ua(){return!!ce&&ce.getHasVideoTrack()}function ri(){return!!ce&&ce.getHasAudioTrack()}function ei(tt,Yt){Yt=Yt||new Date,Ln().forEach(En=>{En.finalisePlayList(Yt,tt)}),G.addPlayList()}function yi(tt){G.createPlaylistMetrics(1e3*ue.getTime(),tt)}function Ir(tt){Te.updateKeyStatusesMap(tt),function(){const Yt=Ln();let En=!1;Yt.forEach(An=>{const Un=An.getMediaInfo();!Un||I.areKeyIdsUsable(Un)?Un&&I.areKeyIdsExpired(Un)&&function(qn){const wa=si(qn.getStreamId());wa&&wa.triggerProtectionError({error:new Ce.default(Mo.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Mo.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(An):(En=!0,function(qn){const wa=qn.getAllMediaInfos().filter(fi=>I.areKeyIdsUsable(fi));if(wa&&wa.length!==0)oe.setTrack(wa[0],{replaceBuffer:!0});else{const fi=qn.getType();U.error(new Ce.default(Y.NO_SUPPORTED_KEY_IDS,`Type: ${fi}: ${Y.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(An))}),En&&(ue.getTime()===0?y.once(be.default.FRAGMENT_LOADING_COMPLETED,()=>{nr()},v):ue.isProgressing(500).then(An=>{An||nr()}))}()}function nr(){const tt=ue.getTime();ue.seek(tt+.01,!1,!1)}function Ua(tt){if(!tt.error)return;let Yt;switch(tt.error.code){case 1:Yt="MEDIA_ERR_ABORTED";break;case 2:Yt="MEDIA_ERR_NETWORK";break;case 3:Yt="MEDIA_ERR_DECODE",Lt.counts.mediaErrorDecode+=1;break;case 4:Yt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Yt="MEDIA_ERR_ENCRYPTED";break;default:Yt="UNKNOWN"}Yt==="MEDIA_ERR_DECODE"&&qt.get().errors.recoverAttempts.mediaErrorDecode>=Lt.counts.mediaErrorDecode?function(){_.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const En=ue.getTime();ce.deactivate(!1),_.info(`MediaSource has been resetted. Resuming playback from time ${En}`),St({seekTime:En,keepBuffers:!1,streamActivated:!1})}():(X=!0,tt.error.message&&(Yt+=" ("+tt.error.message+")"),tt.error.msExtendedCode&&(Yt+=" (0x"+(tt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),_.fatal("Video Element Error: "+Yt),tt.error&&_.fatal(tt.error),U.error(new Ce.default(tt.error.code,Yt)),Vr())}function Ci(){return ce?ce.getStreamInfo():null}function si(tt){for(let Yt=0,En=$.length;Yt<En;Yt++)if($[Yt].getId()===tt)return $[Yt];return null}function ds(tt){isNaN(tt.newDuration)||Ta(tt.newDuration)}function Ai(){$=[],In=NaN,Te=null,K=!1,ce=null,X=!1,Se=!1,Fe=!0,je=!0,we=!1,ze=!0,at=null,Kt=!1,ot=[],Xt=null,Lt={counts:{mediaErrorDecode:0}}}function Vr(){gn(),M.reset(),ei(X||Se?Ot.FAILURE_STOP_REASON:Ot.USER_REQUEST_STOP_REASON);for(let tt=0,Yt=$?$.length:0;tt<Yt;tt++)$[tt].reset(X);y.off(be.default.PLAYBACK_TIME_UPDATED,Qe,v),y.off(be.default.PLAYBACK_SEEKING,ft,v),y.off(be.default.PLAYBACK_ERROR,Ua,v),y.off(be.default.PLAYBACK_STARTED,Tt,v),y.off(be.default.PLAYBACK_PAUSED,Ze,v),y.off(be.default.PLAYBACK_ENDED,xn,v),y.off(be.default.METRIC_ADDED,Il,v),y.off(be.default.MANIFEST_VALIDITY_CHANGED,ds,v),y.off(be.default.BUFFER_LEVEL_UPDATED,Qt,v),y.off(be.default.QUALITY_CHANGE_REQUESTED,pt,v),y.off(be.default.CONTENT_STEERING_REQUEST_COMPLETED,na,v),P.default.KEY_SESSION_UPDATED&&y.off(P.default.KEY_SESSION_UPDATED,Cn,v),y.off(P.default.MANIFEST_UPDATED,oa,v),y.off(P.default.STREAM_BUFFERING_COMPLETED,Ut,v),y.off(P.default.TIME_SYNCHRONIZATION_COMPLETED,vn,v),y.off(P.default.CURRENT_TRACK_CHANGED,$t,v),y.off(P.default.SETTING_UPDATED_LIVE_DELAY,ke,v),y.off(P.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,ke,v),y.off(Rs.default.INTERNAL_KEY_STATUSES_CHANGED,Ir,v),Z.reset(),z.reset(),Ae.reset(),G.clearAllCurrentMetrics(),x.setValue(null),F.reset(),V.reset(),Q.reset(),ye&&(D.detachMediaSource(J),ye=null),J=null,Te&&(Te=null,ve=null,x.getValue()&&y.trigger(P.default.PROTECTION_DESTROYED,{data:x.getValue().url})),_n(),y.trigger(P.default.STREAM_TEARDOWN_COMPLETE),Ai()}function Il(tt){if(tt.metric===ee.DVR_INFO){const Yt=ri()?q.default.AUDIO:q.default.VIDEO;tt.mediaType===Yt&&D.setSeekable(tt.value.range.start,tt.value.range.end)}}function Ei(){return $}return v={addDVRMetric:rn,getActiveStream:function(){return ce},getActiveStreamInfo:Ci,getActiveStreamProcessors:Ln,getAutoPlay:function(){return ze},getHasMediaOrInitialisationError:function(){return X||Se},getInitialPlayback:function(){return Fe},getIsStreamSwitchInProgress:function(){return K},getStreamById:si,getStreamForTime:Ct,getStreams:Ei,getTimeRelativeToStreamId:function(tt,Yt){let En=null,An=0,Un=0,qn=null;for(let wa=0;wa<$.length;wa++){if(En=$[wa],Un=En.getStartTime(),qn=En.getDuration(),Number.isFinite(Un)&&(An=Un),En.getId()===Yt)return tt-An;Number.isFinite(qn)&&(An+=qn)}return null},hasAudioTrack:ri,hasVideoTrack:ua,initialize:function(tt,Yt){gn(),ze=tt,ve=Yt,V.initialize(),z=tc(S).create(),z.setConfig({manifestModel:x,adapter:H,manifestLoader:F,errHandler:U,settings:qt,contentSteeringController:B}),z.initialize(),Ae=Qd(S).getInstance(),Ae.setConfig({manifestUpdater:z,playbackController:ue,settings:qt}),Ae.start(),Me=qd(S).getInstance(),M.setConfig({dashMetrics:G,baseURLController:Z,errHandler:U,settings:qt}),M.initialize(),D.setConfig({settings:qt}),Te&&(y.trigger(P.default.PROTECTION_CREATED,{controller:Te}),Te.setMediaElement(J.getElement()),ve&&Te.setProtectionData(ve)),y.on(be.default.PLAYBACK_TIME_UPDATED,Qe,v),y.on(be.default.PLAYBACK_SEEKING,ft,v),y.on(be.default.PLAYBACK_ERROR,Ua,v),y.on(be.default.PLAYBACK_STARTED,Tt,v),y.on(be.default.PLAYBACK_PAUSED,Ze,v),y.on(be.default.PLAYBACK_ENDED,xn,v),y.on(be.default.METRIC_ADDED,Il,v),y.on(be.default.MANIFEST_VALIDITY_CHANGED,ds,v),y.on(be.default.BUFFER_LEVEL_UPDATED,Qt,v),y.on(be.default.QUALITY_CHANGE_REQUESTED,pt,v),y.on(be.default.CONTENT_STEERING_REQUEST_COMPLETED,na,v),P.default.KEY_SESSION_UPDATED&&y.on(P.default.KEY_SESSION_UPDATED,Cn,v),y.on(P.default.MANIFEST_UPDATED,oa,v),y.on(P.default.STREAM_BUFFERING_COMPLETED,Ut,v),y.on(P.default.TIME_SYNCHRONIZATION_COMPLETED,vn,v),y.on(P.default.CURRENT_TRACK_CHANGED,$t,v),y.on(P.default.SETTING_UPDATED_LIVE_DELAY,ke,v),y.on(P.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,ke,v),y.on(Rs.default.INTERNAL_KEY_STATUSES_CHANGED,Ir,v)},load:function(tt){let Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;gn(),In=Yt,F.load(tt)},loadWithManifest:function(tt){let Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;(function(){if(!z||!z.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),In=Yt,z.setManifest(tt)},refreshManifest:function(){z.getIsUpdating()||z.refreshManifest()},reset:Vr,setConfig:function(tt){tt&&(tt.capabilities&&(I=tt.capabilities),tt.capabilitiesFilter&&(w=tt.capabilitiesFilter),tt.manifestLoader&&(F=tt.manifestLoader),tt.manifestModel&&(x=tt.manifestModel),tt.mediaPlayerModel&&(le=tt.mediaPlayerModel),tt.customParametersModel&&(Ie=tt.customParametersModel),tt.protectionController&&(Te=tt.protectionController),tt.adapter&&(H=tt.adapter),tt.dashMetrics&&(G=tt.dashMetrics),tt.errHandler&&(U=tt.errHandler),tt.timelineConverter&&(V=tt.timelineConverter),tt.videoModel&&(J=tt.videoModel),tt.playbackController&&(ue=tt.playbackController),tt.throughputController&&(se=tt.throughputController),tt.serviceDescriptionController&&(he=tt.serviceDescriptionController),tt.contentSteeringController&&(B=tt.contentSteeringController),tt.textController&&(ge=tt.textController),tt.abrController&&(re=tt.abrController),tt.mediaController&&(oe=tt.mediaController),tt.settings&&(qt=tt.settings),tt.baseURLController&&(Z=tt.baseURLController),tt.uriFragmentModel&&(ie=tt.uriFragmentModel),tt.segmentBaseController&&(ne=tt.segmentBaseController),tt.manifestUpdater&&(z=tt.manifestUpdater))},setProtectionData:function(tt){ve=tt,Te&&Te.setProtectionData(ve)},switchToVideoElement:function(tt){ce&&(ue.initialize(Ci()),St({seekTime:tt,keepBuffers:!1,streamActivated:!0}))}},_=(0,Ve.default)(S).getInstance().getLogger(v),M=rl(S).getInstance(),D=Jl(S).getInstance(),Q=rt(S).getInstance(),Ai(),v}ac.__dashjs_factory_name="StreamController";var ts=xe.default.getSingletonFactory(ac);function ic(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w,z,F,x,H,G,D,M,B;function Z(){B.debug("Stopping the gap controller"),z&&(clearInterval(z),z=null),function(){y.off(P.default.WALLCLOCK_TIME_UPDATED,oe,this),y.off(P.default.INITIAL_STREAM_SWITCH,se,this),y.off(P.default.PLAYBACK_SEEKING,ne,this),y.off(P.default.BUFFER_REPLACEMENT_STARTED,ie,v),y.off(P.default.TRACK_CHANGE_RENDERED,re,v)}(),z=null,F=NaN,w=0,D=null,M={}}function ne(){D&&(clearTimeout(D),D=null)}function ie(U){try{if(U.streamId!==H.getActiveStreamInfo().id||U.mediaType!==q.default.VIDEO&&U.mediaType!==q.default.AUDIO)return;U.streamId===H.getActiveStreamInfo().id&&(M[U.mediaType]=!0)}catch(V){B.error(V)}}function re(U){U&&U.mediaType&&(M[U.mediaType]=!1)}function se(){z||function(){try{z||(B.debug("Starting the gap controller"),z=setInterval(()=>{Ae()&&Q(x.getTime())},100))}catch{}}()}function oe(){if(Ae(I.get().streaming.gaps.enableSeekFix)&&(w++,w>=10)){const U=x.getTime();_===U?Q(U,!0):(_=U,F=NaN),w=0}}function Ae(){let U=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!H.getActiveStream())return!1;const V=Object.keys(M).some(ce=>M[ce]),$=!!U&&function(){const ce=H.getActiveStream(),Te=parseFloat((ce.getStartTime()+ce.getDuration()).toFixed(5));return x.getTime()+I.get().streaming.gaps.threshold>=Te}();return!V&&I.get().streaming.gaps.jumpGaps&&H.getActiveStreamProcessors().length>0&&(!x.isSeeking()||$)&&!x.isPaused()&&!H.getIsStreamSwitchInProgress()&&!H.getHasMediaOrInitialisationError()}function Q(U){let V=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const $=I.get().streaming.gaps.enableStallFix,ce=I.get().streaming.gaps.stallSeek,Te=I.get().streaming.gaps.smallGapLimit,ge=I.get().streaming.gaps.jumpLargeGaps,ve=G.getBufferRange();let Me,ze=NaN,K=!1;if(Me=function(Se,ye){try{if(!Se||Se.length<=1&&ye>0)return NaN;let J=NaN,ue=0;for(;isNaN(J)&&ue<Se.length;){const he=ue>0?Se.end(ue-1):0;ye<Se.start(ue)&&he-ye<I.get().streaming.gaps.threshold&&(J=ue),ue+=1}return J}catch{return null}}(ve,U),!isNaN(Me)){const Se=ve.start(Me),ye=Se-U;ye>0&&(ye<=Te||ge)&&(ze=Se)}const X=x.getTimeToStreamEnd();if(isNaN(ze)&&V&&isFinite(X)&&!isNaN(X)&&X<Te&&(ze=parseFloat(x.getStreamEndTime().toFixed(5)),K=!0),$&&isNaN(ze)&&V&&isNaN(Me)&&function(Se,ye){for(let J=0,ue=Se.length;J<ue;J++)if(ye>=Se.start(J)&&ye<=Se.end(J))return!0;return!1}(ve,U)&&(ce===0?(B.warn("Toggle play pause to break stall"),G.pause(),G.play()):(B.warn(`Jumping ${ce}s to break stall`),ze=U+ce)),ze>0&&F!==ze&&ze>U&&!D){const Se=ze-U;if(K){const ye=H.getStreamForTime(ze),J=ye&&!!ye.getPreloaded();B.warn(`Jumping to end of stream because of gap from ${U} to ${ze}. Gap duration: ${Se}`),x.seek(ze,!0,J)}else{const ye=x.getIsDynamic(),J=Me>0?ve.end(Me-1):U,ue=ye?1e3*Math.max(0,Se-.1):0;D=window.setTimeout(()=>{x.seek(ze,!0,!0),B.warn(`Jumping gap occuring in period ${H.getActiveStream().getStreamId()} starting at ${J} and ending at ${ze}. Jumping by: ${ze-J}`),D=null},ue)}F=ze}}return v={reset:Z,setConfig:function(U){U&&(U.settings&&(I=U.settings),U.playbackController&&(x=U.playbackController),U.streamController&&(H=U.streamController),U.videoModel&&(G=U.videoModel))},initialize:function(){(function(){y.on(P.default.WALLCLOCK_TIME_UPDATED,oe,this),y.on(P.default.INITIAL_STREAM_SWITCH,se,this),y.on(P.default.PLAYBACK_SEEKING,ne,this),y.on(P.default.BUFFER_REPLACEMENT_STARTED,ie,v),y.on(P.default.TRACK_CHANGE_RENDERED,re,v)})()}},B=(0,Ve.default)(S).getInstance().getLogger(v),Z(),v}ic.__dashjs_factory_name="GapController";var Zd=xe.default.getSingletonFactory(ic);function rc(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w,z,F,x,H,G,D;function M(){_=!1;const Q=sa.default.parseUserAgent();I=Q&&Q.browser&&Q.browser.name&&Q.browser.name.toLowerCase()==="safari"}function B(){_=!1}function Z(Q){if(Q.streamId!==F.getActiveStreamInfo().id||!G)return;const U=x.getLiveDelay();x.getBufferLevel()>U/2&&(G=!1)}function ne(Q){Q.streamId===F.getActiveStreamInfo().id&&(G=Q.state===ee.BUFFER_EMPTY)}function ie(){H.getCatchupModeEnabled()||w.setPlaybackRate(1)}function re(){x.getIsDynamic()&&H.getCatchupModeEnabled()&&(H.getCatchupPlaybackRates().max>0||H.getCatchupPlaybackRates().min<0)&&!x.isPaused()&&!x.isSeeking()&&function(){try{return!x.getTime()>0||_?!1:oe()===q.default.LIVE_CATCHUP_MODE_LOLP?function(Q,U){try{return Math.abs(se())>0||Q<U}catch{return!1}}(x.getBufferLevel(),z.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(se())>0}catch{return!1}}()}catch{return!1}}()&&function(){if(!_&&w){let Q;const U=w.getPlaybackRate(),V=H.getCatchupPlaybackRates(),$=x.getBufferLevel(),ce=se(),Te=H.getCatchupMaxDrift();if(!isNaN(Te)&&Te>0&&ce>Te)D.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),_=!0,x.seekToCurrentLive(!0,!1);else{const ge=x.getCurrentLiveLatency(),ve=x.getLiveDelay();Q=oe()===q.default.LIVE_CATCHUP_MODE_LOLP?function(ze,K,X,Se,ye){let J;if(ye<Se){const ue=Math.abs(ze.min),he=5*(ye-Se);J=1-ue+2*ue/(1+Math.pow(Math.E,-he)),D.debug("[LoL+ playback control_buffer-based] bufferLevel: "+ye+", newRate: "+J)}else{if(Math.abs(K-X)<=.02*X)J=1;else{const he=K-X,le=he<0?Math.abs(ze.min):ze.max,Ie=5*he;J=1-le+2*le/(1+Math.pow(Math.E,-Ie))}D.debug("[LoL+ playback control_latency-based] latency: "+K+", newRate: "+J)}return J}(V,ge,ve,z.get().streaming.liveCatchup.playbackBufferMin,$):function(ze,K,X,Se){if(G)return 1;const ye=K-X,J=ye<0?Math.abs(ze.min):ze.max,ue=5*ye;let he=1-J+2*J/(1+Math.pow(Math.E,-ue));return x.getPlaybackStalled()&&Se<=X/2&&ye>0&&(he=1),he}(V,ge,ve,$);const Me=I?.25:.02/(.5/V.max);(Q&&Math.abs(U-Q)>=Me||Q==1)&&(D.debug(`[CatchupController]: Setting playback rate to ${Q}`),w.setPlaybackRate(Q))}}}()}function se(){return x.getCurrentLiveLatency()-x.getLiveDelay()}function oe(){const Q=z.get().streaming.liveCatchup.playbackBufferMin;return z.get().streaming.liveCatchup.mode!==q.default.LIVE_CATCHUP_MODE_LOLP||Q===null||isNaN(Q)?q.default.LIVE_CATCHUP_MODE_DEFAULT:q.default.LIVE_CATCHUP_MODE_LOLP}function Ae(){H.getCatchupPlaybackRates(!0)}return v={reset:function(){y.off(be.default.BUFFER_LEVEL_UPDATED,Z,v),y.off(be.default.BUFFER_LEVEL_STATE_CHANGED,ne,v),y.off(be.default.PLAYBACK_PROGRESS,re,v),y.off(be.default.PLAYBACK_TIME_UPDATED,re,v),y.off(be.default.PLAYBACK_SEEKED,B,v),y.off(P.default.SETTING_UPDATED_CATCHUP_ENABLED,ie,v),y.off(P.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,v),y.off(P.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,v),y.off(be.default.STREAM_INITIALIZED,Ae,v),M(),w.setPlaybackRate(1,!0)},setConfig:function(Q){Q&&(Q.settings&&(z=Q.settings),Q.videoModel&&(w=Q.videoModel),Q.streamController&&(F=Q.streamController),Q.playbackController&&(x=Q.playbackController),Q.mediaPlayerModel&&(H=Q.mediaPlayerModel))},initialize:function(){y.on(be.default.BUFFER_LEVEL_UPDATED,Z,v),y.on(be.default.BUFFER_LEVEL_STATE_CHANGED,ne,v),y.on(be.default.PLAYBACK_PROGRESS,re,v),y.on(be.default.PLAYBACK_TIME_UPDATED,re,v),y.on(be.default.PLAYBACK_SEEKED,B,v),y.on(P.default.SETTING_UPDATED_CATCHUP_ENABLED,ie,v),y.on(P.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,v),y.on(P.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,v),y.on(be.default.STREAM_INITIALIZED,Ae,v),Ae()}},D=(0,Ve.default)(S).getInstance().getLogger(v),M(),v}rc.__dashjs_factory_name="CatchupController";var Jh=xe.default.getSingletonFactory(rc);const eg=[q.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Jd="video",sc="audio";function lc(){const S=this.context;let y,v,_,I,w;function z(){v={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},_=[]}function F(x,H,G){try{v[x][H]=G/1e3}catch(D){I.error(D)}}return y={getServiceDescriptionSettings:function(){return v},getProducerReferenceTimeOffsets:function(){return _},calculateProducerReferenceTimeOffsets:function(x){try{let H=[];if(x&&x.length>0){const G=[q.default.VIDEO,q.default.AUDIO,q.default.TEXT],D=w.getAvailabilityStartTime()/1e3;x.forEach(M=>{const B=G.reduce((Z,ne)=>Z.concat(w.getAllMediaInfoForType(M,ne)),[]).reduce((Z,ne)=>(w.getProducerReferenceTimes(M,ne).forEach(ie=>{const re=w.getVoRepresentations(ne);if(re&&re.length>0&&re[0].adaptation&&re[0].segmentInfoType===k.default.SEGMENT_TEMPLATE){const se=re[0],oe=new Date(ie[k.default.WALL_CLOCK_TIME]).getTime()/1e3-(ie[k.default.PRESENTATION_TIME]/se[k.default.TIMESCALE]-se[k.default.PRESENTATION_TIME_OFFSET]+M.start),Ae=D-oe;Z.push({id:ie[k.default.ID],to:Ae})}}),Z),[]);H=H.concat(B)})}_=H}catch(H){I.error(H),_=[]}},applyServiceDescription:function(x){if(!x||!x.serviceDescriptions)return;const H=x.serviceDescriptions.filter(M=>eg.includes(M.schemeIdUri)),G=x.serviceDescriptions.filter(M=>M.schemeIdUri==null);let D=H.length>0?H[H.length-1]:G[G.length-1];D&&(D.latency&&D.latency.target>0&&function(M){let B;if(M.schemeIdUri,q.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,B=function(Z){return{liveDelay:Z.latency.target/1e3,maxDrift:!isNaN(Z.latency.max)&&Z.latency.max>Z.latency.target?(Z.latency.max-Z.latency.target+500)/1e3:NaN,referenceId:Z.latency.referenceId||NaN}}(M),_.length>0){let{to:Z,id:ne}=function(ie){let re,se=0,oe=_.filter(Ae=>Ae.id===ie.referenceId);return oe.length===0?(se=_.length>0?_[0].to:0,re=_[0].id||NaN):(se=oe[0].to||0,re=oe[0].id||NaN),{to:se,id:re}}(B);v.liveDelay=B.liveDelay-Z,v.liveCatchup.maxDrift=B.maxDrift,I.debug(`
                Found latency properties coming from service description. Applied time offset of ${Z} from ProducerReferenceTime element with id ${ne}.
                Live Delay: ${B.liveDelay-Z}, Live catchup max drift: ${B.maxDrift}
            `)}else v.liveDelay=B.liveDelay,v.liveCatchup.maxDrift=B.maxDrift,I.debug(`Found latency properties coming from service description: Live Delay: ${B.liveDelay}, Live catchup max drift: ${B.maxDrift}`)}(D),D.playbackRate&&function(M){const B=M.playbackRate.min?Math.round(1e3*(M.playbackRate.min-1))/1e3:NaN,Z=M.playbackRate.max?Math.round(1e3*(M.playbackRate.max-1))/1e3:NaN;v.liveCatchup.playbackRate.min=B,v.liveCatchup.playbackRate.max=Z,I.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${B}`),I.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${Z}`)}(D),D.operatingQuality,D.operatingBandwidth&&function(M){if(!M||!M.operatingBandwidth||!M.operatingBandwidth.mediaType||M.operatingBandwidth.mediaType==="all")return;const B={};B.minBandwidth=M.operatingBandwidth.min,B.maxBandwidth=M.operatingBandwidth.max,B.targetBandwidth=M.operatingBandwidth.target;const Z=[];M.operatingBandwidth.mediaType===Jd||M.operatingBandwidth.mediaType===sc?Z.push(M.operatingBandwidth.mediaType):M.operatingBandwidth.mediaType==="any"&&(Z.push(sc),Z.push(Jd)),Z.forEach(ne=>{isNaN(B.minBandwidth)||F("minBitrate",ne,B.minBandwidth),isNaN(B.maxBandwidth)||F("maxBitrate",ne,B.maxBandwidth),isNaN(B.targetBandwidth)||F("initialBitrate",ne,B.targetBandwidth)})}(D),D.contentSteering&&function(M){v.contentSteering=M.contentSteering}(D),D.clientDataReporting&&function(M){v.clientDataReporting=M.clientDataReporting}(D))},reset:function(){z()},setConfig:function(x){x&&x.adapter&&(w=x.adapter)}},I=(0,Ve.default)(S).getInstance().getLogger(y),z(),y}lc.__dashjs_factory_name="ServiceDescriptionController";var oc=xe.default.getSingletonFactory(lc);function mi(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=[];if(S.irregular)return S.irregular;if(S.regular)return S.regular;if(S.language){y=y.concat(S.language,S.extendedLanguageSubtags||[],S.script||[],S.region||[],S.variants||[]);const v=S.extensions||[];let _=-1;for(;++_<v.length;){const I=v[_];I.singleton&&I.extensions&&I.extensions.length>0&&y.push(I.singleton,...I.extensions)}}return S.privateuse&&S.privateuse.length>0&&y.push("x",...S.privateuse),y.join("-")}function ki(S){const y=typeof S=="string"?S.charCodeAt(0):S;return y>=97&&y<=122||y>=65&&y<=90}function pi(S){const y=typeof S=="string"?S.charCodeAt(0):S;return y>=48&&y<=57}function di(S){return ki(S)||pi(S)}const sl=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],Oo={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},Po={}.hasOwnProperty;function ur(S){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},_=String(S),I=_.toLowerCase();let w=0;if(S==null)throw new Error("Expected string, got `"+S+"`");if(Po.call(Oo,I)){const F=Oo[I];return y.normalize!==void 0&&y.normalize!==null&&!y.normalize||typeof F!="string"?(v[sl.includes(I)?"regular":"irregular"]=_,v):ur(F)}for(;ki(I.charCodeAt(w))&&w<9;)w++;if(w>1&&w<9){if(v.language=_.slice(0,w),w<4){let F=0;for(;I.charCodeAt(w)===45&&ki(I.charCodeAt(w+1))&&ki(I.charCodeAt(w+2))&&ki(I.charCodeAt(w+3))&&!ki(I.charCodeAt(w+4));){if(F>2)return z(w,3,"Too many extended language subtags, expected at most 3 subtags");v.extendedLanguageSubtags.push(_.slice(w+1,w+4)),w+=4,F++}}for(I.charCodeAt(w)===45&&ki(I.charCodeAt(w+1))&&ki(I.charCodeAt(w+2))&&ki(I.charCodeAt(w+3))&&ki(I.charCodeAt(w+4))&&!ki(I.charCodeAt(w+5))&&(v.script=_.slice(w+1,w+5),w+=5),I.charCodeAt(w)===45&&(ki(I.charCodeAt(w+1))&&ki(I.charCodeAt(w+2))&&!ki(I.charCodeAt(w+3))?(v.region=_.slice(w+1,w+3),w+=3):pi(I.charCodeAt(w+1))&&pi(I.charCodeAt(w+2))&&pi(I.charCodeAt(w+3))&&!pi(I.charCodeAt(w+4))&&(v.region=_.slice(w+1,w+4),w+=4));I.charCodeAt(w)===45;){const F=w+1;let x=F;for(;di(I.charCodeAt(x));){if(x-F>7)return z(x,1,"Too long variant, expected at most 8 characters");x++}if(!(x-F>4||x-F>3&&pi(I.charCodeAt(F))))break;v.variants.push(_.slice(F,x)),w=x}for(;I.charCodeAt(w)===45&&I.charCodeAt(w+1)!==120&&di(I.charCodeAt(w+1))&&I.charCodeAt(w+2)===45&&di(I.charCodeAt(w+3));){let F=w+2,x=0;for(;I.charCodeAt(F)===45&&di(I.charCodeAt(F+1))&&di(I.charCodeAt(F+2));){const H=F+1;for(F=H+2,x++;di(I.charCodeAt(F));){if(F-H>7)return z(F,2,"Too long extension, expected at most 8 characters");F++}}if(!x)return z(F,4,"Empty extension, extensions must have at least 2 characters of content");v.extensions.push({singleton:_.charAt(w+1),extensions:_.slice(w+3,F).split("-")}),w=F}}else w=0;if(w===0&&I.charCodeAt(w)===120||I.charCodeAt(w)===45&&I.charCodeAt(w+1)===120){w=w?w+2:1;let F=w;for(;I.charCodeAt(F)===45&&di(I.charCodeAt(F+1));){const x=w+1;for(F=x;di(I.charCodeAt(F));){if(F-x>7)return z(F,5,"Too long private-use area, expected at most 8 characters");F++}v.privateuse.push(_.slice(w+1,F)),w=F}}return w!==_.length?z(w,6,"Found superfluous content after tag"):v;function z(F,x,H){return y.warning&&y.warning(H,x,F),y.forgiving?v:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function uc(S,y){return function(v,_){let I=cc(v,"tag");const w=cc(_??"*","range"),z=[];let F=-1;for(;++F<w.length;){const x=w[F].toLowerCase();if(!y&&x==="*")continue;let H=-1;const G=[];for(;++H<I.length;)if(S(I[H].toLowerCase(),x)){if(!y)return I[H];z.push(I[H])}else G.push(I[H]);I=G}return y?z:void 0}}const ns=uc(function(S,y){const v=S.split("-"),_=y.split("-");let I=0,w=0;if(_[w]!=="*"&&v[I]!==_[w])return!1;for(I++,w++;w<_.length;)if(_[w]!=="*"){if(!v[I])return!1;if(v[I]!==_[w]){if(v[I].length===1)return!1;I++}else I++,w++}else w++;return!0},!0);function cc(S,y){const v=S&&typeof S=="string"?[S]:S;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}const ll=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],br=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],dc={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},Si={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},ol={}.hasOwnProperty;function Qi(S){const{language:y,script:v,region:_}=S;let I;var w,z;return v&&_&&(I=Si[mi({language:y,script:v,region:_})])?(S.script=void 0,S.region=void 0):v&&(I=Si[mi({language:y,script:v})])?S.script=void 0:_&&(I=Si[mi({language:y,region:_})])?S.region=void 0:y&&(I=Si[y]),I&&(S.language=void 0,w=S,z=ur(I),w.language||(w.language=z.language),w.script||(w.script=z.script),w.region||(w.region=z.region),z.variants&&w.variants.push(...z.variants)),mi(S)}function eo(S,y){const v={},_=ur(String(S||"").toLowerCase(),v),I=mi(_);if(!I)return I;let w=-1;for(;++w<ll.length;){let z=ll[w].from;z.slice(0,4)==="und-"&&_.language&&(z=_.language+z.slice(3)),ns(I,z).length>0&&zo(_,z,ll[w].to)}for(w=-1;++w<br.length;)as(_,br[w].from.field,br[w].from.value)&&Fo(_,br[w].to.field,br[w].to.value);if(function(z){Qi(z);const{language:F,script:x,region:H}=z;if(!F)return z;const G=mi({language:F,script:x,region:H});G===Qi(ur(F))?(z.script=void 0,z.region=void 0):H&&G===Qi(ur(F+"-"+H))?z.script=void 0:x&&G===Qi(ur(F+"-"+x))&&(z.region=void 0)}(_),_.variants.sort(),_.extensions.sort(fc),v.warning){let z;for(z in dc)if(ol.call(dc,z)){const F=dc[z],x=_[z];if(x&&ol.call(F,x)){const H=F[x];v.warning("Deprecated "+z+" `"+x+"`, expected one of `"+H.join("`, `")+"`",-1,7)}}}return _.script&&(_.script=_.script.charAt(0).toUpperCase()+_.script.slice(1)),_.region&&(_.region=_.region.toUpperCase()),mi(_)}function zo(S,y,v){const _=ur(y),I=ur(v),w=[],z=_.language;let F;for(F in _)if(ol.call(_,F)){const x=_[F];x&&as(S,F,x)&&w.push(F)}for(F in I)if(ol.call(I,F)){const x=I[F];z&&x&&(w.includes(F)||!S[F])&&Fo(S,F,F==="language"&&x==="und"?z:x)}}function as(S,y,v){let _,I=!1;if(v){const w=S[y];if(_=w,Array.isArray(w)){_=[];let z=-1;for(;++z<w.length;){const F=w[z];v.includes(F)?I=!0:_.push(F)}}else w===v&&(_=null,I=!0);S[y]=_}return I}function Fo(S,y,v){const _=S[y];if(Array.isArray(_)){const I=Array.isArray(v)?v:[v];let w=-1;for(;++w<I.length;){const z=I[w];_.includes(z)||_.push(z)}}else S[y]=v}function fc(S,y){return S.singleton>y.singleton?1:S.singleton<y.singleton?-1:0}const ul={0:void 0,1:1,2:2,3:3,4:4,5:5,6:5,7:7,8:2,9:3,10:4,11:6,12:7,13:22,14:7,15:10,16:9,17:11,18:13,19:11,20:13};function Is(S){return S==0?0:S.toString(2).match(/1/g).length}function cl(S,y){let v,_=parseInt("0x"+S,16),I=_&y[0],w=_&y[1];return v=Is(I)+2*Is(w),v}function dl(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w,z,F,x,H,G,D,M;function B(le){if(!(le&&le.currentRepresentation&&le.currentRepresentation.mediaInfo&&le.currentRepresentation.mediaInfo.type))return;const Ie=le.currentRepresentation.mediaInfo.type;x[Ie]=le.currentRepresentation}function Z(le,Ie){return le&&I[Ie]&&I[Ie][le]?I[Ie][le].list:[]}function ne(le,Ie){return le&&I[Ie]&&I[Ie][le]?I[Ie][le].current:null}function ie(le){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!le||!le.streamInfo)return;const we=le.type,Fe=le.streamInfo.id,je=ne(we,Fe);if(I[Fe]&&I[Fe][we]&&(I[Fe][we].current=le,I[Fe][we].current&&(we!==q.default.TEXT&&!oe(le,je)||we===q.default.TEXT&&le.isFragmented)&&y.trigger(P.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:je,newMediaInfo:le,switchMode:w.get().streaming.trackSwitchMode[we],options:Ie},{streamId:Fe}),!Ie.hasOwnProperty("noSettingsSave")||!Ie.noSettingsSave)){let at=function(lt){const ot={lang:lt.lang,viewpoint:lt.viewpoint,roles:lt.roles,accessibility:lt.accessibility,audioChannelConfiguration:lt.audioChannelConfiguration,codec:lt.codec};return ot.lang||ot.viewpoint||ot.role&&ot.role.length>0||ot.accessibility&&ot.accessibility.length>0||ot.audioChannelConfiguration&&ot.audioChannelConfiguration.length>0?ot:null}(le);if(!at||!I[Fe][we].storeLastSettings)return;at.roles&&(at.role=at.roles[0],delete at.roles),at.accessibility&&(at.accessibility=at.accessibility[0]),at.audioChannelConfiguration&&(at.audioChannelConfiguration=at.audioChannelConfiguration[0]),F[we]=at,M.setSavedMediaSettings(we,at)}}function re(le,Ie){le&&Ie&&(z[le]=Ie)}function se(le){return le?z[le]:null}function oe(le,Ie){if(!le&&!Ie)return!0;if(!le||!Ie)return!1;const we=le.id===Ie.id,Fe=JSON.stringify(le.viewpoint)===JSON.stringify(Ie.viewpoint),je=le.lang===Ie.lang,at=le.codec===Ie.codec,lt=JSON.stringify(le.roles)===JSON.stringify(Ie.roles),ot=JSON.stringify(le.accessibility)===JSON.stringify(Ie.accessibility),qt=JSON.stringify(le.audioChannelConfiguration)===JSON.stringify(Ie.audioChannelConfiguration);return we&&at&&Fe&&je&&lt&&ot&&qt}function Ae(){I={},F={},x={},z={audio:null,video:null,text:null},y.off(be.default.REPRESENTATION_SWITCH,B,v)}function Q(le,Ie,we){let Fe=[];return le.forEach(function(je){Ie(we,je)&&Fe.push(je)}),Fe.length!==0||Ie===Te&&w.get().streaming.assumeDefaultRoleAsMain&&he(we.role,{schemeIdUri:q.default.DASH_ROLE_SCHEME_ID,value:k.default.MAIN})&&(_.info("no track with Role set to main - assuming main as default and searching again"),Fe=Q(le,ge,null),Fe.length!==0)?Fe:(_.info("Filter-Function ("+Ie.name+") resulted in no tracks; setting ignored"),le)}function U(le,Ie){try{return!le.lang||le.lang instanceof RegExp?Ie.lang.match(le.lang):Ie.lang!==""&&ns(Ie.lang,eo(le.lang)).length>0}catch{return!1}}function V(le,Ie){return le.index===void 0||le.index===null||Ie.index===le.index}function $(le,Ie){return le.id===void 0||le.id===null||Ie.id===le.id}function ce(le,Ie){return!le.viewpoint||!!Ie.viewpoint.filter(function(we){return he(we,le.viewpoint)})[0]}function Te(le,Ie){let we=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!!Ie.roles&&(!le.role||!!Ie.roles.filter(function(Fe){return he(Fe,le.role)})[0]||Ie.type===q.default.AUDIO&&we)}function ge(le,Ie){return!Ie.roles||Ie.roles.length===0}function ve(le,Ie){let we;return we=le.accessibility?!!Ie.accessibility.filter(function(Fe){return he(Fe,le.accessibility)})[0]:!Ie.accessibility.length,we}function Me(le,Ie){return!le.audioChannelConfiguration||!!Ie.audioChannelConfiguration.filter(function(we){return he(we,le.audioChannelConfiguration)})[0]}function ze(le,Ie){return!le.codec||le.codec===Ie.codec}function K(le){let Ie=0,we=[];return le.forEach(Fe=>{isNaN(Fe.selectionPriority)||(Fe.selectionPriority>Ie?(Ie=Fe.selectionPriority,we=[Fe]):Fe.selectionPriority===Ie&&we.push(Fe))}),we}function X(le){let Ie,we=0,Fe=[];return le.forEach(function(je){Ie=Math.max.apply(Math,je.bitrateList.map(function(at){return at.bandwidth})),Ie>we?(we=Ie,Fe=[je]):Ie===we&&Fe.push(je)}),Fe}function Se(le){return le[0]&&le[0].type===q.default.VIDEO?function(Ie){let we,Fe=1/0,je=[];return Ie.forEach(function(at){we=at.bitrateList.reduce(function(ot,qt){const Kt=Math.max(1,qt.width*qt.height);return ot+qt.bandwidth/Kt},0)/at.bitrateList.length,we<Fe?(Fe=we,je=[at]):we===Fe&&je.push(at)}),je}(le):le[0]&&le[0].type===q.default.AUDIO?function(Ie){let we=1/0,Fe=[];return Ie.forEach(function(je){let at=je.audioChannelConfiguration.reduce(function(ot,qt){return ot+(function(Kt){let Xt;if(!Kt||!Kt.schemeIdUri||!Kt.value)return;const In=Kt.schemeIdUri,Lt=Kt.value;return In==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||In==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?Xt=ul[Lt]:In==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?Xt=function(gn){if(gn.length===4)return cl(gn,[63880,1648])}(Lt):In==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?Xt=function(gn){if(gn.length===6)return gn==="800000"?24:cl(gn,[56834,205245])}(Lt):In==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?Xt=parseInt(Lt):In==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(Xt=function(gn){if(!(gn.length>8))return cl(gn,[4294901727,0])}(Lt)),Xt}(qt)||0)},0)/je.audioChannelConfiguration.length;je.hasOwnProperty("supplementalProperties")&&je.supplementalProperties.some(ot=>ot.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ot.value==="JOC")&&(at=16),at||(at=1);let lt=je.bitrateList.reduce(function(ot,qt){return ot+qt.bandwidth/at},0)/je.bitrateList.length;lt<we?(we=lt,Fe=[je]):lt===we&&Fe.push(je)}),Fe}(le):le}function ye(le){let Ie,we=0,Fe=[];return le.forEach(function(je){Ie=je.representationCount,Ie>we?(we=Ie,Fe=[je]):Ie===we&&Fe.push(je)}),Fe}function J(le,Ie){if(le===q.default.TEXT)return function(je){if(!je||je.length===0)return null;const at=je.filter(lt=>!(lt&&lt.roles&&lt.roles.length>0)||lt.roles.every(ot=>ot.schemeIdUri!==q.default.DASH_ROLE_SCHEME_ID||ot.value!==k.default.FORCED_SUBTITLE));return at.length>0?at[0]:je[0]}(Ie);let we;const Fe=H.getCustomInitialTrackSelectionFunction();if(we=function(je){try{let at;return at=function(lt){try{const ot=lt.filter(qt=>{const Kt=qt.type;return qt.bitrateList.some(Xt=>{const In=G.getAbrBitrateParameter("maxBitrate",Kt),Lt=G.getAbrBitrateParameter("minBitrate",Kt);return!(In>-1&&Xt.bandwidth>1e3*In||Lt>-1&&Xt.bandwidth<1e3*Lt)})});return ot.length>0?ot:lt}catch(ot){return _.error(ot),lt}}(je),at=function(lt){try{if(!w.get().streaming.abr.limitBitrateByPortal)return lt;const{elementWidth:ot}=D.getVideoElementSize(),qt=lt.filter(Kt=>Kt.type!==q.default.VIDEO||Kt.bitrateList.some(Xt=>Xt.width<=ot));return qt.length>0?qt:lt}catch(ot){return _.error(ot),lt}}(at),at}catch(at){return _.error(at),je}}(Ie),Fe&&typeof Fe=="function")we=Fe(we);else if(x[le])we=function(je,at){if(!je||je.length===0||!at||!x[at])return je;const lt=x[at].bandwidth;if(!lt||isNaN(lt))return je;let ot={min:NaN,track:null};return je.forEach(qt=>{qt.bitrateList.forEach(Kt=>{const Xt=Math.abs(Kt.bandwidth-lt);(isNaN(ot.min)||Xt<ot.min)&&(ot.min=Xt,ot.track=qt)})}),ot.track?[ot.track]:je}(we,le);else if(w.get().streaming.ignoreSelectionPriority||(_.info("Trying to find track with highest selectionPriority"),we=function(je){return K(je)}(we)),we.length>1&&w.get().streaming.prioritizeRoleMain&&(_.info("Trying to find a main track"),we=Q(we,Te,{role:{schemeIdUri:q.default.DASH_ROLE_SCHEME_ID,value:k.default.MAIN}})),we.length>1){_.info("Selecting track based on selectionModeForInitialTrack");let je=w.get().streaming.selectionModeForInitialTrack;switch(je){case q.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:we=function(at){let lt=X(at);return lt.length>1&&(lt=ye(lt)),lt}(we);break;case q.default.TRACK_SELECTION_MODE_FIRST_TRACK:we=ue(we);break;case q.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:we=function(at){let lt=Se(at);return lt.length>1&&(lt=X(lt)),lt}(we);break;case q.default.TRACK_SELECTION_MODE_WIDEST_RANGE:we=function(at){let lt=ye(at);return lt.length>1&&(lt=X(at)),lt}(we);break;default:_.warn(`Track selection mode ${je} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),we=ue(we)}}return we.length>0?we[0]:Ie[0]}function ue(le){return le[0]}function he(le,Ie){return!(!le||!Ie)&&JSON.stringify({schemeIdUri:le.schemeIdUri,value:le.value})===JSON.stringify({schemeIdUri:Ie.schemeIdUri,value:Ie.value})}return v={addTrack:function(le){if(!le)return;const Ie=le.type;if((we=Ie)!==q.default.AUDIO&&we!==q.default.VIDEO&&we!==q.default.TEXT&&we!==q.default.IMAGE)return;var we;let Fe=le.streamInfo.id;I[Fe]||(I[Fe]=function(){const at=w.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:at,current:null},video:{list:[],storeLastSettings:at,current:null},text:{list:[],storeLastSettings:at,current:null},image:{list:[],storeLastSettings:at,current:null}}}());const je=I[Fe][Ie].list;for(let at=0,lt=je.length;at<lt;++at)if(oe(je[at],le))return;je.push(le)},areTracksEqual:oe,clearDataForStream:function(le){I[le]&&delete I[le]},getCurrentTrackFor:ne,getInitialSettings:se,getTracksFor:Z,getTracksWithHighestSelectionPriority:K,getTracksWithHighestBitrate:X,getTracksWithHighestEfficiency:Se,getTracksWithWidestRange:ye,initialize:function(){y.on(be.default.REPRESENTATION_SWITCH,B,v)},isCurrentTrack:function(le){if(!le)return!1;const Ie=le.type,we=le.streamInfo.id;return I[we]&&I[we][Ie]&&oe(I[we][Ie].current,le)},matchSettings:function(le,Ie){let we=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let Fe=!1;if(le.lang){if(le.lang instanceof RegExp)Fe=Ie.lang.match(le.lang);else if(Ie.lang!==""){const Kt=eo(le.lang);Kt&&(Fe=ns(Ie.lang,Kt).length>0)}}else Fe=!0;const je=le.index===void 0||le.index===null||Ie.index===le.index,at=!le.viewpoint||!!Ie.viewpoint.filter(function(Kt){return he(Kt,le.viewpoint)})[0],lt=!le.role||!!Ie.roles.filter(function(Kt){return he(Kt,le.role)})[0];let ot=!le.accessibility||!!Ie.accessibility.filter(function(Kt){return he(Kt,le.accessibility)})[0],qt=!le.audioChannelConfiguration||!!Ie.audioChannelConfiguration.filter(function(Kt){return he(Kt,le.audioChannelConfiguration)})[0];return Fe&&je&&at&&(lt||Ie.type===q.default.AUDIO&&we)&&ot&&qt}catch{return!1}},matchSettingsAccessibility:ve,matchSettingsAudioChannelConfig:Me,matchSettingsIndex:V,matchSettingsLang:U,matchSettingsRole:Te,matchSettingsViewPoint:ce,reset:Ae,saveTextSettingsDisabled:function(){M.setSavedMediaSettings(q.default.TEXT,null)},selectInitialTrack:J,setConfig:function(le){le&&(le.domStorage&&(M=le.domStorage),le.settings&&(w=le.settings),le.customParametersModel&&(H=le.customParametersModel),le.mediaPlayerModel&&(G=le.mediaPlayerModel),le.videoModel&&(D=le.videoModel))},setInitialMediaSettingsForType:function(le,Ie){let we=F[le]||se(le);const Fe=Z(le,Ie.id);let je=[];we&&Object.keys(we).length!==0||(we=M.getSavedMediaSettings(le),we&&delete we.codec,re(le,we)),Fe&&Fe.length!==0&&(we&&(je=Array.from(Fe),_.info("Filtering "+je.length+" "+le+" tracks based on settings"),je=Q(je,$,we),je=Q(je,U,we),je=Q(je,V,we),je=Q(je,ce,we),le===q.default.AUDIO&&F[le]||(je=Q(je,Te,we)),je=Q(je,ve,we),je=Q(je,Me,we),je=Q(je,ze,we),_.info("Filtering "+le+" tracks ended, found "+je.length+" matching track(s).")),je.length===0?ie(J(le,Fe)):je.length>1?ie(J(le,je)):ie(je[0]))},setInitialSettings:re,setTrack:ie},_=(0,Ve.default)(S).getInstance().getLogger(v),Ae(),v}dl.__dashjs_factory_name="MediaController";const $i=xe.default.getSingletonFactory(dl);xe.default.updateSingletonFactory(dl.__dashjs_factory_name,$i);var Zi=$i;const Tr=NaN;class vr{constructor(y,v){this.data={baseUrls:y||null,selectedIdx:v||Tr},this.children=[]}}function Sr(){let S,y,v,_;const I=this.context,w=(0,Mn.default)(I).getInstance();function z(G,D,M){const B=F(M);G[D]?w.areEqual(B,G[D].data.baseUrls)||(G[D].data.baseUrls=B,G[D].data.selectedIdx=Tr):G[D]=new vr(B)}function F(G){let D=v.getBaseURLsFromElement(G);const M=_.getSynthesizedBaseUrlElements(D);return M&&M.length>0&&M.forEach(B=>{const Z=D.findIndex(ne=>ne.serviceLocation===B.serviceLocation);Z!==-1?D[Z]=B:D.push(B)}),D}function x(G,D){const M=D||y;G(M.data),M.children&&M.children.forEach(B=>x(G,B))}function H(){y=new vr}return S={reset:H,update:function(G){(function(D){(function(){if(!v||!v.hasOwnProperty("getBaseURLsFromElement")||!v.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const M=F(D);w.areEqual(M,y.data.baseUrls)||(y.data.baseUrls=M,y.data.selectedIdx=Tr),D&&D.Period&&D.Period.forEach((B,Z)=>{z(y.children,Z,B),B.AdaptationSet&&B.AdaptationSet.forEach((ne,ie)=>{z(y.children[Z].children,ie,ne),ne.Representation&&ne.Representation.sort(v.getRepresentationSortFunction()).forEach((re,se)=>{z(y.children[Z].children[ie].children,se,re)})})})})(G)},getForPath:function(G){let D=y;const M=[D.data];return G&&G.forEach(B=>{D=D.children[B],D&&M.push(D.data)}),M.filter(B=>B.baseUrls.length)},invalidateSelectedIndexes:function(G){x(D=>{isNaN(D.selectedIdx)||G===D.baseUrls[D.selectedIdx].serviceLocation&&(D.selectedIdx=Tr)})},setConfig:function(G){G.adapter&&(v=G.adapter),G.contentSteeringController&&(_=G.contentSteeringController)},getBaseUrls:function(G){return F(G)}},H(),S}Sr.__dashjs_factory_name="BaseURLTreeModel";var xs=xe.default.getClassFactory(Sr);function hc(S){let y;const v=(S=S||{}).blacklistController;return y={select:function(_){return _&&function(I){let w,z,F=0,x=[],H=0;if(z=I.sort(function(G,D){let M=G.dvbPriority-D.dvbPriority;return isNaN(M)?0:M}).filter(function(G,D,M){return!D||M[0].dvbPriority&&G.dvbPriority&&M[0].dvbPriority===G.dvbPriority}),z.length)return z.length>1&&(z.forEach(G=>{F+=G.dvbWeight,x.push(F)}),w=Math.floor(Math.random()*(F-1)),x.every((G,D)=>(H=D,!(w<G)))),z[H]}(function(I){let w=[];return I.filter(function(z){return!v.contains(z.serviceLocation)||(z.dvbPriority&&w.push(z.dvbPriority),!1)}).filter(function(z){return!w.length||!z.dvbPriority||w.indexOf(z.dvbPriority)===-1})}(_))}},y}hc.__dashjs_factory_name="DVBSelector";var gc=xe.default.getClassFactory(hc);function Uo(S){let y;const v=(S=S||{}).blacklistController;return y={select:function(_){let I,w=0;return _&&_.some((z,F)=>(w=F,!v.contains(z.serviceLocation)))&&(I=_[w]),I}},y}Uo.__dashjs_factory_name="BasicSelector";var Di=xe.default.getClassFactory(Uo);function Va(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w=[];function z(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],G=0,D=NaN;for(;G<x.length;){const M=x[G],B=H.findIndex(Z=>Z.serviceLocation&&Z.serviceLocation===M);if(B!==-1&&!I.contains(H[B].serviceLocation)){D=B;break}G+=1}return D}function F(x){const H=_.getCurrentSteeringResponseData();if(!H)return;const G=x.entry,D=setTimeout(()=>{I.remove(G),w.splice(w.indexOf(D,1))},1e3*H.ttl);w.push(D)}return v={selectBaseUrlIndex:function(x){let H=NaN;if(isNaN(x.selectedIdx)){const D=_.getSteeringDataFromManifest();D&&D.defaultServiceLocationArray.length>0&&(H=z(D.defaultServiceLocationArray,x.baseUrls))}const G=_.getCurrentSteeringResponseData();return x.baseUrls&&x.baseUrls.length&&G&&G.pathwayPriority&&G.pathwayPriority.length&&(H=z(G.pathwayPriority,x.baseUrls)),H},setConfig:function(x){x.blacklistController&&(I=x.blacklistController),x.contentSteeringController&&(_=x.contentSteeringController),y.on(x.addBlacklistEventName,F,v)},reset:function(){w.forEach(x=>clearTimeout(x)),w=[]}},_=As(S).getInstance(),v}Va.__dashjs_factory_name="ContentSteeringSelector";var _a=xe.default.getClassFactory(Va);function is(){const S=this.context,y=(0,Ee.default)(S).getInstance(),v=(0,W.default)(S).getInstance();let _,I,w,z,F,x;function H(){F.reset(),I.reset()}return _={chooseSelector:function(G){(0,Ht.checkParameterType)(G,"boolean"),x=G?z:w},select:function(G){if(!G)return;if(v.get().streaming.applyContentSteering){const M=F.selectBaseUrlIndex(G);isNaN(M)||M===-1||(G.selectedIdx=M)}if(!isNaN(G.selectedIdx))return G.baseUrls[G.selectedIdx];let D=x.select(G.baseUrls);return D?(G.selectedIdx=G.baseUrls.indexOf(D),D):(y.trigger(P.default.URL_RESOLUTION_FAILED,{error:new Ce.default(Y.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Y.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(x===w&&H()))},reset:H,setConfig:function(G){G.selector&&(x=G.selector),G.contentSteeringSelector&&(F=G.contentSteeringSelector)}},I=Co(S).create({updateEventName:P.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:P.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),w=Di(S).create({blacklistController:I}),z=gc(S).create({blacklistController:I}),F=_a(S).create(),F.setConfig({blacklistController:I,addBlacklistEventName:P.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),x=w,_}is.__dashjs_factory_name="BaseURLSelector";var _r=xe.default.getClassFactory(is);function Bo(){let S,y;const v=this.context,_=(0,Ee.default)(v).getInstance(),I=jt(v).getInstance();let w,z,F;function x(G){w.update(G),z.chooseSelector(y.getIsDVB(G)),_.trigger(be.default.BASE_URLS_UPDATED,{baseUrls:H(G)})}function H(G){return w.getBaseUrls(G)}return S={reset:function(){w.reset(),z.reset()},initialize:function(G){w.setConfig({adapter:y,contentSteeringController:F}),x(G)},resolve:function(G){const D=w.getForPath(G).reduce((M,B)=>{const Z=z.select(B);return Z?(I.isRelative(Z.url)?M.url=I.resolve(Z.url,M.url):(M.url=Z.url,M.serviceLocation=Z.serviceLocation),M.availabilityTimeOffset=Z.availabilityTimeOffset,M.availabilityTimeComplete=Z.availabilityTimeComplete,M.queryParams=Z.queryParams,M):new Ka},new Ka);if(!I.isRelative(D.url))return D},setConfig:function(G){G.baseURLTreeModel&&(w=G.baseURLTreeModel),G.baseURLSelector&&(z=G.baseURLSelector),G.adapter&&(y=G.adapter),G.contentSteeringController&&(F=G.contentSteeringController)},getBaseUrls:H,update:x},w=xs(v).create(),z=_r(v).create(),_.on(P.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(G){w.invalidateSelectedIndexes(G.entry)},S),S}Bo.__dashjs_factory_name="BaseURLController";var ws=xe.default.getClassFactory(Bo),mc=class extends nt{constructor(S,y){super(),this.url=S||null,this.type=y||null,this.mediaType=q.default.STREAM,this.responseType=""}};function pc(S){S=S||{};const y=this.context,v=(0,Ee.default)(y).getInstance();let _,I=_s(y).create({errHandler:S.errHandler,dashMetrics:S.dashMetrics,mediaPlayerModel:S.mediaPlayerModel,errors:Y});return _={load:function(w,z,F){const x=function(H,G){z.resolved=!0,z.resolvedContent=H||null,v.trigger(P.default.XLINK_ELEMENT_LOADED,{element:z,resolveObject:F,error:H||G?null:new Ce.default(Y.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Y.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+w)})};if(w==="urn:mpeg:dash:resolve-to-zero:2013")x(null,!0);else{const H=new mc(w,_e.HTTPRequest.XLINK_EXPANSION_TYPE);I.load({request:H,success:function(G){x(G)},error:function(){x(null)}})}},reset:function(){I&&(I.abort(),I=null)}},_}pc.__dashjs_factory_name="XlinkLoader";var to=xe.default.getClassFactory(pc);const Ar="onLoad";function yc(S){S=S||{};let y=this.context,v=(0,Ee.default)(y).getInstance();const _=jt(y).getInstance();let I,w,z,F;function x(B,Z,ne){let ie,re,se={};se.elements=B,se.type=Z,se.resolveType=ne,se.elements.length===0&&G(se);for(let oe=0;oe<se.elements.length;oe++)ie=se.elements[oe],re=_.isHTTPURL(ie.url)?ie.url:ie.originalContent.BaseURL+ie.url,F.load(re,ie,se)}function H(B){let Z,ne,ie="";if(Z=B.element,ne=B.resolveObject,Z.resolvedContent){let re=0;Z.resolvedContent.indexOf("<?xml")===0&&(re=Z.resolvedContent.indexOf("?>")+2),ie=Z.resolvedContent.substr(0,re)+"<response>"+Z.resolvedContent.substr(re)+"</response>",Z.resolvedContent=w.parseXml(ie).response}(function(re){let se,oe;for(se=0;se<re.elements.length;se++)if(oe=re.elements[se],oe.resolved===!1)return!1;return!0})(ne)&&G(ne)}function G(B){let Z,ne,ie=[];if(function(re){let se,oe,Ae,Q,U,V,$=[];for(Q=re.elements.length-1;Q>=0;Q--){if(se=re.elements[Q],oe=se.type,se.resolvedContent){if(se.resolvedContent)for(U=0;U<se.resolvedContent[oe].length;U++)Ae=se.resolvedContent[oe][U],$.push(Ae)}else delete se.originalContent["xlink:actuate"],delete se.originalContent["xlink:href"],$.push(se.originalContent);for(se.parentElement[oe].splice(se.index,1),V=0;V<$.length;V++)se.parentElement[oe].splice(se.index+V,0,$[V]);$=[]}re.elements.length>0&&w.getIron().run(z)}(B),B.resolveType==="onActuate"&&v.trigger(P.default.XLINK_READY,{manifest:z}),B.resolveType===Ar)switch(B.type){case k.default.PERIOD:for(Z=0;Z<z[k.default.PERIOD].length;Z++)ne=z[k.default.PERIOD][Z],ne.hasOwnProperty(k.default.ADAPTATION_SET)&&(ie=ie.concat(D(ne[k.default.ADAPTATION_SET],ne,k.default.ADAPTATION_SET,Ar))),ne.hasOwnProperty(k.default.EVENT_STREAM)&&(ie=ie.concat(D(ne[k.default.EVENT_STREAM],ne,k.default.EVENT_STREAM,Ar)));x(ie,k.default.ADAPTATION_SET,Ar);break;case k.default.ADAPTATION_SET:v.trigger(P.default.XLINK_READY,{manifest:z})}}function D(B,Z,ne,ie){let re,se,oe,Ae=[];for(se=B.length-1;se>=0;se--)re=B[se],re.hasOwnProperty("xlink:href")&&re["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&B.splice(se,1);for(se=0;se<B.length;se++)re=B[se],re.hasOwnProperty("xlink:href")&&re.hasOwnProperty("xlink:actuate")&&re["xlink:actuate"]===ie&&(oe=M(re["xlink:href"],Z,ne,se,ie,re),Ae.push(oe));return Ae}function M(B,Z,ne,ie,re,se){return{url:B,parentElement:Z,type:ne,index:ie,resolveType:re,originalContent:se,resolvedContent:null,resolved:!1}}return I={resolveManifestOnLoad:function(B){let Z;z=B,z.Period?(Z=D(z.Period,z,k.default.PERIOD,Ar),x(Z,k.default.PERIOD,Ar)):v.trigger(P.default.XLINK_READY,{manifest:z})},setParser:function(B){B&&(w=B)},reset:function(){v.off(P.default.XLINK_ELEMENT_LOADED,H,I),F&&(F.reset(),F=null)}},v.on(P.default.XLINK_ELEMENT_LOADED,H,I),F=to(y).create({errHandler:S.errHandler,dashMetrics:S.dashMetrics,mediaPlayerModel:S.mediaPlayerModel,settings:S.settings}),I}yc.__dashjs_factory_name="XlinkController";var no=xe.default.getClassFactory(yc);function jo(S){function y(I,w){for(let z in I)w.hasOwnProperty(z)||(w[z]=I[z])}function v(I,w,z){for(let F=0,x=I.length;F<x;++F){const H=I[F];if(w[H.name])if(z[H.name]){if(H.merge){const G=w[H.name],D=z[H.name];typeof G=="object"&&typeof D=="object"?y(G,D):z[H.name]=G+D}}else z[H.name]=w[H.name]}}function _(I,w){for(let z=0,F=I.children.length;z<F;++z){const x=I.children[z],H=w[x.name];if(H)for(let G=0,D=H.length;G<D;++G){const M=H[G];v(I.properties,w,M),_(x,M)}}}return{run:function(I){if(I===null||typeof I!="object")return I;if(I.Period&&"period"in S){const w=S.period,z=I.Period;for(let F=0,x=z.length;F<x;++F){const H=z[F];if(_(w,H),"adaptationset"in S){const G=H.AdaptationSet;if(G){const D=S.adaptationset;for(let M=0,B=G.length;M<B;++M)_(D,G[M])}}}}return I}}}jo.__dashjs_factory_name="ObjectIron";var ks=xe.default.getClassFactory(jo),Ji=class{constructor(S,y){this._test=S,this._converter=y}get test(){return this._test}get converter(){return this._converter}};const zr=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var Fr=class extends Ji{constructor(){super((S,y,v)=>{const _=[k.default.MIN_BUFFER_TIME,k.default.MEDIA_PRESENTATION_DURATION,k.default.MINIMUM_UPDATE_PERIOD,k.default.TIMESHIFT_BUFFER_DEPTH,k.default.MAX_SEGMENT_DURATION,k.default.MAX_SUBSEGMENT_DURATION,k.default.SUGGESTED_PRESENTATION_DELAY,k.default.START,q.default.START_TIME,k.default.DURATION],I=_.length;for(let w=0;w<I;w++)if(y===_[w])return zr.test(v);return!1},S=>{const y=zr.exec(S);let v=31536e3*parseFloat(y[3]||0)+2592e3*parseFloat(y[5]||0)+86400*parseFloat(y[7]||0)+3600*parseFloat(y[9]||0)+60*parseFloat(y[11]||0)+parseFloat(y[13]||0);return y[1]!==void 0&&(v=-v),v})}};const qo=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var Ec=class extends Ji{constructor(){super((S,y,v)=>qo.test(v),S=>{const y=qo.exec(S);let v;if(v=Date.UTC(parseInt(y[1],10),parseInt(y[2],10)-1,parseInt(y[3],10),parseInt(y[4],10),parseInt(y[5],10),y[6]&&parseInt(y[6],10)||0,y[7]&&1e3*parseFloat(y[7])||0),y[9]&&y[10]){const _=60*parseInt(y[9],10)+parseInt(y[10],10);v+=(y[8]==="+"?-1:1)*_*60*1e3}return new Date(v)})}};const ao=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Go=[k.default.ID];var Ds=class extends Ji{constructor(){super((S,y,v)=>ao.test(v)&&Go.indexOf(y)===-1,S=>parseFloat(S))}},_i=class extends Ji{constructor(){super((S,y)=>{const v={[k.default.ADAPTATION_SET]:[k.default.LANG],[k.default.REPRESENTATION]:[k.default.LANG],[k.default.CONTENT_COMPONENT]:[k.default.LANG],[k.default.LABEL]:[k.default.LANG],[k.default.GROUP_LABEL]:[k.default.LANG]};if(v.hasOwnProperty(S)){let _=v[S];return _!==void 0&&_.indexOf(y)>=0}return!1},S=>eo(S)||String(S))}},Ho=class{constructor(S){var y;this._name=S,this._merge=(y=S)&&y.length&&y.charAt(0)===y.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},Cs=class{constructor(S,y,v){this._name=S||"",this._properties=[],this._children=v||[],Array.isArray(y)&&y.forEach(_=>{this._properties.push(new Ho(_))})}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},tg=class extends Cs{constructor(){const S=[k.default.PROFILES,k.default.WIDTH,k.default.HEIGHT,k.default.SAR,k.default.FRAMERATE,k.default.AUDIO_SAMPLING_RATE,k.default.MIME_TYPE,k.default.SEGMENT_PROFILES,k.default.CODECS,k.default.MAXIMUM_SAP_PERIOD,k.default.START_WITH_SAP,k.default.MAX_PLAYOUT_RATE,k.default.CODING_DEPENDENCY,k.default.SCAN_TYPE,k.default.FRAME_PACKING,k.default.AUDIO_CHANNEL_CONFIGURATION,k.default.CONTENT_PROTECTION,k.default.INBAND_EVENT_STREAM];super(k.default.ADAPTATION_SET,S,[new Cs(k.default.REPRESENTATION,S,[new Cs(k.default.SUB_REPRESENTATION,S)])])}},ng=class extends Cs{constructor(){const S=[k.default.SEGMENT_BASE,k.default.SEGMENT_TEMPLATE,k.default.SEGMENT_LIST];super(k.default.PERIOD,S,[new Cs(k.default.ADAPTATION_SET,S,[new Cs(k.default.REPRESENTATION,S)])])}};const ef={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&apos;":"'"};function ni(S,y){const v=y.split(/(&[#a-zA-Z0-9]+;)/);if(v.length<=1)return y;for(let _=1;_<v.length;_+=2){const I=v[_];if(I.charAt(1)==="#"){let w;w=I.charAt(2)==="x"?parseInt(I.substring(3,I.length-1),16):parseInt(I.substring(2,I.length-1),10),!isNaN(w)&&w>=0&&w<=1114111&&(v[_]=String.fromCodePoint(w))}else S.hasOwnProperty(I)&&(v[_]=S[I])}return v.join("")}function bc(S,y){var v=(y=y||{}).pos||0,_=!!y.keepComments,I=!!y.keepWhitespace,w=y.attrMatchers||[],z=y.nodesAsArray||[],F="<",x=60,H=">",G=62,D=45,M=47,B=33,Z=39,ne=34,ie=91,re=93;function se(Te,ge){for(var ve=[];S[v];)if(S.charCodeAt(v)==x){if(S.charCodeAt(v+1)===M){var Me=v+2;if(v=S.indexOf(H,v),S.substring(Me,v).indexOf(Te)==-1){var ze=S.substring(0,v).split(`
`);throw new Error(`Unexpected close tag
Line: `+(ze.length-1)+`
Column: `+(ze[ze.length-1].length+1)+`
Char: `+S[v])}return v+1&&(v+=1),ve}if(S.charCodeAt(v+1)===B){if(S.charCodeAt(v+2)==D){const ue=v;for(;v!==-1&&(S.charCodeAt(v)!==G||S.charCodeAt(v-1)!=D||S.charCodeAt(v-2)!=D||v==-1);)v=S.indexOf(H,v+1);v===-1&&(v=S.length),_&&ve.push(S.substring(ue,v+1))}else{if(S.charCodeAt(v+2)===ie&&S.charCodeAt(v+8)===ie&&S.substr(v+3,5).toLowerCase()==="cdata"){var K=S.indexOf("]]>",v);K==-1?(ve.push(S.substr(v+9)),v=S.length):(ve.push(S.substring(v+9,K)),v=K+3);continue}{const ue=v+1;v+=2;for(var X=!1;(S.charCodeAt(v)!==G||X===!0)&&S[v];)S.charCodeAt(v)===ie?X=!0:X===!0&&S.charCodeAt(v)===re&&(X=!1),v++;ve.push(S.substring(ue,v))}}v++;continue}var Se=V();if(ve.push(Se),Se.tagName[0]==="?"&&(ve.push(...Se.children),Se.children=[]),ge){let ue=Se.tagName;z.indexOf(ue)!==-1?(ge[ue]||(ge[ue]=[]),ge[ue].push(Se)):ge[ue]=Se}}else{var ye=(J=void 0,J=v,(v=S.indexOf(F,v)-1)==-2&&(v=S.length),ni(ef,S.slice(J,v+1)));I||(ye=ye.trim()),ge?ge.__text=ye:ve.push(ye),v++}var J;return ve}function oe(Te,ge,ve){if(Te==="S")return parseInt(ve);let Me=ni(ef,ve);return w.forEach(ze=>{ze.test(Te,ge,ve)&&(Me=ze.converter(ve))}),Me}var Ae=`\r
	>/= `;function Q(){for(var Te=v;Ae.indexOf(S[v])===-1&&S[v];)v++;return S.slice(Te,v)}var U=y.noChildNodes||["img","br","input","meta","link","hr"];function V(){v++;const Te=Q();let ge=[],ve={tagName:Te},Me=ve.tagName.indexOf(":");for(Me!==-1&&(ve.__prefix=ve.tagName.substr(0,Me),ve.tagName=ve.tagName.substr(Me+1));S.charCodeAt(v)!==G&&S[v];){var ze=S.charCodeAt(v);if(ze>64&&ze<91||ze>96&&ze<123){for(var K=Q(),X=S.charCodeAt(v);X&&X!==Z&&X!==ne&&!(X>64&&X<91||X>96&&X<123)&&X!==G;)v++,X=S.charCodeAt(v);if(X===Z||X===ne){var Se=(ye=void 0,J=void 0,ye=S[v],J=v+1,v=S.indexOf(ye,J),S.slice(J,v));if(v===-1)return ve}else Se=null,v--;Se=oe(ve.tagName,K,Se),ve[K]=Se}v++}var ye,J;if(S.charCodeAt(v-1)!==M)if(Te=="script"){var ue=v+1;v=S.indexOf("<\/script>",v),ge=[S.slice(ue,v)],v+=9}else Te=="style"?(ue=v+1,v=S.indexOf("</style>",v),ge=[S.slice(ue,v)],v+=8):U.indexOf(Te)===-1?(v++,ge=se(Te,ve)):v++;else v++;return ve.__children=ge,ve}var $,ce=null;if(y.attrValue!==void 0)for(y.attrName=y.attrName||"id",ce=[];$=new RegExp("\\s"+y.attrName+`\\s*=['"]`+y.attrValue+`['"]`).exec(S),(v=$?$.index:-1)!==-1;)(v=S.lastIndexOf("<",v))!==-1&&ce.push(V()),S=S.substr(v),v=0;else ce=y.parseNode?V():se("");return y.filter&&(ce=hl(ce,y.filter)),y.simplify?fl(Array.isArray(ce)?ce:[ce]):(y.setPos&&(ce.pos=v),ce)}function fl(S){var y={};if(!S.length)return"";if(S.length===1&&typeof S[0]=="string")return S[0];for(var v in S.forEach(function(_){if(typeof _=="object"){y[_.tagName]||(y[_.tagName]=[]);var I=fl(_.children);y[_.tagName].push(I),Object.keys(_.attributes).length&&typeof I!="string"&&(I._attributes=_.attributes)}}),y)y[v].length==1&&(y[v]=y[v][0]);return y}function hl(S,y){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";var I=[];return S.forEach(function(w,z){if(typeof w=="object"&&y(w,z,v,_)&&I.push(w),w.children){var F=hl(w.children,y,v+1,(_?_+".":"")+z+"."+w.tagName);I=I.concat(F)}}),I}const Tc=[k.default.PERIOD,k.default.BASE_URL,k.default.ADAPTATION_SET,k.default.REPRESENTATION,k.default.CONTENT_PROTECTION,k.default.ROLE,k.default.ACCESSIBILITY,k.default.AUDIO_CHANNEL_CONFIGURATION,k.default.CONTENT_COMPONENT,k.default.ESSENTIAL_PROPERTY,k.default.LABEL,k.default.S,k.default.SEGMENT_URL,k.default.EVENT,k.default.EVENT_STREAM,k.default.LOCATION,k.default.SERVICE_DESCRIPTION,k.default.SUPPLEMENTAL_PROPERTY,k.default.METRICS,k.default.REPORTING,k.default.PATCH_LOCATION,k.default.REPLACE,k.default.ADD,k.default.REMOVE,k.default.UTC_TIMING,k.default.INBAND_EVENT_STREAM,k.default.PRODUCER_REFERENCE_TIME,k.default.CONTENT_STEERING];function Ls(S){S=S||{};const y=this.context,v=S.debug;let _,I,w,z;function F(x){try{let H=bc(x,{parseNode:!0,attrMatchers:w,nodesAsArray:Tc}),G={};if(H.tagName.toLowerCase().indexOf("xml")!==-1)for(let D in H){if(Array.isArray(H[D])){G[D]=H[D][0];break}if(typeof H[D]=="object"){G[D]=H[D];break}}else G[H.tagName]=H,delete H.tagName;return G}catch{return null}}return _={getIron:function(){return z},parseXml:F,parse:function(x){let H;const G=window.performance.now();if(H=F(x),!H)throw new Error("failed to parse the manifest");H.Patch?(H=H.Patch,H.add&&H.add.forEach(M=>z.run(M)),H.replace&&H.replace.forEach(M=>z.run(M))):(H=H.MPD,z.run(H));const D=window.performance.now();return I.info("Parsing complete: "+(D-G).toPrecision(3)+"ms"),H.protocol="DASH",H}},I=v.getLogger(_),w=[new Fr,new Ec,new Ds,new _i],z=ks(y).create({adaptationset:new tg,period:new ng}),_}Ls.__dashjs_factory_name="DashParser";var gl=xe.default.getClassFactory(Ls);function tf(S){S=S||{};const y=this.context,v=S.debug,_=S.settings,I=(0,Ee.default)(y).getInstance(),w=jt(y).getInstance();let z,F,x,H,G,D=S.mssHandler,M=S.errHandler;function B(Z){I.trigger(P.default.INTERNAL_MANIFEST_LOADED,{manifest:Z.manifest})}return z={load:function(Z){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const re=new Date,se=new mc(Z,_e.HTTPRequest.MPD_TYPE);ne&&(se.serviceLocation=ne),ie&&(se.queryParams=ie),se.startDate||(se.startDate=re),I.trigger(P.default.MANIFEST_LOADING_STARTED,{request:se}),x.load({request:se,success:function(oe,Ae,Q){if(!H)return;let U,V,$;if(Q&&Q!==Z?(V=w.parseBaseUrl(Q),U=Q):(w.isRelative(Z)&&(Z=w.resolve(Z,window.location.href)),V=w.parseBaseUrl(Z)),Ae!="No Content")if(G===null&&(G=function(ce){let Te=null;return ce.indexOf("SmoothStreamingMedia")>-1?(D&&(Te=D.createMssParser(),D.createMssFragmentProcessor(),D.registerEvents()),Te):ce.indexOf("MPD")>-1||ce.indexOf("Patch")>-1?gl(y).create({debug:v}):Te}(oe)),G!==null){H.setParser(G);try{$=G.parse(oe)}catch{return void I.trigger(P.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ce.default(Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${Z}`)})}if($){if($.url=U||Z,$.originalUrl||($.originalUrl=$.url),_&&_.get().streaming.enableManifestDurationMismatchFix&&$.mediaPresentationDuration&&$.Period.length>1){const ce=$.Period.reduce((Te,ge)=>Te+ge.duration,0);!isNaN(ce)&&$.mediaPresentationDuration>ce&&(F.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),$.mediaPresentationDuration=ce)}$.baseUri=V,$.loadedTime=new Date,H.resolveManifestOnLoad($),I.trigger(P.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:oe})}else I.trigger(P.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ce.default(Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${Z}`)})}else I.trigger(P.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ce.default(Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${Z}`)});else I.trigger(P.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(oe,Ae,Q){I.trigger(P.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ce.default(Y.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Y.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${Z}, ${Q}`)})}})},reset:function(){I.off(P.default.XLINK_READY,B,z),D&&D.reset(),H&&(H.reset(),H=null),x&&(x.abort(),x=null)}},F=v.getLogger(z),I.on(P.default.XLINK_READY,B,z),x=_s(y).create({errHandler:S.errHandler,dashMetrics:S.dashMetrics,mediaPlayerModel:S.mediaPlayerModel,urlUtils:w,constants:q.default,dashConstants:k.default,errors:Y,requestTimeout:S.settings.get().streaming.manifestRequestTimeout}),H=no(y).create({errHandler:M,dashMetrics:S.dashMetrics,mediaPlayerModel:S.mediaPlayerModel,settings:S.settings}),G=null,z}tf.__dashjs_factory_name="ManifestLoader";var nf=xe.default.getClassFactory(tf);function af(){let S;const y=this.context,v=(0,Ee.default)(y).getInstance();return S={error:function(_){v.trigger(P.default.ERROR,{error:_})}},S}af.__dashjs_factory_name="ErrorHandler";var rf=xe.default.getSingletonFactory(af),rs=t(559);function Vo(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I,w,z,F,x;function H(B,Z,ne){const ie=D(B,Z,ne);return I.isCodecSupportedBasedOnTestedConfigurations(ie,B)}function G(B,Z,ne,ie,re){const se=D(B,Z,ne),oe=JSON.stringify(se);ie.has(oe)||(ie.add(oe),re.push(se))}function D(B,Z,ne){let ie=null;switch(B){case q.default.VIDEO:ie=function(re,se){let oe={codec:se,width:re.width||null,height:re.height||null,framerate:_.getFramerate(re)||null,bitrate:re.bandwidth||null,isSupported:!0};w.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&Object.assign(oe,function(U){let V={colorGamut:null,transferFunction:null,isSupported:!0};for(const $ of U.EssentialProperty||[])$.schemeIdUri===q.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes($.value.toString())?V.colorGamut=q.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:$.schemeIdUri===q.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes($.value.toString())?V.colorGamut=q.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:$.schemeIdUri===q.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes($.value.toString())?V.colorGamut=q.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:$.schemeIdUri===q.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes($.value.toString())?V.colorGamut=null:$.schemeIdUri===q.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(V.isSupported=!1),$.schemeIdUri===q.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes($.value.toString())?V.transferFunction=q.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:$.schemeIdUri===q.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes($.value.toString())?V.transferFunction=q.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:$.schemeIdUri===q.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes($.value.toString())?V.transferFunction=q.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:$.schemeIdUri===q.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes($.value.toString())?V.transferFunction=null:$.schemeIdUri===q.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(V.isSupported=!1);return V}(re));let Ae=oe.isSupported;w.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&Object.assign(oe,function(U){let V={isSupported:!0,hdrMetadataType:null};for(const $ of U.EssentialProperty||[])$.schemeIdUri===q.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&$.value===q.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?V.hdrMetadataType=q.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:$.schemeIdUri===q.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&$.value===q.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?V.hdrMetadataType=q.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:$.schemeIdUri===q.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&$.value===q.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?V.hdrMetadataType=q.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:$.schemeIdUri===q.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(V.isSupported=!1);return V}(re));let Q=oe.isSupported;return Ae&&Q||(oe.isSupported=!1),oe}(Z,ne);break;case q.default.AUDIO:ie=function(re,se){const oe=re.audioSamplingRate||null;return{codec:se,bitrate:re.bandwidth||null,samplerate:oe,isSupported:!0}}(Z,ne);break;default:return ie}return function(re,se){return re&&re[k.default.CONTENT_PROTECTION]&&re[k.default.CONTENT_PROTECTION].length>0&&(se.keySystemsMetadata=F.getSupportedKeySystemMetadataFromContentProtection(re[k.default.CONTENT_PROTECTION])),se}(Z,ie)}function M(B){if(!B||B.length===0)return!0;let Z=0;for(;Z<B.length;){if(!I.supportsEssentialProperty(B[Z]))return x.debug("[Stream] EssentialProperty not supported: "+B[Z].schemeIdUri),!1;Z+=1}return!0}return v={setConfig:function(B){B&&(B.adapter&&(_=B.adapter),B.capabilities&&(I=B.capabilities),B.settings&&(w=B.settings),B.protectionController&&(F=B.protectionController),B.customParametersModel&&(z=B.customParametersModel))},filterUnsupportedFeatures:function(B){return new Promise(Z=>{const ne=[q.default.VIDEO,q.default.AUDIO],ie=[];ne.forEach(re=>{(function(oe,Ae){if(!oe||!oe.Period||oe.Period.length===0)return[];const Q=new Set,U=[];return oe.Period.forEach(V=>{V.AdaptationSet.forEach($=>{_.getIsTypeOf($,Ae)&&$.Representation.forEach((ce,Te)=>{const ge=_.getCodec($,Te,!1);G(Ae,ce,ge,Q,U);const ve=_.getSupplementalCodecs(ce);ve.length>0&&G(Ae,ce,ve[0],Q,U)})})}),U})(B,re).forEach(oe=>{ie.push(I.runCodecSupportCheck(oe,re))})}),Promise.allSettled(ie).then(()=>(ne.forEach(re=>{(function(se,oe){oe&&oe.Period&&oe.Period.length!==0&&oe.Period.forEach(Ae=>{(function(Q,U){Q&&Q.AdaptationSet&&Q.AdaptationSet.length!==0&&(Q.AdaptationSet=Q.AdaptationSet.filter(V=>{_.getIsTypeOf(V,U)&&function(ce,Te){ce.Representation&&ce.Representation.length!==0&&(ce.Representation=ce.Representation.filter((ge,ve)=>{const Me=_.getCodec(ce,ve,!1),ze=H(Te,ge,Me);let K=function(X,Se){let ye=!1;const J=_.getSupplementalCodecs(X);return J.length>0&&(J.length>1&&x.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),ye=H(Se,X,J[0])),ye}(ge,Te);return K&&(x.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${ge.id}`),ge.codecs=ge[k.default.SUPPLEMENTAL_CODECS]),ze||K||x.warn(`[CapabilitiesFilter] Codec ${Me} not supported. Removing Representation with ID ${ge.id}`),ze||K}))}(V,U);const $=V.Representation&&V.Representation.length>0;return $||(y.trigger(P.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:V}),x.warn(`[CapabilitiesFilter] AdaptationSet with ID ${V.id?V.id:"undefined"} and codec ${V.codecs?V.codecs:"undefined"} has been removed because of no supported Representation`)),$}))})(Ae,se)})})(re,B)}),w.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(re){re&&re.Period&&re.Period.length!==0&&re.Period.forEach(se=>{se.AdaptationSet=se.AdaptationSet.filter(oe=>!oe.Representation||oe.Representation.length===0||!!M(_.getEssentialPropertiesForAdaptationSet(oe))&&(oe.Representation=oe.Representation.filter(Ae=>M(_.getEssentialPropertiesForRepresentation(Ae))),oe.Representation&&oe.Representation.length>0))})}(B),function(re){if(!re||!re.Period||re.Period.length===0)return Promise.resolve();const se=[];return re.Period.forEach(oe=>{se.push(function(Ae){return new Promise(Q=>{if(!Ae||!Ae.AdaptationSet||Ae.AdaptationSet.length===0)return void Q();const U=[];Ae.AdaptationSet.forEach(V=>{U.push(function($){return new Promise(ce=>{if(!$.Representation||$.Representation.length===0)return void ce();const Te=[];$.Representation.forEach(ge=>{Te.push(function(ve){const Me=[],ze=z.getCustomCapabilitiesFilters();return ze&&ze.length!==0?ze.forEach(K=>{Me.push(new Promise(X=>X(K(ve))))}):Me.push(Promise.resolve(!0)),Promise.all(Me)}(ge))}),Promise.all(Te).then(ge=>{$.Representation=$.Representation.filter((ve,Me)=>{let ze=ge[Me].every(K=>K);return ze||x.debug("[Stream] Representation "+ve.id+" has been removed because of unsupported CustomFilter"),ze}),ce()}).catch(ge=>{x.warn("[Stream] at least one promise rejected in CustomFilter with error: ",ge),ce()})})}(V))}),Promise.all(U).then(()=>{Ae.AdaptationSet=Ae.AdaptationSet.filter(V=>V.Representation&&V.Representation.length>0),Q()}).catch(()=>{Q()})})}(oe))}),Promise.all(se)}(B))).then(()=>{Z()}).catch(re=>{x.error(re),Z()})})}},x=(0,Ve.default)(S).getInstance().getLogger(v),v}Vo.__dashjs_factory_name="CapabilitiesFilter";var Yo=xe.default.getSingletonFactory(Vo),sf=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function ml(){let S,y;return S={initialize:function(v){if(y=new sf,!v)return null;const _=v.indexOf("#");if(_!==-1){const I=v.substr(_+1).split("&");for(let w=0,z=I.length;w<z;++w){const F=I[w],x=F.indexOf("=");if(x!==-1){const H=F.substring(0,x);y.hasOwnProperty(H)&&(y[H]=F.substr(x+1))}}}},getURIFragmentData:function(){return y}},S}ml.__dashjs_factory_name="URIFragmentModel";var lf=xe.default.getSingletonFactory(ml);function io(){let S,y,v=this.context,_=(0,Ee.default)(v).getInstance();return S={getValue:function(){return y},setValue:function(I){y=I,I&&_.trigger(P.default.MANIFEST_LOADED,{data:I})}},S}io.__dashjs_factory_name="ManifestModel";var vc=xe.default.getSingletonFactory(io);function Sc(){let S,y,v,_;const I=this.context,w=(0,W.default)(I).getInstance();function z(D,M){return isNaN(D)?0:D>0?(M&&y.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):D<-.5?(M&&y.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):D}function F(D,M){return isNaN(D)?0:D<0?(M&&y.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):D>1?(M&&y.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):D}function x(){const D=H(),M=v.getLiveDelay();return!isNaN(M)&&M>0?Math.min(D,M):D}function H(){return w.get().streaming.buffer.bufferTimeDefault>0?w.get().streaming.buffer.bufferTimeDefault:G()?20:12}function G(){return w.get().streaming.buffer.fastSwitchEnabled!==null?w.get().streaming.buffer.fastSwitchEnabled:!v.getLowLatencyModeEnabled()}return S={getCatchupMaxDrift:function(){if(!isNaN(w.get().streaming.liveCatchup.maxDrift)&&w.get().streaming.liveCatchup.maxDrift>=0)return w.get().streaming.liveCatchup.maxDrift;const D=_.getServiceDescriptionSettings();return D&&D.liveCatchup&&!isNaN(D.liveCatchup.maxDrift)&&D.liveCatchup.maxDrift>=0?D.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return w.get().streaming.liveCatchup.enabled!==null?w.get().streaming.liveCatchup.enabled:v.getInitialCatchupModeActivated()},getBufferTimeDefault:x,getBufferTimeDefaultUnadjusted:H,getFastSwitchEnabled:G,getInitialBufferLevel:function(){const D=w.get().streaming.buffer.initialBufferLevel;return isNaN(D)||D<0?0:Math.min(x(),D)},getRetryAttemptsForType:function(D){const M=isNaN(w.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:w.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return v.getLowLatencyModeEnabled()?w.get().streaming.retryAttempts[D]*M:w.get().streaming.retryAttempts[D]},getRetryIntervalsForType:function(D){const M=isNaN(w.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:w.get().streaming.retryIntervals.lowLatencyReductionFactor;return v.getLowLatencyModeEnabled()?w.get().streaming.retryIntervals[D]/M:w.get().streaming.retryIntervals[D]},getCatchupPlaybackRates:function(D){const M=w.get().streaming.liveCatchup.playbackRate;if(!isNaN(M.min)||!isNaN(M.max))return{min:z(M.min,D),max:F(M.max,D)};const B=_.getServiceDescriptionSettings();if(B&&B.liveCatchup&&(!isNaN(B.liveCatchup.playbackRate.min)||!isNaN(B.liveCatchup.playbackRate.max))){const Z=B.liveCatchup.playbackRate;return{min:z(Z.min,D),max:F(Z.max,D)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(D,M){try{const B=w.get().streaming.abr[D][M];if(!isNaN(B)&&B!==-1)return B;const Z=_.getServiceDescriptionSettings();return Z&&Z[D]&&!isNaN(Z[D][M])?Z[D][M]:-1}catch{return-1}},setConfig:function(D){D.playbackController&&(v=D.playbackController),D.serviceDescriptionController&&(_=D.serviceDescriptionController)},reset:function(){}},y=(0,Ve.default)(I).getInstance().getLogger(S),S}Sc.__dashjs_factory_name="MediaPlayerModel";var Ko=xe.default.getSingletonFactory(Sc);const pl={DEFAULT:.5,STRONG:1,WEAK:0};function Ns(S,y,v,_){let I,w,z,F,x;return w=S===void 0?null:S,z=function(H){let G=pl.DEFAULT;return H!==pl.DEFAULT&&H!==pl.STRONG&&H!==pl.WEAK||(G=H),G}(v),F=y===void 0?null:y,x=_===void 0?null:_,I={representation:w,reason:F,rule:x,priority:z},I}Ns.__dashjs_factory_name="SwitchRequest";const ro=xe.default.getClassFactory(Ns);ro.NO_CHANGE=null,ro.PRIORITY=pl,xe.default.updateClassFactory(Ns.__dashjs_factory_name,ro);var ya=ro;function Ur(S){S=S||{};const y=this.context,v=S.dashMetrics;let _,I;return _={getSwitchRequest:function(w){try{const z=ya(y).create();z.rule=this.getClassName();const F=w.getMediaInfo(),x=w.getMediaType(),H=v.getCurrentBufferState(x),G=w.getScheduleController(),D=w.getAbrController(),M=w.getStreamInfo(),B=M?M.id:null,Z=M&&M.manifestInfo?M.manifestInfo.isDynamic:null,ne=w.getThroughputController(),ie=ne.getSafeAverageThroughput(x),re=ne.getAverageLatency(x);return isNaN(ie)||!H||D.getAbandonmentStateFor(B,x)===ee.ALLOW_LOAD&&(H.state===ee.BUFFER_LOADED||Z)&&(z.representation=D.getOptimalRepresentationForBitrate(F,ie,!0),z.reason={throughput:ie,latency:re,message:`[ThroughputRule]: Switching to Representation with bitrate ${z.representation?z.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${ie}`},G.setTimeToLoadDelay(0)),z}catch(z){return I.error(z),ya(y).create()}},reset:function(){}},I=(0,Ve.default)(y).getInstance().getLogger(_),_}Ur.__dashjs_factory_name="ThroughputRule";var $o=xe.default.getClassFactory(Ur);function Wo(S){S=S||{};const y=this.context,v=(0,Ee.default)(y).getInstance(),_=S.dashMetrics,I=(0,W.default)(y).getInstance();let w,z,F;function x(){const D=I.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;F={},F[q.default.VIDEO]={ignoreCount:D},F[q.default.AUDIO]={ignoreCount:D}}function H(){x()}function G(D){isNaN(D.startTime)||D.mediaType!==q.default.AUDIO&&D.mediaType!==q.default.VIDEO||F[D.mediaType].ignoreCount>0&&F[D.mediaType].ignoreCount--}return w={getSwitchRequest:function(D){const M=ya(y).create();if(M.rule=this.getClassName(),!D||!D.hasOwnProperty("getMediaType"))return M;const B=D.getMediaType(),Z=_.getCurrentBufferState(B),ne=D.getRepresentation().fragmentDuration;if(!function(se,oe,Ae){return!se.getLowLatencyModeEnabled()&&F[oe].ignoreCount<=0&&Ae}(D.getScheduleController().getPlaybackController(),B,ne))return M;const ie=D.getMediaInfo(),re=D.getAbrController();if(Z&&Z.state===ee.BUFFER_EMPTY)z.debug("["+B+"] Switch to index 0; buffer is empty."),M.representation=re.getOptimalRepresentationForBitrate(ie,0,!0),M.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const se=D.getThroughputController(),oe=_.getCurrentBufferLevel(B),Ae=se.getAverageThroughput(B,null,NaN)*I.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*oe/ne;if(isNaN(Ae)||Ae<=0)return M;M.representation=re.getOptimalRepresentationForBitrate(ie,Ae,!0),M.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:Ae}}return M},reset:function(){x(),v.off(be.default.PLAYBACK_SEEKING,H,w),v.off(P.default.BYTES_APPENDED_END_FRAGMENT,G,w)}},z=(0,Ve.default)(y).getInstance().getLogger(w),x(),v.on(be.default.PLAYBACK_SEEKING,H,w),v.on(P.default.BYTES_APPENDED_END_FRAGMENT,G,w),w}Wo.__dashjs_factory_name="InsufficientBufferRule";var ss=xe.default.getClassFactory(Wo);function Br(S){const y=(S=S||{}).mediaPlayerModel,v=S.dashMetrics,_=this.context,I=(0,W.default)(_).getInstance();let w,z,F;function x(){F={}}return w={shouldAbandon:function(H){const G=ya(_).create();G.rule=this.getClassName();try{if(!H)return G;const D=H.getCurrentRequest();if(!isNaN(D.index)){if(D.firstByteDate===null||F.hasOwnProperty(D.index))return G;const M=y.getBufferTimeDefault(),B=H.getMediaType();if(v.getCurrentBufferLevel(B)>M)return G;const Z=Date.now()-D.firstByteDate.getTime();if(D.traces.length>=I.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&Z>I.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&D.bytesLoaded<D.bytesTotal)return function(ne,ie,re){const se=ne.getMediaInfo(),oe=ne.getMediaType(),Ae=ie.traces.reduce((Te,ge)=>Te+ge.b[0],0)-ie.traces[0].b[0],Q=Math.max(ie.traces.reduce((Te,ge)=>Te+ge.d,0)-ie.traces[0].d,1),U=Math.round(8*Ae/Q),V=Number(8*ie.bytesTotal/U/1e3).toFixed(2),$=ne.getRepresentation(),ce=ne.getAbrController();if(V<ie.duration*I.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||ce.isPlayingAtLowestQuality($))return re;if(!F.hasOwnProperty(ie.index)){const Te=ne.getAbrController(),ge=ie.bytesTotal-ie.bytesLoaded,ve=Te.getOptimalRepresentationForBitrate(se,U,!0),Me=ie.representation;ge>ie.bytesTotal*ve.bitrateInKbit/Me.bitrateInKbit&&(re.representation=ve,re.reason={throughputInKbit:U,message:`[AbandonRequestRule][${oe} is asking to abandon and switch to quality to ${ve.absoluteIndex}. The measured bandwidth was ${U} kbit/s`},F[ie.index]=!0)}return re}(H,D,G)}return G}catch(D){return z.error(D),G}},reset:x},z=(0,Ve.default)(_).getInstance().getLogger(w),x(),w}Br.__dashjs_factory_name="AbandonRequestsRule";var so=xe.default.getClassFactory(Br);function Xo(){const S=this.context,y=(0,W.default)(S).getInstance();let v;return v={getSwitchRequest:function(_){const I=ya(S).create();if(I.rule=this.getClassName(),!_||!_.hasOwnProperty("getDroppedFramesHistory"))return I;const w=_.getDroppedFramesHistory();if(!w)return I;const z=_.getStreamInfo().id,F=_.getMediaInfo(),x=_.getAbrController(),H=w.getFrameHistory(z);if(!H||Object.keys(H).length===0)return I;let G=0,D=0;const M=x.getPossibleVoRepresentationsFilteredBySettings(F,!0);let B=null;for(let Z=1;Z<M.length;Z++){const ne=M[Z];if(ne&&H[ne.id]&&(G=H[ne.id].droppedVideoFrames,D=H[ne.id].totalVideoFrames,D>y.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&G/D>y.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){B=M[Z-1];break}}return B&&(I.representation=B,I.reason={droppedFrames:G,message:`[DroppedFramesRule]: Switching to index ${B.absoluteIndex}. Dropped Frames: ${G}, Total Frames: ${D}`}),I}},v}Xo.__dashjs_factory_name="DroppedFramesRule";var _c=xe.default.getClassFactory(Xo);function yl(){const S=this.context,y=(0,W.default)(S).getInstance();let v;return v={getSwitchRequest:function(_){const I=ya(S).create();if(I.rule=this.getClassName(),!_)return I;const w=_.getStreamInfo().id,z=_.getMediaType(),F=_?_.getSwitchRequestHistory():null,x=F?F.getSwitchRequests(w,z):{},H=_.getAbrController(),G=_.getMediaInfo(),D=H.getPossibleVoRepresentationsFilteredBySettings(G,!0);let M=0,B=0;for(let Z=0;Z<D.length;Z++){const ne=D[Z];if(ne&&x[ne.id]&&(M+=x[ne.id].drops,B+=x[ne.id].noDrops,M+B>=y.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&M/B>y.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){I.representation=Z>0&&x[ne.id].drops>0?D[Z-1]:ne,I.reason={drops:M,noDrops:B,message:`[SwitchHistoryRule]: Switch to index: ${I.representation.absoluteIndex} samples: ${M+B} drops:  ${M}`};break}}return I}},v}yl.__dashjs_factory_name="SwitchHistoryRule";var lo=xe.default.getClassFactory(yl);const jr="BOLA_STATE_ONE_BITRATE",oo="BOLA_STATE_STARTUP",ls="BOLA_STATE_STEADY",qr=10;function Ac(S){S=S||{};const y=this.context,v=S.dashMetrics,_=S.mediaPlayerModel,I=(0,Ee.default)(y).getInstance(),w=ru(y).getInstance();let z,F,x;function H(V){const $=V.mediaType,ce=V.streamId,Te=$===q.default.AUDIO?[q.default.AUDIO]:x[ce];for(const ge in Te)x[ce]&&x[ce].hasOwnProperty(ge)&&x[ce][ge].state===ls&&(x[ce][ge].placeholderBuffer=0)}function G(V){const $=V.streamId;for(const ce in x[$])if(x[$].hasOwnProperty(ce)){const Te=x[$][ce];Te.state!==jr&&(Te.state=oo,D(Te))}}function D(V){V.placeholderBuffer=0,V.mostAdvancedSegmentStart=NaN,V.lastSegmentWasReplacement=!1,V.lastSegmentStart=NaN,V.lastSegmentDurationS=NaN,V.lastSegmentRequestTimeMs=NaN,V.lastSegmentFinishTimeMs=NaN}function M(V){try{if(V&&V.metric===ee.HTTP_REQUEST&&V.value&&V.value.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE&&V.value.trace&&V.value.trace.length){const $=x[V.value._streamId]&&x[V.value._streamId][V.mediaType]?x[V.value._streamId][V.mediaType]:null;$&&$.state!==jr&&($.lastSegmentRequestTimeMs=V.value.trequest.getTime(),$.lastSegmentFinishTimeMs=V.value._tfinish.getTime(),B($,V.mediaType))}}catch($){F.error($)}}function B(V,$){if(!isNaN(V.lastSegmentStart)&&!isNaN(V.lastSegmentRequestTimeMs)&&!isNaN(V.placeholderBuffer)){if(V.placeholderBuffer*=.99,!isNaN(V.lastSegmentFinishTimeMs)){const ce=v.getCurrentBufferLevel($)+.001*(V.lastSegmentFinishTimeMs-V.lastSegmentRequestTimeMs),Te=re(V,V.currentRepresentation),ge=Math.max(0,Te-ce);V.placeholderBuffer=Math.min(ge,V.placeholderBuffer)}V.lastSegmentWasReplacement&&!isNaN(V.lastSegmentDurationS)&&(V.placeholderBuffer+=V.lastSegmentDurationS),V.lastSegmentStart=NaN,V.lastSegmentRequestTimeMs=NaN}}function Z(V){if(V&&x[V.streamId]&&x[V.streamId][V.mediaType]){const $=x[V.streamId][V.mediaType];$&&$.state!==jr&&($.currentRepresentation=V.newRepresentation)}}function ne(V,$,ce){const Te=ce.reduce((Me,ze,K)=>ze>ce[Me]?K:Me,0);if(Te===0)return null;const ge=Math.max(V,qr+2*$.length),ve=(ce[Te]-1)/(ge/qr-1);return{gp:ve,Vp:qr/ve}}function ie(V,$){const ce=_.getBufferTimeDefault();if(V.bufferTimeDefault!==ce){const Te=ne(ce,V.representations,V.utilities);if(Te.Vp!==V.Vp||Te.gp!==V.gp){const ge=v.getCurrentBufferLevel($);let ve=ge+V.placeholderBuffer;ve-=qr,ve*=Te.Vp/V.Vp,ve+=qr,V.bufferTimeDefault=ce,V.Vp=Te.Vp,V.gp=Te.gp,V.placeholderBuffer=Math.max(0,ve-ge)}}}function re(V,$){return V.Vp*(V.utilities[$.absoluteIndex]+V.gp)}function se(V){if(V&&V.chunk&&V.chunk.representation.mediaInfo&&x[V.streamId]){const $=x[V.streamId][V.chunk.representation.mediaInfo.type];if($&&$.state!==jr){const ce=V.chunk.start;isNaN($.mostAdvancedSegmentStart)||ce>$.mostAdvancedSegmentStart?($.mostAdvancedSegmentStart=ce,$.lastSegmentWasReplacement=!1):$.lastSegmentWasReplacement=!0,$.lastSegmentStart=ce,$.lastSegmentDurationS=V.chunk.duration,$.currentRepresentation=V.chunk.representation,B($,V.chunk.representation.mediaInfo.type)}}}function oe(){U()}function Ae(V,$){const ce=$.absoluteIndex,Te=$.bandwidth,ge=V.utilities[ce];let ve=0;for(let Me=ce-1;Me>=0;--Me)if(V.utilities[Me]<V.utilities[ce]){const ze=V.representations[Me].bandwidth,K=V.utilities[Me],X=V.Vp*(V.gp+(Te*K-ze*ge)/(Te-ze));ve=Math.max(ve,X)}return ve}function Q(V){if(V&&x[V.streamId]){const $=x[V.streamId][V.mediaType];if($&&$.state!==jr){const ce=v.getCurrentBufferLevel(V.mediaType);let Te;Te=$.currentRepresentation.absoluteIndex>0?Ae($,$.currentRepresentation):qr;const ge=Math.max(0,Te-ce);$.placeholderBuffer=Math.min($.placeholderBuffer,ge)}}}function U(){x={}}return z={getSwitchRequest:function(V){try{const $=ya(y).create();V.getScheduleController().setTimeToLoadDelay(0),$.rule=this.getClassName(),$.reason=$.reason||{};const ce=function(Te){const ge=Te.getMediaType(),ve=Te.getStreamInfo().id;x[ve]||(x={},x[ve]={});let Me=x[ve][ge];return Me?Me.state!==jr&&ie(Me,ge):(Me=function(ze){const K={},X=ze.getMediaInfo(),Se=w.getPossibleVoRepresentationsFilteredBySettings(X,!0);let ye=Se.map(he=>he.bandwidth).map(he=>Math.log(he));ye=ye.map(he=>he-ye[0]+1);const J=_.getBufferTimeDefault(),ue=ne(J,Se,ye);return ue?(K.state=oo,K.representations=Se,K.utilities=ye,K.bufferTimeDefault=J,K.Vp=ue.Vp,K.gp=ue.gp,K.currentRepresentation=null,D(K)):K.state=jr,K}(Te),x[ve][ge]=Me),Me}(V);switch($.reason.state=ce.state,ce.state){case jr:break;case oo:(function(Te,ge,ve){const Me=ge.getMediaType(),ze=ge.getThroughputController().getSafeAverageThroughput(Me);if(isNaN(ze))return;const K=ge.getMediaInfo(),X=w.getOptimalRepresentationForBitrate(K,ze,!0),Se=v.getCurrentBufferLevel(Me);Te.representation=X,Te.reason.throughput=ze,ve.placeholderBuffer=Math.max(0,Ae(ve,X)-Se),ve.currentRepresentation=X,!isNaN(ve.lastSegmentDurationS)&&Se>=ve.lastSegmentDurationS&&(ve.state=ls)})($,V,ce);break;case ls:(function(Te,ge,ve){const Me=ge.getMediaType(),ze=ge.getThroughputController(),K=ge.getMediaInfo(),X=ze.getSafeAverageThroughput(Me),Se=ge.getScheduleController();(function(le,Ie){const we=Date.now();if(isNaN(le.lastSegmentFinishTimeMs)){if(!isNaN(le.lastCallTimeMs)){const Fe=.001*(we-le.lastCallTimeMs);le.placeholderBuffer+=Math.max(0,Fe)}}else{const Fe=.001*(we-le.lastSegmentFinishTimeMs);le.placeholderBuffer+=Math.max(0,Fe)}le.lastCallTimeMs=we,le.lastSegmentStart=NaN,le.lastSegmentRequestTimeMs=NaN,le.lastSegmentFinishTimeMs=NaN,ie(le,Ie)})(ve,Me);const ye=v.getCurrentBufferLevel(Me);let J=function(le,Ie){const we=le.representations.length;let Fe=NaN,je=NaN;for(let at=0;at<we;++at){let lt=(le.Vp*(le.utilities[at]-1+le.gp)-Ie)/le.representations[at].bandwidth;(isNaN(je)||lt>=je)&&(je=lt,Fe=at)}return le.representations[Fe]}(ve,ye+ve.placeholderBuffer);const ue=w.getOptimalRepresentationForBitrate(K,X,!0);J.absoluteIndex>ve.currentRepresentation.absoluteIndex&&J.absoluteIndex>ue.absoluteIndex&&(J=ue.absoluteIndex>ve.currentRepresentation.absoluteIndex?ue:ve.currentRepresentation);let he=Math.max(0,ye+ve.placeholderBuffer-re(ve,J));he<=ve.placeholderBuffer?(ve.placeholderBuffer-=he,he=0):(he-=ve.placeholderBuffer,ve.placeholderBuffer=0,w.isPlayingAtTopQuality(J)?he=0:Se.setTimeToLoadDelay(1e3*he)),Te.representation=J,Te.reason.throughput=X,Te.reason.bufferLevel=ye,Te.reason.placeholderBuffer=ve.placeholderBuffer,Te.reason.delay=he,ve.currentRepresentation=J})($,V,ce);break;default:(function(Te,ge,ve){F.debug("BOLA ABR rule invoked in bad state.");const Me=ge.getMediaInfo(),ze=ge.getMediaType(),K=ge.getThroughputController().getSafeAverageThroughput(ze);Te.representation=w.getOptimalRepresentationForBitrate(Me,K,!0),Te.reason.state=ve.state,Te.reason.throughput=K,ve.state=oo,D(ve)})($,V,ce)}return $}catch($){return F.error($),ya(y).create()}},handleNewMediaInfo:function(V){V&&V.streamInfo&&V.type&&x[V.streamInfo.id]&&x[V.streamInfo.id][V.type]&&delete x[V.streamInfo.id][V.type]},reset:function(){U(),I.off(be.default.BUFFER_EMPTY,H,z),I.off(be.default.PLAYBACK_SEEKING,G,z),I.off(be.default.METRIC_ADDED,M,z),I.off(be.default.QUALITY_CHANGE_REQUESTED,Z,z),I.off(be.default.FRAGMENT_LOADING_ABANDONED,Q,z),I.off(P.default.MEDIA_FRAGMENT_LOADED,se,z),I.off(P.default.SETTING_UPDATED_MAX_BITRATE,oe,z),I.off(P.default.SETTING_UPDATED_MIN_BITRATE,oe,z)}},F=(0,Ve.default)(y).getInstance().getLogger(z),U(),I.on(be.default.BUFFER_EMPTY,H,z),I.on(be.default.PLAYBACK_SEEKING,G,z),I.on(be.default.METRIC_ADDED,M,z),I.on(be.default.QUALITY_CHANGE_REQUESTED,Z,z),I.on(be.default.FRAGMENT_LOADING_ABANDONED,Q,z),I.on(P.default.MEDIA_FRAGMENT_LOADED,se,z),I.on(P.default.SETTING_UPDATED_MAX_BITRATE,oe,z),I.on(P.default.SETTING_UPDATED_MIN_BITRATE,oe,z),z}Ac.__dashjs_factory_name="BolaRule";var Qo=xe.default.getClassFactory(Ac);const El="L2A_STATE_ONE_BITRATE",cr="L2A_STATE_STARTUP",la="L2A_STATE_STEADY",Aa=Math.pow(4,.99);function Xa(S){S=S||{};const y=this.context,v=S.dashMetrics,_=(0,Ee.default)(y).getInstance();let I,w,z,F;function x(ne){ne.placeholderBuffer=0,ne.mostAdvancedSegmentStart=NaN,ne.lastSegmentWasReplacement=!1,ne.lastSegmentStart=NaN,ne.lastSegmentDurationS=NaN,ne.lastSegmentRequestTimeMs=NaN,ne.lastSegmentFinishTimeMs=NaN,ne.lastSegmentUrl=""}function H(){for(const ne in w)if(w.hasOwnProperty(ne)){const ie=w[ne];ie.state!==El&&(ie.state=cr,x(ie))}}function G(ne){if(ne&&ne.chunk&&ne.chunk.representation&&ne.chunk.representation.mediaInfo){const ie=w[ne.chunk.representation.mediaInfo.type],re=z[ne.chunk.representation.mediaInfo.type];if(ie&&ie.state!==El){const se=ne.chunk.start;isNaN(ie.mostAdvancedSegmentStart)||se>ie.mostAdvancedSegmentStart?(ie.mostAdvancedSegmentStart=se,ie.lastSegmentWasReplacement=!1):ie.lastSegmentWasReplacement=!0,ie.lastSegmentStart=se,ie.lastSegmentDurationS=ne.chunk.duration,ie.currentRepresentation=ne.chunk.representation,M(ie,re)}}}function D(ne){if(ne&&ne.metric===ee.HTTP_REQUEST&&ne.value&&ne.value.type===_e.HTTPRequest.MEDIA_SEGMENT_TYPE&&ne.value.trace&&ne.value.trace.length){const ie=w[ne.mediaType],re=z[ne.mediaType];ie&&ie.state!==El&&(ie.lastSegmentRequestTimeMs=ne.value.trequest.getTime(),ie.lastSegmentFinishTimeMs=ne.value._tfinish.getTime(),M(ie,re))}}function M(ne,ie){isNaN(ne.lastSegmentStart)||isNaN(ne.lastSegmentRequestTimeMs)||(ie.segment_request_start_s=.001*ne.lastSegmentRequestTimeMs,ie.segment_download_finish_s=.001*ne.lastSegmentFinishTimeMs,ne.lastSegmentStart=NaN,ne.lastSegmentRequestTimeMs=NaN)}function B(ne,ie){if(ne.length!==ie.length)return-1;let re=0;for(let se=0;se<ne.length;se++)re+=ne[se]*ie[se];return re}function Z(){w={},z={}}return I={getSwitchRequest:function(ne){try{const ie=ya(y).create();ie.rule=this.getClassName();const re=ne.getMediaType(),se=ne.getScheduleController();if(ie.reason=ie.reason||{},re===q.default.AUDIO)return ie;se.setTimeToLoadDelay(0);const oe=function(Ae){const Q=Ae.getMediaType();let U=w[Q];return U||(U=function(V){const $={},ce=V.getMediaInfo();return $.state=cr,$.currentRepresentation=null,function(Te){Te&&Te.type&&(z[Te.type]={},z[Te.type].w=[],z[Te.type].prev_w=[],z[Te.type].Q=0,z[Te.type].segment_request_start_s=0,z[Te.type].segment_download_finish_s=0,z[Te.type].B_target=1.5)}(ce),x($),$}(Ae),w[Q]=U),U}(ne);if(!z[re])return ie;switch(ie.reason.state=oe.state,oe.state){case El:break;case cr:(function(Ae,Q,U){const V=Ae.getMediaInfo(),$=Ae.getMediaType(),ce=Ae.getThroughputController().getSafeAverageThroughput($);if(isNaN(ce))return Q;const Te=Ae.getAbrController(),ge=Te.getOptimalRepresentationForBitrate(V,ce,!0),ve=v.getCurrentBufferLevel($,!0),Me=z[$],ze=Te.getPossibleVoRepresentationsFilteredBySettings(V,!0);if(Q.representation=ge,Q.reason.throughput=ce,U.currentRepresentation=ge,!isNaN(U.lastSegmentDurationS)&&ve>=Me.B_target){U.state=la,Me.Q=Aa;for(let K=0;K<ze.length;++K)ze[K].id===U.currentRepresentation.id?Me.prev_w[K]=1:Me.prev_w[K]=0}})(ne,ie,oe);break;case la:(function(Ae,Q,U){let V=[];const $=Ae.getThroughputController(),ce=Ae.getMediaType();let Te=$.getAverageThroughput(ce,q.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),ge=v.getCurrentHttpRequest(ce),ve=null;const Me=z[ce];if(Te<1&&(Te=1),ge.url===U.lastSegmentUrl||ge.type===_e.HTTPRequest.INIT_SEGMENT_TYPE)ve=U.currentRepresentation;else{let ze=U.lastSegmentDurationS,K=1;const X=Ae.getAbrController(),Se=Ae.getMediaInfo(),ye=X.getPossibleVoRepresentationsFilteredBySettings(Se,!0);let J=Ae.getVideoModel().getPlaybackRate();const ue=Math.max(Math.pow(4,1),Aa*Math.sqrt(4));for(let we=0;we<ye.length;++we){const Fe=ye[we];J*Fe.bitrateInKbit>Te&&(K=-1),Me.w[we]=Me.prev_w[we]+K*(ze/(2*ue))*((Me.Q+Aa)*(J*Fe.bitrateInKbit/Te))}Me.w=function(we){const Fe=we.length;let je=!1,at=[];for(let Xt=0;Xt<Fe;++Xt)at[Xt]=we[Xt];let lt=we.sort(function(Xt,In){return In-Xt}),ot=0,qt=0,Kt=[];for(let Xt=0;Xt<Fe-1;++Xt)if(ot+=lt[Xt],qt=(ot-1)/(Xt+1),qt>=lt[Xt+1]){je=!0;break}je||(qt=(ot+lt[Fe-1]-1)/Fe);for(let Xt=0;Xt<Fe;++Xt)Kt[Xt]=Math.max(at[Xt]-qt,0);return Kt}(Me.w);for(let we=0;we<ye.length;++we)V[we]=Me.w[we]-Me.prev_w[we],Me.prev_w[we]=Me.w[we];const he=ye.map(we=>we.bandwidth);Me.Q=Math.max(0,Me.Q-ze+ze*J*((B(he,Me.prev_w)+B(he,V))/Te));let le=[];for(let we=0;we<he.length;++we)le[we]=Math.abs(he[we]-B(Me.w,he));const Ie=le.indexOf(Math.min(...le));ve=X.getRepresentationByAbsoluteIndex(Ie,Se,!0),ve.absoluteIndex>U.currentRepresentation.absoluteIndex&&he[U.currentRepresentation.absoluteIndex+1]<=Te&&(ve=X.getRepresentationByAbsoluteIndex(U.currentRepresentation.absoluteIndex+1,Se,!0)),ve.bitrateInKbit>=Te&&(Me.Q=2*Math.max(Aa,Me.Q)),U.lastSegmentUrl=ge.url}Q.representation=ve,U.currentRepresentation=Q.representation})(ne,ie,oe);break;default:(function(Ae,Q,U){const V=Ae.getAbrController(),$=Ae.getMediaInfo(),ce=Ae.getMediaType(),Te=Ae.getThroughputController().getSafeAverageThroughput(ce);Q.representation=V.getOptimalRepresentationForBitrate($,Te,!0),Q.reason.throughput=Te,U.state=cr,x(U)})(ne,ie,oe)}return ie}catch(ie){return F.error(ie),ya(y).create()}},reset:function(){Z(),_.off(P.default.PLAYBACK_SEEKING,H,I),_.off(P.default.MEDIA_FRAGMENT_LOADED,G,I),_.off(P.default.METRIC_ADDED,D,I)}},F=(0,Ve.default)(y).getInstance().getLogger(I),Z(),_.on(P.default.PLAYBACK_SEEKING,H,I),_.on(P.default.MEDIA_FRAGMENT_LOADED,G,I),_.on(P.default.METRIC_ADDED,D,I),I}Xa.__dashjs_factory_name="L2ARule";var Zo=xe.default.getClassFactory(Xa);function Ms(){const S=this.context;let y,v,_,I,w,z,F,x,H;function G(){_=null,I=1,w=100,z=0,F=null,x=null,H="dynamic_weight_selection"}function D(){let ie=0;if(_)for(let re=0;re<_.length;re++){let se=_[re];se.state.throughput>ie&&(ie=se.state.throughput)}return ie}function M(ie,re,se){let oe=ie.map((Ae,Q)=>se[Q]*Math.pow(Ae-re[Q],2)).reduce((Ae,Q)=>Ae+Q);return(oe<0?-1:1)*Math.sqrt(Math.abs(oe))}function B(ie,re){return M([ie.state.throughput,ie.state.latency,ie.state.rebuffer,ie.state.switch],[re.state.throughput,re.state.latency,re.state.rebuffer,re.state.switch],[1,1,1,1])}function Z(ie,re){for(let se=0;se<_.length;se++){let oe=_[se],Ae=.1;const Q=B(oe,ie);ne(oe,re,Math.exp(-1*Math.pow(Q,2)/(2*Math.pow(Ae,2))))}}function ne(ie,re,se){let oe=ie.state,Ae=[.01,.01,.01,.01];oe.throughput=oe.throughput+(re[0]-oe.throughput)*Ae[0]*se,oe.latency=oe.latency+(re[1]-oe.latency)*Ae[1]*se,oe.rebuffer=oe.rebuffer+(re[2]-oe.rebuffer)*Ae[2]*se,oe.switch=oe.switch+(re[3]-oe.switch)*Ae[3]*se}return y={getNextQuality:function(ie,re,se,oe,Ae,Q,U,V){let $=oe,ce=se;(function(ye,J){if(!_){_=[];const ue=J.getPossibleVoRepresentationsFilteredBySettings(ye,!0),he=ue.map(le=>le.bandwidth);z=Math.min(...he),I=function(le){const Ie=le.map(we=>Math.pow(we,2)).reduce((we,Fe)=>we+Fe);return Math.sqrt(Ie)}(he),ue.forEach(le=>{let Ie={representation:le,state:{throughput:le.bandwidth/I,latency:0,rebuffer:0,switch:0}};_.push(Ie)}),x=function(le){let Ie=[],we=function(ot){let qt=[];for(let Kt=0;Kt<ot;Kt++){let Xt=[Math.random()*D(),Math.random(),Math.random(),Math.random()];qt.push(Xt)}return qt}(Math.pow(le.length,2));Ie.push(we[0]);let Fe=[1,1,1,1];for(let ot=1;ot<le.length;ot++){let qt=null,Kt=null;for(let Xt=0;Xt<we.length;Xt++){let In=we[Xt],Lt=null;for(let gn=0;gn<Ie.length;gn++){let vn=M(In,Ie[gn],Fe);(Lt===null||vn<Lt)&&(Lt=vn)}(Kt===null||Lt>Kt)&&(qt=In,Kt=Lt)}Ie.push(qt)}let je=null,at=null;for(let ot=0;ot<Ie.length;ot++){let qt=0;for(let Kt=0;Kt<Ie.length;Kt++)ot!==Kt&&(qt+=M(Ie[ot],Ie[Kt],Fe));(je===null||qt>je)&&(je=qt,at=ot)}let lt=[];for(lt.push(Ie[at]),Ie.splice(at,1);Ie.length>0;){let ot=null,qt=null;for(let Kt=0;Kt<Ie.length;Kt++){let Xt=M(lt[0],Ie[Kt],Fe);(ot===null||Xt<ot)&&(ot=Xt,qt=Kt)}lt.push(Ie[qt]),Ie.splice(qt,1)}return lt}(_)}})(re,ie);let Te=se/I;Te>1&&(Te=D()),oe/=w;let ge=_.find(ye=>ye.representation.id===U.id),ve=ge.representation.bandwidth*V.getSegmentDuration()/ce,Me=Math.max(0,ve-Ae);if(Ae-ve<V.getMinBuffer())return v.debug(`Buffer is low for bitrate= ${ge.representation.bandwidth} downloadTime=${ve} currentBuffer=${Ae} rebuffer=${Me}`),function(ye,J){let ue=0,he=ye;if(_)for(let le=0;le<_.length;le++){let Ie=_[le];Ie.representation.bandwidth<ye.representation.bandwidth&&Ie.representation.bandwidth>ue&&J>Ie.representation.bandwidth&&(ue=Ie.representation.bandwidth,he=Ie)}return he}(ge,ce).representation;switch(H){case"manual_weight_selection":F=[.4,.4,.4,.4];break;case"random_weight_selection":F=function(ye){let J=[],ue=Math.sqrt(2/ye);for(let he=0;he<4;he++)J.push(Math.random()*ue);return F=J,F}(_.length);break;default:(function(ye,J,ue,he,le,Ie){F||(F=x[x.length-1]);let we=ye.findWeightVector(_,J,ue,he,le,Ie);we!==null&&we!==-1&&(F=we)})(V,$,Ae,Me,ce,Q)}let ze=null,K=null,X=null;for(let ye=0;ye<_.length;ye++){let J=_[ye],ue=J.state,he=[ue.throughput,ue.latency,ue.rebuffer,ue.switch],le=F.slice(),Ie=V.getNextBufferWithBitrate(J.representation.bandwidth,Ae,ce),we=Ie<V.getMinBuffer();we&&v.debug(`Buffer is low for bitrate=${J.representation.bandwidth} downloadTime=${ve} currentBuffer=${Ae} nextBuffer=${Ie}`),(J.representation.bandwidth>se-1e4||we)&&J.representation.bandwidth!==z&&(le[0]=100);let Fe=M(he,[Te,0,0,0],le);(ze===null||Fe<ze)&&(ze=Fe,K=J.representation,X=J)}let Se=Math.abs(ge.representation.bandwidth-X.representation.bandwidth)/I;return Z(ge,[Te,oe,Me,Se]),Z(X,[Te,0,0,Se]),K},reset:function(){G()}},v=(0,Ve.default)(S).getInstance().getLogger(y),G(),y}Ms.__dashjs_factory_name="LearningAbrController";var Os=xe.default.getClassFactory(Ms),Jo=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function bl(){let S,y,v,_,I;function w(){y=null,v=null,_=null,I=null}function z(x,H,G,D){let M=new Jo;return M.type=x,M.weights.bitrateReward=H||1,M.weights.bitrateSwitchPenalty=1,M.weights.rebufferPenalty=G||1e3,M.weights.latencyPenalty=[],M.weights.latencyPenalty.push({threshold:1.1,penalty:.05*D}),M.weights.latencyPenalty.push({threshold:1e8,penalty:.1*G}),M.weights.playbackSpeedPenalty=D||200,M}function F(x,H,G,D,M){M.bitrateWSum+=M.weights.bitrateReward*x,M.lastBitrate&&(M.bitrateSwitchWSum+=M.weights.bitrateSwitchPenalty*Math.abs(x-M.lastBitrate)),M.lastBitrate=x,M.rebufferWSum+=M.weights.rebufferPenalty*H;for(let B=0;B<M.weights.latencyPenalty.length;B++){let Z=M.weights.latencyPenalty[B];if(G<=Z.threshold){M.latencyWSum+=Z.penalty*G;break}}M.playbackSpeedWSum+=M.weights.playbackSpeedPenalty*Math.abs(1-D),M.totalQoe=M.bitrateWSum-M.bitrateSwitchWSum-M.rebufferWSum-M.latencyWSum-M.playbackSpeedWSum}return S={setupPerSegmentQoe:function(x,H,G){y=z("segment",x,H,G),v=x,_=H,I=G},logSegmentMetrics:function(x,H,G,D){y&&F(x,H,G,D,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(x,H,G,D){let M=null;return v&&_&&I&&(M=z("segment",v,_,I)),M?(F(x,H,G,D,M),M.totalQoe):0},reset:function(){w()}},w(),S}bl.__dashjs_factory_name="LoLpQoeEvaluator";var Tl=xe.default.getClassFactory(bl);function of(S){let y,v,_,I,w=S.targetLatency,z=S.bufferMin,F=S.segmentDuration,x=S.qoeEvaluator;function H(){return F}function G(D,M){const B=H();let Z;return Z=M>B?D-B:D+B-M,Z}return y={getMinBuffer:function(){return z},getSegmentDuration:H,getNextBufferWithBitrate:function(D,M,B){return G(M,D*F/B)},getNextBuffer:G,findWeightVector:function(D,M,B,Z,ne,ie){let re=null,se=null,oe=null,Ae=Math.abs(M-I);return D.forEach(Q=>{_.forEach(U=>{U[0];let V,$=U[1],ce=U[2],Te=(U[3],Q.representation.bandwidth*F/ne),ge=G(B,Te);V=ce===0?10:1/ce;let ve=V*Math.max(1e-5,Te-ge);V=$===0?10:1/$;let Me=V*Q.state.latency,ze=x.calculateSingleUseQoe(Q.representation.bandwidth,ve,Me,ie);(re===null||ze>re)&&function(K,X,Se){return!(K>w+Se)&&X>=z}(M,ge,Ae)&&(re=ze,se=U,oe=Q.representation.bandwidth)})}),se===null&&oe===null&&(se=-1),I=M,se}},v=[.2,.4,.6,.8,1],_=function(D){let M=D.map(function(Z){return[Z]}),B=function(Z,ne,ie){if(ie===ne)return Z;let re=Z.length;for(let se=0;se<re;se++){let oe=Z.shift();for(let Ae=0;Ae<D.length;Ae++)Z.push(oe.concat(D[Ae]))}return B(Z,ne,ie+1)};return B(M,4,1)}(v),I=0,y}of.__dashjs_factory_name="LoLpWeightSelector";var Qa=xe.default.getClassFactory(of);function eu(S){let y,v,_,I,w=(S=S||{}).dashMetrics,z=this.context;return v={getSwitchRequest:function(F){try{let x=ya(z).create();x.rule=this.getClassName();let H=F.getMediaInfo().type,G=F.getAbrController();const D=F.getStreamInfo();let M=F.getRepresentation();const B=F.getMediaInfo(),Z=w.getCurrentBufferState(H),ne=F.getScheduleController(),ie=w.getCurrentBufferLevel(H,!0),re=ne.getPlaybackController();let se=re.getCurrentLiveLatency();if(H===q.default.AUDIO)return x;se||(se=0);const oe=re.getPlaybackRate(),Ae=F.getThroughputController().getSafeAverageThroughput(H);if(y.debug(`Throughput ${Math.round(Ae)} kbps`),isNaN(Ae)||!Z||G.getAbandonmentStateFor(D.id,H)===ee.ABANDON_LOAD)return x;let Q=G.getPossibleVoRepresentationsFilteredBySettings(B,!0).map(ze=>ze.bandwidth),U=F.getRepresentation().fragmentDuration,V=Math.min(...Q)/1e3,$=Math.max(...Q)/1e3,ce=M.bandwidth/1e3,Te=w.getCurrentHttpRequest(H,!0),ge=(Te.tresponse.getTime()-Te.trequest.getTime())/1e3,ve=ge>U?ge-U:0;I.setupPerSegmentQoe(U,$,V),I.logSegmentMetrics(ce,ve,se,oe);let Me=Qa(z).create({targetLatency:1.5,bufferMin:.3,segmentDuration:U,qoeEvaluator:I});return x.representation=_.getNextQuality(G,B,1e3*Ae,se,ie,oe,M,Me),x.reason={throughput:Ae,latency:se},x.priority=ya.PRIORITY.STRONG,ne.setTimeToLoadDelay(0),x}catch(x){throw x}},reset:function(){_.reset(),I.reset()}},y=(0,Ve.default)(z).getInstance().getLogger(v),_=Os(z).create(),I=Tl(z).create(),v}eu.__dashjs_factory_name="LoLPRule";var Rc=xe.default.getClassFactory(eu);function tu(S){S=S||{};const y=this.context,v=S.mediaPlayerModel,_=S.customParametersModel,I=S.dashMetrics,w=S.settings,z=(0,Ee.default)(y).getInstance();let F,x,H,G;function D(){Object.values(q.default.QUALITY_SWITCH_RULES).forEach(ie=>{x=M(ie,x)}),Object.values(q.default.ABANDON_FRAGMENT_RULES).forEach(ie=>{H=M(ie,H)}),_.getAbrCustomRules().forEach(function(ie){ie.type===q.default.RULES_TYPES.QUALITY_SWITCH_RULES&&x.push(ie.rule(y).create()),ie.type===q.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&H.push(ie.rule(y).create())}),x.length===0&&(x.push(Qo(y).create({dashMetrics:I,mediaPlayerModel:v,settings:w})),x.push($o(y).create({dashMetrics:I})))}function M(ie,re){const se=ie.charAt(0).toLowerCase()+ie.slice(1);return w.get().streaming.abr.rules[se].active&&!function(oe,Ae){return oe.filter(Q=>Q.getClassName()===Ae).length>0}(re,ie)?(re.push(function(oe){switch(oe){case q.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Qo(y).create({dashMetrics:I,mediaPlayerModel:v,settings:w});case q.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return $o(y).create({dashMetrics:I});case q.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return ss(y).create({dashMetrics:I,settings:w});case q.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return lo(y).create();case q.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return _c(y).create();case q.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return Zo(y).create({dashMetrics:I,settings:w});case q.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Rc(y).create({dashMetrics:I});case q.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return so(y).create({dashMetrics:I,mediaPlayerModel:v,settings:w})}}(ie)),re):w.get().streaming.abr.rules[se].active?re:function(oe,Ae){return oe.filter(Q=>Q.getClassName()!==Ae)}(re,ie)}function B(ie){return ie.filter(re=>re.representation!==ya.NO_CHANGE)}function Z(ie){const re={};let se,oe,Ae,Q=null;if(ie.length!==0){for(re[ya.PRIORITY.STRONG]=null,re[ya.PRIORITY.WEAK]=null,re[ya.PRIORITY.DEFAULT]=null,se=0,oe=ie.length;se<oe;se+=1)Ae=ie[se],Ae.representation!==ya.NO_CHANGE&&(re[Ae.priority]===null||re[Ae.priority].representation!==ya.NO_CHANGE&&Ae.representation.bitrateInKbit<re[Ae.priority].representation.bitrateInKbit)&&(re[Ae.priority]=Ae);return re[ya.PRIORITY.WEAK]&&re[ya.PRIORITY.WEAK].representation!==ya.NO_CHANGE&&(Q=re[ya.PRIORITY.WEAK]),re[ya.PRIORITY.DEFAULT]&&re[ya.PRIORITY.DEFAULT].representation!==ya.NO_CHANGE&&(Q=re[ya.PRIORITY.DEFAULT]),re[ya.PRIORITY.STRONG]&&re[ya.PRIORITY.STRONG].representation!==ya.NO_CHANGE&&(Q=re[ya.PRIORITY.STRONG]),Q}}function ne(){D()}return F={clearDataForStream:function(ie){[x,H].forEach(re=>{re&&re.length&&re.forEach(se=>se.clearDataForStream&&typeof se.clearDataForStream=="function"&&se.clearDataForStream(ie))})},getAbandonFragmentRules:function(){return H},getBestPossibleSwitchRequest:function(ie){return ie&&Z(B(x.filter(re=>{const se=re.getClassName();if(se!==q.default.QUALITY_SWITCH_RULES.BOLA_RULE&&se!==q.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const oe=ie.getMediaType();return G[oe]&&se===q.default.QUALITY_SWITCH_RULES.BOLA_RULE||!G[oe]&&se===q.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE}).map(re=>re.getSwitchRequest(ie))))||ya(y).create()},getBolaState:function(ie){return G[ie]},getMinSwitchRequest:Z,getQualitySwitchRules:function(){return x},handleNewMediaInfo:function(ie){x.forEach(re=>re.handleNewMediaInfo&&re.handleNewMediaInfo(ie)),H.forEach(re=>re.handleNewMediaInfo&&re.handleNewMediaInfo(ie))},initialize:function(){x=[],H=[],G={},D(),z.on(P.default.SETTING_UPDATED_ABR_ACTIVE_RULES,ne,F)},reset:function(){[x,H].forEach(ie=>{ie&&ie.length&&ie.forEach(re=>re.reset&&re.reset())}),x=[],H=[],G={},z.off(P.default.SETTING_UPDATED_ABR_ACTIVE_RULES,ne,F)},setBolaState:function(ie,re){G[ie]=re},shouldAbandonFragment:function(ie){if(!ie)return ya(y).create();const re=Z(B(H.map(se=>se.shouldAbandon(ie))));return re&&(re.reason.forceAbandon=!0),re||ya(y).create()}},F}tu.__dashjs_factory_name="ABRRulesCollection";const Ic=xe.default.getClassFactory(tu);xe.default.updateSingletonFactory(tu.__dashjs_factory_name,Ic);var ag=Ic;function nu(S){let y;const v=(S=S||{}).abrController,_=S.throughputController,I=S.switchRequestHistory,w=S.droppedFramesHistory,z=S.currentRequest,F=S.streamProcessor?S.streamProcessor.getScheduleController():null,x=S.streamProcessor?S.streamProcessor.getRepresentation():null,H=S.videoModel?S.videoModel:null;function G(){return x?x.mediaInfo:null}return y={getAbrController:function(){return v},getCurrentRequest:function(){return z},getDroppedFramesHistory:function(){return w},getMediaInfo:G,getMediaType:function(){const D=G();return D?D.type:null},getRepresentation:function(){return x},getScheduleController:function(){return F},getStreamInfo:function(){const D=G();return D?D.streamInfo:null},getSwitchRequestHistory:function(){return I},getThroughputController:function(){return _},getVideoModel:function(){return H}},y}nu.__dashjs_factory_name="RulesContext";var au=xe.default.getClassFactory(nu);function iu(){let S={},y={};const v=this.context,_=(0,W.default)(v).getInstance();return{clearForStream:function(I){delete S[I],delete y[I]},getSwitchRequests:function(I,w){return I!=null&&w!=null&&S[I]&&S[I][w]?S[I][w]:{}},push:function(I){const w=I.currentRepresentation,z=I.newRepresentation;if(w.mediaInfo.streamInfo.id!==z.mediaInfo.streamInfo.id||z.mediaInfo.id!==w.mediaInfo.id)return;const F=w.mediaInfo.streamInfo.id;S[F]||function(ne){S[ne]={},y[ne]={}}(F);const x=w.mediaInfo.type;S[F][x]||function(ne,ie){S[ne][ie]={},y[ne][ie]=[]}(F,x);const H=I.currentRepresentation.id;S[F][x][H]||function(ne,ie,re){S[ne][ie][re]={noDrops:0,drops:0,dropSize:0}}(F,x,H);let G=I.newRepresentation.absoluteIndex-I.currentRepresentation.absoluteIndex,D=G<0?1:0,M=D?-G:0,B=D?0:1;S[F][x][I.currentRepresentation.id].drops+=D,S[F][x][I.currentRepresentation.id].dropSize+=M,S[F][x][I.currentRepresentation.id].noDrops+=B,y[F][x].push({id:I.currentRepresentation.id,noDrop:B,drop:D,dropSize:M});const Z=function(ne,ie){return y[ne][ie].length>_.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?y[ne][ie].shift():null}(F,x);Z&&function(ne,ie,re){S[ne][ie][re.id].drops-=re.drop,S[ne][ie][re.id].dropSize-=re.dropSize,S[ne][ie][re.id].noDrops-=re.noDrop}(F,x,Z)},reset:function(){S={},y={}}}}iu.__dashjs_factory_name="SwitchRequestHistory";var zi=xe.default.getClassFactory(iu);function Za(){let S={},y={},v={};return{clearForStream:function(_){delete S[_],delete y[_],delete v[_]},getFrameHistory:function(_){return S[_]},push:function(_,I,w){if(!I)return;S[_]||function(D){S[D]=[],y[D]=0,v[D]=0}(_);let z=w&&w.droppedVideoFrames?w.droppedVideoFrames:0,F=w&&w.totalVideoFrames?w.totalVideoFrames:0,x=z-y[_];y[_]=z;let H=F-v[_];v[_]=F;const G=S[_];G[I]?(G[I].droppedVideoFrames+=x,G[I].totalVideoFrames+=H):G[I]={droppedVideoFrames:x,totalVideoFrames:H}},reset:function(){S={},y={},v={}}}}Za.__dashjs_factory_name="DroppedFramesHistory";var xc=xe.default.getClassFactory(Za);function Ps(){const S=this.context,y=(0,Ve.default)(S).getInstance(),v=(0,Ee.default)(S).getInstance();let _,I,w,z,F,x,H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U;function V(){H={},x={},oe&&oe.reset(),se&&se.reset(),re=void 0,oe=void 0,se=void 0,clearTimeout(G),G=null}function $(X){let Se=ce(X,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]);return Se=function(ye){try{return function(J){try{if(!U.get().streaming.cmsd.enabled||!U.get().streaming.cmsd.abr.applyMb)return J;const ue=J.filter(he=>{const le=he.mediaInfo.type;let Ie=ne.getMaxBitrate(le);if(le!==q.default.VIDEO||Ie<0)return!0;const we=he.mediaInfo.streamInfo.id;return Ie-=x[we][q.default.AUDIO].getRepresentation().bitrateInKbit||0,he.bitrateInKbit<=Ie});return ue.length>0?ue:J}catch(ue){return I.error(ue),J}}(ye=function(J){try{if(!U.get().streaming.abr.limitBitrateByPortal)return J;const{elementWidth:ue}=M.getVideoElementSize(),he=J.filter(le=>le.mediaInfo.type!==q.default.VIDEO||le.width<=ue);return he.length>0?he:J}catch(ue){return I.error(ue),J}}(ye=function(J){try{const ue=J.filter(he=>{const le=he.mediaInfo.type,Ie=he.bitrateInKbit,we=B.getAbrBitrateParameter("maxBitrate",le),Fe=B.getAbrBitrateParameter("minBitrate",le);return!(we>-1&&Ie>we||Fe>-1&&Ie<Fe)});return ue.length>0?ue:J}catch(ue){return I.error(ue),J}}(ye)))}catch(J){return I.error(J),ye}}(Se),Se}function ce(X,Se){let ye=[];return X&&(function(ue){try{const he=[];if(ue&&he.push(ue),!U.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!ue.adaptationSetSwitchingCompatibleIds||ue.adaptationSetSwitchingCompatibleIds.length===0)return he;const le=x[ue.streamInfo.id][ue.type].getAllMediaInfos().filter(Ie=>ue.adaptationSetSwitchingCompatibleIds.includes(Ie.id));return he.concat(le)}catch{return[ue]}}(X).forEach(ue=>{let he=D.getVoRepresentations(ue);he&&he.length>0&&(ye=ye.concat(he))}),ye=function(ue){return ue=function(he){let le=null;return he.filter(Ie=>(le||(le=Ie.mediaInfo),!isNaN(Ie.qualityRanking)&&D.areMediaInfosEqual(le,Ie.mediaInfo))).length===he.length}(ue)?function(he){return he.sort((le,Ie)=>Ie.qualityRanking-le.qualityRanking),he}(ue):function(he){return he.sort((le,Ie)=>D.areMediaInfosEqual(le.mediaInfo,Ie.mediaInfo)?isNaN(le.pixelsPerSecond)||isNaN(Ie.pixelsPerSecond)||le.pixelsPerSecond===Ie.pixelsPerSecond?le.bandwidth-Ie.bandwidth:le.pixelsPerSecond-Ie.pixelsPerSecond:isNaN(le.pixelsPerSecond)||isNaN(Ie.pixelsPerSecond)||le.pixelsPerSecond===Ie.pixelsPerSecond?isNaN(le.bitsPerPixel)||isNaN(Ie.bitsPerPixel)?le.bandwidth-Ie.bandwidth:Ie.bitsPerPixel-le.bitsPerPixel:le.pixelsPerSecond-Ie.pixelsPerSecond),he}(ue)}(ye),ye.forEach((ue,he)=>{ue.absoluteIndex=he}),ye=ye.filter(ue=>{const he=!!Se||D.areMediaInfosEqual(ue.mediaInfo,X),le=!ue||!ue.mediaInfo||F.areKeyIdsUsable(ue.mediaInfo);return he&&le})),ye}function Te(X){const Se=X.request.mediaType,ye=X.streamId;if(!(Se&&ye&&x[ye]&&U.get().streaming.abr.autoSwitchBitrate[Se]))return;const J=x[ye][Se];if(!J)return;const ue=au(S).create({abrController:_,streamProcessor:J,currentRequest:X.request,throughputController:Ae,adapter:D,videoModel:M}),he=w.shouldAbandonFragment(ue);he&&he.representation!==ya.NO_CHANGE&&function(le,Ie,we,Fe,je){if(Fe.getFragmentModel().getRequests({state:zt.FRAGMENT_MODEL_LOADING,index:le.request.index})[0]){const at=function(lt,ot){return H[lt]&&H[lt][ot]?H[lt][ot]:null}(Ie,we);at&&(at.state=ee.ABANDON_LOAD),se.reset(),Me(we,z.getActiveStreamInfo(),je.representation,je.reason),clearTimeout(G),G=setTimeout(()=>{at&&(H[Ie][we].state=ee.ALLOW_LOAD),G=null},U.get().streaming.abandonLoadTimeout)}}(X,ye,Se,J,he)}function ge(X){X.mediaType===q.default.VIDEO&&(re!==void 0&&oe.push(X.streamId,re,M.getPlaybackQuality()),re=X.newRepresentation.id)}function ve(X){!K()||X.metric!==ee.BUFFER_LEVEL||X.mediaType!==q.default.AUDIO&&X.mediaType!==q.default.VIDEO||function(Se,ye){try{const J=B.getBufferTimeDefault(),ue=J,he=.5*J,le=w.getBolaState(Se),Ie=ye>=(le?he:ue);w.setBolaState(Se,Ie),Ie!==le&&(Ie?I.info("["+Se+"] switching from throughput to buffer occupancy ABR rule (buffer: "+ye.toFixed(3)+")."):I.info("["+Se+"] switching from buffer occupancy to throughput ABR rule (buffer: "+ye.toFixed(3)+")."))}catch(J){I.error(J)}}(X.mediaType,.001*X.value.level)}function Me(X,Se,ye){let J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!(Se&&Se.id&&X&&x&&x[Se.id]&&x[Se.id][X]&&ye))return;const ue=x[Se.id][X].getRepresentation();ue&&ye.id===ue.id||ze(ue,ye,J)}function ze(X,Se,ye){const J=Se.mediaInfo.streamInfo.id,ue=Se.mediaInfo.type;if(ue&&x[J]&&x[J][ue]){const he=x[J][ue].getStreamInfo(),le=Q.getCurrentBufferLevel(ue),Ie=X!==null&&!D.areMediaInfosEqual(X.mediaInfo,Se.mediaInfo),we=X?X.bitrateInKbit:0;I.info(`[AbrController]: Switching quality in period ${J} for media type ${ue}. Switch from bitrate ${we} to bitrate ${Se.bitrateInKbit}. Current buffer level: ${le}. Reason:`+(ye?JSON.stringify(ye):"/")),v.trigger(P.default.QUALITY_CHANGE_REQUESTED,{oldRepresentation:X,newRepresentation:Se,reason:ye,streamInfo:he,mediaType:ue,isAdaptationSetSwitch:Ie},{streamId:he.id,mediaType:ue});const Fe=Ae.getAverageThroughput(ue);isNaN(Fe)||ie.setSavedBitrateSettings(ue,Fe)}}function K(){return U.get().streaming.abr.rules.bolaRule.active&&U.get().streaming.abr.rules.throughputRule.active}return _={checkPlaybackQuality:function(X,Se){try{if(!(X&&x&&x[Se]&&x[Se][X]))return!1;if(oe){const Ie=M.getPlaybackQuality();Ie&&oe.push(Se,re,Ie)}if(!U.get().streaming.abr.autoSwitchBitrate[X])return!1;const ye=x[Se][X],J=ye.getRepresentation(),ue=au(S).create({abrController:_,throughputController:Ae,switchRequestHistory:se,droppedFramesHistory:oe,streamProcessor:ye,adapter:D,videoModel:M}),he=w.getBestPossibleSwitchRequest(ue);if(!he||!he.representation)return!1;let le=he.representation;return se.push({currentRepresentation:J,newRepresentation:le}),le.id!==J.id&&(H[Se][X].state===ee.ALLOW_LOAD||le.absoluteIndex<J.absoluteIndex)&&(ze(J,le,he.reason),!0)}catch(ye){return I.error(ye),!1}},clearDataForStream:function(X){oe&&oe.clearForStream(X),x[X]&&delete x[X],se&&se.clearForStream(X),H[X]&&delete H[X],w.clearDataForStream(X)},getAbandonmentStateFor:function(X,Se){return H[X]&&H[X][Se]?H[X][Se].state:null},getInitialBitrateFor:function(X){if(X===q.default.TEXT)return NaN;let Se=B.getAbrBitrateParameter("initialBitrate",X);if(Se>0)return Se;let ye=NaN;if(ie&&ie.hasOwnProperty("getSavedBitrateSettings")&&(ye=ie.getSavedBitrateSettings(X)),!isNaN(ye))return ye;const J=Ae.getAverageThroughput(X);return!isNaN(J)&&J>0?J:X===q.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(X,Se){const ye=$(X,!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]);if(!ye||ye.length===0)return null;const J=ye.reduce((he,le)=>he.bandwidth<le.bandwidth?he:le);if(Se<=0)return J;const ue=ye.filter(he=>he.bitrateInKbit<=Se);return ue&&ue.length!==0?ue.reduce((he,le)=>le.absoluteIndex>he.absoluteIndex?le:he):J},getPossibleVoRepresentations:function(X){return ce(X,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])},getPossibleVoRepresentationsFilteredBySettings:$,getRepresentationByAbsoluteIndex:function(X,Se){let ye=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return isNaN(X)||X<0?null:$(Se,ye).find(J=>J.absoluteIndex===X)},handleNewMediaInfo:function(X){w.handleNewMediaInfo(X)},initialize:function(){oe=xc(S).create(),se=zi(S).create(),w=ag(S).create({dashMetrics:Q,customParametersModel:Z,mediaPlayerModel:B,settings:U}),w.initialize(),v.on(be.default.QUALITY_CHANGE_RENDERED,ge,_),v.on(be.default.METRIC_ADDED,ve,_),v.on(P.default.LOADING_PROGRESS,Te,_)},isPlayingAtLowestQuality:function(X){return $(X.mediaInfo,!0)[0].id===X.id},isPlayingAtTopQuality:function(X){if(!X)return!0;const Se=$(X.mediaInfo,!0);return Se[Se.length-1].id===X.id},registerStreamType:function(X,Se){const ye=Se.getStreamInfo().id;x[ye]||(x[ye]={}),x[ye][X]=Se,H[ye]||(H[ye]={}),H[ye][X]={},H[ye][X].state=ee.ALLOW_LOAD,w.getBolaState(X)===void 0&&w.setBolaState(X,U.get().streaming.abr.rules.bolaRule.active&&!K())},reset:function(){V(),v.off(be.default.QUALITY_CHANGE_RENDERED,ge,_),v.off(be.default.METRIC_ADDED,ve,_),v.off(P.default.LOADING_PROGRESS,Te,_),w&&w.reset()},setConfig:function(X){X&&(X.streamController&&(z=X.streamController),X.throughputController&&(Ae=X.throughputController),X.domStorage&&(ie=X.domStorage),X.mediaPlayerModel&&(B=X.mediaPlayerModel),X.customParametersModel&&(Z=X.customParametersModel),X.cmsdModel&&(ne=X.cmsdModel),X.dashMetrics&&(Q=X.dashMetrics),X.adapter&&(D=X.adapter),X.videoModel&&(M=X.videoModel),X.settings&&(U=X.settings),X.capabilities&&(F=X.capabilities))},setPlaybackQuality:Me,setWindowResizeEventCalled:function(X){},unRegisterStreamType:function(X,Se){try{x[X]&&x[X][Se]&&delete x[X][Se],H[X]&&H[X][Se]&&delete H[X][Se]}catch{}}},I=y.getLogger(_),V(),_}Ps.__dashjs_factory_name="AbrController";const uo=xe.default.getSingletonFactory(Ps);xe.default.updateSingletonFactory(Ps.__dashjs_factory_name,uo);var ru=uo;const Gr=new Map([[q.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[q.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[q.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[q.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function co(){let S,y,v,_,I,w,z,F,x,H,G;const D=this.context,M=(0,Ee.default)(D).getInstance(),B=[];function Z(Te){_&&(arguments.length>1&&arguments[1]!==void 0&&arguments[1]?_.playbackRate=Te:ce(q.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,()=>{_.playbackRate=Te}))}function ne(){return B.length>0}function ie(Te){let ge=B.indexOf(Te);if(Te!==null&&(ge!==-1&&B.splice(ge,1),v.get().streaming.buffer.syntheticStallEvents.enabled&&_&&!ne())){const ve=()=>{if(Z(H||1,v.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!_.paused){const Me=document.createEvent("Event");Me.initEvent("playing",!0,!1),_.dispatchEvent(Me)}};v.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?ve():(z&&z.func&&z.event&&oe(z.event,z.func),z=ce(q.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,ve))}}function re(){if(_&&ne()&&_.playbackRate===0){const Te=document.createEvent("Event");Te.initEvent("waiting",!0,!1),_.dispatchEvent(Te)}}function se(Te,ge){_&&_.addEventListener(Te,ge)}function oe(Te,ge){_&&_.removeEventListener(Te,ge)}function Ae(){return _?_.readyState:NaN}function Q(){return _?_.buffered:null}function U(){return _?_.clientWidth:NaN}function V(){return _?_.clientHeight:NaN}function $(Te,ge,ve,Me,ze){if(_){for(let K=0;K<_.textTracks.length;K++)if(_.textTracks[K].kind===Te&&(!ge||_.textTracks[K].label==ge)&&_.textTracks[K].language===ve&&_.textTracks[K].isTTML===Me&&_.textTracks[K].isEmbedded===ze)return _.textTracks[K]}return null}function ce(Te,ge){return Te===q.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ae()>=Te?(ge(),null):function(ve,Me){const ze=()=>{oe(ve,ze),Me(ve)};return se(ve,ze),{func:ze,event:ve}}(Gr.get(Te),ge)}return S={addEventListener:se,addTextTrack:function(Te,ge,ve,Me,ze){if(!_)return null;let K=$(Te,ge,ve,Me,ze);return K||(K=_.addTextTrack(Te,ge,ve),K.isEmbedded=ze,K.isTTML=Me),K},appendChild:function(Te){_&&(_.appendChild(Te),Te.isTTML!==void 0&&(_.textTracks[_.textTracks.length-1].isTTML=Te.isTTML,_.textTracks[_.textTracks.length-1].isEmbedded=Te.isEmbedded))},getBufferRange:Q,getClientHeight:V,getClientWidth:U,getElement:function(){return _},getEnded:function(){return _?_.ended:null},getPlaybackQuality:function(){if(!_)return null;let Te="webkitDroppedFrameCount"in _&&"webkitDecodedFrameCount"in _,ge=null;return"getVideoPlaybackQuality"in _?ge=_.getVideoPlaybackQuality():Te&&(ge={droppedVideoFrames:_.webkitDroppedFrameCount,totalVideoFrames:_.webkitDroppedFrameCount+_.webkitDecodedFrameCount,creationTime:new Date}),ge},getPlaybackRate:function(){return _?_.playbackRate:null},getPlayedRanges:function(){return _?_.played:null},getReadyState:Ae,getSource:function(){return _?_.src:null},getTTMLRenderingDiv:function(){return F},getTextTrack:$,getTextTracks:function(){return _?_.textTracks:[]},getTime:function(){return _?isNaN(I)?_.currentTime:I:null},getVideoElementSize:function(){const Te=v.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:U()*Te,elementHeight:V()*Te}},getVideoHeight:function(){return _?_.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(_){const Te=_.parentNode.host||_.parentNode;return Te?_.getBoundingClientRect().left-Te.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(_){const Te=_.parentNode.host||_.parentNode;return Te?_.getBoundingClientRect().top-Te.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return _?_.videoWidth:NaN},getVttRenderingDiv:function(){return x},initialize:function(){M.on(P.default.PLAYBACK_PLAYING,re,this)},isPaused:function(){return _?_.paused:null},isSeeking:function(){return _?_.seeking||!isNaN(I):null},isStalled:ne,pause:function(){_&&(_.pause(),_.autoplay=!1)},play:function(){if(_){_.autoplay=!0;const Te=_.play();Te&&Te.catch&&typeof Promise<"u"&&Te.catch(ge=>{ge.name==="NotAllowedError"&&M.trigger(P.default.PLAYBACK_NOT_ALLOWED),y.warn(`Caught pending play exception - continuing (${ge})`)})}},removeChild:function(Te){_&&_.removeChild(Te)},removeEventListener:oe,reset:function(){clearTimeout(G),M.off(P.default.PLAYBACK_PLAYING,re,this),B.length=0},setConfig:function(Te){Te&&Te.settings&&(v=Te.settings)},setCurrentTime:function(Te,ge){_&&(w&&w.func&&w.event&&oe(w.event,w.func),I=Te,w=ce(q.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{if(_)if(_.currentTime!==I)try{I=ge?function(ve){const Me=Q();let ze=ve,K=9999999999;if(Me)for(let X=0;X<Me.length;X++){const Se=Me.start(X),ye=Me.end(X),J=Math.abs(Se-ve),ue=Math.abs(ye-ve);if(ve>=Se&&ve<=ye)return ve;J<K&&(K=J,ze=Se),ue<K&&(K=ue,ze=ye)}return ze}(I):I,isNaN(I)||(_.currentTime=I),I=NaN}catch(ve){_.readyState===0&&ve.code===ve.INVALID_STATE_ERR&&(G=setTimeout(function(){_.currentTime=I,I=NaN},400))}else I=NaN}))},setDisableRemotePlayback:function(Te){_&&(_.disableRemotePlayback=Te)},setElement:function(Te){if(!(Te==null||Te&&/^(VIDEO|AUDIO)$/i.test(Te.nodeName)))throw"element is not video or audio DOM type!";_=Te,_&&(_.preload="auto")},setPlaybackRate:Z,setSource:function(Te){_&&(Te?_.src=Te:(_.removeAttribute("src"),_.load()))},setStallState:function(Te,ge){(function(ve,Me){Me?function(ze){if(ze!==null&&_&&!_.seeking&&B.indexOf(ze)===-1&&(B.push(ze),v.get().streaming.buffer.syntheticStallEvents.enabled&&_&&B.length===1&&(v.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||Ae()>=q.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){H=_.playbackRate,Z(0,!0);const K=document.createEvent("Event");K.initEvent("waiting",!0,!1),_.dispatchEvent(K)}}(ve):ie(ve)})(Te,ge)},setTTMLRenderingDiv:function(Te){F=Te,F.style.position="absolute",F.style.display="flex",F.style.overflow="hidden",F.style.pointerEvents="none",F.style.top=0,F.style.left=0},setVttRenderingDiv:function(Te){x=Te},waitForReadyState:ce},y=(0,Ve.default)(D).getInstance().getLogger(S),v=(0,W.default)(D).getInstance(),I=NaN,S}co.__dashjs_factory_name="VideoModel";var wc=xe.default.getSingletonFactory(co);const kc=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Dc="dashjs_?_bitrate",Cc="dashjs_?_settings",zs="localStorage",Lc="lastBitrate",Nc="lastMediaSettings";function Mc(S){S=S||{};const y=this.context,v=S.settings;let _,I,w;function z(G){if(w!==void 0)return w;let D;w=!1;try{typeof window<"u"&&(D=window[G])}catch(M){return I.warn("DOMStorage access denied: "+M.message),w}if(!D||G!==zs)return w;try{D.setItem("1","1"),D.removeItem("1"),w=!0}catch(M){I.warn("DOMStorage is supported, but cannot be used: "+M.message)}return w}function F(){return Math.round(new Date().getTime()/6e5)*6e5}function x(G,D){return z(G)&&v.get().streaming[D+"CachingInfo"].enabled}function H(){if(!v)throw new Error(q.default.MISSING_CONFIG_ERROR)}return _={getSavedBitrateSettings:function(G){if(H(),!v.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let D=NaN;if(x(zs,Lc)){const M=Dc.replace(/\?/,G);try{const B=JSON.parse(localStorage.getItem(M))||{},Z=new Date().getTime()-parseInt(B.timestamp,10)>=v.get().streaming.lastBitrateCachingInfo.ttl||!1,ne=parseFloat(B.bitrate);isNaN(ne)||Z?Z&&localStorage.removeItem(M):(D=ne,I.debug("Last saved bitrate for "+G+" was "+ne))}catch{return null}}return D},setSavedBitrateSettings:function(G,D){if(x(zs,Lc)&&D){const M=Dc.replace(/\?/,G);try{localStorage.setItem(M,JSON.stringify({bitrate:D.toFixed(3),timestamp:F()}))}catch(B){I.error(B.message)}}},getSavedMediaSettings:function(G){if(H(),!v.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let D=null;if(x(zs,Nc)){const M=Cc.replace(/\?/,G);try{const B=JSON.parse(localStorage.getItem(M))||{},Z=new Date().getTime()-parseInt(B.timestamp,10)>=v.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;D=B.settings,Z&&(localStorage.removeItem(M),D=null)}catch{return null}}return D},setSavedMediaSettings:function(G,D){if(x(zs,Nc)){const M=Cc.replace(/\?/,G);try{localStorage.setItem(M,JSON.stringify({settings:D,timestamp:F()}))}catch(B){I.error(B.message)}}}},I=(0,Ve.default)(y).getInstance().getLogger(_),z(zs)&&kc.forEach(G=>{const D=localStorage.getItem(G.oldKey);if(D){localStorage.removeItem(G.oldKey);try{localStorage.setItem(G.newKey,D)}catch(M){I.error(M.message)}}}),_}Mc.__dashjs_factory_name="DOMStorage";var Oc=xe.default.getSingletonFactory(Mc),uf=t(8986);function cf(){const S=this.context;let y,v,_,I,w,z,F,x,H,G,D,M;function B(re,se,oe,Ae){let Q=null;const U=re?M.resolve(re.path):null,V=Ae||{init:!0,url:U?U.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:se,representation:re};v.debug("Start searching for initialization.");const $=ie(V);F.load({request:$,success:function(ce){if(V.bytesLoaded=V.range.end,Q=I.findInitRange(ce),!Q)return V.range.end=V.bytesLoaded+V.bytesToLoad,B(re,se,oe,V);re.range=Q,oe(re)},error:function(){oe(re)}}),v.debug("Perform init search: "+V.url)}function Z(re,se,oe,Ae,Q,U){if(oe&&(oe.start===void 0||oe.end===void 0)){const Me=oe?oe.toString().split("-"):null;oe=Me?{start:parseFloat(Me[0]),end:parseFloat(Me[1])}:null}Q=Q||ne;let V=null,$=null;const ce=!!oe,Te=re?M.resolve(re.path):null,ge={init:!1,url:Te?Te.url:void 0,range:ce?oe:{start:0,end:1500},searching:!ce,bytesLoaded:U?U.bytesLoaded:0,bytesToLoad:1500,mediaType:se,representation:re},ve=ie(ge);F.load({request:ve,success:function(Me){const ze=ge.bytesToLoad,K=Me.byteLength;if(ge.bytesLoaded=ge.range.end-ge.range.start,V=I.parse(Me),$=V.getBox("sidx"),$&&$.isComplete){const X=$.references;let Se,ye;if(X!=null&&X.length>0&&(Se=X[0].reference_type===1),Se){let J,ue,he,le,Ie;v.debug("Initiate multiple SIDX load."),ge.range.end=ge.range.start+$.size;let we=[],Fe=0,je=($.offset||ge.range.start)+$.size;const at=function(lt){lt?(we=we.concat(lt),Fe++,Fe>=ue&&(we.sort(function(ot,qt){return ot.startTime-qt.startTime<0?-1:0}),Q(we,re,Ae))):Q(null,re,Ae)};for(J=0,ue=X.length;J<ue;J++)he=je,le=je+X[J].referenced_size-1,je+=X[J].referenced_size,Ie={start:he,end:le},Z(re,se,Ie,Ae,at,ge)}else v.debug("Parsing segments from SIDX. representation "+se+" - id: "+re.id+" for range : "+ge.range.start+" - "+ge.range.end),ye=function(J,ue){const he=J.references,le=he.length,Ie=J.timescale;let we=J.earliest_presentation_time,Fe=ue.range.start+J.offset+J.first_offset+J.size;const je=[];let at,lt,ot,qt;for(let Kt=0;Kt<le;Kt++)ot=he[Kt].subsegment_duration,qt=he[Kt].referenced_size,at=new Bt,at.duration=ot,at.startTime=we,at.timescale=Ie,lt=Fe+qt-1,at.mediaRange=Fe+"-"+lt,je.push(at),we+=ot,Fe+=qt;return je}($,ge),Q(ye,re,Ae)}else{if($)ge.range.start=$.offset||ge.range.start,ge.range.end=ge.range.start+($.size||ze);else{if(K<ge.bytesLoaded)return void Q(null,re,Ae);{const X=V.getLastBox();X&&X.size?(ge.range.start=X.offset+X.size,ge.range.end=ge.range.start+ze):ge.range.end+=ze}}Z(re,se,ge.range,Ae,null,ge)}},error:function(){Q(null,re,Ae)}}),v.debug(`Perform SIDX load for type ${se} : ${ge.url} with range ${ge.range.start} - ${ge.range.end}`)}function ne(re,se,oe){oe({segments:re,representation:se,error:re?void 0:new Ce.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ie(re){if(!re.url)return;const se=new nt;return se.setInfo(re),se}return y={setConfig:function(re){re.baseURLController&&(M=re.baseURLController),re.dashMetrics&&(w=re.dashMetrics),re.mediaPlayerModel&&(z=re.mediaPlayerModel),re.errHandler&&(_=re.errHandler),re.boxParser&&(I=re.boxParser),re.debug&&(v=re.debug.getLogger(y)),re.errors&&(x=re.errors),re.urlUtils&&(D=re.urlUtils),re.constants&&(H=re.constants),re.dashConstants&&(G=re.dashConstants)},initialize:function(){F=_s(S).create({errHandler:_,dashMetrics:w,mediaPlayerModel:z,boxParser:I,errors:x,urlUtils:D,constants:H,dashConstants:G})},loadInitialization:function(re,se){return new Promise(oe=>{B(re,se,oe)})},loadSegments:function(re,se,oe){return new Promise(Ae=>{Z(re,se,oe,Ae)})},reset:function(){F&&(F.abort(),F=null)}},y}cf.__dashjs_factory_name="SegmentBaseLoader";var df=xe.default.getSingletonFactory(cf);function Pc(S){let y;S=S||{};let v=new DataView(S.data),_=0;function I(z,F){let x,H,G=!0,D=0;if(F===void 0&&(F=!1),z.tag>16777215?(v.getUint32(_)!==z.tag&&(G=!1),D=4):z.tag>65535?(x=v.getUint16(_),H=v.getUint8(_+2),256*x+H!==z.tag&&(G=!1),D=3):z.tag>255?(v.getUint16(_)!==z.tag&&(G=!1),D=2):(v.getUint8(_)!==z.tag&&(G=!1),D=1),!G&&z.required&&!F)throw new Error("required tag not found");return G&&(_+=D),G}function w(z){let F=1,x=128,H=-1,G=0,D=v.getUint8(_),M=0;for(M=0;M<8;M+=1){if((D&x)===x){G=z===void 0?D&~x:D,H=M;break}x>>=1}for(M=0;M<H;M+=1,F+=1)G=G<<8|255&v.getUint8(_+F);return _+=F,G}return y={getPos:function(){return _},setPos:function(z){_=z},consumeTag:I,consumeTagAndSize:function(z,F){let x=I(z,F);return x&&w(),x},parseTag:function(z){let F;return I(z),F=w(),y[z.parse](F)},skipOverElement:function(z,F){let x,H=I(z,F);return H&&(x=w(),_+=x),H},getMatroskaCodedNum:w,getMatroskaFloat:function(z){let F;switch(z){case 4:F=v.getFloat32(_),_+=4;break;case 8:F=v.getFloat64(_),_+=8}return F},getMatroskaUint:function(z){if(z>4)return function(x){const H=Math.floor(Number.MAX_SAFE_INTEGER/256);let G=0;for(let D=0;D<x;D+=1){if(G>H)throw new Error("Value exceeds safe integer limit");G*=256;const M=v.getUint8(_+D);if(G>Number.MAX_SAFE_INTEGER-M)throw new Error("Value exceeds safe integer limit");G+=M}return _+=x,G}(z);let F=0;for(let x=0;x<z;x+=1)F<<=8,F|=255&v.getUint8(_+x);return _+=z,F>>>0},moreData:function(){return _<v.byteLength}},y}Pc.__dashjs_factory_name="EBMLParser";var zc=xe.default.getClassFactory(Pc);function su(){const S=this.context;let y,v,_,I,w,z,F,x,H;function G(D){const M=new nt;return M.setInfo(D),M}return y={setConfig:function(D){if(!(D.baseURLController&&D.dashMetrics&&D.mediaPlayerModel&&D.errHandler))throw new Error(q.default.MISSING_CONFIG_ERROR);H=D.baseURLController,w=D.dashMetrics,z=D.mediaPlayerModel,I=D.errHandler,x=D.errors,v=D.debug.getLogger(y)},initialize:function(){F=_s(S).create({errHandler:I,dashMetrics:w,mediaPlayerModel:z,errors:x})},loadInitialization:function(D,M){return new Promise(B=>{let Z=null,ne=D?H.resolve(D.path):null,ie=D?D.range.split("-"):null,re={range:{start:ie?parseFloat(ie[0]):null,end:ie?parseFloat(ie[1]):null},request:Z,url:ne?ne.url:void 0,init:!0,mediaType:M};v.info("Start loading initialization."),Z=G(re),F.load({request:Z,success:function(){B(D)},error:function(){B(D)}}),v.debug("Perform init load: "+re.url)})},loadSegments:function(D,M,B){return new Promise(Z=>{let ne=null,ie=D?H.resolve(D.path):null,re=ie?ie.url:void 0;ne=G({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:ne,url:re,init:!1,mediaType:M,representation:D}),v.debug("Parsing ebml header"),F.load({request:ne,success:function(se){(function(oe,Ae,Q,U){if(!oe||oe.byteLength===0)return void U(null);let V,$,ce,Te,ge=zc(S).create({data:oe}),ve=Q?Q.split("-"):null,Me=null,ze={url:Ae,range:{start:ve?parseFloat(ve[0]):null,end:ve?parseFloat(ve[1]):null},request:Me};for(v.debug("Parse EBML header: "+ze.url),ge.skipOverElement(_.EBML),ge.consumeTag(_.Segment),ce=ge.getMatroskaCodedNum(),ce+=ge.getPos(),Te=ge.getPos();ge.moreData()&&!ge.consumeTagAndSize(_.Segment.Info,!0);)if(!(ge.skipOverElement(_.Segment.SeekHead,!0)||ge.skipOverElement(_.Segment.Tracks,!0)||ge.skipOverElement(_.Segment.Cues,!0)||ge.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;V===void 0;){let K=ge.getMatroskaCodedNum(!0),X=ge.getMatroskaCodedNum();K===_.Segment.Info.Duration.tag?V=ge[_.Segment.Info.Duration.parse](X):ge.setPos(ge.getPos()+X)}Me=G(ze),F.load({request:Me,success:function(K){$=function(X,Se,ye,J){let ue,he,le,Ie,we,Fe,je,at;for(he=function(lt){let ot,qt,Kt=[],Xt=zc(S).create({data:lt});for(Xt.consumeTagAndSize(_.Segment.Cues);Xt.moreData()&&Xt.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for(ot={},ot.CueTime=Xt.parseTag(_.Segment.Cues.CuePoint.CueTime),ot.CueTracks=[];Xt.moreData()&&Xt.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){const In=Xt.getMatroskaCodedNum(),Lt=Xt.getPos();if(qt={},qt.Track=Xt.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),qt.Track===0)throw new Error("Cue track cannot be 0");qt.ClusterPosition=Xt.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),ot.CueTracks.push(qt),Xt.setPos(Lt+In)}if(ot.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Kt.push(ot)}if(Kt.length===0)throw new Error("mandatory cuepoint not found");return Kt}(X),le=[],we=0,Fe=he.length;we<Fe;we+=1)Ie=new Bt,ue=0,ue=we<he.length-1?he[we+1].CueTime-he[we].CueTime:J-he[we].CueTime,Ie.duration=ue,Ie.startTime=he[we].CueTime,Ie.timescale=1e3,je=he[we].CueTracks[0].ClusterPosition+Se,at=we<he.length-1?he[we+1].CueTracks[0].ClusterPosition+Se-1:ye-1,Ie.mediaRange=je+"-"+at,le.push(Ie);return v.debug("Parsed cues: "+le.length+" cues."),le}(K,Te,ce,V),U($)},error:function(){v.error("Download Error: Cues "+ze.url),U(null)}}),v.debug("Perform cues load: "+ze.url+" bytes="+ze.range.start+"-"+ze.range.end)})(se,re,B,function(oe){Z({segments:oe,representation:D,error:oe?void 0:new Ce.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Z({representation:D,error:new Ce.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){F&&(F.abort(),F=null)}},_={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},y}su.__dashjs_factory_name="WebmSegmentBaseLoader";var ff=xe.default.getSingletonFactory(su);function Fc(S){S=S||{};const y=this.context,v=S.eventBus,_=S.events,I=S.dashMetrics,w=S.mediaPlayerModel,z=S.errHandler,F=S.baseURLController,x=S.debug,H=S.boxParser,G=S.errors;let D,M,B;function Z(ne){return(ne?ne.split("/")[1]:"").toLowerCase()==="webm"}return D={initialize:function(){M.initialize(),B.initialize()},getSegmentBaseInitSegment:function(ne){return Z(ne.representation.mimeType)?B.loadInitialization(ne.representation,ne.mediaType):M.loadInitialization(ne.representation,ne.mediaType)},getSegmentList:function(ne){return Z(ne.mimeType)?B.loadSegments(ne.representation,ne.mediaType,ne.representation?ne.representation.indexRange:null):M.loadSegments(ne.representation,ne.mediaType,ne.representation?ne.representation.indexRange:null)},reset:function(){M.reset(),B.reset()}},M=df(y).getInstance(),B=ff(y).getInstance(),M.setConfig({baseURLController:F,dashMetrics:I,mediaPlayerModel:w,errHandler:z,eventBus:v,events:_,errors:G,debug:x,boxParser:H}),B.setConfig({baseURLController:F,dashMetrics:I,mediaPlayerModel:w,errHandler:z,eventBus:v,events:_,errors:G,debug:x}),D}Fc.__dashjs_factory_name="SegmentBaseController";var hf=xe.default.getSingletonFactory(Fc),lu=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},Uc=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},ig=class{constructor(){this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},gf=class{constructor(S){this.valid=S[0]=="/",this.path=S.split("/").filter(y=>y.length!==0).map(y=>{let v={name:y},_=y.indexOf("[");if(_!=-1){v.name=y.substring(0,_);let I=y.substring(_+1,y.length-1);this.valid=this.valid&&I.indexOf("[")==-1;let w=I.indexOf("=");w!=-1?(v.attribute={name:I.substring(1,w),value:I.substring(w+1)},["'",'"'].indexOf(v.attribute.value[0])!=-1&&(v.attribute.value=v.attribute.value.substring(1,v.attribute.value.length-1))):v.position=parseInt(I,10)-1}return v})}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(S,y){let v=null,_=S,I=1,w="MPD";for(;I<this.path.length&&_!==null;){v=_;let z=this.path[I];if(w=z.name,I!==this.path.length-1||!w.startsWith("@")&&w!=="text()"){let F=v[w]||[];if(F.length===0&&v[w]&&F.push(v[w]),z.position)_=F[z.position]||null;else if(z.attribute){let x=z.attribute;_=F.filter(H=>H[x.name]==x.value)[0]||null}else _=Array.isArray(F)?F[0]:F}I++}return _===null?null:w.startsWith("@")?{name:w.substring(1),leaf:_,target:_}:w==="text()"?{name:"__text",leaf:_,target:_}:{name:w,leaf:_,target:y?v:_}}},vl=class{constructor(S,y,v){this.action=S,this.xpath=y,this.value=v,this.position=null}getMpdTarget(S){let y=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(S,y)}};function fo(){let S,y;const v=this.context;return S={getIsPatch:function(_){return _&&_.hasOwnProperty(k.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(_){return _&&_[k.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(_){return _&&_.hasOwnProperty(k.default.ORIGINAL_PUBLISH_TIME)?new Date(_[k.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(_){return _?(_.__children||[]).map(I=>{const w=I.tagName;if(w!=="add"&&w!=="remove"&&w!=="replace")return y.warn(`Ignoring node of invalid action: ${w}`),null;let z=I.sel;if(w==="add"&&I.type){if(!I.type.startsWith("@"))return y.warn(`Ignoring add action for prefixed namespace declaration: ${I.type}=${I.__text}`),null;z=`${z}/${I.type}`}let F=new gf(z);if(!F.isValid())return y.warn(`Ignoring action with invalid selector: ${w} - ${z}`),null;let x=null;F.findsAttribute()||F.findsTextReplace()?x=I.__text||"":w!=="remove"&&(x=I.__children.reduce((G,D)=>{let M=D.tagName;return M!=="#text"&&(G[M]=G[M]||[],G[M].push(D)),G},{}));let H=new vl(w,F,x);return w==="add"&&(H.position=I.pos),H}).filter(I=>!!I):[]},getPublishTime:function(_){return _&&_.hasOwnProperty(k.default.PUBLISH_TIME)?new Date(_[k.default.PUBLISH_TIME]):null}},y=(0,Ve.default)(v).getInstance().getLogger(S),S}fo.__dashjs_factory_name="PatchManifestModel";var mf=xe.default.getSingletonFactory(fo);function Wi(S){let y=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof TextDecoder<"u"){const x=new TextDecoder("utf-8").decode(S);if(y){const H=x.indexOf("\0");return H!==-1?x.substring(0,H):x}return x.replace(/\0/g,"")}const v=S.length;let _,I,w,z="",F=0;for(;F<v;){if(_=S[F++],_===0&&y)return z;if(_!==0&&_!==3)switch(_>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:z+=String.fromCharCode(_);break;case 12:case 13:I=S[F++],z+=String.fromCharCode((31&_)<<6|63&I);break;case 14:I=S[F++],w=S[F++],z+=String.fromCharCode((15&_)<<12|(63&I)<<6|63&w)}}return z}function Fs(S){return function(y,v,_,I){const w=(z=y)instanceof ArrayBuffer?z:z.buffer;var z;let F=1;"BYTES_PER_ELEMENT"in I&&(F=I.BYTES_PER_ELEMENT);const x=(M=y)&&M.buffer instanceof ArrayBuffer&&M.byteLength!==void 0&&M.byteOffset!==void 0?y.byteOffset:0,H=(x+y.byteLength)/F,G=(x+v)/F,D=Math.floor(Math.max(0,Math.min(G,H)));var M;return new I(w,D,Math.floor(Math.min(D+Math.max(_,0),H))-D)}(S,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,Uint8Array)}function pf(S){return S.type==="PRIV"?function(y){if(y.size<2)return;const v=Wi(y.data,!0),_=new Uint8Array(y.data.subarray(v.length+1));return{key:y.type,info:v,data:_.buffer}}(S):S.type[0]==="W"?function(y){if(y.type==="WXXX"){if(y.size<2)return;let _=1;const I=Wi(y.data.subarray(_),!0);_+=I.length+1;const w=Wi(y.data.subarray(_));return{key:y.type,info:I,data:w}}const v=Wi(y.data);return{key:y.type,info:"",data:v}}(S):S.type==="APIC"?function(y){const v={key:y.type,description:"",data:"",mimeType:null,pictureType:null};if(y.size<2)return;if(y.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const _=y.data.subarray(1).indexOf(0);if(_===-1)return;const I=Wi(Fs(y.data,1,_)),w=y.data[2+_],z=y.data.subarray(3+_).indexOf(0);if(z===-1)return;const F=Wi(Fs(y.data,3+_,z));let x;return x=I==="-->"?Wi(Fs(y.data,4+_+z)):(H=y.data.subarray(4+_+z))instanceof ArrayBuffer?H:H.byteOffset==0&&H.byteLength==H.buffer.byteLength?H.buffer:new Uint8Array(H).buffer,v.mimeType=I,v.pictureType=w,v.description=F,v.data=x,v;var H}(S):function(y){if(y.size<2)return;if(y.type==="TXXX"){let _=1;const I=Wi(y.data.subarray(_),!0);_+=I.length+1;const w=Wi(y.data.subarray(_));return{key:y.type,info:I,data:w}}const v=Wi(y.data.subarray(1));return{key:y.type,info:"",data:v}}(S)}function Bc(S,y){let v=0;return v=(127&S[y])<<21,v|=(127&S[y+1])<<14,v|=(127&S[y+2])<<7,v|=127&S[y+3],v}function yf(S){const y=String.fromCharCode(S[0],S[1],S[2],S[3]),v=Bc(S,4);return{type:y,size:v,data:S.subarray(10,10+v)}}function Ef(S,y){return y+10<=S.length&&S[y]===51&&S[y+1]===68&&S[y+2]===73&&S[y+3]<255&&S[y+4]<255&&S[y+6]<128&&S[y+7]<128&&S[y+8]<128&&S[y+9]<128}function bf(S,y){return y+10<=S.length&&S[y]===73&&S[y+1]===68&&S[y+2]===51&&S[y+3]<255&&S[y+4]<255&&S[y+6]<128&&S[y+7]<128&&S[y+8]<128&&S[y+9]<128}function jc(){let S,y,v,_,I,w;const z=this.context;function F(Q,U){const V=U?U.index:0,$=y.getAdaptationsForType(_[V].mpd.manifest,V,Q);if(!$||$.length===0)return null;if($.length>1&&U){for(let Te=0,ge=$.length;Te<ge;Te++)if(ce=$[Te],y.getRolesForAdaptation(ce).filter(function(ve){return ve.schemeIdUri===q.default.DASH_ROLE_SCHEME_ID&&ve.value===k.default.MAIN})[0])return $[Te]}var ce;return $[0]}function x(Q,U,V,$,ce,Te){let ge,ve,Me,ze,K,X,Se=[];if(!$||$.length===0)return[];const ye=y.getAdaptationsForPeriod(U);for(ze=0,X=$.length;ze<X;ze++)if(ge=$[ze],Me=y.getIndexForAdaptation(ge,Q,V.index),ve=ne(ye[Me]),Te){let J=ve.accessibility.length;for(K=0;K<J;K++){if(!ve)continue;let ue=ve.accessibility[K];if(ue.schemeIdUri===I.ACCESSIBILITY_CEA608_SCHEME)if(ue.value&&ue.value!==""){let he=ue.value.split(";");if(he[0].substring(0,2)==="CC")for(K=0;K<he.length;K++)ve||(ve=ne.call(this,ye[Me])),ie(ve,he[K].substring(0,3),he[K].substring(4)),Se.push(ve),ve=null;else for(K=0;K<he.length;K++)ve||(ve=ne.call(this,ye[Me])),ie(ve,"CC"+(K+1),he[K]),Se.push(ve),ve=null}else ie(ve,I.CC1,"eng"),Se.push(ve),ve=null}}else ce===I.IMAGE?(ve.type=I.IMAGE,Se.push(ve),ve=null):ve&&Se.push(ve);return Se}function H(Q){const U=G(Q);return y.getRegularPeriods(U)}function G(Q){const U=M(Q);return y.getMpd(U)}function D(){_=[]}function M(Q){return Q||(_.length>0?_[0].mpd.manifest:null)}function B(Q){try{const U=Z(Q.streamInfo,_),V=y.getAdaptationsForPeriod(U);return Q&&Q.streamInfo&&Q.streamInfo.id!==void 0&&V?V[Q.index]:null}catch{return null}}function Z(Q,U){const V=U.length;for(let $=0;$<V;$++){let ce=U[$];if(Q&&Q.id===ce.id)return ce}return null}function ne(Q){if(!Q)return null;let U=new lu;const V=Q.period.mpd.manifest.Period[Q.period.index].AdaptationSet[Q.index];return U.id=Q.id,U.index=Q.index,U.type=Q.type,U.streamInfo=re(Q.period),U.representationCount=y.getRepresentationCount(V),U.labels=y.getLabelsForAdaptation(V),U.lang=y.getLanguageForAdaptation(V),U.segmentAlignment=y.getSegmentAlignment(V),U.subSegmentAlignment=y.getSubSegmentAlignment(V),U.viewpoint=y.getViewpointForAdaptation(V),U.accessibility=y.getAccessibilityForAdaptation(V),U.accessibility.filter(function($){if($.schemeIdUri&&$.schemeIdUri.search("cea-608")>=0&&w!==void 0)return!0})[0]&&(U.embeddedCaptions=!0),U.audioChannelConfiguration=y.getAudioChannelConfigurationForAdaptation(V),U.audioChannelConfiguration.length===0&&V.Representation&&V.Representation.length>0&&(U.audioChannelConfiguration=y.getAudioChannelConfigurationForRepresentation(V.Representation[0])),U.roles=y.getRolesForAdaptation(V),U.codec=y.getCodec(V),U.mimeType=y.getMimeType(V),U.contentProtection=y.getContentProtectionByAdaptation(V),U.bitrateList=y.getBitrateListForAdaptation(V),U.selectionPriority=y.getSelectionPriority(V),U.contentProtection&&U.contentProtection.length>0&&(U.contentProtection=function($,ce){if(!$||!$.length||!ce)return $;const Te=y.getContentProtectionByManifest(ce);if(!Te||!Te.length)return $;const ge=Te.reduce((ve,Me)=>(Me.refId&&ve.set(Me.refId,Me),ve),new Map);return $.map(ve=>{if(ve.ref){const Me=ge.get(ve.ref);Me&&ve.mergeAttributesFromReference(Me)}return ve})}(U.contentProtection,Q.period.mpd.manifest),U.contentProtection=function($){const ce=$.map(Te=>Te.cencDefaultKid).filter(Te=>Te!==null);if(ce.length){const Te=ce[0];$.forEach(ge=>{ge.keyId=Te})}return $}(U.contentProtection),U.normalizedKeyIds=function($){const ce=new Set;return $.forEach(Te=>{Te.cencDefaultKid&&typeof Te.cencDefaultKid=="string"&&ce.add(Te.cencDefaultKid.replace(/-/g,"").toLowerCase())}),ce}(U.contentProtection)),U.isText=y.getIsText(V),U.essentialProperties=y.getCombinedEssentialPropertiesForAdaptationSet(V),U.supplementalProperties=y.getCombinedSupplementalPropertiesForAdaptationSet(V),U.isFragmented=y.getIsFragmented(V),U.isEmbedded=!1,U.adaptationSetSwitchingCompatibleIds=function($){if(!$||!$.supplementalProperties)return[];let ce=[];const Te=$.supplementalProperties.filter(ge=>ge.schemeIdUri===k.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI);return Te&&Te.length>0&&(ce=Te[0].value.toString().split(",").map(ge=>ge)),ce}(U),U}function ie(Q,U,V){Q.id=U,Q.index=100+parseInt(U.substring(2,3)),Q.type=I.TEXT,Q.codec="cea-608-in-SEI",Q.isEmbedded=!0,Q.isFragmented=!1,Q.lang=eo(V),Q.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function re(Q){let U=new Uc;return U.id=Q.id,U.index=Q.index,U.start=Q.start,U.duration=Q.duration,U.manifestInfo=function(V){let $=new ig;return $.dvrWindowSize=V.timeShiftBufferDepth,$.loadedTime=V.manifest.loadedTime,$.availableFrom=V.availabilityStartTime,$.minBufferTime=V.manifest.minBufferTime,$.maxFragmentDuration=V.maxSegmentDuration,$.duration=y.getDuration(V.manifest),$.isDynamic=y.getIsDynamic(V.manifest),$.serviceDescriptions=y.getServiceDescriptions(V.manifest),$.protocol=V.manifest.protocol,$}(Q.mpd),U.isLast=Q.mpd.manifest.Period.length===1||Math.abs(U.start+U.duration-U.manifestInfo.duration)<1,U.isEncrypted=Q.isEncrypted,U}function se(){if(!I)throw new Error("setConfig function has to be called previously")}function oe(Q){return _.length>0?_[0].mpd.manifest.Period[Q]:null}function Ae(Q,U,V){let $,ce,Te,ge,ve,Me;if(Q){for(ce=Q.AdaptationSet,ve=0;ve<ce.length;ve+=1)for($=ce[ve],ge=$.Representation,Me=0;Me<ge.length;Me+=1)if(Te=ge[Me],U===Te.id)return V?Me:Te}return null}return S={applyPatchToManifest:function(Q,U){v.getPatchOperations(U).forEach(V=>{let $=V.getMpdTarget(Q);if($===null)return;let{name:ce,target:Te,leaf:ge}=$;if(V.xpath.findsAttribute()||ce==="__text"){switch(V.action){case"add":case"replace":Te[ce]=V.value;break;case"remove":delete Te[ce]}return}let ve=(Te[ce]||[]).indexOf(ge),Me=V.position==="prepend"||V.position==="before";if(V.action==="remove"||V.action==="replace")if(Array.isArray(Te[ce])){if(ve!=-1){let ze=Te[ce];ze.splice(ve,1),ze.length>0?Te[ce]=ze:delete Te[ce]}}else delete Te[ce];V.action!=="add"&&V.action!=="replace"||Object.keys(V.value).forEach(ze=>{let K=V.value[ze],X=Te[ze]||[];if(X.length===0&&Te[ze]&&X.push(Te[ze]),X.length===0)X=K;else{let Se=X.length;Se=ze==ce&&ve!=-1?ve+(Me?0:1)+(V.action==="replace"?-1:0):Me?0:X.length,X.splice.apply(X,[Se,0].concat(K))}Te[ze]=X})})},areMediaInfosEqual:function(Q,U){if(!Q||!U)return!1;const V=Q.id===U.id,$=Q.codec===U.codec,ce=JSON.stringify(Q.viewpoint)===JSON.stringify(U.viewpoint),Te=Q.lang===U.lang,ge=JSON.stringify(Q.roles)===JSON.stringify(U.roles),ve=JSON.stringify(Q.accessibility)===JSON.stringify(U.accessibility),Me=JSON.stringify(Q.audioChannelConfiguration)===JSON.stringify(U.audioChannelConfiguration);return V&&$&&ce&&Te&&ge&&ve&&Me},getAllMediaInfoForType:function(Q,U,V){let $=_,ce=V,Te=[];if(ce)se(),$=H(ce);else{if(!(_.length>0))return Te;ce=_[0].mpd.manifest}const ge=Z(Q,$);let ve=y.getAdaptationsForType(ce,Q?Q.index:null,U);return Te=x(ce,ge,Q,ve,U),U===I.TEXT&&(ve=y.getAdaptationsForType(ce,Q?Q.index:null,I.VIDEO),Te=Te.concat(x(ce,ge,Q,ve,U,!0))),Te},getAvailabilityStartTime:function(Q){const U=G(Q);return y.getAvailabilityStartTime(U)},getBandwidthForRepresentation:function(Q,U){let V;return V=Ae(oe(U),Q),V?V.bandwidth:null},getBaseURLsFromElement:function(Q){return y.getBaseURLsFromElement(Q)},getCodec:function(Q,U,V){return y.getCodec(Q,U,V)},getContentSteering:function(Q){return y.getContentSteering(Q)},getDuration:function(Q){const U=M(Q);return y.getDuration(U)},getEssentialPropertiesForAdaptationSet:function(Q){try{return y.getEssentialPropertiesForRepresentation(Q)}catch{return[]}},getEssentialPropertiesForRepresentation:function(Q){try{return y.getEssentialPropertiesForRepresentation(Q)}catch{return[]}},getEvent:function(Q,U,V,$){try{if(!Q||!U||isNaN(V)||!$)return null;const ce=Q.scheme_id_uri,Te=Q.value;if(!U[ce+"/"+Te])return null;const ge=new Lr,ve=Q.timescale||1,Me=$.adaptation.period.start,ze=U[ce+"/"+Te],K=isNaN($.presentationTimeOffset)?isNaN(ze.presentationTimeOffset)?0:ze.presentationTimeOffset:$.presentationTimeOffset;let X,Se=Q.presentation_time_delta/ve;X=Q.version===0?Me+V-K+Se:Me-K+Se;const ye=Q.event_duration/ve,J=Q.id,ue=Q.message_data;return ge.eventStream=ze,ge.eventStream.value=Te,ge.eventStream.timescale=ve,ge.duration=ye,ge.id=J,ge.calculatedPresentationTime=X,ge.messageData=ue,ge.presentationTimeDelta=Se,ge.parsedMessageData=ce===q.default.ID3_SCHEME_ID_URI?function(he){let le=0;const Ie=[];for(;bf(he,le);){const we=Bc(he,le+6);he[le+5]>>6&1&&(le+=10),le+=10;const Fe=le+we;for(;le+10<Fe;){const je=yf(he.subarray(le)),at=pf(je);at&&Ie.push(at),le+=je.size+10}Ef(he,le)&&(le+=10)}return Ie}(ue):null,ge}catch{return null}},getEventsFor:function(Q,U,V){let $=[];if(_.length>0){const ce=_[0].mpd.manifest;if(Q instanceof Uc){const Te=Z(Q,_);$=y.getEventsForPeriod(Te)}else if(Q instanceof lu){const Te=Z(V,_);$=y.getEventStreamForAdaptationSet(ce,B(Q),Te)}else if(Q instanceof fa){const Te=Z(V,_);$=y.getEventStreamForRepresentation(ce,U,Te)}}return $},getFramerate:function(Q){return y.getFramerate(Q)},getIndexForRepresentation:function(Q,U){return function(V,$){const ce=Ae(V,$,!0);return ce!==null?ce:-1}(oe(U),Q)},getIsDVB:function(Q){return y.hasProfile(Q,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(Q){const U=M(Q);return y.getIsDynamic(U)},getIsPatch:function(Q){return v.getIsPatch(Q)},getIsTextTrack:function(Q){return y.getIsText(Q)},getIsTypeOf:function(Q,U){return y.getIsTypeOf(Q,U)},getLocation:function(Q){return y.getLocation(Q)},getMainAdaptationForType:F,getManifestUpdatePeriod:function(Q){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return y.getManifestUpdatePeriod(Q,U)},getMediaInfoForType:function(Q,U){if(_.length===0||!Q)return null;let V=Z(Q,_);if(!V)return null;const $=y.getAdaptationsForPeriod(V);let ce=F(U,Q);return ce?ne($[y.getIndexForAdaptation(ce,_[0].mpd.manifest,Q.index)]):null},getMpd:G,getPatchLocation:function(Q){const U=y.getPatchLocation(Q),V=y.getPublishTime(Q);return U&&U.length!==0&&V?U.filter($=>isNaN($.ttl)||V.getTime()+$.ttl>new Date().getTime()):[]},getPeriodById:function(Q){if(!Q||_.length===0)return null;const U=_.filter(V=>V.id===Q);return U&&U.length>0?U[0]:null},getProducerReferenceTimes:function(Q,U){let V,$;const ce=Z(Q,_);return V=U?U.id:null,_.length>0&&ce&&($=V?y.getAdaptationForId(V,_[0].mpd.manifest,ce.index):y.getAdaptationForIndex(U?U.index:null,_[0].mpd.manifest,ce.index)),$?y.getProducerReferenceTimesForAdaptation($):[]},getPublishTime:function(Q){return y.getPublishTime(Q)},getRealAdaptation:function(Q,U){let V,$;const ce=Z(Q,_);return V=U?U.id:null,_.length>0&&ce&&($=V?y.getAdaptationForId(V,_[0].mpd.manifest,ce.index):y.getAdaptationForIndex(U?U.index:null,_[0].mpd.manifest,ce.index)),$},getRealPeriodByIndex:function(Q){return y.getRealPeriodForIndex(Q,_[0].mpd.manifest)},getRegularPeriods:H,getRepresentationSortFunction:function(){return y.getRepresentationSortFunction()},getStreamsInfo:function(Q,U){const V=[];let $=_;if(Q&&(se(),$=H(Q)),$.length>0){(!U||U>$.length)&&(U=$.length);for(let ce=0;ce<U;ce++)V.push(re($[ce]))}return V},getSuggestedPresentationDelay:function(){const Q=_.length>0?_[0].mpd:null;return y.getSuggestedPresentationDelay(Q)},getSupplementalCodecs:function(Q){const U=Q[k.default.SUPPLEMENTAL_CODECS];return U?U.split(" ").map(V=>Q.mimeType+';codecs="'+V+'"'):[]},getUTCTimingSources:function(){const Q=M();return y.getUTCTimingSources(Q)},getVoRepresentations:function(Q){let U;const V=B(Q);return U=y.getRepresentationsForAdaptation(V,Q),U},isPatchValid:function(Q,U){let V=y.getId(Q),$=v.getMpdId(U),ce=y.getPublishTime(Q),Te=v.getPublishTime(U),ge=v.getOriginalPublishTime(U);return!!(V&&$&&V==$&&ce&&ge&&ce.getTime()==ge.getTime()&&Te&&ce.getTime()<Te.getTime())},reset:D,setConfig:function(Q){Q&&(Q.constants&&(I=Q.constants),Q.cea608parser&&(w=Q.cea608parser),Q.errHandler&&y.setConfig({errHandler:Q.errHandler}),Q.BASE64&&y.setConfig({BASE64:Q.BASE64}))},updatePeriods:function(Q){if(!Q)return null;se(),_=H(Q)}},y=Ia(z).getInstance(),v=mf(z).getInstance(),D(),S}jc.__dashjs_factory_name="DashAdapter";var qc=xe.default.getSingletonFactory(jc);class Tf{static round10(y,v){return function(_,I,w){return w===void 0||+w==0?Math[_](I):(w=+w,(I=+I)===null||isNaN(I)||typeof w!="number"||w%1!=0?NaN:(I=I.toString().split("e"),+((I=(I=Math[_](+(I[0]+"e"+(I[1]?+I[1]-w:-w)))).toString().split("e"))[0]+"e"+(I[1]?+I[1]+w:w))))}("round",y,v)}}var vf=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},Gc=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},Sf=class{constructor(){this.t=null,this.level=null}},_f=class{constructor(){this.target=null,this.state=ee.BUFFER_EMPTY}},rg=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},Hc=class{constructor(){this.time=null,this.droppedFrames=null}};class Af{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class Rf{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class Vc{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var If=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},xf=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function wf(S){const y=(S=S||{}).settings;let v,_,I=this.context,w=(0,Ee.default)(I).getInstance();function z(){w.trigger(P.default.METRICS_CHANGED)}function F(B){w.trigger(P.default.METRIC_CHANGED,{mediaType:B}),z()}function x(B,Z,ne){w.trigger(P.default.METRIC_UPDATED,{mediaType:B,metric:Z,value:ne}),F(B)}function H(B,Z,ne){w.trigger(P.default.METRIC_ADDED,{mediaType:B,metric:Z,value:ne}),F(B)}function G(B,Z){let ne=null;return B&&(_.hasOwnProperty(B)?ne=_[B]:Z||(ne=new vf,_[B]=ne)),ne}function D(B,Z,ne){let ie=G(B);ie!==null&&(ie[Z].push(ne),ie[Z].length>y.get().streaming.metrics.maxListDepth&&ie[Z].shift())}function M(B,Z,ne){D(B,Z,ne),H(B,Z,ne)}return v={addBufferLevel:function(B,Z,ne){let ie=new Sf;ie.t=Z,ie.level=ne,M(B,ee.BUFFER_LEVEL,ie)},addBufferState:function(B,Z,ne){let ie=new _f;ie.target=ne,ie.state=Z,M(B,ee.BUFFER_STATE,ie)},addDVBErrors:function(B){M(q.default.STREAM,ee.DVB_ERRORS,B)},addDVRInfo:function(B,Z,ne,ie){let re=new rg;re.time=Z,re.range=ie,re.manifestInfo=ne,M(B,ee.DVR_INFO,re)},addDroppedFrames:function(B,Z){let ne=new Hc,ie=G(B).DroppedFrames;Z&&(ne.time=Z.creationTime,ne.droppedFrames=Z.droppedVideoFrames,ie.length>0&&ie[ie.length-1]==ne||M(B,ee.DROPPED_FRAMES,ne))},addHttpRequest:function B(Z,ne,ie,re){let se=new _e.HTTPRequest;ne.url&&ne.url!==Z.url&&(B({mediaType:Z.mediaType,type:Z.type,url:Z.url,serviceLocation:null,range:Z.range,startDate:Z.startDate,firstByteDate:null,endDate:null,duration:Z.duration,fileLoaderType:Z.fileLoaderType,resourceTimingValues:Z.resourceTimingValues},{url:null,status:null,headers:null},null,re),se.actualurl=ne.url),se.tcpid=null,se.type=Z.type,se.url=Z.url,se.range=Z.range||null,se.trequest=Z.startDate,se.tresponse=Z.firstByteDate,se.responsecode=ne.status,se.cmsd=re,se._tfinish=Z.endDate,se._stream=Z.mediaType,se._mediaduration=Z.duration,se._responseHeaders="";for(const oe in ne.headers)se._responseHeaders+=oe+": "+ne.headers[oe]+`\r
`;se._serviceLocation=Z.serviceLocation||null,se._fileLoaderType=Z.fileLoaderType,se._resourceTimingValues=Z.resourceTimingValues,se._streamId=Z&&Z.representation&&Z.representation.mediaInfo&&Z.representation.mediaInfo.streamInfo?Z.representation.mediaInfo.streamInfo.id:null,ie?ie.forEach(oe=>{(function(Ae,Q,U,V){let $=new _e.HTTPRequestTrace;$.s=Q,$.d=U,$.b=V,Ae.trace.push($),Ae.interval||(Ae.interval=0),Ae.interval+=U})(se,oe.s,oe.d,oe.b,oe.t)}):(delete se.interval,delete se.trace),M(Z.mediaType,ee.HTTP_REQUEST,se)},addManifestUpdate:function(B,Z,ne,ie){let re=new Af;re.mediaType=B,re.type=Z,re.requestTime=ne,re.fetchTime=ie,D(q.default.STREAM,ee.MANIFEST_UPDATE,re),H(B,ee.MANIFEST_UPDATE,re)},addManifestUpdateRepresentationInfo:function(B,Z,ne){if(B&&B.representationInfo){const ie=new Vc;ie.id=Z?Z.id:null,ie.index=Z?Z.index:null,ie.mediaType=ne,ie.startNumber=Z?Z.startNumber:null,ie.presentationTimeOffset=Z?Z.presentationTimeOffset:null,B.representationInfo.push(ie),x(B.mediaType,ee.MANIFEST_UPDATE_TRACK_INFO,B)}},addManifestUpdateStreamInfo:function(B,Z,ne,ie,re){if(B){let se=new Rf;se.id=Z,se.index=ne,se.start=ie,se.duration=re,B.streamInfo.push(se),x(B.mediaType,ee.MANIFEST_UPDATE_STREAM_INFO,B)}},addPlayList:function(B){B.trace&&Array.isArray(B.trace)?B.trace.forEach(Z=>{Z.hasOwnProperty("subreplevel")&&!Z.subreplevel&&delete Z.subreplevel}):delete B.trace,M(q.default.STREAM,ee.PLAY_LIST,B)},addRepresentationSwitch:function(B,Z,ne,ie,re){let se=new Gc;se.t=Z,se.mt=ne,se.to=ie,re?se.lto=re:delete se.lto,M(B,ee.TRACK_SWITCH,se)},addRequestsQueue:function(B,Z,ne){let ie=new xf;ie.loadingRequests=Z,ie.executedRequests=ne,G(B).RequestsQueue=ie,H(B,ee.REQUESTS_QUEUE,ie)},addSchedulingInfo:function(B,Z,ne,ie,re,se,oe,Ae,Q){let U=new If;U.mediaType=B,U.t=Z,U.type=ne,U.startTime=ie,U.availabilityStartTime=re,U.duration=se,U.bandwidth=oe,U.range=Ae,U.state=Q,M(B,ee.SCHEDULING_INFO,U)},clearAllCurrentMetrics:function(){_={},z()},clearCurrentMetricsForType:function(B){delete _[B],F(B)},getMetricsFor:G,updateManifestUpdateInfo:function(B,Z){if(B){for(let ne in Z)B[ne]=Z[ne];x(B.mediaType,ee.MANIFEST_UPDATE,B)}}},_={},v}wf.__dashjs_factory_name="MetricsModel";var sg=xe.default.getSingletonFactory(wf);function Yc(S){S=S||{};const y=this.context;let v,_,I,w,z=S.metricsModel;function F(G){const D=z.getMetricsFor(G,!0);if(!D)return null;const M=D.HttpList;let B,Z=null;if(!M||M.length<=0)return null;for(B=M.length-1;B>=0;){if(M[B].responsecode){Z=M[B];break}B--}return Z}function x(G){const D=z.getMetricsFor(G,!0);return D&&D.HttpList?D.HttpList:[]}function H(G,D){if(!G)return null;const M=G[D];return M&&M.length!==0?M[M.length-1]:null}return v={getCurrentRepresentationSwitch:function(G){return H(z.getMetricsFor(G,!0),ee.TRACK_SWITCH)},getCurrentBufferState:function(G){return H(z.getMetricsFor(G,!0),ee.BUFFER_STATE)},getCurrentBufferLevel:function(G){const D=H(z.getMetricsFor(G,!0),ee.BUFFER_LEVEL);return D?Tf.round10(D.level/1e3,-3):0},getCurrentHttpRequest:F,getHttpRequests:x,getCurrentDroppedFrames:function(){return H(z.getMetricsFor(q.default.VIDEO,!0),ee.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(G){return H(z.getMetricsFor(G,!0),ee.SCHEDULING_INFO)},getCurrentDVRInfo:function(G){return H(G?z.getMetricsFor(G,!0):z.getMetricsFor(q.default.VIDEO,!0)||z.getMetricsFor(q.default.AUDIO,!0),ee.DVR_INFO)},getCurrentManifestUpdate:function(){return H(z.getMetricsFor(q.default.STREAM),ee.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(G,D){if(!D)return null;let M={},B=F(G);B&&(M=sa.default.parseHttpHeaders(B._responseHeaders));const Z=M[D.toLowerCase()];return Z===void 0?null:Z},getLatestMPDRequestHeaderValueByID:function(G){if(!G)return null;let D,M,B,Z={};for(D=x(q.default.STREAM),B=D.length-1;B>=0;B--)if(M=D[B],M.type===_e.HTTPRequest.MPD_TYPE){Z=sa.default.parseHttpHeaders(M._responseHeaders);break}const ne=Z[G.toLowerCase()];return ne===void 0?null:ne},addRepresentationSwitch:function(G,D,M,B,Z){z.addRepresentationSwitch(G,D,M,B,Z)},addDVRInfo:function(G,D,M,B){z.addDVRInfo(G,D,M,B)},updateManifestUpdateInfo:function(G){const D=this.getCurrentManifestUpdate();z.updateManifestUpdateInfo(D,G)},addManifestUpdateStreamInfo:function(G){if(G){const D=this.getCurrentManifestUpdate();z.addManifestUpdateStreamInfo(D,G.id,G.index,G.start,G.duration)}},addManifestUpdateRepresentationInfo:function(G,D){if(G){const M=this.getCurrentManifestUpdate();z.addManifestUpdateRepresentationInfo(M,G,D)}},addManifestUpdate:function(G){z.addManifestUpdate(q.default.STREAM,G.type,G.startDate,G.endDate)},addHttpRequest:function(G,D,M,B,Z,ne){const ie={status:M,headers:B,url:D};z.addHttpRequest(G,ie,Z,ne)},addSchedulingInfo:function(G,D){z.addSchedulingInfo(G.mediaType,new Date,G.type,G.startTime,G.availabilityStartTime,G.duration,G.bandwidth,G.range,D)},addRequestsQueue:function(G,D,M){z.addRequestsQueue(G,D,M)},addBufferLevel:function(G,D,M){z.addBufferLevel(G,D,M)},addBufferState:function(G,D,M){z.addBufferState(G,D,M)},addDroppedFrames:function(G){z.addDroppedFrames(q.default.VIDEO,G)},addPlayList:function(){w&&(z.addPlayList(w),w=null)},addDVBErrors:function(G){z.addDVBErrors(G)},createPlaylistMetrics:function(G,D){w=new It,w.start=new Date,w.mstart=G,w.starttype=D},createPlaylistTraceMetrics:function(G,D,M){_===!0&&(_=!1,I=new Ot,I.representationid=G,I.start=new Date,I.mstart=D,I.playbackspeed=M!==null?M.toString():null)},updatePlayListTraceMetrics:function(G){if(I)for(let D in I)I[D]=G[D]},pushPlayListTraceMetrics:function(G,D){if(_===!1&&w&&I&&I.start){const M=I.start;I.duration=G.getTime()-M.getTime(),I.stopreason=D,w.trace.push(I),_=!0}},clearAllCurrentMetrics:function(){z.clearAllCurrentMetrics()}},z=z||sg(y).getInstance({settings:S.settings}),_=!0,I=null,w=null,v}Yc.__dashjs_factory_name="DashMetrics";var ho=xe.default.getSingletonFactory(Yc);function ou(){const S=this.context,y=(0,Ee.default)(S).getInstance(),v=(0,W.default)(S).getInstance();let _,I,w,z;function F(re){z=re}function x(re,se,oe,Ae){let Q,U=se.adaptation.period.mpd;const V=U.availabilityStartTime;if(Ae)Q=oe&&U.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(V.getTime()+1e3*(re+U.timeShiftBufferDepth)):U.availabilityEndTime;else if(oe){const $=se.availabilityTimeOffset;Q=new Date(V.getTime()+1e3*(re-$))}else Q=V;return Q}function H(re,se){return(re.getTime()-se.mpd.availabilityStartTime.getTime()+1e3*z)/1e3}function G(re,se){return re+(se.adaptation.period.start-se.presentationTimeOffset)}function D(re){const se={start:NaN,end:NaN},oe=re[0].getAdapter().getRegularPeriods()[0],Ae=H(new Date,oe);if(!re||re.length===0)return{range:se,now:Ae};re.forEach(U=>{let V=U.getCurrentRepresentationForType(q.default.VIDEO);if(V||(V=U.getCurrentRepresentationForType(q.default.AUDIO)),!V){const ce=U.getAdapter(),Te=ce.getMediaInfoForType(U.getStreamInfo(),q.default.VIDEO)||ce.getMediaInfoForType(U.getStreamInfo(),q.default.AUDIO);V=ce.getVoRepresentations(Te)[0]}let $={start:NaN,end:NaN};if(V)if(V.segmentInfoType===k.default.SEGMENT_TIMELINE)$=function(ce){const Te=ce.adaptation.period.mpd.manifest.Period[ce.adaptation.period.index].AdaptationSet[ce.adaptation.index],ge=I.getRepresentationFor(ce.index,Te),ve=ge.SegmentTemplate||ge.SegmentList,Me=ve.SegmentTimeline,ze=ve.timescale,K=Me.S,X={start:0,end:0},Se=K[0].t,ye=!isNaN(Se),J=ye?Se:0;let ue,he,le,Ie,we=0;for(ye&&(X.start=G(J/ze,ce)),le=0,Ie=K.length;le<Ie;le++)ue=K[le],he=0,ue.hasOwnProperty("r")&&(he=ue.r),we+=ue.d*(1+he);return X.end=G((J+we)/ze,ce),X}(V);else{const ce=V.adaptation.period;$.start=ce.start,$.end=Math.max(Ae,ce.start+ce.duration)}!isNaN($.start)&&(isNaN(se.start)||se.start>$.start)&&(se.start=$.start),!isNaN($.end)&&(isNaN(se.end)||se.end<$.end)&&(se.end=$.end)}),se.end=Math.min(Ae,se.end);const Q=B(re,se.end,!0);return se.end=isNaN(Q)?se.end:Q,se.start=oe&&oe.mpd&&oe.mpd.timeShiftBufferDepth&&!isNaN(oe.mpd.timeShiftBufferDepth)&&!isNaN(se.end)?Math.max(se.end-oe.mpd.timeShiftBufferDepth,se.start):se.start,se.start=B(re,se.start),{range:se,now:Ae}}function M(re,se){w=re-se.end}function B(re,se){let oe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let Ae=0,Q=!1,U=NaN;for(;!Q&&Ae<re.length;){const V=re[Ae].getStreamInfo();V.start<=se&&(!isFinite(V.duration)||V.start+V.duration>=se)?(U=se,Q=!0):!oe&&V.start>se&&(isNaN(U)||V.start<U)?U=V.start:oe&&V.start+V.duration<se&&(isNaN(U)||V.start+V.duration>U)&&(U=V.start+V.duration),Ae+=1}return U}catch{return se}}function Z(re){re.offset===void 0||isNaN(re.offset)||F(re.offset/1e3)}function ne(){z=0,w=0}function ie(){y.off(P.default.UPDATE_TIME_SYNC_OFFSET,Z,this),ne()}return _={initialize:function(){ne(),y.on(P.default.UPDATE_TIME_SYNC_OFFSET,Z,this)},getClientTimeOffset:function(){return z},setClientTimeOffset:F,getClientReferenceTime:function(){return Date.now()-1e3*w+1e3*z},calcAvailabilityStartTimeFromPresentationTime:function(re,se,oe){return x(re,se,oe)},calcAvailabilityEndTimeFromPresentationTime:function(re,se,oe){return x(re,se,oe,!0)},calcPresentationTimeFromWallTime:H,calcPresentationTimeFromMediaTime:G,calcPeriodRelativeTimeFromMpdRelativeTime:function(re,se){return se-re.adaptation.period.start},calcMediaTimeFromPresentationTime:function(re,se){return re-se.adaptation.period.start+se.presentationTimeOffset},calcWallTimeForSegment:function(re,se){let oe,Ae,Q;return se&&(oe=re.representation.adaptation.period.mpd.suggestedPresentationDelay,Ae=re.presentationStartTime+oe,Q=new Date(re.availabilityStartTime.getTime()+1e3*Ae)),Q},calcTimeShiftBufferWindow:function(re,se){if(!se)return function(oe){const Ae={start:NaN,end:NaN};let Q=0,U=NaN;return oe.forEach(V=>{const $=V.getStreamInfo();Q+=$.duration,(isNaN(U)||$.start<U)&&(U=$.start)}),Ae.start=U,Ae.end=U+Q,Ae}(re);if(v.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const oe=D(re);return M(oe.now,oe.range),oe.range}return function(oe){const Ae={start:NaN,end:NaN};if(!oe||oe.length===0)return Ae;const Q=oe[0].getAdapter().getRegularPeriods()[0],U=H(new Date,Q),V=Q.mpd.timeShiftBufferDepth,$=isNaN(V)?0:U-V;if(Ae.start=B(oe,$),Ae.end=!isNaN(Ae.start)&&U<Ae.start?U:B(oe,U,!0),!isNaN(V)&&Ae.end<U-V&&(Ae.end=NaN),v.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const ce=D(oe);if(ce.range.end<Ae.start)return y.trigger(be.default.CONFORMANCE_VIOLATION,{level:Xi.LEVELS.WARNING,event:Xi.EVENTS.INVALID_DVR_WINDOW}),M(ce.now,ce.range),ce.range}return Ae}(re)},reset:ie},I=Ia(S).getInstance(),ie(),_}ou.__dashjs_factory_name="TimelineConverter";var Fi,uu,Sl,Us,cu,kf=xe.default.getSingletonFactory(ou),lg=function(S){for(var y=[],v=0;v<S.length;++v){var _=S.charCodeAt(v);_<128?y.push(_):_<2048?(y.push(192|_>>6),y.push(128|63&_)):_<65536?(y.push(224|_>>12),y.push(128|63&_>>6),y.push(128|63&_)):(y.push(240|_>>18),y.push(128|63&_>>12),y.push(128|63&_>>6),y.push(128|63&_))}return y},_l=function(S){for(var y=[],v=0;v<S.length;){var _=S[v++];_<128||(_<224?(_=(31&_)<<6,_|=63&S[v++]):_<240?(_=(15&_)<<12,_|=(63&S[v++])<<6,_|=63&S[v++]):(_=(7&_)<<18,_|=(63&S[v++])<<12,_|=(63&S[v++])<<6,_|=63&S[v++])),y.push(String.fromCharCode(_))}return y.join("")},Ui={};Fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uu=function(S){for(var y=0,v=[],_=0|S.length/3;0<_--;){var I=(S[y]<<16)+(S[y+1]<<8)+S[y+2];y+=3,v.push(Fi.charAt(63&I>>18)),v.push(Fi.charAt(63&I>>12)),v.push(Fi.charAt(63&I>>6)),v.push(Fi.charAt(63&I))}return S.length-y==2?(I=(S[y]<<16)+(S[y+1]<<8),v.push(Fi.charAt(63&I>>18)),v.push(Fi.charAt(63&I>>12)),v.push(Fi.charAt(63&I>>6)),v.push("=")):S.length-y==1&&(I=S[y]<<16,v.push(Fi.charAt(63&I>>18)),v.push(Fi.charAt(63&I>>12)),v.push("==")),v.join("")},Sl=function(){for(var S=[],y=0;y<64;++y)S[Fi.charCodeAt(y)]=y;return S[61]=0,S}(),Us=function(S){for(var y=0,v=[],_=0|S.length/4;0<_--;){var I=(Sl[S.charCodeAt(y)]<<18)+(Sl[S.charCodeAt(y+1)]<<12)+(Sl[S.charCodeAt(y+2)]<<6)+Sl[S.charCodeAt(y+3)];v.push(255&I>>16),v.push(255&I>>8),v.push(255&I),y+=4}return v&&(S.charAt(y-2)=="="?(v.pop(),v.pop()):S.charAt(y-1)=="="&&v.pop()),v},cu={encode:function(S){for(var y=[],v=0;v<S.length;++v)y.push(S.charCodeAt(v));return y},decode:function(S){for(var y=0;y<s.length;++y)a[y]=String.fromCharCode(a[y]);return a.join("")}},Ui.decodeArray=function(S){var y=Us(S);return new Uint8Array(y)},Ui.encodeASCII=function(S){var y=cu.encode(S);return uu(y)},Ui.decodeASCII=function(S){var y=Us(S);return cu.decode(y)},Ui.encode=function(S){var y=lg(S);return uu(y)},Ui.decode=function(S){var y=Us(S);return _l(y)},typeof wu<"u"&&(wu.decode=Ui.decode,wu.decodeArray=Ui.decodeArray,wu.encode=Ui.encode,wu.encodeASCII=Ui.encodeASCII);var Al=Ui,go=class extends lu{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},du=t(7377);function Kc(){let S,y=0;function v(x){let H="";for(let G=0;G<x.length;++G)H+=x[G].uchar;return H.length-H.replace(/^\s+/,"").length}function _(x){return"left: "+3.125*x.x+"%; top: "+6.66*x.y1+"%; width: "+(100-3.125*x.x)+"%; height: "+6.66*Math.max(x.y2-1-x.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function I(x){return x==="red"?"rgb(255, 0, 0)":x==="green"?"rgb(0, 255, 0)":x==="blue"?"rgb(0, 0, 255)":x==="cyan"?"rgb(0, 255, 255)":x==="magenta"?"rgb(255, 0, 255)":x==="yellow"?"rgb(255, 255, 0)":x==="white"?"rgb(255, 255, 255)":x==="black"?"rgb(0, 0, 0)":x}function w(x,H){const G=x.videoHeight/15;return H?"font-size: "+G+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(H.foreground?I(H.foreground):"rgb(255, 255, 255)")+"; font-style: "+(H.italics?"italic":"normal")+"; text-decoration: "+(H.underline?"underline":"none")+"; white-space: pre; background-color: "+(H.background?I(H.background):"transparent")+";":"font-size: "+G+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function z(x){return x.replace(/^\s+/g,"")}function F(x){return x.replace(/\s+$/g,"")}return S={createHTMLCaptionsFromScreen:function(x,H,G,D){let M=null,B=null,Z=!1,ne=-1,ie={start:H,end:G,spans:[]},re="style_cea608_white_black";const se={},oe={},Ae=[];let Q,U;for(Q=0;Q<15;++Q){const $=D.rows[Q];let ce="",Te=null;if($.isEmpty()===!1){const ge=v($.chars);M===null&&(M={x:ge,y1:Q,y2:Q+1,p:[]}),ge!==ne&&Z&&(M.p.push(ie),ie={start:H,end:G,spans:[]},M.y2=Q,M.name="region_"+M.x+"_"+M.y1+"_"+M.y2,se.hasOwnProperty(M.name)===!1?(Ae.push(M),se[M.name]=M):(B=se[M.name],B.p.contat(M.p)),M={x:ge,y1:Q,y2:Q+1,p:[]});for(let ve=0;ve<$.chars.length;++ve){const Me=$.chars[ve],ze=Me.penState;if(Te===null||!ze.equals(Te)){ce.trim().length>0&&(ie.spans.push({name:re,line:ce,row:Q}),ce="");let K="style_cea608_"+ze.foreground+"_"+ze.background;ze.underline&&(K+="_underline"),ze.italics&&(K+="_italics"),oe.hasOwnProperty(K)||(oe[K]=JSON.parse(JSON.stringify(ze))),Te=ze,re=K}ce+=Me.uchar}ce.trim().length>0&&ie.spans.push({name:re,line:ce,row:Q}),Z=!0,ne=ge}else Z=!1,ne=-1,M&&(M.p.push(ie),ie={start:H,end:G,spans:[]},M.y2=Q,M.name="region_"+M.x+"_"+M.y1+"_"+M.y2,se.hasOwnProperty(M.name)===!1?(Ae.push(M),se[M.name]=M):(B=se[M.name],B.p.contat(M.p)),M=null)}M&&(M.p.push(ie),M.y2=Q+1,M.name="region_"+M.x+"_"+M.y1+"_"+M.y2,se.hasOwnProperty(M.name)===!1?(Ae.push(M),se[M.name]=M):(B=se[M.name],B.p.contat(M.p)),M=null);const V=[];for(Q=0;Q<Ae.length;++Q){const $=Ae[Q],ce="sub_cea608_"+y++,Te=document.createElement("div");Te.id=ce;const ge=_($);Te.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ge;const ve=document.createElement("div");ve.className="paragraph bodyStyle",ve.style.cssText=w(x);const Me=document.createElement("div");Me.className="cueUniWrapper",Me.style.cssText="unicode-bidi: normal; direction: ltr;";for(let K=0;K<$.p.length;++K){const X=$.p[K];let Se=0;for(U=0;U<X.spans.length;++U){let ye=X.spans[U];if(ye.line.length>0){if(U!==0&&Se!=ye.row){const le=document.createElement("br");le.className="lineBreak",Me.appendChild(le)}let J=!1;Se===ye.row&&(J=!0),Se=ye.row;const ue=oe[ye.name],he=document.createElement("span");he.className="spanPadding "+ye.name+" customSpanColor",he.style.cssText=w(x,ue),U!==0&&J?U===X.spans.length-1?he.textContent=F(ye.line):he.textContent=ye.line:X.spans.length>1&&U<X.spans.length-1&&ye.row===X.spans[U+1].row?he.textContent=z(ye.line):he.textContent=ye.line.trim(),Me.appendChild(he)}}}ve.appendChild(Me),Te.appendChild(ve);const ze={bodyStyle:["%",90]};for(const K in oe)oe.hasOwnProperty(K)&&(ze[K]=["%",90]);V.push({type:"html",start:H,end:G,cueHTMLElement:Te,cueID:ce,cellResolution:[32,15],isFromCEA608:!0,fontSize:ze,lineHeight:{},linePadding:{}})}return V}},S}Kc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Df=xe.default.getSingletonFactory(Kc);function Rl(S,y,v){const _=[];for(let I=y;I<v;I++)I+2<v&&S.getUint8(I)===0&&S.getUint8(I+1)===0&&S.getUint8(I+2)===3?(_.push(0),_.push(0),I+=2):_.push(S.getUint8(I));return new DataView(new Uint8Array(_).buffer)}function Cf(S,y,v,_){return!(S!==4||y<8)&&v.getUint8(_)===181&&v.getUint16(_+1)===49&&v.getUint32(_+3)===1195456820&&v.getUint8(_+7)===3}function er(S,y){return(127&S)>0||(127&y)>0}function Rr(S,y){let v=0;for(;v<S.byteLength;){let I,w=0,z=0;do w+=I=S.getUint8(v++);while(I===255);do z+=I=S.getUint8(v++);while(I===255);if(Cf(w,z,S,v)){const F=v+10,x=F+3*(31&S.getUint8(F-2));for(let H=F;H<x;H+=3){const G=S.getUint8(H);if(4&G){const D=3&G;if((_=D)===0||_===1){const M=S.getUint8(H+1),B=S.getUint8(H+2);er(M,B)&&y[D].push(M,B)}}}}v+=z}var _}function os(S,y,v){let _=0,I=0;const w=[[],[]];for(let z=y;z<y+v-5&&(_=S.getUint32(z),I=31&S.getUint8(z+4),!(z+5+_>y+v));z++)I===6&&z+5+_<=S.byteLength&&Rr(Rl(S,z+5,z+5+_),w),z+=_+3;return w}function $c(S){const y=S.errHandler,v=S.manifestModel,_=S.mediaController,I=S.videoModel,w=S.textTracks,z=S.vttParser,F=S.vttCustomRenderingParser,x=S.ttmlParser,H=S.streamInfo,G=S.settings,D=this.context,M=(0,Ee.default)(D).getInstance();let B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$,ce,Te,ge,ve,Me,ze=!1;function K(){se=null,Ae=NaN,Q=[],U=null,oe=!1,re=[],ie=null}function X(Fe){const je={};je[k.default.SUBTITLE]="subtitles",je[k.default.CAPTION]="captions",je[k.default.FORCED_SUBTITLE]="subtitles";const at=new go;for(let lt in Fe)at[lt]=Fe[lt];at.defaultTrack=function(lt){let ot=!1;return $.length>1&&lt.isEmbedded?ot=lt.id&&lt.id===q.default.CC1:$.length===1?lt.id&&typeof lt.id=="string"&&lt.id.substring(0,2)==="CC"&&(ot=!0):$.length===0&&(ot=lt.index===re[0].index),ot}(Fe),at.isTTML=function(lt){return lt.codec&&lt.codec.search(q.default.STPP)>=0||lt.mimeType&&lt.mimeType.search(q.default.TTML)>=0}(Fe),at.kind=function(lt,ot){let qt=lt.roles&&lt.roles.length>0?ot[lt.roles[0].value]:ot.caption;return qt=Object.values(ot).includes(qt)?qt:ot.caption,qt}(Fe,je),w.addTextTrackInfo(at)}function Se(Fe){const je=Fe.chunk;je.representation.mediaInfo.embeddedCaptions&&J(je.bytes,je)}function ye(Fe){V=Fe}function J(Fe,je){const at=je.representation.mediaInfo,lt=at.type,ot=at.mimeType,qt=at.codec||ot;qt?at.codec.indexOf("application/mp4")!==-1?function(Kt,Xt,In){let Lt,gn;if(Xt.segmentType==="InitializationSegment")oe=!0,Ae=ne.getMediaTimescaleFromMoov(Kt);else{if(!oe)return;gn=ne.getSamplesInfo(Kt),Lt=gn.sampleList,Lt.length>0&&(U=Lt[0].cts-Xt.start*Ae),In.search(q.default.STPP)>=0?function(vn,Cn,Nn){let Ke,bt;for(ie=ie!==null?ie:le(Nn),Ke=0;Ke<Cn.length;Ke++){const ht=Cn[Ke],St=ht.cts,ln=he(),Sn=ln+St/Ae,ft=Sn+ht.duration/Ae;B.buffered.add(Sn,ft);const Gt=new DataView(vn,ht.offset,ht.subSizes[0]);let dn=Pr.Utils.dataViewToString(Gt,q.default.UTF8);const $t=[];let an=ht.offset+ht.subSizes[0];for(bt=1;bt<ht.subSizes.length;bt++){const et=new Uint8Array(vn,an,ht.subSizes[bt]),Ct=String.fromCharCode.apply(null,et);$t.push(Ct),an+=ht.subSizes[bt]}try{const et=v.getValue().ttmlTimeIsRelative?St/Ae:0,Ct=ie.parse(dn,et,St/Ae,(St+ht.duration)/Ae,$t);w.addCaptions(V,ln,Ct)}catch(et){se.removeExecutedRequestsBeforeTime(),Ie(),Z.error("TTML parser error: "+et)}}}(Kt,Lt,In):function(vn,Cn){let Nn,Ke,bt;const ht=[];for(Nn=0;Nn<Cn.length;Nn++){const St=Cn[Nn];St.cts-=U;const ln=he()+St.cts/Ae,Sn=ln+St.duration/Ae;B.buffered.add(ln,Sn);const ft=vn.slice(St.offset,St.offset+St.size),Gt=Pr.parseBuffer(ft);for(Ke=0;Ke<Gt.boxes.length;Ke++){const dn=Gt.boxes[Ke];if(Z.debug("VTT box1: "+dn.type),dn.type!=="vtte"&&dn.type==="vttc"){Z.debug("VTT vttc boxes.length = "+dn.boxes.length);let $t={styles:{}};for(bt=0;bt<dn.boxes.length;bt++){const an=dn.boxes[bt];if(Z.debug("VTT box2: "+an.type),an.type==="payl")$t.start=St.cts/Ae,$t.end=(St.cts+St.duration)/Ae,$t.data=an.cue_text;else if(an.type==="sttg"&&an.settings&&an.settings!=="")try{const et=an.settings.split(" ");$t.styles=z.getCaptionStyles(et)}catch{}}$t&&$t.data&&(ht.push($t),Z.debug(`VTT  ${$t.start} - ${$t.end} :  ${$t.data}`))}}}ht.length>0&&w.addCaptions(V,0,ht)}(Kt,Lt)}}(Fe,je,qt):lt===q.default.VIDEO?function(Kt,Xt){let In,Lt;if(Xt.segmentType===_e.HTTPRequest.INIT_SEGMENT_TYPE)ce===0&&(ce=ne.getMediaTimescaleFromMoov(Kt));else if(Xt.segmentType===_e.HTTPRequest.MEDIA_SEGMENT_TYPE){if(ce===0)return void Z.warn("CEA-608: No timescale for embeddedTextTrack yet");Lt=ne.getSamplesInfo(Kt);const gn=Lt.lastSequenceNumber,vn=Math.trunc(Xt.start),Cn=Math.trunc(Xt.end);if(ve[0]||ve[1]||function(){let Nn;for(let Ke=0;Ke<$.length;Ke++){if(Nn=w.getTrackIdxForId($[Ke].id),Nn===-1)return void Z.warn("CEA-608: data before track is ready.");const bt=ue(Nn);ve[Ke]=new Oe(Ke+1,{newCue:bt},null)}}(),ce){if(function(Ke,bt,ht,St,ln){return Ke!==null&&bt!==null&&St!==null&&ln!==null&&(bt===Ke?St!==ln:bt!==Ke+ht)}(Te,gn,Lt.numSequences,ge,vn))for(In=0;In<ve.length;In++)ve[In]&&ve[In].reset();const Nn=function(Ke,bt){if(bt.length===0)return null;const ht={splits:[],fields:[[],[]]},St=new DataView(Ke);for(let ln=0;ln<bt.length;ln++){const Sn=bt[ln],ft=os(St,Sn.offset,Sn.size);let Gt=null,dn=0;for(let $t=0;$t<2;$t++)if(ft[$t].length>0){Sn.cts!==Gt?dn=0:dn+=1;const an=he();ht.fields[$t].push([Sn.cts+an*ce,ft[$t],dn]),Gt=Sn.cts}}return ht.fields.forEach(function(ln){ln.sort(function(Sn,ft){return Sn[0]===ft[0]?Sn[2]-ft[2]:Sn[0]-ft[0]})}),ht}(Kt,Lt.sampleList);for(let Ke=0;Ke<ve.length;Ke++){const bt=Nn.fields[Ke],ht=ve[Ke];if(ht)for(In=0;In<bt.length;In++)ht.addData(bt[In][0]/ce,bt[In][1])}Te=gn,ge=Cn}}}(Fe,je):function(Kt,Xt,In){let Lt,gn;const vn=new DataView(Kt,0,Kt.byteLength);gn=Pr.Utils.dataViewToString(vn,q.default.UTF8);try{Lt=le(In).parse(gn,0),w.addCaptions(w.getCurrentTrackIdx(),0,Lt),B.buffered&&B.buffered.add(Xt.start,Xt.end)}catch(Cn){y.error(new Ce.default(Y.TIMED_TEXT_ERROR_ID_PARSE_CODE,Y.TIMED_TEXT_ERROR_MESSAGE_PARSE+Cn.message,gn))}}(Fe,je,qt):Z.error("No text type defined")}function ue(Fe){return function(je,at,lt){let ot;ot=I.getTTMLRenderingDiv()?Me.createHTMLCaptionsFromScreen(I.getElement(),je,at,lt):[{start:je,end:at,data:lt.getDisplayText(),styles:{}}],ot&&w.addCaptions(Fe,0,ot)}}function he(){return isNaN(B.timestampOffset)?0:B.timestampOffset}function le(Fe){let je;return Fe.search(q.default.VTT)>=0?je=G.get().streaming.text.webvtt.customRenderingEnabled&&F?F:z:(Fe.search(q.default.TTML)>=0||Fe.search(q.default.STPP)>=0)&&(je=x),je}function Ie(Fe,je){Fe===void 0&&Fe===je&&(Fe=B.buffered.start(0),je=B.buffered.end(B.buffered.length-1)),B.buffered.remove(Fe,je),w.deleteCuesFromTrackIdx(V,Fe,je)}function we(Fe){$.forEach(function(je){const at=w.getTrackIdxForId(je.id);at>=0&&w.deleteCuesFromTrackIdx(at,Fe.from,Fe.to)})}return B={initialize:function(){ze||($=[],V=null,ce=0,ve=[],Te=null,ge=null,ze=!0,Me=Df(D).getInstance(),M.on(P.default.VIDEO_CHUNK_RECEIVED,Se,B),M.on(P.default.BUFFER_CLEARED,we,B))},addMediaInfos:function(Fe,je,at){if(re=re.concat(je),Fe===q.default.TEXT&&je[0].isFragmented&&!je[0].isEmbedded){se=at,B.buffered=(0,du.default)(D).create(),Q=_.getTracksFor(q.default.TEXT,H.id).filter(ot=>ot.isFragmented);const lt=_.getCurrentTrackFor(q.default.TEXT,H.id);for(let ot=0;ot<Q.length;ot++)if(Q[ot]===lt){ye(ot);break}}for(let lt=0;lt<je.length;lt++)X(je[lt])},resetMediaInfos:function(){re=[]},getStreamId:function(){return H.id},append:J,abort:function(){},addEmbeddedTrack:function(Fe){if(ze&&Fe)if(Fe.id===q.default.CC1||Fe.id===q.default.CC3){for(let je=0;je<$.length;je++)if($[je].id===Fe.id)return;$.push(Fe)}else Z.warn("Embedded track "+Fe.id+" not supported!")},resetEmbedded:function(){M.off(P.default.VIDEO_CHUNK_RECEIVED,Se,B),M.off(P.default.BUFFER_CLEARED,we,B),w&&w.deleteAllTextTracks(),ze=!1,$=[],ve=[null,null],Te=null,ge=null},getConfig:function(){return{fragmentModel:se,fragmentedTracks:Q,videoModel:I}},setCurrentFragmentedTrackIdx:ye,remove:Ie,reset:function(){K(),re=[],ne=null}},Z=(0,Ve.default)(D).getInstance().getLogger(B),ne=Ql(D).getInstance(),K(),B}$c.__dashjs_factory_name="TextSourceBuffer";var us=xe.default.getClassFactory($c);class Hr{constructor(y){if(this.cues=new Map,y)for(const v of y)this.addCue(v)}hasCue(y){const v=this.cues.get(y.startTime);return v&&v.some(_=>{return w=y,(I=_).startTime===w.startTime&&I.endTime===w.endTime&&I instanceof VTTCue&&w instanceof VTTCue&&I.text===w.text;var I,w})}addCue(y){const v=this.cues.get(y.startTime);v?this.hasCue(y)||v.push(y):this.cues.set(y.startTime,[y])}}var Ja=t(7640);const fu=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function hu(S){const y=this.context,v=(0,Ee.default)(y).getInstance(),_=S.videoModel,I=S.streamInfo,w=S.settings;let z,F,x,H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$,ce;function Te(Ke){const bt=Ke.kind,ht=Ke.id!==void 0?Ke.id:Ke.lang,St=Ke.lang,ln=Ke.isTTML,Sn=Ke.isEmbedded;return _.addTextTrack(bt,ht,St,ln,Sn)}function ge(Ke,bt,ht,St,ln,Sn){let ft=0,Gt=0;Ke/bt>ht/St?(Gt=bt,ft=Gt/St*ht):(ft=Ke,Gt=ft/ht*St);let dn=0,$t=0,an=0,et=0;return ft/Gt>ln?(et=Gt,an=Gt*ln):(an=ft,et=ft/ln),dn=(Ke-an)/2,$t=(bt-et)/2,Sn?{x:dn+.1*an,y:$t+.1*et,w:.8*an,h:.8*et}:{x:dn,y:$t,w:an,h:et}}function ve(Ke,bt){const ht=_.getClientWidth(),St=_.getClientHeight(),ln=_.getVideoWidth(),Sn=_.getVideoHeight(),ft=_.getVideoRelativeOffsetTop(),Gt=_.getVideoRelativeOffsetLeft();if(ln!==0&&Sn!==0){let dn=ln/Sn,$t=!1;Ke.isFromCEA608&&(dn=3.5/3,$t=!0);const an=ge.call(this,ht,St,ln,Sn,dn,$t),et=an.w,Ct=an.h,rn=an.x,Qt=an.y;if(et!=Z||Ct!=ne||rn!=M||Qt!=B||bt){if(M=rn+Gt,B=Qt+ft,Z=et,ne=Ct,ie){const ke=ie.style;ke&&(ke.left=M+"px",ke.top=B+"px",ke.width=Z+"px",ke.height=ne+"px",ke.zIndex=oe&&document[oe]||Ae?U:null,v.trigger(be.default.CAPTION_CONTAINER_RESIZE))}const pt=Ke.activeCues;if(pt){const ke=pt.length;for(let Qe=0;Qe<ke;++Qe){const Tt=pt[Qe];Tt.scaleCue(Tt)}}}}}function Me(Ke){const bt=Z,ht=ne;let St,ln,Sn,ft,Gt;if(Ke.cellResolution){const dn=[bt/Ke.cellResolution[0],ht/Ke.cellResolution[1]];if(Ke.linePadding){for(St in Ke.linePadding)if(Ke.linePadding.hasOwnProperty(St)){ln=(Ke.linePadding[St]*dn[0]).toString();const $t=document.getElementsByClassName("spanPadding");for(let an=0;an<$t.length;an++)$t[an].style.cssText=$t[an].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ln),$t[an].style.cssText=$t[an].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ln)}}if(Ke.fontSize){for(St in Ke.fontSize)if(Ke.fontSize.hasOwnProperty(St)){Ke.fontSize[St][0]==="%"?Sn=Ke.fontSize[St][1]/100:Ke.fontSize[St][0]==="c"&&(Sn=Ke.fontSize[St][1]),ln=(Sn*dn[1]).toString(),Gt=St!=="defaultFontSize"?document.getElementsByClassName(St):document.getElementsByClassName("paragraph");for(let $t=0;$t<Gt.length;$t++)Gt[$t].style.cssText=Gt[$t].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ln)}if(Ke.lineHeight){for(St in Ke.lineHeight)if(Ke.lineHeight.hasOwnProperty(St)){Ke.lineHeight[St][0]==="%"?ft=Ke.lineHeight[St][1]/100:Ke.fontSize[St][0]==="c"&&(ft=Ke.lineHeight[St][1]),ln=(ft*dn[1]).toString(),Gt=document.getElementsByClassName(St);for(let $t=0;$t<Gt.length;$t++)Gt[$t].style.cssText=Gt[$t].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ln)}}}}if(Ke.isd){let dn=document.getElementById(Ke.cueID);dn&&ie.removeChild(dn),K(Ke)}}function ze(Ke,bt){const ht=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,St=/^#(.*)$/;if(ht.test(bt)){const ln=ht.exec(bt),Sn=parseInt(ln[4],10)-1;return"data:image/png;base64,"+btoa(Ke.images[Sn])}if(St.test(bt)){const ln=St.exec(bt)[1];return"data:image/png;base64,"+Ke.embeddedImages[ln]}return bt}function K(Ke){if(ie){Nn.call(this);const bt=document.createElement("div");ie.appendChild(bt),Q=(0,Ja.renderHTML)(Ke.isd,bt,function(ht){return ze(Ke,ht)},ie.clientHeight,ie.clientWidth,w.get().streaming.text.imsc.displayForcedOnlyMode,function(ht){F.info("renderCaption :",ht)},Q,w.get().streaming.text.imsc.enableRollUp),bt.id=Ke.cueID,v.trigger(be.default.CAPTION_RENDERED,{captionDiv:bt,currentTrackIdx:D})}}function X(Ke,bt){return!!bt&&bt.endTime>=Ke.startTime}function Se(Ke,bt){return!!w.get().streaming.text.extendSegmentedCues&&!!function(ht,St,ln){for(let Sn=0;Sn<ln.length;Sn++){const ft=ln[Sn];if(JSON.stringify(ht[ft])!==JSON.stringify(St[ft]))return!1}return!0}(bt,Ke,fu)&&(bt.endTime=Math.max(bt.endTime,Ke.endTime),!0)}function ye(Ke,bt){bt&&bt.forEach(ht=>{ht.kind&&ht.kind==="image"&&(ht.src=ze(Ke,ht.src)),ye(Ke,ht.contents)})}function J(Ke,bt,ht){const St=ot(Ke),ln=w.get().streaming.text.dispatchForManualRendering;if(!St||!Array.isArray(ht)||ht.length===0)return;const Sn=new Hr(St.cues);for(let ft=0;ft<ht.length;ft++){let Gt=null;const dn=ht[ft];St.cellResolution=dn.cellResolution,St.isFromCEA608=dn.isFromCEA608,isNaN(dn.start)||isNaN(dn.end)||(ln?Gt=ue(dn,bt):Fe(dn)&&ie?Gt=Ie(dn,bt,St):dn.data&&(Gt=we(dn,bt,St)));try{if(Gt){if(!Sn.hasCue(Gt))if(Sn.addCue(Gt),w.get().streaming.text.webvtt.customRenderingEnabled)St.manualCueList||(St.manualCueList=[]),St.manualCueList.push(Gt);else{let an;St.cues&&St.cues.length!==0&&(an=St.cues[St.cues.length-1]),X(Gt,an)?Se(Gt,an)||(an.isd&&(an.onexit=function(){}),St.mode!==q.default.TEXT_DISABLED&&St.addCue(Gt)):St.mode!==q.default.TEXT_DISABLED&&St.addCue(Gt)}const $t=w.get().streaming.buffer.bufferToKeep;In(St,0,_.getTime()-$t)}else F.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch($t){throw Lt(St),St.addCue(Gt),$t}}}function ue(Ke,bt){let ht=je(Ke,bt);return ht.onenter=function(){Fe(Ke)&&ce&&ce.cueID!==ht.cueID&&le(ce),delete ht.type,ce=ht,he(ht)},ht.onexit=function(){le(ht),ce=null},ht}function he(Ke){v.trigger(be.default.CUE_ENTER,Ke)}function le(Ke){v.trigger(be.default.CUE_EXIT,{cueID:Ke.cueID})}function Ie(Ke,bt,ht){const St=this;let ln=je(Ke,bt);return ie.style.left=M+"px",ie.style.top=B+"px",ie.style.width=Z+"px",ie.style.height=ne+"px",ln.onenter=function(){ht.mode===q.default.TEXT_SHOWING&&(this.isd?($?requestAnimationFrame(()=>K(this)):K(this),F.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),Me.call(St,this),v.trigger(be.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:D})))},ln.onexit=function(){if(ie){const Sn=ie.childNodes;for(let ft=0;ft<Sn.length;++ft)Sn[ft].id===this.cueID&&(F.debug("Cue exit id:"+Sn[ft].id),ie.removeChild(Sn[ft]),--ft)}},ln}function we(Ke,bt,ht){let St=je(Ke,bt);if(St.isActive=!1,Ke.styles)try{Ke.styles.align!==void 0&&"align"in St&&(St.align=Ke.styles.align),Ke.styles.line!==void 0&&"line"in St&&(St.line=Ke.styles.line),Ke.styles.lineAlign!==void 0&&(St.lineAlign=Ke.styles.lineAlign),Ke.styles.snapToLines!==void 0&&"snapToLines"in St&&(St.snapToLines=Ke.styles.snapToLines),Ke.styles.position!==void 0&&"position"in St&&(St.position=Ke.styles.position),Ke.styles.positionAlign!==void 0&&(St.positionAlign=Ke.styles.positionAlign),Ke.styles.size!==void 0&&"size"in St&&(St.size=Ke.styles.size)}catch(ln){F.error(ln)}return St.onenter=function(){ht.mode===q.default.TEXT_SHOWING&&v.trigger(be.default.CAPTION_RENDERED,{currentTrackIdx:D})},St}function Fe(Ke){return Ke.type==="html"}function je(Ke,bt){return Fe(Ke)?function(ht,St){let ln=new x(ht.start+St,ht.end+St,"");return ln.cueHTMLElement=ht.cueHTMLElement,ln.isd=ht.isd,ln.images=ht.images,ln.embeddedImages=ht.embeddedImages,ln.cueID=ht.cueID,ln.scaleCue=Me.bind(self),ln.cellResolution=ht.cellResolution,ln.lineHeight=ht.lineHeight,ln.linePadding=ht.linePadding,ln.fontSize=ht.fontSize,ln.isd&&ye(ln,ln.isd.contents),ln}(Ke,bt):function(ht,St){let ln=new x(ht.start-St,ht.end-St,ht.data);return ln.cueID=sa.default.generateUuid(),ln}(Ke,bt)}function at(Ke){if(re){const bt=re.childNodes;for(let ht=0;ht<bt.length;++ht)bt[ht].id===Ke.cueID&&(re.removeChild(bt[ht]),--ht)}}function lt(){const Ke=_.getTextTracks(),bt=[];for(const ht of Ke)ht.manualMode===q.default.TEXT_SHOWING&&bt.push(ht);return bt}function ot(Ke){return Ke>=0&&H[Ke]?_.getTextTrack(H[Ke].kind,H[Ke].id,H[Ke].lang,H[Ke].isTTML,H[Ke].isEmbedded):null}function qt(Ke){if(Ke===D)return;D=Ke;const bt=ot(D);Kt.call(this,bt),se&&(clearInterval(se),se=null),bt&&bt.renderingType==="html"&&(ve.call(this,bt,!0),window.ResizeObserver?(V=new window.ResizeObserver(()=>{ve.call(this,bt,!0)}),V.observe(_.getElement())):se=setInterval(ve.bind(this,bt),500))}function Kt(Ke){Nn.call(this),Ke&&Ke.renderingType==="html"?vn.call(this):Cn.call(this)}function Xt(Ke,bt,ht){let St=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!Ke&&(isNaN(bt)||(St?Ke.startTime:Ke.endTime)>=bt)&&(isNaN(ht)||(St?Ke.endTime:Ke.startTime)<=ht)}function In(Ke,bt,ht){if(!(ht<bt)&&Ke&&(Ke.cues||Ke.manualCueList)){const St=Ke.cues&&Ke.cues.length>0?"native":"custom",ln=St==="native"?Ke.cues:Ke.manualCueList;if(!ln||ln.length===0)return;for(let Sn=ln.length-1;Sn>=0;Sn--)Xt(ln[Sn],bt,ht,!0)&&!gn(ln[Sn])&&(St==="native"?Ke.removeCue(ln[Sn]):(at(ln[Sn]),delete Ke.manualCueList[Sn]))}}function Lt(Ke,bt,ht){let St=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Ke&&(Ke.cues||Ke.manualCueList)){const ln=Ke.cues&&Ke.cues.length>0?"native":"custom",Sn=ln==="native"?Ke.cues:Ke.manualCueList;if(!Sn||Sn.length===0)return;for(let ft=Sn.length-1;ft>=0;ft--)Xt(Sn[ft],bt,ht,St)&&(ln==="native"?(Sn[ft].onexit&&Sn[ft].onexit(),Ke.removeCue(Sn[ft])):(at(Sn[ft]),delete Ke.manualCueList[ft]))}}function gn(Ke){const bt=_.getTime();return bt>=Ke.startTime&&bt<=Ke.endTime}function vn(){let Ke=document.getElementById("native-cue-style");if(Ke)return;Ke=document.createElement("style"),Ke.id="native-cue-style",document.head.appendChild(Ke);const bt=Ke.sheet,ht=_.getElement();try{ht&&(ht.id?bt.insertRule("#"+ht.id+"::cue {background: transparent}",0):ht.classList.length!==0?bt.insertRule("."+ht.className+"::cue {background: transparent}",0):bt.insertRule("video::cue {background: transparent}",0))}catch(St){F.info(""+St.message)}}function Cn(){const Ke=document.getElementById("native-cue-style");Ke&&document.head.removeChild(Ke)}function Nn(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return z={addCaptions:J,addTextTrackInfo:function(Ke){H.push(Ke)},createTracks:function(){H.sort(function(bt,ht){return bt.index-ht.index}),ie=_.getTTMLRenderingDiv(),re=_.getVttRenderingDiv();let Ke=-1;for(let bt=0;bt<H.length;bt++){const ht=Te(H[bt]);G.push(ht),H[bt].defaultTrack&&(ht.default=!0,Ke=bt);const St=ot(bt);St&&(St.mode=q.default.TEXT_SHOWING,ie&&(H[bt].isTTML||H[bt].isEmbedded)?St.renderingType="html":St.renderingType="default"),J(bt,0,H[bt].captionData),v.trigger(be.default.TEXT_TRACK_ADDED)}if(qt.call(this,Ke),Ke>=0){let bt=function(){const ht=ot(Ke);ht&&ht.renderingType==="html"&&ve.call(this,ht,!0),v.off(be.default.PLAYBACK_METADATA_LOADED,bt,this)};v.on(be.default.PLAYBACK_METADATA_LOADED,bt,this);for(let ht=0;ht<H.length;ht++){const St=ot(ht);if(St){const ln=w.get().streaming.text.dispatchForManualRendering;St.mode=ht!==Ke||ln?q.default.TEXT_HIDDEN:q.default.TEXT_SHOWING,St.manualMode=ht===Ke?q.default.TEXT_SHOWING:q.default.TEXT_HIDDEN}}}v.trigger(P.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:D,tracks:H,streamId:I.id})},deleteAllTextTracks:function(){const Ke=G?G.length:0;for(let bt=0;bt<Ke;bt++){const ht=ot(bt);ht&&Lt.call(this,ht,I.start,I.start+I.duration,!1)}G=[],H=[],se&&(clearInterval(se),se=null),V&&_&&(V.unobserve(_.getElement()),V=null),D=-1,Nn.call(this)},deleteCuesFromTrackIdx:function(Ke,bt,ht){const St=ot(Ke);St&&Lt(St,bt,ht)},disableManualTracks:function(){const Ke=lt();if(Ke&&Ke.length>0){const bt=Ke[0].manualCueList;bt&&bt.length>0&&bt.forEach(ht=>{if(ht.isActive){if(ht.isActive=!1,w.get().streaming.text.dispatchForManualRendering)le(ht);else if(re){const St=re.childNodes;for(let ln=0;ln<St.length;++ln)St[ln].id===ht.cueID&&(re.removeChild(St[ln]),--ln)}}})}},getCurrentTrackIdx:function(){return D},getCurrentTextTrackInfo:function(){return H[D]},getStreamId:function(){return I.id},getTextTrackInfos:function(){return H},getTrackIdxForId:function(Ke){let bt=-1;for(let ht=0;ht<H.length;ht++)if(H[ht].id===Ke){bt=ht;break}return bt},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(x=window.VTTCue||window.TextTrackCue,H=[],G=[],D=-1,M=0,B=0,Z=0,ne=0,ie=null,re=null,se=null,Ae=!1,U=2147483647,Q=null,$="requestAnimationFrame"in window,document.fullscreenElement!==void 0?oe="fullscreenElement":document.webkitIsFullScreen!==void 0?oe="webkitIsFullScreen":document.msFullscreenElement?oe="msFullscreenElement":document.mozFullScreen&&(oe="mozFullScreen"))},manualCueProcessing:function(Ke){const bt=lt();if(bt&&bt.length>0){const ht=bt[0].manualCueList;ht&&ht.length>0&&ht.forEach(St=>{St.startTime<=Ke&&St.endTime>=Ke&&!St.isActive?(St.isActive=!0,w.get().streaming.text.dispatchForManualRendering?he(St):WebVTT.processCues(window,[St],re,St.cueID)):St.isActive&&(St.startTime>Ke||St.endTime<Ke)&&(St.isActive=!1,w.get().streaming.text.dispatchForManualRendering?le(St):at(St))})}},setCurrentTrackIdx:qt,setModeForTrackIdx:function(Ke,bt){const ht=ot(Ke);ht&&ht.mode!==bt&&(ht.mode=bt),ht&&ht.manualMode!==bt&&(ht.manualMode=bt)}},F=(0,Ve.default)(y).getInstance().getLogger(z),z}hu.__dashjs_factory_name="TextTracks";var Wc=xe.default.getClassFactory(hu);function Xc(){const S=this.context;let y,v,_,I,w,z;function F(D){const M=D.split(":"),B=M.length-1;return D=60*parseInt(M[B-1],10)+parseFloat(M[B]),B===2&&(D+=3600*parseInt(M[0],10)),D}function x(D){const M=D.split(I),B=M[1].split(z);return B.shift(),M[1]=B[0],B.shift(),{cuePoints:M,styles:H(B)}}function H(D){const M={};return D.forEach(function(B){const Z=B.split(":");if(Z.length>1){const[ne,ie]=Z;switch(ne){case"align":case"A":M.align=ie;break;case"line":case"L":const[re,se]=ie.split(","),oe=re.endsWith("%");M.line=re==="auto"?re:parseInt(re,10),oe&&(M.snapToLines=!1),se&&(M.lineAlign=se);break;case"position":case"P":const[Ae,Q]=ie.split(",");M.position=parseInt(Ae,10),Q&&(M.positionAlign=Q);break;case"size":case"S":M.size=parseInt(ie,10)}}}),M}function G(D,M){let B,Z=M,ne="",ie="";for(;D[Z]!==""&&Z<D.length;)Z++;if(B=Z-M,B>1)for(let re=0;re<B;re++){if(ie=D[M+re],ie.match(I)){ne="";break}ne+=ie,re!==B-1&&(ne+=`
`)}else ie=D[M],ie.match(I)||(ne=ie);return ne}return y={parse:function(D){const M=[];let B,Z;if(!D)return M;B=(D=D.split(_)).length,Z=-1;for(let ne=0;ne<B;ne++){let ie=D[ne];if(ie.length>0&&ie!=="WEBVTT"&&ie.match(I)){const re=x(ie),se=re.cuePoints,oe=re.styles,Ae=G(D,ne+1),Q=F(se[0].replace(w,"")),U=F(se[1].replace(w,""));!isNaN(Q)&&!isNaN(U)&&Q>=Z&&U>Q?Ae!==""?(Z=Q,M.push({start:Q,end:U,data:Ae,styles:oe})):v.error("Skipping cue due to empty/malformed cue text"):v.error("Skipping cue due to incorrect cue timing")}}return M},getCaptionStyles:H},v=(0,Ve.default)(S).getInstance().getLogger(y),_=/(?:\r\n|\r|\n)/gm,I=/-->/,w=/(^[\s]+|[\s]+$)/g,z=/\s\b/g,y}Xc.__dashjs_factory_name="VTTParser";var Lf=xe.default.getSingletonFactory(Xc);function cs(){let S,y;return S={parse:function(v){let _=[];return y.oncue=function(I){I.start=I.startTime,I.end=I.endTime,I.data=I.text,I.styles={align:I.align,line:I.line,position:I.position,size:I.size},_.push(I)},y.parse(v),_}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(y=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),S}cs.__dashjs_factory_name="VttCustomRenderingParser";var gu=xe.default.getSingletonFactory(cs);function Qc(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I=0;function w(){const z="cue_TTML_"+I;return I++,z}return v={parse:function(z,F,x,H,G){let D="";const M=[];let B,Z,ne;const ie={},re={};let se="",oe="",Ae={onOpenTag:function(V,$,ce){if(ce[" imagetype"]&&!ce[" imageType"]&&(y.trigger(be.default.CONFORMANCE_VIOLATION,{level:Xi.LEVELS.ERROR,event:Xi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),ce[" imageType"]=ce[" imagetype"]),$==="image"&&(V==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||V==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!ce[" imageType"]||ce[" imageType"].value!=="PNG")return void _.warn("smpte-tt imageType != PNG. Discarded");se=ce["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){se&&(re[se]=oe.trim()),oe="",se=""},onText:function(V){se&&(oe+=V)}};if(!z)throw D="no ttml data to parse",new Error(D);ie.data=z,y.trigger(P.default.TTML_TO_PARSE,ie);let Q=(0,Ja.fromXML)(ie.data,function(V){D=V},Ae);y.trigger(P.default.TTML_PARSED,{ttmlString:ie.data,ttmlDoc:Q});const U=Q.getMediaTimeEvents();for(ne=0;ne<U.length;ne++){let V=(0,Ja.generateISD)(Q,U[ne],function($){D=$});V.contents.some($=>$.contents.length)&&(B=U[ne]+F,Z=U[ne+1]+F,B<Z&&M.push({start:B,end:Z,type:"html",cueID:w(),isd:V,images:G,embeddedImages:re}))}if(D!=="")throw _.error(D),new Error(D);return M}},_=(0,Ve.default)(S).getInstance().getLogger(v),v}Qc.__dashjs_factory_name="TTMLParser";var Nf=xe.default.getSingletonFactory(Qc);function Zc(S){let y=this.context;const v=(0,Ee.default)(y).getInstance(),_=jt(y).getInstance(),I=S.adapter,w=S.baseURLController,z="error",F="loaded",x="unloaded";let H,G,D;function M(ne,ie){let re,se,oe=!1;if(w.resolve()){const U=I.getVoRepresentations(ne);U&&U.length>0&&(re=w.resolve(U[0].path).url)}const Ae=ne.essentialProperties.filter(U=>U.schemeIdUri&&U.schemeIdUri===q.default.FONT_DOWNLOAD_DVB_SCHEME),Q=ne.supplementalProperties.filter(U=>U.schemeIdUri&&U.schemeIdUri===q.default.FONT_DOWNLOAD_DVB_SCHEME);Ae.length>0?(oe=!0,se=Ae):se=Q,se.forEach(U=>{if(function(ce){return!(!(ce.value&&parseInt(ce.value)===1&&ce.dvbUrl&&ce.dvbUrl.length>0&&ce.dvbFontFamily&&ce.dvbFontFamily.length>0&&ce.dvbMimeType)||ce.dvbMimeType!==q.default.OFF_MIMETYPE&&ce.dvbMimeType!==q.default.WOFF_MIMETYPE)}(U)){let ce=(V=U.dvbUrl,$=re,_.isPathAbsolute(V)?V:_.isRelative(V)?$?_.resolve(V,$):_.resolve(V):V);D.push({fontFamily:U.dvbFontFamily,url:ce,mimeType:U.dvbMimeType,trackId:ne.id,streamId:ie,isEssential:oe,status:x,fontFace:new FontFace(U.dvbFontFamily,`url(${ce})`,{display:"swap"})})}var V,$})}function B(ne,ie){const re=D[ne];D[ne]={...re,status:ie}}function Z(){D=[]}return H={addFontsFromTracks:function(ne,ie){if(ne&&Array.isArray(ne)&&ie)for(let re=0;re<ne.length;re++)M(ne[re],ie)},downloadFonts:function(){for(let ne=0;ne<D.length;ne++){let ie=D[ne];document.fonts.add(ie.fontFace),v.trigger(be.default.DVB_FONT_DOWNLOAD_ADDED,ie),ie.fontFace.load().then(()=>{B(ne,F),v.trigger(be.default.DVB_FONT_DOWNLOAD_COMPLETE,ie)},re=>{B(ne,z),G.debug("Font download error: ",re),v.trigger(be.default.DVB_FONT_DOWNLOAD_FAILED,ie)})}},getFonts:function(){return D},getFontsForTrackId:function(ne){return D.filter(ie=>ie.trackId&&ie.trackId===ne)},reset:function(){(function(){for(const ne of D){let ie=document.fonts.delete(ne.fontFace);G.debug(`Removal of fontFamily: ${ne.fontFamily} was ${ie?"successful":"unsuccessful"}`)}})(),Z()}},G=(0,Ve.default)(y).getInstance().getLogger(H),Z(),H}Zc.__dashjs_factory_name="DVBFonts";var mu=xe.default.getClassFactory(Zc);function Jc(S){let y=this.context;const v=S.adapter,_=S.errHandler,I=S.manifestModel,w=S.mediaController,z=S.baseURLController,F=S.videoModel,x=S.settings;let H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U;function V(J){if(U.error(`Could not download ${J.isEssential?"an essential":"a"} font - fontFamily: ${J.fontFamily}, url: ${J.url}`),J.isEssential){let ue=M[J.streamId].getTrackIdxForId(J.trackId);M[J.streamId].setModeForTrackIdx(ue,q.default.TEXT_DISABLED)}}function $(J){if(U.debug(`Successfully downloaded ${J.isEssential?"an essential":"a"} font - fontFamily: ${J.fontFamily}, url: ${J.url}`),J.isEssential){let ue=M[J.streamId].getTrackIdxForId(J.trackId);ue===M[J.streamId].getCurrentTrackIdx()?M[J.streamId].setModeForTrackIdx(ue,q.default.TEXT_SHOWING):M[J.streamId].setModeForTrackIdx(ue,q.default.TEXT_HIDDEN)}}function ce(J){let ue=J.tracks,he=J.index;const le=J.streamId;if(x.get().streaming.text.defaultEnabled===!1&&!Me()||Ae)ze(le,-1);else{const Ie=w.getCurrentTrackFor(q.default.TEXT,le);if(Ie){const we={lang:Ie.lang,role:Ie.roles[0],index:Ie.index,codec:Ie.codec,accessibility:Ie.accessibility[0]};ue.some((Fe,je)=>{if(w.matchSettings(we,Fe))return ze(le,je),he=je,!0})}re=!1}G[le].lastEnabledIndex=he,ie.trigger(be.default.TEXT_TRACKS_ADDED,{enabled:Me(),index:he,tracks:ue,streamId:le}),oe=!0,Q.addFontsFromTracks(ue,le),Q.getFonts().forEach(Ie=>{if(Ie.isEssential){let we=M[Ie.streamId].getTrackIdxForId(Ie.trackId);M[Ie.streamId].setModeForTrackIdx(we,q.default.TEXT_DISABLED)}}),Q.downloadFonts()}function Te(J){try{const ue=J.streamId;if(!M[ue]||isNaN(J.time))return;M[ue].manualCueProcessing(J.time)}catch{}}function ge(J){try{const ue=J.streamId;if(!M[ue])return;M[ue].disableManualTracks()}catch{}}function ve(J){try{if(!J||!J.mediaType||J.mediaType!==q.default.AUDIO||!J.currentMediaInfo)return;const ue=M[J.streamId].getCurrentTextTrackInfo();let he=NaN;re?he=K(J.streamId):X(ue)&&J.currentMediaInfo.lang&&J.currentMediaInfo.lang!==ue.lang&&(he=K(J.streamId),isNaN(he)&&(he=-1)),isNaN(he)||ze(J.streamId,he)}catch(ue){U.error(ue)}}function Me(){let J=!0;return re&&!se&&(J=!1),J}function ze(J,ue){re=ue===-1,re&&w&&w.saveTextSettingsDisabled();let he=Se(J);if(he===ue||!M[J])return;M[J].disableManualTracks();let le=M[J].getCurrentTextTrackInfo(),Ie=le?F.getTextTrack(le.kind,le.id,le.lang,le.isTTML,le.isEmbedded):null;Ie&&Ie.mode!==q.default.TEXT_DISABLED&&M[J].setModeForTrackIdx(he,q.default.TEXT_HIDDEN),M[J].setCurrentTrackIdx(ue),le=M[J].getCurrentTextTrackInfo();const we=x.get().streaming.text.dispatchForManualRendering;if(le&&!we&&le.mode!==q.default.TEXT_DISABLED&&M[J].setModeForTrackIdx(ue,q.default.TEXT_SHOWING),le&&le.isFragmented&&!le.isEmbedded)(function(Fe,je,at){if(!D[Fe])return;let lt=D[Fe].getConfig().fragmentedTracks;for(let ot=0;ot<lt.length;ot++){let qt=lt[ot];if(je.lang===qt.lang&&(qt.id?je.id===qt.id:je.index===qt.index)){let Kt=w.getCurrentTrackFor(q.default.TEXT,Fe);(qt.id?Kt.id!==qt.id:Kt.index!==qt.index)?(M[Fe].deleteCuesFromTrackIdx(at),D[Fe].setCurrentFragmentedTrackIdx(ot)):at===-1&&ie.trigger(P.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Fe,mediaType:q.default.TEXT})}}})(J,le,he);else if(le&&!le.isFragmented)(function(Fe,je){ie.trigger(P.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:je},{streamId:Fe,mediaType:q.default.TEXT})})(J,le);else if(!le&&re){const Fe=K(J);return void(isNaN(Fe)||ze(J,Fe))}w.setTrack(le)}function K(J){const ue=function(Ie){return M[Ie].getTextTrackInfos().filter((we,Fe)=>(we._indexToSelect=Fe,!!(we&&we.roles&&we.roles.length>0)&&X(we)))}(J);if(!ue||ue.length<=0)return NaN;const he=w.getCurrentTrackFor(q.default.AUDIO,J);if(!he)return NaN;const le=ue.find(Ie=>he.lang===Ie.lang);return le?le._indexToSelect:NaN}function X(J){return!(!J||!J.roles||J.roles.length===0)&&J.roles.some(ue=>ue.schemeIdUri===q.default.DASH_ROLE_SCHEME_ID&&ue.value===k.default.FORCED_SUBTITLE)}function Se(J){return M[J].getCurrentTrackIdx()}function ye(){D={},M={},G={},re=!0,oe=!1,Ae=!1}return H={addEmbeddedTrack:function(J,ue){const he=J.id;D[he]&&D[he].addEmbeddedTrack(ue)},addMediaInfosToBuffer:function(J,ue,he){let le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const Ie=J.id;D[Ie]&&D[Ie].addMediaInfos(ue,he,le)},createTracks:function(J){const ue=J.id;M[ue]&&M[ue].createTracks()},deactivateStream:function(J){if(!J)return;const ue=J.id;D[ue]&&D[ue].resetMediaInfos(),M[ue]&&M[ue].deleteAllTextTracks()},enableForcedTextStreaming:function(J){return(0,Ht.checkParameterType)(J,"boolean"),se=J,!0},enableText:function(J,ue){return(0,Ht.checkParameterType)(ue,"boolean"),Me()!==ue&&(ue&&ze(J,G[J].lastEnabledIndex),ue||(G[J].lastEnabledIndex=Se(J),oe?ze(J,-1):Ae=!0)),!0},getAllTracksAreDisabled:function(){return re},getCurrentTrackIdx:Se,getTextSourceBuffer:function(J){const ue=J.id;if(D&&D[ue])return D[ue]},initialize:function(){Q=mu(y).create({adapter:v,baseURLController:z}),ie.on(P.default.TEXT_TRACKS_QUEUE_INITIALIZED,ce,H),ie.on(P.default.DVB_FONT_DOWNLOAD_FAILED,V,H),ie.on(P.default.DVB_FONT_DOWNLOAD_COMPLETE,$,H),ie.on(P.default.MEDIAINFO_UPDATED,ve,H),x.get().streaming.text.webvtt.customRenderingEnabled&&(ie.on(P.default.PLAYBACK_TIME_UPDATED,Te,H),ie.on(P.default.PLAYBACK_SEEKING,ge,H))},initializeForStream:function(J){const ue=J.id,he=Wc(y).create({videoModel:F,settings:x,streamInfo:J});he.initialize(),M[ue]=he;const le=us(y).create({errHandler:_,adapter:v,dvbFonts:Q,manifestModel:I,mediaController:w,videoModel:F,textTracks:he,vttParser:B,vttCustomRenderingParser:Z,ttmlParser:ne,streamInfo:J,settings:x});le.initialize(),D[ue]=le,G[ue]={},G[ue].lastEnabledIndex=-1},isTextEnabled:Me,reset:function(){Object.keys(D).forEach(J=>{D[J].resetEmbedded(),D[J].reset()}),Q.reset(),ye(),ie.off(P.default.TEXT_TRACKS_QUEUE_INITIALIZED,ce,H),ie.off(P.default.DVB_FONT_DOWNLOAD_FAILED,V,H),ie.off(P.default.DVB_FONT_DOWNLOAD_COMPLETE,$,H),ie.off(P.default.MEDIAINFO_UPDATED,ve,H),x.get().streaming.text.webvtt.customRenderingEnabled&&(ie.off(P.default.PLAYBACK_TIME_UPDATED,Te,H),ie.off(P.default.PLAYBACK_SEEKING,ge,H))},setTextTrack:ze,clearDataForStream:function(J){D[J]&&(D[J].resetEmbedded(),D[J].reset(),delete D[J]),M[J]&&(M[J].deleteAllTextTracks(),delete M[J]),G[J]&&delete G[J]}},se=!1,oe=!1,Ae=!1,B=Lf(y).getInstance(),Z=gu(y).getInstance(),ne=Nf(y).getInstance(),ie=(0,Ee.default)(y).getInstance(),U=(0,Ve.default)(y).getInstance().getLogger(H),ye(),H}Jc.__dashjs_factory_name="TextController";var ed=xe.default.getClassFactory(Jc);function td(S){S=S||{};const y=this.context,v=(0,Ve.default)(y).getInstance(),_=S.settings,I=(0,Ee.default)(y).getInstance();let w,z,F,x,H,G;function D(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function M(ne,ie,re,se){const oe=Math.pow(.5,re/se.fast);ne.fastEstimate=(1-oe)*ie+oe*ne.fastEstimate;const Ae=Math.pow(.5,re/se.slow);ne.slowEstimate=(1-Ae)*ie+Ae*ne.slowEstimate,ne.totalWeight+=re}function B(){w={},z={},F={},x={}}const Z={addEntry:function(ne,ie){try{if(!(ne&&ie&&ie.trace&&ie.trace.length))return;(function(oe){w[oe]=w[oe]||[],z[oe]=z[oe]||[],F[oe]=F[oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},x[oe]=x[oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(ne);const re=ie.tresponse.getTime()-ie.trequest.getTime()||1;let se=function(oe,Ae){return oe._fileLoaderType&&oe._fileLoaderType===q.default.FILE_LOADER_TYPES.FETCH?function(Q){const U=Q.trace.reduce((ce,Te)=>ce+Te.b[0],0),V=Q.trace.reduce((ce,Te)=>ce+Te.d,0);let $=NaN;return _.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&($=D()),isNaN($)&&($=Math.round(8*U/V)),{downloadedBytes:U,value:$,downloadTimeInMs:V}}(oe):function(Q,U){let V=NaN,$=NaN,ce=!1;if(_.get().streaming.abr.throughput.useResourceTimingApi&&Q._resourceTimingValues)V=Q._resourceTimingValues.transferSize,$=Q._resourceTimingValues.responseEnd-Q._resourceTimingValues.responseStart,ce=!0;else{if(Q.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};V=Q.trace.reduce((ge,ve)=>ge+ve.b[0],0)-Q.trace[0].b[0],$=Math.max(Q.trace.reduce((ge,ve)=>ge+ve.d,0)-Q.trace[0].d,1)}let Te=NaN;if(!ce&&_.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(Te=D()),isNaN(Te)){const ge=_.get().streaming.abr.throughput.useDeadTimeLatency?$:$+U;Te=Math.round(8*V/ge)}return{downloadedBytes:V,value:Te,downloadTimeInMs:$}}(oe,Ae)}(ie,re);if(se.latencyInMs=re,isNaN(se.value)||!isFinite(se.value))return;if(ie.cmsd){const oe=ie.cmsd.dynamic&&ie.cmsd.dynamic.etp?ie.cmsd.dynamic.etp:null;if(oe){const Ae=_.get().streaming.cmsd.abr.etpWeightRatio;Ae>0&&Ae<=1&&(se.value=se.value*(1-Ae)+oe*Ae)}}if(function(oe,Ae,Q){return _.get().streaming.abr.throughput.useResourceTimingApi&&Q._resourceTimingValues?Q._resourceTimingValues.transferSize===0&&Q._resourceTimingValues.decodedBodySize>0:!isNaN(Ae)&&(oe===q.default.VIDEO?Ae<_.get().streaming.cacheLoadThresholds[q.default.VIDEO]:oe===q.default.AUDIO?Ae<_.get().streaming.cacheLoadThresholds[q.default.AUDIO]:void 0)}(ne,ie._tfinish.getTime()-ie.trequest.getTime(),ie))return void G.debug(`${ne} Assuming segment ${ie.url} came from cache, ignoring it for throughput calculation`);G.debug(`Added throughput entry for ${ne}: ${se.value} kbit/s`),se.serviceLocation=ie._serviceLocation,w[ne].push(se),z[ne].push({value:re}),function(oe){w[oe].length>_.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&w[oe].shift(),z[oe].length>_.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&z[oe].shift()}(ne),I.trigger(be.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:se}),ie.type!==_e.HTTPRequest.MPD_TYPE&&(M(F[ne],se.value,_.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*se.downloadTimeInMs,H.bandwidthHalfLife),M(x[ne],re,1,H.latencyHalfLife))}catch(re){G.error(re)}},getThroughputDict:function(ne){return ne?w[ne]:w},getEwmaThroughputDict:function(ne){return ne?F[ne]:F},getEwmaLatencyDict:function(ne){return ne?x[ne]:x},getEwmaHalfLife:function(){return H},getLatencyDict:function(ne){return ne?z[ne]:z},reset:B};return G=v.getLogger(Z),H={bandwidthHalfLife:{fast:_.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:_.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:_.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:_.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},B(),Z}td.__dashjs_factory_name="ThroughputModel";var Mf=xe.default.getClassFactory(td);function Of(){const S=this.context,y=(0,Ee.default)(S).getInstance();let v,_,I;function w(){performance.clearResourceTimings()}function z(oe){oe.metric!==ee.HTTP_REQUEST||!oe.value||oe.value.type!==_e.HTTPRequest.MPD_TYPE&&(oe.value.type!==_e.HTTPRequest.MEDIA_SEGMENT_TYPE||oe.mediaType!==q.default.AUDIO&&oe.mediaType!==q.default.VIDEO)||v.addEntry(oe.mediaType,oe.value)}function F(oe,Ae){let Q,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN,$=null,ce=v.getEwmaHalfLife(),Te=null,ge=!0;switch(U||(U=I.get().streaming.abr.throughput.averageCalculationMode),oe){case q.default.THROUGHPUT_TYPES.BANDWIDTH:$=U===q.default.THROUGHPUT_CALCULATION_MODES.EWMA?v.getEwmaThroughputDict(Ae):v.getThroughputDict(Ae),Te=ce.bandwidthHalfLife,ge=!0,V=isNaN(V)?_.getIsDynamic()?I.get().streaming.abr.throughput.sampleSettings.live:I.get().streaming.abr.throughput.sampleSettings.vod:V;break;case q.default.THROUGHPUT_TYPES.LATENCY:$=U===q.default.THROUGHPUT_CALCULATION_MODES.EWMA?v.getEwmaLatencyDict(Ae):v.getLatencyDict(Ae),Te=ce.latencyHalfLife,ge=!1,V=isNaN(V)?I.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:V}if(!$||$.length===0)return NaN;switch(U){case q.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return Q=x($,V,oe),H($,Q);case q.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return Q=x($,V,oe),G($,Q);case q.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return Q=x($,V,oe),D($,Q);case q.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return Q=x($,V,oe),M($,Q);case q.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return Q=x($,V,oe),B($,Q);case q.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return Q=x($,V,oe),Z($,Q);case q.default.THROUGHPUT_CALCULATION_MODES.EWMA:return ne($,Te,ge);case q.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return Q=x($,V,oe),ie($,Q)}}function x(oe,Ae,Q){if(oe){if(Ae>=oe.length)Ae=oe.length;else if(Q===q.default.THROUGHPUT_TYPES.BANDWIDTH&&I.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let U=1;U<Ae;++U){const V=oe[oe.length-U].value/oe[oe.length-U-1].value;if((V>=I.get().streaming.abr.throughput.sampleSettings.increaseScale||V<=I.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(Ae+=1)===oe.length)break}}else Ae=0;return Ae}function H(oe,Ae){let Q=oe;return Ae!==0&&Q&&Q.length!==0?(Q=Q.slice(-Ae),Q.reduce((U,V)=>U+V.value,0)/Q.length):NaN}function G(oe,Ae){let Q=oe;if(Ae===0||!Q||Q.length===0)return NaN;Q=Q.slice(-Ae);let U=0;return Q.reduce((V,$)=>{let ce=Math.sqrt($.downloadedBytes);return U+=ce,V+$.value*ce},0)/U}function D(oe,Ae){let Q=oe;if(Ae===0||!Q||Q.length===0)return NaN;Q=Q.slice(-Ae);let U=0;return Q.reduce((V,$,ce)=>{let Te=ce+1;return U+=Te,V+$.value*Te},0)/U}function M(oe,Ae){let Q=oe;if(Ae===0||!Q||Q.length===0)return NaN;Q=Q.slice(-Ae);const U=Q.reduce((V,$)=>V+1/$.value,0);return Q.length/U}function B(oe,Ae){let Q=oe;if(Ae===0||!Q||Q.length===0)return NaN;Q=Q.slice(-Ae);let U=0;const V=Q.reduce(($,ce)=>{let Te=Math.sqrt(ce.downloadedBytes);return U+=Te,$+1/ce.value*Te},0);return U/V}function Z(oe,Ae){let Q=oe;if(Ae===0||!Q||Q.length===0)return NaN;Q=Q.slice(-Ae);let U=0;const V=Q.reduce(($,ce,Te)=>{let ge=Te+1;return U+=ge,$+1/ce.value*ge},0);return U/V}function ne(oe,Ae){let Q=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(!oe||oe.totalWeight<=0)return NaN;const U=oe.fastEstimate/(1-Math.pow(.5,oe.totalWeight/Ae.fast)),V=oe.slowEstimate/(1-Math.pow(.5,oe.totalWeight/Ae.slow));return Q?Math.min(U,V):Math.max(U,V)}function ie(oe,Ae){if(Ae===0||!oe||oe.length===0)return NaN;let Q=oe.slice(-Ae).map(ce=>ce.value),U=2/(Q.length+1),V=Q[Q.length-1],$=Q[Q.length-1];for(let ce=0;ce<Q.length;ce++)V=U*Q[ce]+(1-U)*V,$=U*V+(1-U)*$;return $}function re(oe){let Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const U=F(q.default.THROUGHPUT_TYPES.BANDWIDTH,oe,Ae,Q);return Math.round(U)}const se={getArithmeticMean:H,getAverageLatency:function(oe){let Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const U=F(q.default.THROUGHPUT_TYPES.LATENCY,oe,Ae,Q);return Math.round(U)},getAverageThroughput:re,getByteSizeWeightedArithmeticMean:G,getByteSizeWeightedHarmonicMean:B,getDateWeightedArithmeticMean:D,getDateWeightedHarmonicMean:Z,getEwma:ne,getHarmonicMean:M,getRawThroughputData:function(oe){return oe?v.getThroughputDict(oe):[]},getSafeAverageThroughput:function(oe){let Ae=re(oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN);return isNaN(Ae)||(Ae*=I.get().streaming.abr.throughput.bandwidthSafetyFactor),Ae},getZlema:ie,initialize:function(){v=Mf(S).create({settings:I}),y.on(be.default.METRIC_ADDED,z,se),performance&&performance.addEventListener("resourcetimingbufferfull",w)},reset:function(){v.reset(),y.off(be.default.METRIC_ADDED,z,se),performance&&performance.removeEventListener("resourcetimingbufferfull",w)},setConfig:function(oe){oe.settings&&(I=oe.settings),oe.playbackController&&(_=oe.playbackController)}};return se}Of.__dashjs_factory_name="ThroughputController";var Pf=xe.default.getSingletonFactory(Of);function ai(){const S="You must first call initialize() and set a source before calling this method",y="You must first call initialize() and set a valid source and view before calling this method",v="You must first call attachView() to set the video element before calling this method",_="You must first call attachSource() with a valid source before calling this method",I="MediaPlayer not initialized!",w=this.context,z=(0,Ee.default)(w).getInstance();let F=(0,W.default)(w).getInstance();const x=(0,Ve.default)(w).getInstance({settings:F});let H,G,D,M,B,Z,ne,ie,re,se,oe,Ae,Q,U,V,$,ce,Te,ge,ve,Me,ze,K,X,Se,ye,J,ue,he,le,Ie,we,Fe,je,at,lt,ot,qt,Kt,Xt,In;function Lt(){$t(null),Gt(null),M=null,V&&(V.reset(),V=null),$&&($.reset(),$=null),Me&&Me.reset(),F.reset(),Te&&(Te.reset(),Te=null)}function gn(){return!!D&&!!ot.getElement()}function vn(){return(0,uf.getVersionString)()}function Cn(){if(!ne)throw y;return he.isPaused()}function Nn(){if(!ne)throw y;return he.getIsDynamic()}function Ke(ke){const Qe=ye&&ye.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO;let Tt=Fe.getCurrentDVRInfo(Qe);return Tt?bt(Tt.range.start+ke,Tt):0}function bt(ke,Qe){let Tt=he.getOriginalLiveDelay();return ke>Qe.range.end-Tt&&(ke=Qe.range.end-Tt),ke}function ht(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!ne)throw y;let Qe=ft().currentTime;return ke!==""&&(Qe=ye.getTimeRelativeToStreamId(Qe,ke)),Qe}function St(ke){(0,Ht.checkParameterType)(ke,"boolean"),ie=ke}function ln(){Me.restoreDefaultUTCTimingSources()}function Sn(){return Fe}function ft(){if(!ot.getElement())throw v;return ot.getElement()}function Gt(ke){if(!B)throw I;ot.setElement(ke),ke&&(rn(),function(){if($||typeof dashjs>"u")return;let Qe=dashjs.MetricsReporting;typeof Qe=="function"&&($=Qe(w).create().createMetricsReporting({debug:x,eventBus:z,mediaElement:ft(),adapter:ge,dashMetrics:Fe,mediaPlayerModel:ve,events:P.default,constants:q.default,metricsConstants:ee}))}(),function(){if(ce||typeof dashjs>"u")return;let Qe=dashjs.MssHandler;typeof Qe=="function"&&(Y.extend(Qe.errors),ce=Qe(w).create({eventBus:z,mediaPlayerModel:ve,dashMetrics:Fe,manifestModel:je,playbackController:he,streamController:ye,protectionController:V,baseURLController:K,errHandler:ze,events:P.default,constants:q.default,debug:x,initSegmentType:_e.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Al,ISOBoxer:Pr,settings:F}))}(),ye&&ye.switchToVideoElement(re)),ne&&et(),pt(re)}function dn(ke){if(!Z)throw S;let Qe=ye.getActiveStreamInfo();return Qe?U.getTracksFor(ke,Qe.id).filter(Tt=>!V||V.areKeyIdsUsable(Tt.normalizedKeyIds)):[]}function $t(ke){let Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!B)throw I;typeof ke=="string"&&qt.initialize(ke),Qe==null&&(Qe=NaN),isNaN(Qe)||(Qe=Math.max(0,Qe)),re=Qe,D=ke,(Z||ne)&&et(),gn()&&pt(re)}function an(){if(!Z)throw S;let ke=ye.getActiveStreamInfo();return ke?ye.getStreamById(ke.id):null}function et(){ne=!1,Z=!1,ge.reset(),ye.reset(),ue.reset(),we.reset(),he.reset(),le.reset(),Ie.reset(),se.reset(),oe.reset(),U.reset(),Xt.reset(),V&&(F.get().streaming.protection.keepProtectionMediaKeys?V.stop():(V.reset(),V=null,rn())),J.reset(),at.reset(),lt.reset()}function Ct(){return nf(w).create({debug:x,errHandler:ze,dashMetrics:Fe,mediaPlayerModel:ve,mssHandler:ce,settings:F})}function rn(){if(V)return V;if(typeof dashjs>"u")return null;let ke=dashjs.Protection;if(typeof ke=="function"){let Qe=ke(w).create();return P.default.extend(ke.events),be.default.extend(ke.events,{publicOnly:!0}),Y.extend(ke.errors),V=Qe.createProtectionSystem({debug:x,errHandler:ze,videoModel:ot,customParametersModel:Me,capabilities:X,eventBus:z,events:P.default,BASE64:Al,constants:q.default,cmcdModel:at,settings:F}),X||(X=(0,rs.default)(w).getInstance()),X.setProtectionController(V),V}return null}function Qt(){if(!B)throw I;if(Te)return Te;if(typeof dashjs>"u")return null;let ke=dashjs.OfflineController;if(typeof ke=="function"){P.default.extend(ke.events),be.default.extend(ke.events,{publicOnly:!0}),Y.extend(ke.errors);const Qe=Ct(),Tt=tc(w).create();return Tt.setConfig({manifestModel:je,adapter:ge,manifestLoader:Qe,errHandler:ze,contentSteeringController:Ie}),Te=ke(w).create({debug:x,manifestUpdater:Tt,baseURLController:K,manifestLoader:Qe,manifestModel:je,mediaPlayerModel:ve,abrController:se,playbackController:he,adapter:ge,errHandler:ze,dashMetrics:Fe,timelineConverter:Q,segmentBaseController:Xt,schemeLoaderFactory:Ae,eventBus:z,events:P.default,errors:Y,constants:q.default,settings:F,dashConstants:k.default,urlUtils:jt(w).getInstance()}),Te}return null}function pt(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Te&&Te.resetRecords(),!Z&&D&&(Z=!0,G.info("Streaming Initialized"),function(){const Qe=Ct();ye||(ye=ts(w).getInstance()),J||(J=ed(w).create({errHandler:ze,manifestModel:je,adapter:ge,mediaController:U,baseURLController:K,videoModel:ot,settings:F})),Se.setConfig({capabilities:X,customParametersModel:Me,adapter:ge,settings:F,protectionController:V,manifestModel:je,errHandler:ze}),ye.setConfig({capabilities:X,capabilitiesFilter:Se,manifestLoader:Qe,manifestModel:je,mediaPlayerModel:ve,customParametersModel:Me,protectionController:V,textController:J,adapter:ge,dashMetrics:Fe,errHandler:ze,timelineConverter:Q,videoModel:ot,playbackController:he,serviceDescriptionController:le,contentSteeringController:Ie,abrController:se,throughputController:oe,mediaController:U,settings:F,baseURLController:K,uriFragmentModel:qt,segmentBaseController:Xt}),ue.setConfig({settings:F,playbackController:he,streamController:ye,videoModel:ot,timelineConverter:Q,adapter:ge}),he.setConfig({streamController:ye,serviceDescriptionController:le,dashMetrics:Fe,adapter:ge,videoModel:ot,timelineConverter:Q,settings:F}),we.setConfig({streamController:ye,playbackController:he,mediaPlayerModel:ve,videoModel:ot,settings:F}),oe.setConfig({settings:F,playbackController:he}),se.setConfig({streamController:ye,capabilities:X,domStorage:Kt,mediaPlayerModel:ve,customParametersModel:Me,throughputController:oe,cmsdModel:lt,dashMetrics:Fe,adapter:ge,videoModel:ot,settings:F}),at.setConfig({abrController:se,dashMetrics:Fe,playbackController:he,serviceDescriptionController:le,throughputController:oe}),In.setConfig({serviceDescriptionController:le}),lt.setConfig({}),U.initialize(),oe.initialize(),se.initialize(),ye.initialize(ie,M),J.initialize(),ue.initialize(),we.initialize(),at.initialize(ie),lt.initialize(),Ie.initialize(),Xt.initialize()}(),typeof D=="string"?ye.load(D,ke):ye.loadWithManifest(D,ke)),!ne&&gn()&&(ne=!0,z.trigger(be.default.PLAYBACK_INITIALIZED),G.info("Playback Initialized"))}return H={addABRCustomRule:function(ke,Qe,Tt){Me.addAbrCustomRule(ke,Qe,Tt)},addRequestInterceptor:function(ke){Me.addRequestInterceptor(ke)},addResponseInterceptor:function(ke){Me.addResponseInterceptor(ke)},addUTCTimingSource:function(ke,Qe){Me.addUTCTimingSource(ke,Qe)},attachProtectionController:function(ke){V=ke},attachSource:$t,attachTTMLRenderingDiv:function(ke){if(!ot.getElement())throw v;ot.setTTMLRenderingDiv(ke)},attachView:Gt,attachVttRenderingDiv:function(ke){if(!ot.getElement())throw v;ot.setVttRenderingDiv(ke)},clearDefaultUTCTimingSources:function(){Me.clearDefaultUTCTimingSources()},convertToTimeCode:function(ke){ke=Math.max(ke,0);let Qe=Math.floor(ke/3600),Tt=Math.floor(ke%3600/60),Ze=Math.floor(ke%3600%60);return(Qe===0?"":Qe<10?"0"+Qe.toString()+":":Qe.toString()+":")+(Tt<10?"0"+Tt.toString():Tt.toString())+":"+(Ze<10?"0"+Ze.toString():Ze.toString())},destroy:function(){Lt(),xe.default.deleteSingletonInstances(w)},duration:function(){if(!ne)throw y;let ke=ft().duration;if(he.getIsDynamic()){const Qe=ye&&ye.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO;let Tt=Fe.getCurrentDVRInfo(Qe);ke=Tt?Tt.range.end-Tt.range.start:0}return ke},enableForcedTextStreaming:function(ke){return!(!ye.getActiveStreamInfo()||!J)&&J.enableForcedTextStreaming(ke)},enableText:function(ke){const Qe=ye.getActiveStreamInfo();return!(!Qe||!J)&&J.enableText(Qe.id,ke)},extend:function(ke,Qe,Tt){xe.default.extend(ke,Qe,Tt,w)},formatUTC:function(ke,Qe,Tt){let Ze=arguments.length>3&&arguments[3]!==void 0&&arguments[3];const Ut=new Date(1e3*ke),Zt=Ut.toLocaleDateString(Qe),_n=Ut.toLocaleTimeString(Qe,{hour12:Tt});return Ze?_n+" "+Zt:_n},getABRCustomRules:function(){return Me.getAbrCustomRules()},getActiveStream:an,getAutoPlay:function(){return ie},getAvailableBaseUrls:function(){const ke=je.getValue();return ke?K.getBaseUrls(ke):[]},getAvailableLocations:function(){const ke=je.getValue();if(!ke)return[];const Qe=ge.getLocation(ke),Tt=Ie.getSynthesizedLocationElements(Qe);return Qe.concat(Tt)},getAverageLatency:function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q.default.VIDEO,Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return oe?oe.getAverageLatency(ke,Qe,Tt):0},getAverageThroughput:function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q.default.VIDEO,Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return oe?oe.getAverageThroughput(ke,Qe,Tt):0},getBufferLength:function(ke){const Qe=[q.default.VIDEO,q.default.AUDIO,q.default.TEXT];if(ke)return Qe.indexOf(ke)!==-1?Sn().getCurrentBufferLevel(ke)||NaN:(G.warn("getBufferLength requested for invalid type"),NaN);{const Tt=Qe.map(Ze=>dn(Ze).length>0?Sn().getCurrentBufferLevel(Ze):Number.MAX_VALUE).reduce((Ze,Ut)=>Math.min(Ze,Ut));return Tt===Number.MAX_VALUE?NaN:Tt}},getCurrentLiveLatency:function(){if(!B)throw I;return ne?he.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(ke){if(!Z)throw S;if(ke!==q.default.IMAGE&&ke!==q.default.VIDEO&&ke!==q.default.AUDIO)return null;const Qe=an();if(!Qe)return null;if(ke===q.default.IMAGE){const Tt=Qe.getThumbnailController();return Tt?Tt.getCurrentTrack():-1}return Qe.getCurrentRepresentationForType(ke)},getCurrentSteeringResponseData:function(){if(Ie)return Ie.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let ke=NaN;const Qe=ye.getActiveStreamInfo();if(Qe&&J)return ke=J.getCurrentTrackIdx(Qe.id),ke},getCurrentTrackFor:function(ke){if(!Z)throw S;let Qe=ye.getActiveStreamInfo();return Qe?U.getCurrentTrackFor(ke,Qe.id):null},getDashAdapter:function(){return ge},getDashMetrics:Sn,getDebug:function(){return x},getDvrSeekOffset:Ke,getDvrWindow:function(){if(!ne)throw y;const ke=ye&&ye.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO;let Qe=Fe.getCurrentDVRInfo(ke);if(!Qe)return{};let Tt=0;const Ze=he.getIsDynamic();return Ze&&(Tt=Qe.manifestInfo.availableFrom.getTime()/1e3),{start:Qe.range.start,end:Qe.range.end,startAsUtc:Ze?Tt+Qe.range.start:NaN,endAsUtc:Ze?Tt+Qe.range.end:NaN,size:Qe.range.end-Qe.range.start}},getInitialMediaSettingsFor:function(ke){if(!B)throw I;return U.getInitialSettings(ke)},getLowLatencyModeEnabled:function(){if(!ne)throw y;return he.getLowLatencyModeEnabled()},getManifest:function(){return je.getValue()},getOfflineController:function(){return Qt()},getPlaybackRate:function(){return ft().playbackRate},getProtectionController:function(){return rn()},getRawThroughputData:function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q.default.VIDEO;return oe?oe.getRawThroughputData(ke):[]},getRepresentationsByType:function(ke){let Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Z)throw S;let Tt=Qe?ye.getStreamById(Qe):an();return Tt?Tt.getRepresentationsByType(ke):[]},getSafeAverageThroughput:function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q.default.VIDEO,Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return oe?oe.getSafeAverageThroughput(ke,Qe,Tt):0},getSettings:function(){return F.get()},getSource:function(){if(!D)throw _;return D},getStreamsFromManifest:function(ke){if(!Z)throw S;return ge.getStreamsInfo(ke)},getTTMLRenderingDiv:function(){return ot?ot.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!ne)throw y;return he.getOriginalLiveDelay()},getTracksFor:dn,getTracksForTypeFromManifest:function(ke,Qe,Tt){if(!Z)throw S;return(Tt=Tt||ge.getStreamsInfo(Qe,1)[0])?ge.getAllMediaInfoForType(Tt,ke,Qe):[]},getVersion:vn,getVideoElement:ft,getVolume:function(){return ft().volume},getXHRWithCredentialsForType:function(ke){return Me.getXHRWithCredentialsForType(ke)},initialize:function(ke,Qe,Tt){let Ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;X||(X=(0,rs.default)(w).getInstance(),X.setConfig({settings:F,protectionController:V})),ze||(ze=rf(w).getInstance()),X.supportsMediaSource()?(B||(B=!0,Q=kf(w).getInstance(),oe||(oe=Pf(w).getInstance()),se||(se=ru(w).getInstance()),Ae||(Ae=al(w).getInstance()),he||(he=Ye(w).getInstance()),U||(U=Zi(w).getInstance()),ye||(ye=ts(w).getInstance()),ue||(ue=Zd(w).getInstance()),we||(we=Jh(w).getInstance()),le||(le=oc(w).getInstance()),Ie||(Ie=As(w).getInstance()),Se||(Se=Yo(w).getInstance()),ge=qc(w).getInstance(),je=vc(w).getInstance(),at=Dd(w).getInstance(),lt=zd(w).getInstance(),In=Bd(w).getInstance(),Fe=ho(w).getInstance({settings:F}),Kt=Oc(w).getInstance({settings:F}),ge.setConfig({constants:q.default,cea608parser:new Oe,errHandler:ze,BASE64:Al}),K||(K=ws(w).create()),K.setConfig({adapter:ge,contentSteeringController:Ie}),le.setConfig({adapter:ge}),Xt||(Xt=hf(w).getInstance({dashMetrics:Fe,mediaPlayerModel:ve,errHandler:ze,baseURLController:K,events:P.default,eventBus:z,debug:x,boxParser:Ql(w).getInstance(),errors:Y})),U.setConfig({domStorage:Kt,settings:F,mediaPlayerModel:ve,customParametersModel:Me,videoModel:ot}),ve.setConfig({playbackController:he,serviceDescriptionController:le}),Ie.setConfig({adapter:ge,errHandler:ze,dashMetrics:Fe,mediaPlayerModel:ve,manifestModel:je,serviceDescriptionController:le,throughputController:oe,eventBus:z}),ln(),St(Tt===void 0||Tt),Qt()),ke&&Gt(ke),Qe&&$t(Qe,Ze),G.info("[dash.js "+vn()+"] MediaPlayer has been initialized")):ze.error(new Ce.default(Y.CAPABILITY_MEDIASOURCE_ERROR_CODE,Y.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:Nn,isMuted:function(){return ft().muted},isPaused:Cn,isReady:gn,isSeeking:function(){if(!ne)throw y;return he.isSeeking()},isTextEnabled:function(){const ke=ye.getActiveStreamInfo();return!(!ke||!J)&&J.isTextEnabled(ke)},off:function(ke,Qe,Tt){z.off(ke,Qe,Tt)},on:function(ke,Qe,Tt,Ze){z.on(ke,Qe,Tt,Ze)},pause:function(){if(!ne)throw y;he.pause()},play:function(){if(!ne)throw y;(!ie||Cn()&&ne)&&he.play(!0)},preload:function(){if(!ot.getElement()&&!Z){if(!D)throw _;pt(re)}},provideThumbnail:function(ke,Qe){if(typeof Qe!="function")return;if(ke<0)return void Qe(null);const Tt=he.getIsDynamic()?Ke(ke):ke,Ze=ye.getStreamForTime(Tt);if(Ze===null)return void Qe(null);const Ut=Ze.getThumbnailController();if(Ut)return Ut.provide(Tt,Qe);Qe(null)},refreshManifest:function(ke){if(!B)throw I;if(!gn())return ke(null,_);let Qe=this;if(typeof ke=="function"){const Tt=function(Ze){z.off(P.default.INTERNAL_MANIFEST_LOADED,Tt,Qe),Ze.error?ke(null,Ze.error):ke(Ze.manifest)};z.on(P.default.INTERNAL_MANIFEST_LOADED,Tt,Qe)}ye.refreshManifest()},registerCustomCapabilitiesFilter:function(ke){Me.registerCustomCapabilitiesFilter(ke)},registerLicenseRequestFilter:function(ke){Me.registerLicenseRequestFilter(ke)},registerLicenseResponseFilter:function(ke){Me.registerLicenseResponseFilter(ke)},removeABRCustomRule:function(ke){Me.removeAbrCustomRule(ke)},removeAllABRCustomRule:function(){Me.removeAllAbrCustomRule()},removeRequestInterceptor:function(ke){Me.removeRequestInterceptor(ke)},removeResponseInterceptor:function(ke){Me.removeResponseInterceptor(ke)},removeUTCTimingSource:function(ke,Qe){Me.removeUTCTimingSource(ke,Qe)},reset:Lt,resetCustomInitialTrackSelectionFunction:function(){Me.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){F.reset()},restoreDefaultUTCTimingSources:ln,retrieveManifest:function(ke,Qe){let Tt=Ct(),Ze=this;const Ut=function(Zt){Zt.error?Qe(null,Zt.error):Qe(Zt.manifest),z.off(P.default.INTERNAL_MANIFEST_LOADED,Ut,Ze),Tt.reset()};z.on(P.default.INTERNAL_MANIFEST_LOADED,Ut,Ze),qt.initialize(ke),Tt.load(ke)},seek:function(ke){if(!ne)throw y;if((0,Ht.checkParameterType)(ke,"number"),isNaN(ke))throw q.default.BAD_ARGUMENT_ERROR;ke<0&&(ke=0);let Qe=he.getIsDynamic()?Ke(ke):ke;const Tt=ft();!he.getIsDynamic()&&Tt.duration&&(Qe=Math.min(Tt.duration,Qe)),he.seek(Qe,!1,!1,!0)},seekToOriginalLive:function(){ne&&Nn()&&he.seekToOriginalLive()},seekToPresentationTime:function(ke){if(!ne)throw y;if((0,Ht.checkParameterType)(ke,"number"),isNaN(ke))throw q.default.BAD_ARGUMENT_ERROR;ke<0&&(ke=0);const Qe=ft();if(!he.getIsDynamic()&&Qe.duration&&(ke=Math.min(Qe.duration,ke)),he.getIsDynamic()){const Tt=ye&&ye.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO;let Ze=Fe.getCurrentDVRInfo(Tt);if(!Ze)return;(ke=bt(ke,Ze))<Ze.range.start&&(ke=Ze.range.start)}he.seek(ke,!1,!1,!0)},setAutoPlay:St,setConfig:function(ke){ke&&(ke.capabilities&&(X=ke.capabilities),ke.capabilitiesFilter&&(Se=ke.capabilitiesFilter),ke.streamController&&(ye=ke.streamController),ke.textController&&(J=ke.textController),ke.gapController&&(ue=ke.gapController),ke.throughputController&&(oe=ke.throughputController),ke.playbackController&&(he=ke.playbackController),ke.serviceDescriptionController&&(le=ke.serviceDescriptionController),ke.contentSteeringController&&(Ie=ke.contentSteeringController),ke.clientDataReportingController&&(In=ke.clientDataReportingController),ke.catchupController&&(we=ke.catchupController),ke.mediaPlayerModel&&(ve=ke.mediaPlayerModel),ke.customParametersModel&&(Me=ke.customParametersModel),ke.abrController&&(se=ke.abrController),ke.schemeLoaderFactory&&(Ae=ke.schemeLoaderFactory),ke.mediaController&&(U=ke.mediaController),ke.settings&&(F=ke.settings),ke.dashMetrics&&(Fe=ke.dashMetrics))},setCurrentTrack:function(ke){let Qe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!Z)throw S;!V||V.areKeyIdsUsable(ke.normalizedKeyIds)?U.setTrack(ke,{noSettingsSave:Qe}):G.error(`Can not switch to track with index ${ke.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(ke){Me.setCustomInitialTrackSelectionFunction(ke)},setInitialMediaSettingsFor:function(ke,Qe){if(!B)throw I;let Tt=function(Ze){const Ut=F.get().streaming.defaultSchemeIdUri;let Zt={};function _n(Ln,xn,Ta){let Wa={};if(xn){if(xn instanceof Array)throw"Array type not supported for settings!";return xn instanceof Object?(Wa.schemeIdUri=xn.schemeIdUri?xn.schemeIdUri:"",Wa.value=xn.value?xn.value:""):(Wa.schemeIdUri=Ta,Wa.value=xn,G.warn("No schemeIdUri provided for "+Ln+', using default "'+Ta+'"')),Wa}return null}return Ze.id!==void 0&&(Zt.id=Ze.id),Ze.lang!==void 0&&(Zt.lang=Ze.lang),isNaN(Ze.index)||(Zt.index=Ze.index),Ze.viewpoint!==void 0&&(Zt.viewpoint=_n("viewpoint",Ze.viewpoint,Ut.viewpoint)),Ze.audioChannelConfiguration!==void 0&&(Zt.audioChannelConfiguration=_n("audioChannelConfiguration",Ze.audioChannelConfiguration,Ut.audioChannelConfiguration)),Ze.role!==void 0&&(Zt.role=_n("role",Ze.role,Ut.role),Zt.role.schemeIdUri===q.default.DASH_ROLE_SCHEME_ID&&Zt.role.value==="Main"&&(Zt.role.value=k.default.MAIN)),Ze.accessibility!==void 0&&(Zt.accessibility=_n("accessibility",Ze.accessibility,Ut.accessibility)),Zt}(Qe);U.setInitialSettings(ke,Tt)},setMute:function(ke){(0,Ht.checkParameterType)(ke,"boolean"),ft().muted=ke},setPlaybackRate:function(ke){ft().playbackRate=ke},setProtectionData:function(ke){M=ke,ye&&ye.setProtectionData(M)},setRepresentationForTypeById:function(ke,Qe){let Tt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(ke!==q.default.IMAGE&&ke!==q.default.VIDEO&&ke!==q.default.AUDIO)return;if(!Z)throw S;const Ze=an();if(Ze)if(ke===q.default.IMAGE){const Ut=Ze.getThumbnailController();Ut&&Ut.setTrackById(Qe)}else{const Ut=Ze.getRepresentationForTypeById(ke,Qe);Ut&&se.setPlaybackQuality(ke,ye.getActiveStreamInfo(),Ut,{forceReplace:Tt})}},setRepresentationForTypeByIndex:function(ke,Qe){let Tt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(ke!==q.default.IMAGE&&ke!==q.default.VIDEO&&ke!==q.default.AUDIO)return;if(!Z)throw S;const Ze=an();if(Ze)if(ke===q.default.IMAGE){const Ut=Ze.getThumbnailController();Ut&&Ut.setTrackByIndex(Qe)}else{const Ut=Ze.getRepresentationForTypeByIndex(ke,Qe);Ut&&se.setPlaybackQuality(ke,ye.getActiveStreamInfo(),Ut,{forceReplace:Tt})}},setTextTrack:function(ke){if(!ne)throw y;const Qe=ye.getActiveStreamInfo();Qe&&J&&J.setTextTrack(Qe.id,ke)},setVolume:function(ke){if(typeof ke!="number"||isNaN(ke)||ke<0||ke>1)throw q.default.BAD_ARGUMENT_ERROR;ft().volume=ke},setXHRWithCredentialsForType:function(ke,Qe){Me.setXHRWithCredentialsForType(ke,Qe)},time:ht,timeAsUTC:function(){if(!ne)throw y;if(!he.getIsDynamic()||ht()<0)return NaN;const ke=ye&&ye.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO;let Qe,Tt,Ze=Fe.getCurrentDVRInfo(ke);return Ze?(Qe=Ze.manifestInfo.availableFrom.getTime()/1e3,Tt=Qe+ht(),Tt):0},timeInDvrWindow:function(){if(!ne)throw y;if(!he.getIsDynamic())return ht();let ke=ft().currentTime;const Qe=ye&&ye.hasVideoTrack()?q.default.VIDEO:q.default.AUDIO;let Tt=Fe.getCurrentDVRInfo(Qe);return ke=Tt===null||ke===0?0:Math.max(0,ke-Tt.range.start),ke},trigger:function(ke,Qe,Tt){z.trigger(ke,Qe,Tt)},triggerSteeringRequest:function(){if(Ie)return Ie.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(ke){Me.unregisterCustomCapabilitiesFilter(ke)},unregisterLicenseRequestFilter:function(ke){Me.unregisterLicenseRequestFilter(ke)},unregisterLicenseResponseFilter:function(ke){Me.unregisterLicenseResponseFilter(ke)},updateSettings:function(ke){F.update(ke)},updateSource:function(ke){D=ke,ye.load(D)}},G=x.getLogger(H),B=!1,ne=!1,Z=!1,ie=!0,re=NaN,V=null,Te=null,M=null,ge=null,Xt=null,P.default.extend(be.default),ve=Ko(w).getInstance(),Me=(0,Fd.default)(w).getInstance(),ot=wc(w).getInstance(),qt=lf(w).getInstance(),H}ai.__dashjs_factory_name="MediaPlayer";const ii=xe.default.getClassFactory(ai);ii.events=be.default,ii.errors=Y,xe.default.updateClassFactory(ai.__dashjs_factory_name,ii);var zf=ii},1191:function(f,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let o=new r;e.default=o},5212:function(f,e,t){t.r(e),e.default={STREAM:"stream",VIDEO:"video",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(f,e,t){t.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(f,e,t){t.r(e),t.d(e,{default:function(){return j}});class n{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00";var r=n,o=t(913),u=t(138);function d(me){let ae,Ue;const rt=(me=me||{}).eventBus,qe=me.dashMetrics,$e=me.metricsConstants,Ge=me.events;function Je(fn){let Bt=new r;if(Ue){for(const kn in fn)fn.hasOwnProperty(kn)&&(Bt[kn]=fn[kn]);Bt.mpdurl||(Bt.mpdurl=Ue.originalUrl||Ue.url),Bt.terror||(Bt.terror=new Date),qe.addDVBErrors(Bt)}}function Et(fn){fn.error||(Ue=fn.manifest)}function ct(fn){Je({errorcode:r.BASE_URL_CHANGED,servicelocation:fn.entry})}function Mt(){Je({errorcode:r.BECAME_REPORTER})}function yn(fn){var Bt;fn.metric===$e.HTTP_REQUEST&&((Bt=fn.value).responsecode===0||Bt.responsecode==null||Bt.responsecode>=400||Bt.responsecode<100||Bt.responsecode>=600)&&Je({errorcode:Bt.responsecode||r.CONNECTION_ERROR,url:Bt.url,terror:Bt.tresponse,servicelocation:Bt._serviceLocation})}function tn(fn){let Bt;switch(fn.error?fn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Bt=r.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Bt=r.CORRUPT_MEDIA_OTHER;break;default:return}Je({errorcode:Bt})}return ae={initialize:function(){rt.on(Ge.MANIFEST_UPDATED,Et,ae),rt.on(Ge.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ct,ae),rt.on(Ge.METRIC_ADDED,yn,ae),rt.on(Ge.METRIC_UPDATED,yn,ae),rt.on(Ge.PLAYBACK_ERROR,tn,ae),rt.on(o.default.BECAME_REPORTING_PLAYER,Mt,ae)},reset:function(){rt.off(Ge.MANIFEST_UPDATED,Et,ae),rt.off(Ge.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ct,ae),rt.off(Ge.METRIC_ADDED,yn,ae),rt.off(Ge.METRIC_UPDATED,yn,ae),rt.off(Ge.PLAYBACK_ERROR,tn,ae),rt.off(o.default.BECAME_REPORTING_PLAYER,Mt,ae)}},ae}d.__dashjs_factory_name="DVBErrorsTranslator";var g=u.default.getSingletonFactory(d),h=t(7377);function p(me){me=me||{};let ae,Ue,rt=!1,qe=this.context,$e=me.mediaElement;return ae={initialize:function(Ge){Ge&&Ge.length&&(Ge.forEach(Je=>{let Et=Je.starttime,ct=Et+Je.duration;Ue.add(Et,ct)}),rt=!!Ge[0]._useWallClockTime)},reset:function(){Ue.clear()},isEnabled:function(){let Ge,Je=Ue.length;if(!Je)return!0;Ge=rt?new Date().getTime()/1e3:$e.currentTime;for(let Et=0;Et<Je;Et+=1){let ct=Ue.start(Et),Mt=Ue.end(Et);if(ct<=Ge&&Ge<Mt)return!0}return!1}},Ue=(0,h.default)(qe).create(),ae}p.__dashjs_factory_name="RangeController";var E=u.default.getClassFactory(p);function b(){return{serialise:function me(ae){let Ue,rt,qe=[],$e=[];for(Ue in ae)if(ae.hasOwnProperty(Ue)&&Ue.indexOf("_")!==0){if(rt=ae[Ue],rt==null&&(rt=""),Array.isArray(rt)){if(!rt.length)continue;$e=[],rt.forEach(function(Ge){let Je=Object.prototype.toString.call(Ge).slice(8,-1)!=="Object";$e.push(Je?Ge:me(Ge))}),rt=$e.map(encodeURIComponent).join(",")}else typeof rt=="string"?rt=encodeURIComponent(rt):rt instanceof Date?rt=rt.toISOString():typeof rt=="number"&&(rt=Math.round(rt));qe.push(Ue+"="+rt)}return qe.join("&")}}}b.__dashjs_factory_name="MetricSerialiser";var A=u.default.getSingletonFactory(b);function T(){let me,ae,Ue,rt=window.crypto||window.msCrypto,qe=Uint32Array,$e=Math.pow(2,8*qe.BYTES_PER_ELEMENT)-1;function Ge(){rt&&(me||(me=new qe(10)),rt.getRandomValues(me),ae=0)}return Ue={random:function(Je,Et){let ct;return Je||(Je=0),Et||(Et=1),rt?(ae===me.length&&Ge(),ct=me[ae]/$e,ae+=1):ct=Math.random(),ct*(Et-Je)+Je}},Ge(),Ue}T.__dashjs_factory_name="RNG";var C=u.default.getSingletonFactory(T),O=t(1926);function te(me){let ae;me=me||{};let Ue,rt,qe,$e,Ge,Je,Et,ct=this.context,Mt=[];const yn=me.metricsConstants;function tn(){$e=!1,Ge=!1,Je=null,Et=null}return ae={report:function(fn,Bt){Array.isArray(Bt)||(Bt=[Bt]),Ge&&Et.isEnabled()&&Bt.forEach(function(kn){let Wn=Ue.serialise(kn);fn!==yn.DVB_ERRORS&&(Wn=`metricname=${fn}&${Wn}`),Wn=`${Je}?${Wn}`,function(ta,Ha,La){let qa=new XMLHttpRequest;qa.withCredentials=rt.getXHRWithCredentialsForType(yn.HTTP_REQUEST_DVB_REPORTING_TYPE);const Jt=function(){let Ht=Mt.indexOf(qa);Ht!==-1&&(Mt.splice(Ht,1),!(qa.status>=200&&qa.status<300)&&La&&La())};Mt.push(qa);try{qa.open("GET",ta),qa.onloadend=Jt,qa.onerror=Jt,qa.send()}catch{qa.onerror()}}(Wn,0,function(){Ge=!1})})},initialize:function(fn,Bt){let kn;if(Et=Bt,Je=fn.dvbReportingUrl,!Je)throw new Error("required parameter missing (dvb:reportingUrl)");$e||(kn=fn.dvbProbability,kn&&(kn===1e3||kn/1e3>=qe.random())&&(Ge=!0),$e=!0)},reset:function(){tn()}},Ue=A(ct).getInstance(),qe=C(ct).getInstance(),rt=(0,O.default)(ct).getInstance(),tn(),ae}te.__dashjs_factory_name="DVBReporting";var de=u.default.getClassFactory(te);function fe(me){me=me||{};const ae={"urn:dvb:dash:reporting:2014":de},Ue=this.context;let rt;const qe=me.debug?me.debug.getLogger(rt):{},$e=me.metricsConstants,Ge=me.mediaPlayerModel||{};return rt={create:function(Je,Et){let ct;try{ct=ae[Je.schemeIdUri](Ue).create({metricsConstants:$e,mediaPlayerModel:Ge}),ct.initialize(Je,Et)}catch(Mt){ct=null,qe.error(`ReportingFactory: could not create Reporting with schemeIdUri ${Je.schemeIdUri} (${Mt.message})`)}return ct},register:function(Je,Et){ae[Je]=Et},unregister:function(Je){delete ae[Je]}},rt}fe.__dashjs_factory_name="ReportingFactory";var De=u.default.getSingletonFactory(fe);function Oe(me){let ae,Ue=[];const rt=De(this.context).getInstance(me);return ae={initialize:function(qe,$e){qe.some(Ge=>{let Je=rt.create(Ge,$e);if(Je)return Ue.push(Je),!0})},reset:function(){Ue.forEach(qe=>qe.reset()),Ue=[]},report:function(qe,$e){Ue.forEach(Ge=>Ge.report(qe,$e))}},ae}Oe.__dashjs_factory_name="ReportingController";var q=u.default.getClassFactory(Oe);function k(){return{reconstructFullMetricName:function(me,ae,Ue){let rt=me;return ae&&(rt+="("+ae,Ue&&Ue.length&&(rt+=","+Ue),rt+=")"),rt},validateN:function(me){if(!me)throw new Error("missing n");if(isNaN(me))throw new Error("n is NaN");if(me<0)throw new Error("n must be positive");return me}}}k.__dashjs_factory_name="HandlerHelpers";var ee=u.default.getSingletonFactory(k);function Ee(me){let ae,Ue,rt,qe,$e,Ge;me=me||{};let Je=this.context,Et=ee(Je).getInstance(),ct=[];const Mt=me.metricsConstants;function yn(){let tn=function(){try{return Object.keys(ct).map(fn=>ct[fn]).reduce((fn,Bt)=>fn.level<Bt.level?fn:Bt)}catch{return}}();tn&&Ge!==tn.t&&(Ge=tn.t,Ue.report(qe,tn))}return ae={initialize:function(tn,fn,Bt){fn&&(rt=Et.validateN(Bt),Ue=fn,qe=Et.reconstructFullMetricName(tn,Bt),$e=setInterval(yn,rt))},reset:function(){clearInterval($e),$e=null,rt=0,Ue=null,Ge=null},handleNewMetric:function(tn,fn,Bt){tn===Mt.BUFFER_LEVEL&&(ct[Bt]=fn)}},ae}Ee.__dashjs_factory_name="BufferLevelHandler";var P=u.default.getClassFactory(Ee),xe=u.default.getClassFactory(function(me){let ae,Ue,rt=(me=me||{}).eventBus;const qe=me.metricsConstants;function $e(){rt.off(o.default.METRICS_INITIALISATION_COMPLETE,$e,this),rt.trigger(o.default.BECAME_REPORTING_PLAYER)}return ae={initialize:function(Ge,Je){Je&&(Ue=Je,rt.on(o.default.METRICS_INITIALISATION_COMPLETE,$e,this))},reset:function(){Ue=null},handleNewMetric:function(Ge,Je){Ge===qe.DVB_ERRORS&&Ue&&Ue.report(Ge,Je)}},ae});function Ve(me){let ae,Ue,rt,qe,$e,Ge;me=me||{};let Je=[],Et=ee(this.context).getInstance();const ct=me.metricsConstants;function Mt(){var yn=Je;yn.length&&Ue&&Ue.report($e,yn),Je=[]}return ae={initialize:function(yn,tn,fn,Bt){tn&&(rt=Et.validateN(fn),Ue=tn,Bt&&Bt.length&&(qe=Bt),$e=Et.reconstructFullMetricName(yn,fn,Bt),Ge=setInterval(Mt,rt))},reset:function(){clearInterval(Ge),Ge=null,rt=null,qe=null,Je=[],Ue=null},handleNewMetric:function(yn,tn){yn===ct.HTTP_REQUEST&&(qe&&qe!==tn.type||Je.push(tn))}},ae}Ve.__dashjs_factory_name="HttpListHandler";var be=u.default.getClassFactory(Ve);function _t(){let me,ae,Ue;return me={initialize:function(rt,qe){ae=rt,Ue=qe},reset:function(){Ue=null,ae=void 0},handleNewMetric:function(rt,qe){rt===ae&&Ue&&Ue.report(ae,qe)}},me}_t.__dashjs_factory_name="GenericMetricHandler";var Ye=u.default.getClassFactory(_t);function _e(me){let ae;const Ue=(me=me||{}).debug?me.debug.getLogger(ae):{};let rt=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const qe=this.context;let $e={BufferLevel:P,DVBErrors:xe,HttpList:be,PlayList:Ye,RepSwitchList:Ye,TcpList:Ye};return ae={create:function(Ge,Je){var Et,ct=Ge.match(rt);if(ct){try{(Et=$e[ct[1]](qe).create({eventBus:me.eventBus,metricsConstants:me.metricsConstants})).initialize(ct[1],Je,ct[3],ct[5])}catch(Mt){Et=null,Ue.error(`MetricsHandlerFactory: Could not create handler for type ${ct[1]} with args ${ct[3]}, ${ct[5]} (${Mt.message})`)}return Et}},register:function(Ge,Je){$e[Ge]=Je},unregister:function(Ge){delete $e[Ge]}},ae}_e.__dashjs_factory_name="MetricsHandlerFactory";var He=u.default.getSingletonFactory(_e);function nt(me){me=me||{};let ae,Ue=[];const rt=this.context,qe=me.eventBus,$e=me.events;let Ge=He(rt).getInstance({debug:me.debug,eventBus:me.eventBus,metricsConstants:me.metricsConstants});function Je(Et){Ue.forEach(ct=>{ct.handleNewMetric(Et.metric,Et.value,Et.mediaType)})}return ae={initialize:function(Et,ct){Et.split(",").forEach((Mt,yn,tn)=>{let fn;if(Mt.indexOf("(")!==-1&&Mt.indexOf(")")===-1){let Bt=tn[yn+1];Bt&&Bt.indexOf("(")===-1&&Bt.indexOf(")")!==-1&&(Mt+=","+Bt,delete tn[yn+1])}fn=Ge.create(Mt,ct),fn&&Ue.push(fn)}),qe.on($e.METRIC_ADDED,Je,ae),qe.on($e.METRIC_UPDATED,Je,ae)},reset:function(){qe.off($e.METRIC_ADDED,Je,ae),qe.off($e.METRIC_UPDATED,Je,ae),Ue.forEach(Et=>Et.reset()),Ue=[]}},ae}nt.__dashjs_factory_name="MetricsHandlersController";var ut=u.default.getClassFactory(nt);function Pe(me){let ae,Ue,rt,qe;me=me||{};let $e=this.context;function Ge(){ae&&ae.reset(),Ue&&Ue.reset(),rt&&rt.reset()}return qe={initialize:function(Je){try{rt=E($e).create({mediaElement:me.mediaElement}),rt.initialize(Je.Range),Ue=q($e).create({debug:me.debug,metricsConstants:me.metricsConstants,mediaPlayerModel:me.mediaPlayerModel}),Ue.initialize(Je.Reporting,rt),ae=ut($e).create({debug:me.debug,eventBus:me.eventBus,metricsConstants:me.metricsConstants,events:me.events}),ae.initialize(Je.metrics,Ue)}catch(Et){throw Ge(),Et}},reset:Ge},qe}Pe.__dashjs_factory_name="MetricsController";var Be=u.default.getClassFactory(Pe),it=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},gt=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},zt=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function Ce(me){let ae,Ue=(me=me||{}).adapter;const rt=me.constants;return ae={getMetrics:function(qe){let $e=[];return qe&&qe.Metrics&&qe.Metrics.forEach(Ge=>{var Je=new it,Et=Ue.getIsDynamic(qe);Ge.hasOwnProperty("metrics")&&(Je.metrics=Ge.metrics,Ge.Range&&Ge.Range.forEach(ct=>{var Mt=new gt;Mt.starttime=function(yn,tn,fn){let Bt,kn,Wn=0;return tn?Wn=Ue.getAvailabilityStartTime(yn)/1e3:(Bt=Ue.getRegularPeriods(yn),Bt.length&&(Wn=Bt[0].start)),kn=Wn,fn&&fn.hasOwnProperty(rt.START_TIME)&&(kn+=fn.starttime),kn}(qe,Et,ct),ct.hasOwnProperty("duration")?Mt.duration=ct.duration:Mt.duration=Ue.getDuration(qe),Mt._useWallClockTime=Et,Je.Range.push(Mt)}),Ge.Reporting&&(Ge.Reporting.forEach(ct=>{var Mt=new zt;ct.hasOwnProperty(rt.SCHEME_ID_URI)&&(Mt.schemeIdUri=ct.schemeIdUri,ct.hasOwnProperty("value")&&(Mt.value=ct.value),ct.hasOwnProperty(rt.DVB_REPORTING_URL)&&(Mt.dvbReportingUrl=ct[rt.DVB_REPORTING_URL]),ct.hasOwnProperty(rt.DVB_PROBABILITY)&&(Mt.dvbProbability=ct[rt.DVB_PROBABILITY]),Je.Reporting.push(Mt))}),$e.push(Je)))}),$e}},ae}Ce.__dashjs_factory_name="ManifestParsing";var Le=u.default.getSingletonFactory(Ce);function yt(me){let ae;me=me||{};let Ue={},rt=this.context,qe=me.eventBus;const $e=me.events;function Ge(Et){if(Et.error)return;let ct=Object.keys(Ue);Le(rt).getInstance({adapter:me.adapter,constants:me.constants}).getMetrics(Et.manifest).forEach(Mt=>{const yn=JSON.stringify(Mt);if(Ue.hasOwnProperty(yn))ct.splice(yn,1);else try{let tn=Be(rt).create(me);tn.initialize(Mt),Ue[yn]=tn}catch{}}),ct.forEach(Mt=>{Ue[Mt].reset(),delete Ue[Mt]}),qe.trigger(o.default.METRICS_INITIALISATION_COMPLETE)}function Je(){Object.keys(Ue).forEach(Et=>{Ue[Et].reset()}),Ue={}}return ae={reset:function(){qe.off($e.MANIFEST_UPDATED,Ge,ae),qe.off($e.STREAM_TEARDOWN_COMPLETE,Je,ae)}},qe.on($e.MANIFEST_UPDATED,Ge,ae),qe.on($e.STREAM_TEARDOWN_COMPLETE,Je,ae),ae}yt.__dashjs_factory_name="MetricsCollectionController";var Y=u.default.getClassFactory(yt);function W(){let me,ae,Ue=this.context;return me={createMetricsReporting:function(rt){return ae=g(Ue).getInstance({eventBus:rt.eventBus,dashMetrics:rt.dashMetrics,metricsConstants:rt.metricsConstants,events:rt.events}),ae.initialize(),Y(Ue).create(rt)},getReportingFactory:function(){return De(Ue).getInstance()},getMetricsHandlerFactory:function(){return He(Ue).getInstance()}},me}W.__dashjs_factory_name="MetricsReporting";const L=dashjs.FactoryMaker.getClassFactory(W);L.events=o.default,dashjs.FactoryMaker.updateClassFactory(W.__dashjs_factory_name,L);var j=L},913:function(f,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let o=new r;e.default=o},1926:function(f,e,t){t.r(e);var n=t(5717),r=t(138),o=t(8261),u=t(656),d=t(5212);function g(){let h,p,E,b,A,T,C,O,te,de;const fe=this.context,De=(0,o.default)(fe).getInstance();function Oe(){b=[],A=[],T=[],C=[],O=[],de=[],te=null,p=[]}function q(P,xe){let Ve=-1;P.some((be,_t)=>{if(be===xe)return Ve=_t,!0}),Ve<0||P.splice(Ve,1)}function k(P){let xe;for(xe=0;xe<de.length;xe++)if(de[xe].rulename===P)return xe;return-1}function ee(P,xe){Ee(P,xe);let Ve=new n.default;Ve.schemeIdUri=P,Ve.value=xe,p.push(Ve)}function Ee(P,xe){(0,u.checkParameterType)(P,"string"),(0,u.checkParameterType)(xe,"string"),p.forEach(function(Ve,be){Ve.schemeIdUri===P&&Ve.value===xe&&p.splice(be,1)})}return h={addAbrCustomRule:function(P,xe,Ve){if(typeof P!="string"||P!==d.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&P!==d.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof xe!="string")throw d.default.BAD_ARGUMENT_ERROR;let be=k(xe);be===-1?de.push({type:P,rulename:xe,rule:Ve}):(de[be].type=P,de[be].rule=Ve)},addRequestInterceptor:function(P){b.push(P)},addResponseInterceptor:function(P){A.push(P)},addUTCTimingSource:ee,clearDefaultUTCTimingSources:function(){p=[]},getAbrCustomRules:function(){return de},getCustomCapabilitiesFilters:function(){return O},getCustomInitialTrackSelectionFunction:function(){return te},getLicenseRequestFilters:function(){return T},getLicenseResponseFilters:function(){return C},getRequestInterceptors:function(){return b},getResponseInterceptors:function(){return A},getUTCTimingSources:function(){return p},getXHRWithCredentialsForType:function(P){const xe=E[P];return xe===void 0?E.default:xe},registerCustomCapabilitiesFilter:function(P){O.push(P)},registerLicenseRequestFilter:function(P){T.push(P)},registerLicenseResponseFilter:function(P){C.push(P)},removeAbrCustomRule:function(P){if(P){let xe=k(P);xe!==-1&&de.splice(xe,1)}else de=[]},removeAllAbrCustomRule:function(){de=[]},removeRequestInterceptor:function(P){q(b,P)},removeResponseInterceptor:function(P){q(A,P)},removeUTCTimingSource:Ee,reset:function(){Oe()},resetCustomInitialTrackSelectionFunction:function(){te=null},restoreDefaultUTCTimingSources:function(){let P=De.get().streaming.utcSynchronization.defaultTimingSource;ee(P.scheme,P.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(P){te=P},setXHRWithCredentialsForType:function P(xe,Ve){xe?E[xe]=!!Ve:Object.keys(E).forEach(be=>{P(be,Ve)})},unregisterCustomCapabilitiesFilter:function(P){q(O,P)},unregisterLicenseRequestFilter:function(P){q(T,P)},unregisterLicenseResponseFilter:function(P){q(C,P)}},E={default:!1},Oe(),h}g.__dashjs_factory_name="CustomParametersModel",e.default=r.default.getSingletonFactory(g)},3888:function(f,e,t){t.r(e),t.d(e,{default:function(){return qa}});var n=t(8854),r=t(2861);const o={prefixes:["clearkey","dashif","ck"]};class u{static findMp4ProtectionElement(Ht){let Ft=null;for(let wt=0;wt<Ht.length;++wt){let nn=Ht[wt];nn.schemeIdUri&&nn.schemeIdUri.toLowerCase()===n.default.MP4_PROTECTION_SCHEME&&nn.value&&(nn.value.toLowerCase()===r.default.ENCRYPTION_SCHEME_CENC||nn.value.toLowerCase()===r.default.ENCRYPTION_SCHEME_CBCS)&&(Ft=nn)}return Ft}static getPSSHData(Ht){let Ft=8,wt=new DataView(Ht),nn=wt.getUint8(Ft);return Ft+=20,nn>0&&(Ft+=4+16*wt.getUint32(Ft)),Ft+=4,Ht.slice(Ft)}static getPSSHForKeySystem(Ht,Ft){let wt=u.parsePSSHList(Ft);return Ht&&wt.hasOwnProperty(Ht.uuid.toLowerCase())?wt[Ht.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(Ht,Ft){return"pssh"in Ht&&Ht.pssh?(Ht.pssh.__text=Ht.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Ft.decodeArray(Ht.pssh.__text).buffer):null}static parsePSSHList(Ht){if(Ht==null)return[];let Ft=new DataView(Ht.buffer||Ht),wt={},nn=0;for(;;){let We,kt,jt,It,Ot,on,Hn=nn;if(nn>=Ft.buffer.byteLength)break;if(We=Ft.getUint32(nn),kt=nn+We,nn+=4,Ft.getUint32(nn)===1886614376)if(nn+=4,jt=Ft.getUint8(nn),jt===0||jt===1){for(nn++,nn+=3,It="",Ot=0;Ot<4;Ot++)on=Ft.getUint8(nn+Ot).toString(16),It+=on.length===1?"0"+on:on;for(nn+=4,It+="-",Ot=0;Ot<2;Ot++)on=Ft.getUint8(nn+Ot).toString(16),It+=on.length===1?"0"+on:on;for(nn+=2,It+="-",Ot=0;Ot<2;Ot++)on=Ft.getUint8(nn+Ot).toString(16),It+=on.length===1?"0"+on:on;for(nn+=2,It+="-",Ot=0;Ot<2;Ot++)on=Ft.getUint8(nn+Ot).toString(16),It+=on.length===1?"0"+on:on;for(nn+=2,It+="-",Ot=0;Ot<6;Ot++)on=Ft.getUint8(nn+Ot).toString(16),It+=on.length===1?"0"+on:on;nn+=6,It=It.toLowerCase(),nn+=4,wt[It]=Ft.buffer.slice(Hn,kt),nn=kt}else nn=kt;else nn=kt}return wt}static getLicenseServerUrlFromMediaInfo(Ht,Ft){try{if(!Ht||Ht.length===0)return null;let wt=0,nn=null;for(;wt<Ht.length&&!nn;){const We=Ht[wt];if(We&&We.contentProtection&&We.contentProtection.length>0){const kt=We.contentProtection.filter(jt=>jt.schemeIdUri&&jt.schemeIdUri===Ft);if(kt&&kt.length>0){let jt=0;for(;jt<kt.length&&!nn;){const It=kt[jt];It.laUrl&&It.laUrl.__prefix&&o.prefixes.includes(It.laUrl.__prefix)&&It.laUrl.__text&&(nn=It.laUrl.__text),jt+=1}}}wt+=1}return nn}catch{return null}}static hexKidToBufferSource(Ht){const Ft=Ht.replace(/-/g,"");return new Uint8Array(Ft.match(/[\da-f]{2}/gi).map(function(wt){return parseInt(wt,16)})).buffer}}var d=u,g=class{constructor(Jt,Ht){this.contentType=Jt,this.robustness=Ht}},h=class{constructor(Jt,Ht,Ft,wt,nn,We){this.initDataTypes=We&&We.length>0?We:[r.default.INITIALIZATION_DATA_TYPE_CENC],Jt&&Jt.length&&(this.audioCapabilities=Jt),Ht&&Ht.length&&(this.videoCapabilities=Ht),this.distinctiveIdentifier=Ft,this.persistentState=wt,this.sessionTypes=nn}},p=t(1923),E=t(1944),b=class{constructor(Jt,Ht,Ft,wt,nn,We,kt,jt){this.url=Jt,this.method=Ht,this.responseType=Ft,this.headers=wt,this.withCredentials=nn,this.messageType=We,this.sessionId=kt,this.data=jt}},A=class{constructor(Jt,Ht,Ft){this.url=Jt,this.headers=Ht,this.data=Ft}},T=t(7568),C=t(7263),O=t(5212),te=t(138);function de(Jt){const Ht=(Jt=Jt||{}).BASE64,Ft=Jt.cmcdModel,wt=Jt.constants,nn=Jt.customParametersModel,We=Jt.debug,kt=Jt.eventBus,jt=Jt.events,It=Jt.protectionKeyController,Ot=Jt.settings;let on,Hn,Wt,Rn,Bn,Dn,Fn,Kn,bn,At,dt,cn,mn=Jt.protectionModel,On=[];function ra(){if(!(kt&&kt.hasOwnProperty("on")&&It&&It.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function ga(Vt,Tn){dt||Rn?dt&&sa():function(Mn,ia){if(Rn)return;var ea;Rn=!0;const Ga=function(fa){const $n=[];for(let da=0;da<fa.length;da++){const Ia=ba(fa[da]);$n.push({ks:fa[da].ks,configs:[Ia],protData:fa[da].protData})}return $n}(Mn=(ea=Mn).sort((fa,$n)=>(on&&on[fa.ks.systemString]&&on[fa.ks.systemString].priority>=0?on[fa.ks.systemString].priority:ea.length)-(on&&on[$n.ks.systemString]&&on[$n.ks.systemString].priority>=0?on[$n.ks.systemString].priority:ea.length)));let Ca;mn.requestKeySystemAccess(Ga).then(fa=>(Ca=fa.data,function($n){let da=$n&&$n.selectedSystemString?$n.selectedSystemString:$n.keySystem.systemString;return Fn.info("DRM: KeySystem Access Granted for system string ("+da+")!  Selecting key system..."),mn.selectKeySystem($n)}(Ca))).then(fa=>{(function($n,da){dt=$n,Rn=!1,kt.trigger(jt.KEY_SYSTEM_SELECTED,{data:da});const Ia=gi(dt);Ia&&Ia.serverCertificate&&Ia.serverCertificate.length>0&&mn.setServerCertificate(Ht.decodeArray(Ia.serverCertificate).buffer),sa()})(fa,Ca)}).catch(fa=>{(function($n,da){dt=null,Rn=!1,da||kt.trigger(jt.KEY_SYSTEM_SELECTED,{data:null,error:new E.default(p.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,p.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+$n.error)})})(fa,ia)})}(Vt,Tn)}function sa(){let Vt;for(let Mn=0;Mn<bn.length;Mn++)for(Vt=0;Vt<bn[Mn].length;Vt++)if(dt===bn[Mn][Vt].ks){Tn=bn[Mn][Vt],It.isClearKey(dt)&&function(ia){if(ia.protData&&ia.protData.hasOwnProperty("clearkeys")&&Object.keys(ia.protData.clearkeys).length!==0){const ea={kids:Object.keys(ia.protData.clearkeys)};ia.initData=new TextEncoder().encode(JSON.stringify(ea))}}(Tn),Tn.sessionId?Na(Tn):Tn.initData!==null&&Da(Tn);break}var Tn;bn=[]}function ba(Vt){const Tn=Vt.protData,Mn=[],ia=[],ea=Tn&&Tn.initDataTypes&&Tn.initDataTypes.length>0?Tn.initDataTypes:[r.default.INITIALIZATION_DATA_TYPE_CENC],Ga=Tn&&Tn.audioRobustness&&Tn.audioRobustness.length>0?Tn.audioRobustness:At,Ca=Tn&&Tn.videoRobustness&&Tn.videoRobustness.length>0?Tn.videoRobustness:At,fa=Vt.sessionType,$n=Tn&&Tn.distinctiveIdentifier?Tn.distinctiveIdentifier:"optional",da=Tn&&Tn.persistentState?Tn.persistentState:fa==="temporary"?"optional":"required";return Kn.forEach(Ia=>{Ia.type===wt.AUDIO?Mn.push(new g(Ia.codec,Ga)):Ia.type===wt.VIDEO&&ia.push(new g(Ia.codec,Ca))}),new h(Mn,ia,$n,da,[fa],ea)}function Na(Vt){ra(),mn.loadKeySession(Vt)}function Da(Vt){if(Vt&&function(Mn){if(!Mn)return!1;try{const ia=mn.getSessionTokens();for(let ea=0;ea<ia.length;ea++)if(ia[ea].getKeyId()===Mn)return!0;return!1}catch{return!1}}(Vt.keyId))return;const Tn=d.getPSSHForKeySystem(dt,Vt?Vt.initData:null);if(Tn){if(Ra(Tn))return;try{Vt.initData=Tn,mn.createKeySession(Vt)}catch(Mn){kt.trigger(jt.KEY_SESSION_CREATED,{data:null,error:new E.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Mn.message)})}}else Vt&&Vt.initData?mn.createKeySession(Vt):kt.trigger(jt.KEY_SESSION_CREATED,{data:null,error:new E.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(dt?dt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function gi(Vt){if(Vt){const Tn=Vt.systemString;if(on)return Tn in on?on[Tn]:null}return null}function Ra(Vt){if(!Vt)return!1;try{const Tn=mn.getAllInitData();for(let Mn=0;Mn<Tn.length;Mn++)if(It.initDataEquals(Vt,Tn[Mn]))return Fn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function pr(Vt){ra(),Vt?(mn.setMediaElement(Vt),kt.on(jt.NEED_KEY,Lr,Hn)):Vt===null&&(mn.setMediaElement(Vt),kt.off(jt.NEED_KEY,Lr,Hn))}function ui(Vt){Fn.debug("DRM: onKeyMessage");const Tn=Vt.data;kt.trigger(jt.KEY_MESSAGE,{data:Tn});const Mn=Tn.messageType?Tn.messageType:r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,ia=Tn.message,ea=Tn.sessionToken,Ga=gi(dt),Ca=It.getLicenseServerModelInstance(dt,Ga,Mn),fa={sessionToken:ea,messageType:Mn};if(ia&&ia.byteLength!==0){if(!Ca)return Fn.debug("DRM: License server request not required for this message (type = "+Vt.data.messageType+").  Session ID = "+ea.getSessionId()),void Ka(fa);if(It.isClearKey(dt)){const $n=It.processClearKeyLicenseRequest(dt,Ga,ia);if($n&&$n.keyPairs&&$n.keyPairs.length>0)return Fn.debug("DRM: ClearKey license request handled by application!"),Ka(fa),void mn.updateKeySession(ea,$n)}(function($n,da,Ia){const Gi=$n.sessionToken,ci=$n.messageType?$n.messageType:r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,sr={sessionToken:Gi,messageType:ci},Zr=dt?dt.systemString:null;let xi=function(Sa,Mr,Vi,Yi,Or){let wi=null;const Qs=Yi.message;if(Sa&&Sa.serverURL){const Ki=Sa.serverURL;typeof Ki=="string"&&Ki!==""?wi=Ki:typeof Ki=="object"&&Ki.hasOwnProperty(Mr)&&(wi=Ki[Mr])}else if(Sa&&Sa.laURL&&Sa.laURL!=="")wi=Sa.laURL;else if(wi=d.getLicenseServerUrlFromMediaInfo(Kn,dt.schemeIdURI),!wi&&!It.isClearKey(dt)){const Ki=d.getPSSHData(Vi.initData);wi=dt.getLicenseServerURLFromInitData(Ki),wi||(wi=Yi.laURL)}return wi=Or.getServerURLFromMessage(wi,Qs,Mr),wi}(Ia,ci,Gi,$n,da);if(!xi)return void Ka(sr,new E.default(p.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const Jr={};let Mi=!1;Ia&&Bl(Jr,Ia.httpRequestHeaders);const yr=$n.message;Bl(Jr,dt.getRequestHeadersFromMessage(yr)),Object.keys(Jr).forEach(Sa=>{Sa.toLowerCase()==="authorization"&&(Mi=!0)}),Ia&&typeof Ia.withCredentials=="boolean"&&(Mi=Ia.withCredentials);const Nr=function(Sa){if(mn)if(Sa.status>=200&&Sa.status<=299){const Mr=C.default.parseHttpHeaders(Sa.getAllResponseHeaders?Sa.getAllResponseHeaders():null);let Vi=new A(Sa.responseURL,Mr,Sa.response);_o(nn.getLicenseResponseFilters(),Vi).then(()=>{const Yi=da.getLicenseMessage(Vi.data,Zr,ci);Yi!==null?(Ka(sr),mn.updateKeySession(Gi,Yi)):jl(Sa,sr,Zr,ci,da)})}else jl(Sa,sr,Zr,ci,da)},Hi=function(Sa){Ka(sr,new E.default(p.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Zr+' update, XHR aborted. status is "'+Sa.statusText+'" ('+Sa.status+"), readyState is "+Sa.readyState))},ql=function(Sa){Ka(sr,new E.default(p.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Zr+' update, XHR error. status is "'+Sa.statusText+'" ('+Sa.status+"), readyState is "+Sa.readyState))},Er=dt.getLicenseRequestFromMessage(yr),Gl=da.getHTTPMethod(ci),Ws=da.getResponseType(Zr,ci),Hl=Ia&&!isNaN(Ia.httpTimeout)?Ia.httpTimeout:8e3,Xs=Gi.getSessionId()||null;let Vl=new b(xi,Gl,Ws,Jr,Mi,ci,Xs,Er);const Ao=isNaN(Ot.get().streaming.retryAttempts[T.HTTPRequest.LICENSE])?3:Ot.get().streaming.retryAttempts[T.HTTPRequest.LICENSE];_o(nn.getLicenseRequestFilters(),Vl).then(()=>{$a(Vl,Ao,Hl,Nr,Hi,ql)})})(Tn,Ca,Ga)}else Ka(fa,new E.default(p.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ka(Vt){let Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;kt.trigger(jt.LICENSE_REQUEST_COMPLETE,{data:Vt,error:Tn})}function $a(Vt,Tn,Mn,ia,ea,Ga){const Ca=new XMLHttpRequest,fa=Ft.getCmcdParametersFromManifest();if(Ft.isCmcdEnabled()&&(fa.mode?fa.mode:Ot.get().streaming.cmcd.mode)===O.default.CMCD_MODE_QUERY){const da=Ft.getQueryParameter({url:Vt.url,type:T.HTTPRequest.LICENSE});da&&(Vt.url=C.default.addAdditionalQueryParameterToUrl(Vt.url,[da]))}Ca.open(Vt.method,Vt.url,!0),Ca.responseType=Vt.responseType,Ca.withCredentials=Vt.withCredentials,Mn>0&&(Ca.timeout=Mn);for(const da in Vt.headers)Ca.setRequestHeader(da,Vt.headers[da]);if(Ft.isCmcdEnabled()&&(fa.mode?fa.mode:Ot.get().streaming.cmcd.mode)===O.default.CMCD_MODE_HEADER){const da=Ft.getHeaderParameters({url:Vt.url,type:T.HTTPRequest.LICENSE});if(da)for(const Ia in da){let Gi=da[Ia];Gi&&Ca.setRequestHeader(Ia,Gi)}}const $n=function(){Tn--;const da=isNaN(Ot.get().streaming.retryIntervals[T.HTTPRequest.LICENSE])?1e3:Ot.get().streaming.retryIntervals[T.HTTPRequest.LICENSE];Bn=setTimeout(function(){$a(Vt,Tn,Mn,ia,ea,Ga)},da)};Ca.onload=function(){Dn=null,this.status>=200&&this.status<=299||Tn<=0?ia(this):(Fn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Tn),$n())},Ca.ontimeout=Ca.onerror=function(){Dn=null,Tn<=0?Ga(this):(Fn.warn("License request network request failed . Retrying it... Pending retries: "+Tn),$n())},Ca.onabort=function(){ea(this)},kt.trigger(jt.LICENSE_REQUEST_SENDING,{url:Vt.url,headers:Vt.headers,payload:Vt.data,sessionId:Vt.sessionId}),Dn=Ca,Ca.send(Vt.data)}function So(){Dn&&(Dn.onloadend=Dn.onerror=Dn.onprogress=void 0,Dn.abort(),Dn=null),Bn&&(clearTimeout(Bn),Bn=null)}function Bl(Vt,Tn){if(Tn)for(const Mn in Tn)Vt[Mn]=Tn[Mn]}function jl(Vt,Tn,Mn,ia,ea){let Ga="NONE",Ca=null;Vt.response&&(Ga=ea.getErrorResponse(Vt.response,Mn,ia),Ca={serverResponse:Vt.response||null,responseCode:Vt.status||null,responseText:Vt.statusText||null}),Ka(Tn,new E.default(p.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Mn+' update, XHR complete. status is "'+Vt.statusText+'" ('+Vt.status+"), readyState is "+Vt.readyState+".  Response is "+Ga,Ca))}function _o(Vt,Tn){return Vt?Vt.reduce((Mn,ia)=>Mn.then(()=>ia(Tn)),Promise.resolve()):Promise.resolve()}function Lr(Vt,Tn){if(Ot.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(Fn.debug("DRM: onNeedKey"),Vt.key.initDataType!==r.default.INITIALIZATION_DATA_TYPE_CENC)return void Fn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Vt.key.initDataType);if(Kn.length===0&&(Fn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Tn=Tn===void 0?1:Tn+1)<5))return void On.push(setTimeout(()=>{Lr(Vt,Tn)},500));let Mn=Vt.key.initData;if(ArrayBuffer.isView(Mn)&&(Mn=Mn.buffer),dt){const ea=d.getPSSHForKeySystem(dt,Mn);if(ea&&Ra(ea))return}Fn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Mn)));const ia=It.getSupportedKeySystemMetadataFromSegmentPssh(Mn,on,cn);ia.length!==0?function(ea){bn.push(ea),ga(ea,!1)}(ia):Fn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function Qr(Vt,Tn){if(Vt.size<=0)return!1;if(Tn.size>0&&[...Vt].every(ia=>{const ea=Tn.get(ia);return ea!==void 0&&ea!==""}))return!0;const Mn=mn.getSessionTokens();if(Mn&&Mn.length>0){const ia=Mn.filter(ea=>[...Vt].includes(ea.normalizedKeyId));if(ia.some(ea=>!ea.hasTriggeredKeyStatusMapUpdate)||ia.length===0)return!1}return!Ot.get().streaming.protection.ignoreKeyStatuses&&Vt&&Vt.size>0&&Tn&&Tn.size>0}return Hn={areKeyIdsExpired:function(Vt){try{return!!Qr(Vt,Wt)&&[...Vt].every(Tn=>Wt.get(Tn)===r.default.MEDIA_KEY_STATUSES.EXPIRED)}catch(Tn){return Fn.error(Tn),!1}},areKeyIdsUsable:function(Vt){try{return!Qr(Vt,Wt)||[...Vt].some(Tn=>{const Mn=Wt.get(Tn);return Mn&&Mn!==r.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&Mn!==r.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED})}catch(Tn){return Fn.error(Tn),!0}},clearMediaInfoArray:function(){Kn=[]},closeKeySession:function(Vt){ra(),mn.closeKeySession(Vt)},createKeySession:Da,getKeySystems:function(){return It?It.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(Vt){return ra(),It.getSupportedKeySystemMetadataFromContentProtection(Vt,on,cn)},handleKeySystemFromManifest:function(){if(!Kn||Kn.length===0)return;let Vt=[];Kn.forEach(Tn=>{const Mn=It.getSupportedKeySystemMetadataFromContentProtection(Tn.contentProtection,on,cn);Mn.length>0&&(Vt.length===0&&(Vt=Mn),bn.push(Mn))}),Vt&&Vt.length>0&&ga(Vt,!0)},initializeForMedia:function(Vt){if(!Vt)throw new Error("mediaInfo can not be null or undefined");ra(),Kn.push(Vt)},loadKeySession:Na,removeKeySession:function(Vt){ra(),mn.removeKeySession(Vt)},reset:function(){kt.off(jt.INTERNAL_KEY_MESSAGE,ui,Hn),ra(),So(),pr(null),dt=null,Rn=!1,Wt=new Map,mn&&(mn.reset(),mn=null),On.forEach(Vt=>clearTimeout(Vt)),On=[],Kn=[],bn=[]},setKeySystems:function(Vt){It&&It.setKeySystems(Vt)},setMediaElement:pr,setProtectionData:function(Vt){on=Vt,It.setProtectionData(Vt)},setRobustnessLevel:function(Vt){At=Vt},setServerCertificate:function(Vt){ra(),mn.setServerCertificate(Vt)},setSessionType:function(Vt){cn=Vt},stop:function(){So(),mn&&mn.stop()},updateKeyStatusesMap:function(Vt){try{if(!Vt||!Vt.sessionToken||!Vt.parsedKeyStatuses)return;Vt.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const Tn=Vt.parsedKeyStatuses,Mn=C.default.parseUserAgent(),ia=Mn&&Mn.browser&&Mn.browser.name&&Mn.browser.name.toLowerCase()==="edge";Tn.forEach(ea=>{ia&&dt.uuid===r.default.PLAYREADY_UUID&&ea.keyId&&ea.keyId.byteLength===16&&function(Ca){const fa=C.default.bufferSourceToDataView(Ca),$n=fa.getUint32(0,!0),da=fa.getUint16(4,!0),Ia=fa.getUint16(6,!0);fa.setUint32(0,$n,!1),fa.setUint16(4,da,!1),fa.setUint16(6,Ia,!1)}(ea.keyId);const Ga=C.default.bufferSourceToHex(ea.keyId).slice(0,32);Ga&&Ga!==""&&Wt.set(Ga,ea.status)}),kt.trigger(jt.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:Wt})}catch(Tn){Fn.error(Tn)}}},Fn=We.getLogger(Hn),bn=[],Kn=[],cn="temporary",At="",Dn=null,Bn=null,Wt=new Map,kt.on(jt.INTERNAL_KEY_MESSAGE,ui,Hn),Hn}de.__dashjs_factory_name="ProtectionController";var fe=te.default.getClassFactory(de),De=class{constructor(Jt,Ht){this.keyID=Jt,this.key=Ht}},Oe=class{constructor(Jt,Ht){if(Ht&&Ht!=="persistent"&&Ht!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Jt,this.type=Ht}toJWK(){let Jt,Ht=this.keyPairs.length,Ft={keys:[]};for(Jt=0;Jt<Ht;Jt++){let jt={kty:"oct",alg:"A128KW",kid:this.keyPairs[Jt].keyID,k:this.keyPairs[Jt].key};Ft.keys.push(jt)}this.type&&(Ft.type=this.type);let wt=JSON.stringify(Ft);const nn=wt.length;let We=new ArrayBuffer(nn),kt=new Uint8Array(We);for(Jt=0;Jt<nn;Jt++)kt[Jt]=wt.charCodeAt(Jt);return We}};const q=r.default.CLEARKEY_UUID,k=r.default.CLEARKEY_KEYSTEM_STRING,ee="urn:uuid:"+q;function Ee(Jt){let Ht;const Ft=(Jt=Jt||{}).BASE64;return Ht={uuid:q,schemeIdURI:ee,systemString:k,getInitData:function(wt,nn){try{let We=d.parseInitDataFromContentProtection(wt,Ft);if(!We&&nn){const kt={kids:[function(jt){try{let It=jt.replace(/-/g,"");return It=btoa(It.match(/\w{2}/g).map(Ot=>String.fromCharCode(parseInt(Ot,16))).join("")),It.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(nn.cencDefaultKid)]};We=new TextEncoder().encode(JSON.stringify(kt))}return We}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(wt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(wt,nn){let We=null;if(wt){const kt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(nn))),jt=[];for(let It=0;It<kt.kids.length;It++){const Ot=kt.kids[It],on=wt.clearkeys&&wt.clearkeys.hasOwnProperty(Ot)?wt.clearkeys[Ot]:null;if(!on)throw new Error("DRM: ClearKey keyID ("+Ot+") is not known!");jt.push(new De(Ot,on))}We=new Oe(jt)}return We}},Ht}Ee.__dashjs_factory_name="KeySystemClearKey";var P=te.default.getSingletonFactory(Ee);const xe=r.default.W3C_CLEARKEY_UUID,Ve=r.default.CLEARKEY_KEYSTEM_STRING,be="urn:uuid:"+xe;function _t(Jt){let Ht;const Ft=Jt.BASE64,wt=Jt.debug.getLogger(Ht);return Ht={uuid:xe,schemeIdURI:be,systemString:Ve,getInitData:function(nn){return d.parseInitDataFromContentProtection(nn,Ft)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(nn){return new Uint8Array(nn)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(nn,We){let kt=null;if(nn){const jt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(We))),It=[];for(let Ot=0;Ot<jt.kids.length;Ot++){const on=jt.kids[Ot],Hn=nn.clearkeys&&nn.clearkeys.hasOwnProperty(on)?nn.clearkeys[on]:null;if(!Hn)throw new Error("DRM: ClearKey keyID ("+on+") is not known!");It.push(new De(on,Hn))}kt=new Oe(It),wt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return kt}},Ht}_t.__dashjs_factory_name="KeySystemW3CClearKey";var Ye=te.default.getSingletonFactory(_t);const _e=r.default.WIDEVINE_UUID,He=r.default.WIDEVINE_KEYSTEM_STRING,nt="urn:uuid:"+_e;function ut(Jt){let Ht;const Ft=(Jt=Jt||{}).BASE64;return Ht={uuid:_e,schemeIdURI:nt,systemString:He,getInitData:function(wt){return d.parseInitDataFromContentProtection(wt,Ft)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(wt){return new Uint8Array(wt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},Ht}ut.__dashjs_factory_name="KeySystemWidevine";var Pe=te.default.getSingletonFactory(ut);const Be=r.default.PLAYREADY_UUID,it=r.default.PLAYREADY_KEYSTEM_STRING,gt="urn:uuid:"+Be;function zt(Jt){let Ht,Ft="utf-16";const wt=(Jt=Jt||{}).BASE64,nn=Jt.settings;function We(){if(!wt||!wt.hasOwnProperty("decodeArray")||!wt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return Ht={uuid:Be,schemeIdURI:gt,systemString:it,getInitData:function(kt){const jt=new Uint8Array([112,115,115,104,0,0,0,0]),It=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let Ot,on,Hn,Wt,Rn,Bn=0,Dn=null;if(We(),!kt)return null;if("pssh"in kt&&kt.pssh)return d.parseInitDataFromContentProtection(kt,wt);if("pro"in kt&&kt.pro)Dn=wt.decodeArray(kt.pro.__text);else{if(!("prheader"in kt)||!kt.prheader)return null;Dn=wt.decodeArray(kt.prheader.__text)}return Ot=Dn.length,on=4+jt.length+It.length+4+Ot,Hn=new ArrayBuffer(on),Wt=new Uint8Array(Hn),Rn=new DataView(Hn),Rn.setUint32(Bn,on),Bn+=4,Wt.set(jt,Bn),Bn+=jt.length,Wt.set(It,Bn),Bn+=It.length,Rn.setUint32(Bn,Ot),Bn+=4,Wt.set(Dn,Bn),Bn+=Ot,Wt.buffer},getRequestHeadersFromMessage:function(kt){let jt,It;const Ot={},on=new DOMParser;if(nn&&nn.get().streaming.protection.detectPlayreadyMessageFormat&&Ft==="utf-16"&&kt&&kt.byteLength%2==1)return Ot["Content-Type"]="text/xml; charset=utf-8",Ot;const Hn=Ft==="utf-16"?new Uint16Array(kt):new Uint8Array(kt);jt=String.fromCharCode.apply(null,Hn),It=on.parseFromString(jt,"application/xml");const Wt=It.getElementsByTagName("name"),Rn=It.getElementsByTagName("value");for(let Bn=0;Bn<Wt.length;Bn++)Ot[Wt[Bn].childNodes[0].nodeValue]=Rn[Bn].childNodes[0].nodeValue;return Ot.hasOwnProperty("Content")&&(Ot["Content-Type"]=Ot.Content,delete Ot.Content),Ot.hasOwnProperty("Content-Type")||(Ot["Content-Type"]="text/xml; charset=utf-8"),Ot},getLicenseRequestFromMessage:function(kt){let jt=null;const It=new DOMParser;if(nn&&nn.get().streaming.protection.detectPlayreadyMessageFormat&&Ft==="utf-16"&&kt&&kt.byteLength%2==1)return kt;const Ot=Ft==="utf-16"?new Uint16Array(kt):new Uint8Array(kt);We();const on=String.fromCharCode.apply(null,Ot),Hn=It.parseFromString(on,"application/xml");if(!Hn.getElementsByTagName("PlayReadyKeyMessage")[0])return kt;{const Wt=Hn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;Wt&&(jt=wt.decode(Wt))}return jt},getLicenseServerURLFromInitData:function(kt){if(kt){const jt=new DataView(kt),It=jt.getUint16(4,!0);let Ot=6;const on=new DOMParser;for(let Hn=0;Hn<It;Hn++){const Wt=jt.getUint16(Ot,!0);Ot+=2;const Rn=jt.getUint16(Ot,!0);if(Ot+=2,Wt!==1){Ot+=Rn;continue}const Bn=kt.slice(Ot,Ot+Rn),Dn=String.fromCharCode.apply(null,new Uint16Array(Bn)),Fn=on.parseFromString(Dn,"application/xml");if(Fn.getElementsByTagName("LA_URL")[0]){const Kn=Fn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Kn)return Kn}if(Fn.getElementsByTagName("LUI_URL")[0]){const Kn=Fn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Kn)return Kn}}}return null},getCDMData:function(kt){let jt,It,Ot,on;if(We(),!kt)return null;for(jt=[],on=0;on<kt.length;++on)jt.push(kt.charCodeAt(on)),jt.push(0);for(jt=String.fromCharCode.apply(null,jt),jt=wt.encode(jt),It='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",jt),Ot=[],on=0;on<It.length;++on)Ot.push(It.charCodeAt(on)),Ot.push(0);return new Uint8Array(Ot).buffer},setPlayReadyMessageFormat:function(kt){if(kt!=="utf-8"&&kt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');Ft=kt}},Ht}zt.__dashjs_factory_name="KeySystemPlayReady";var Ce=te.default.getSingletonFactory(zt);function Le(Jt){const Ht=(Jt=Jt||{}).BASE64,Ft={};let wt;return Ft[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(nn){return Ht.decodeArray(nn.license)},getErrorResponse:function(nn){return nn}},Ft[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(nn){return nn},getErrorResponse:function(nn){return String.fromCharCode.apply(null,new Uint8Array(nn))}},wt={getServerURLFromMessage:function(nn){return nn},getHTTPMethod:function(){return"POST"},getResponseType:function(nn){return Ft[nn].responseType},getLicenseMessage:function(nn,We){return function(){if(!Ht||!Ht.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),Ft[We].getLicenseMessage(nn)},getErrorResponse:function(nn,We){return Ft[We].getErrorResponse(nn)}},wt}Le.__dashjs_factory_name="DRMToday";var yt=te.default.getSingletonFactory(Le);function Y(){let Jt;const Ht="http://schemas.xmlsoap.org/soap/envelope/";function Ft(We){const kt=String.fromCharCode.apply(null,new Uint8Array(We));return decodeURIComponent(escape(kt))}function wt(We){if(window.DOMParser){const kt=Ft(We),jt=new window.DOMParser().parseFromString(kt,"text/xml"),It=jt?jt.getElementsByTagNameNS(Ht,"Envelope")[0]:null,Ot=It?It.getElementsByTagNameNS(Ht,"Body")[0]:null;if(Ot&&Ot.getElementsByTagNameNS(Ht,"Fault")[0])return null}return We}function nn(We){let kt="",jt="",It="",Ot=-1,on=-1;if(window.DOMParser){const Wt=Ft(We),Rn=new window.DOMParser().parseFromString(Wt,"text/xml"),Bn=Rn?Rn.getElementsByTagNameNS(Ht,"Envelope")[0]:null,Dn=Bn?Bn.getElementsByTagNameNS(Ht,"Body")[0]:null,Fn=Dn?Dn.getElementsByTagNameNS(Ht,"Fault")[0]:null,Kn=Fn?Fn.getElementsByTagName("detail")[0]:null,bn=Kn?Kn.getElementsByTagName("Exception")[0]:null;let At=null;if(Fn===null)return Wt;At=Fn.getElementsByTagName("faultstring")[0].firstChild,kt=At?At.nodeValue:null,bn!==null&&(At=bn.getElementsByTagName("StatusCode")[0],jt=At?At.firstChild.nodeValue:null,At=bn.getElementsByTagName("Message")[0],It=At?At.firstChild.nodeValue:null,Ot=It?It.lastIndexOf("[")+1:-1,on=It?It.indexOf("]"):-1,It=It?It.substring(Ot,on):"")}let Hn=`code: ${jt}, name: ${kt}`;return It&&(Hn+=`, message: ${It}`),Hn}return Jt={getServerURLFromMessage:function(We){return We},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(We){return wt.call(this,We)},getErrorResponse:function(We){return nn.call(this,We)}},Jt}Y.__dashjs_factory_name="PlayReady";var W=te.default.getSingletonFactory(Y);function L(){let Jt;return Jt={getServerURLFromMessage:function(Ht){return Ht},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Ht){return Ht},getErrorResponse:function(Ht){return String.fromCharCode.apply(null,new Uint8Array(Ht))}},Jt}L.__dashjs_factory_name="Widevine";var j=te.default.getSingletonFactory(L);function me(){let Jt;return Jt={getServerURLFromMessage:function(Ht){return Ht},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(Ht){if(!Ht.hasOwnProperty("keys"))return null;let Ft=[];for(let wt=0;wt<Ht.keys.length;wt++){let nn=Ht.keys[wt],We=nn.kid.replace(/=/g,""),kt=nn.k.replace(/=/g,"");Ft.push(new De(We,kt))}return new Oe(Ft)},getErrorResponse:function(Ht){return String.fromCharCode.apply(null,new Uint8Array(Ht))}},Jt}me.__dashjs_factory_name="ClearKey";var ae=te.default.getSingletonFactory(me),Ue=class{constructor(Jt){this.ks=Jt.ks,this.keyId=Jt.keyId,this.initData=Jt.initData,this.protData=Jt.protData,this.cdmData=Jt.cdmData,this.sessionId=Jt.sessionId,this.sessionType=Jt.sessionType}};function rt(){let Jt,Ht,Ft,wt,nn,We,kt,jt,It=this.context;function Ot(Wt,Rn){return Rn&&Wt in Rn?Rn[Wt]:null}function on(Wt,Rn){return Wt&&Wt.sessionId?Wt.sessionId:Rn&&Rn.sessionId?Rn.sessionId:null}function Hn(Wt,Rn){return Wt&&Wt.sessionType?Wt.sessionType:Rn}return Jt={getKeySystemBySystemString:function(Wt){for(let Rn=0;Rn<wt.length;Rn++)if(wt[Rn].systemString===Wt)return wt[Rn];return null},getKeySystems:function(){return wt},getLicenseServerModelInstance:function(Wt,Rn,Bn){if(Bn===r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||Bn===r.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let Dn=null;return Rn&&Rn.hasOwnProperty("drmtoday")?Dn=yt(It).getInstance({BASE64:nn}):Wt.systemString===r.default.WIDEVINE_KEYSTEM_STRING?Dn=j(It).getInstance():Wt.systemString===r.default.PLAYREADY_KEYSTEM_STRING?Dn=W(It).getInstance():Wt.systemString===r.default.CLEARKEY_KEYSTEM_STRING&&(Dn=ae(It).getInstance()),Dn},getSupportedKeySystemMetadataFromContentProtection:function(Wt,Rn,Bn){let Dn,Fn,Kn,bn,At=[];if(!Wt||!Wt.length)return At;const dt=d.findMp4ProtectionElement(Wt);for(Kn=0;Kn<wt.length;Kn++){Fn=wt[Kn];const cn=Ot(Fn.systemString,Rn);for(bn=0;bn<Wt.length;bn++)if(Dn=Wt[bn],Dn.schemeIdUri.toLowerCase()===Fn.schemeIdURI){let mn=Fn.getInitData(Dn,dt);const On=new Ue({ks:wt[Kn],keyId:Dn.keyId,initData:mn,protData:cn,cdmData:Fn.getCDMData(cn?cn.cdmData:null),sessionId:on(cn,Dn),sessionType:Hn(cn,Bn)});cn?At.unshift(On):At.push(On)}}return At},getSupportedKeySystemMetadataFromSegmentPssh:function(Wt,Rn,Bn){let Dn,Fn,Kn=[],bn=d.parsePSSHList(Wt);for(let At=0;At<wt.length;++At){Dn=wt[At],Fn=Dn.systemString;const dt=Ot(Fn,Rn);Dn.uuid in bn&&Kn.push({ks:Dn,initData:bn[Dn.uuid],protData:dt,cdmData:Dn.getCDMData(dt?dt.cdmData:null),sessionId:on(dt),sessionType:Hn(dt,Bn)})}return Kn},initDataEquals:function(Wt,Rn){if(Wt.byteLength===Rn.byteLength){let Bn=new Uint8Array(Wt),Dn=new Uint8Array(Rn);for(let Fn=0;Fn<Bn.length;Fn++)if(Bn[Fn]!==Dn[Fn])return!1;return!0}return!1},initialize:function(){let Wt;wt=[],Wt=Ce(It).getInstance({BASE64:nn,settings:We}),wt.push(Wt),Wt=Pe(It).getInstance({BASE64:nn}),wt.push(Wt),Wt=P(It).getInstance({BASE64:nn}),wt.push(Wt),kt=Wt,Wt=Ye(It).getInstance({BASE64:nn,debug:Ht}),wt.push(Wt),jt=Wt},isClearKey:function(Wt){return Wt===kt||Wt===jt},processClearKeyLicenseRequest:function(Wt,Rn,Bn){try{return Wt.getClearKeysFromProtectionData(Rn,Bn)}catch{return Ft.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(Wt){Wt&&(Wt.debug&&(Ht=Wt.debug,Ft=Ht.getLogger(Jt)),Wt.BASE64&&(nn=Wt.BASE64),Wt.settings&&(We=Wt.settings))},setKeySystems:function(Wt){wt=Wt},setProtectionData:function(Wt){for(var Rn,Bn,Dn=0;Dn<wt.length;Dn++){var Fn=wt[Dn];Fn.hasOwnProperty("init")&&Fn.init((Rn=Fn.systemString,Bn=void 0,Bn=null,Wt&&(Bn=Rn in Wt?Wt[Rn]:null),Bn))}}},Jt}rt.__dashjs_factory_name="ProtectionKeyController";var qe=te.default.getSingletonFactory(rt),$e=t(445),Ge=class{constructor(Jt,Ht){this.initData=Jt,this.initDataType=Ht}},Je=class{constructor(Jt,Ht,Ft,wt){this.sessionToken=Jt,this.message=Ht,this.defaultURL=Ft,this.messageType=wt||r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},Et=class{constructor(Jt,Ht){this.keySystem=Jt,this.ksConfiguration=Ht,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const ct={};function Mt(Jt){Jt=Jt||{};const Ht=this.context,Ft=Jt.eventBus,wt=Jt.events,nn=Jt.debug;let We,kt,jt,It,Ot,on,Hn,Wt;function Rn(At,dt,cn,mn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const ba="Insecure origins are not allowed";return Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{error:ba}),void mn({error:ba})}const On=At[dt].protData&&At[dt].protData.systemStringPriority?At[dt].protData.systemStringPriority:null,ra=At[dt].configs,ga=At[dt].ks;let sa=ga.systemString;(function(ba,Na){return new Promise((Da,gi)=>{Bn(ba,Na,0,Da,gi)})})(On||(ct[sa]?ct[sa]:[sa]),ra).then(ba=>{const Na=ba&&ba.nativeMediaKeySystemAccessObject&&typeof ba.nativeMediaKeySystemAccessObject.getConfiguration=="function"?ba.nativeMediaKeySystemAccessObject.getConfiguration():null,Da=new Et(ga,Na);Da.selectedSystemString=ba.selectedSystemString,Da.nativeMediaKeySystemAccessObject=ba.nativeMediaKeySystemAccessObject,Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{data:Da}),cn({data:Da})}).catch(ba=>{if(dt+1<At.length)Rn(At,dt+1,cn,mn);else{const Na="Key system access denied! ";Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Na+ba.message}),mn({error:Na+ba.message})}})}function Bn(At,dt,cn,mn,On){const ra=At[cn];kt.debug(`Requesting key system access for system string ${ra}`),navigator.requestMediaKeySystemAccess(ra,dt).then(ga=>{mn({nativeMediaKeySystemAccessObject:ga,selectedSystemString:ra})}).catch(ga=>{cn+1<At.length?Bn(At,dt,cn+1,mn,On):On(ga)})}function Dn(At){if(!At||!At.session)return Promise.resolve;const dt=At.session;return dt.removeEventListener("keystatuseschange",At),dt.removeEventListener("message",At),dt.close()}function Fn(At){for(let dt=0;dt<on.length;dt++)if(on[dt]===At){on.splice(dt,1);break}}function Kn(At,dt){const cn={session:At,keyId:dt.keyId,normalizedKeyId:dt&&dt.keyId&&typeof dt.keyId=="string"?dt.keyId.replace(/-/g,"").toLowerCase():"",initData:dt.initData,sessionId:dt.sessionId,sessionType:dt.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(mn){switch(mn.type){case"keystatuseschange":this._onKeyStatusesChange(mn);break;case"message":this._onKeyMessage(mn)}},_onKeyStatusesChange:function(mn){Ft.trigger(wt.KEY_STATUSES_CHANGED,{data:this});const On=[];mn.target.keyStatuses.forEach(function(){On.push(bn(arguments))}),Ft.trigger(wt.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:On,sessionToken:cn})},_onKeyMessage:function(mn){let On=ArrayBuffer.isView(mn.message)?mn.message.buffer:mn.message;Ft.trigger(wt.INTERNAL_KEY_MESSAGE,{data:new Je(this,On,void 0,mn.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return At.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return At.expiration},getKeyStatuses:function(){return At.keyStatuses},getUsable:function(){let mn=!1;return At.keyStatuses.forEach(function(){bn(arguments).status===r.default.MEDIA_KEY_STATUSES.USABLE&&(mn=!0)}),mn}};return At.addEventListener("keystatuseschange",cn),At.addEventListener("message",cn),At.closed.then(()=>{Fn(cn),kt.debug("DRM: Session closed.  SessionID = "+cn.getSessionId()),Ft.trigger(wt.KEY_SESSION_CLOSED,{data:cn.getSessionId()})}),on.push(cn),cn}function bn(At){let dt,cn;return At&&At.length>0&&(At[0]&&(typeof At[0]=="string"?dt=At[0]:cn=At[0]),At[1]&&(typeof At[1]=="string"?dt=At[1]:cn=At[1])),{status:dt,keyId:cn}}return We={closeKeySession:function(At){Dn(At).catch(function(dt){Fn(At),Ft.trigger(wt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+At.getSessionId()+") "+dt.name})})},createKeySession:function(At){if(!jt||!Ot)throw new Error("Can not create sessions until you have selected a key system");const dt=Ot.createSession(At.sessionType),cn=Kn(dt,At),mn=jt.systemString===r.default.CLEARKEY_KEYSTEM_STRING&&(At.initData||At.protData&&At.protData.clearkeys)?r.default.INITIALIZATION_DATA_TYPE_KEYIDS:r.default.INITIALIZATION_DATA_TYPE_CENC;dt.generateRequest(mn,At.initData).then(function(){kt.debug("DRM: Session created.  SessionID = "+cn.getSessionId()),Ft.trigger(wt.KEY_SESSION_CREATED,{data:cn})}).catch(function(On){Fn(cn),Ft.trigger(wt.KEY_SESSION_CREATED,{data:null,error:new E.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+On.name)})})},getAllInitData:function(){const At=[];for(let dt=0;dt<on.length;dt++)on[dt].initData&&At.push(on[dt].initData);return At},getSessionTokens:function(){return on},loadKeySession:function(At){if(!jt||!Ot)throw new Error("Can not load sessions until you have selected a key system");const dt=At.sessionId;for(let On=0;On<on.length;On++)if(dt===on[On].sessionId)return void kt.warn("DRM: Ignoring session ID because we have already seen it!");const cn=Ot.createSession(At.sessionType),mn=Kn(cn,At);mn.hasTriggeredKeyStatusMapUpdate=!0,cn.load(dt).then(function(On){On?(kt.debug("DRM: Session loaded.  SessionID = "+mn.getSessionId()),Ft.trigger(wt.KEY_SESSION_CREATED,{data:mn})):(Fn(mn),Ft.trigger(wt.KEY_SESSION_CREATED,{data:null,error:new E.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+dt+")")}))}).catch(function(On){Fn(mn),Ft.trigger(wt.KEY_SESSION_CREATED,{data:null,error:new E.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+dt+")! "+On.name)})})},removeKeySession:function(At){At.session.remove().then(function(){kt.debug("DRM: Session removed.  SessionID = "+At.getSessionId()),Ft.trigger(wt.KEY_SESSION_REMOVED,{data:At.getSessionId()})},function(dt){Ft.trigger(wt.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+At.getSessionId()+"). "+dt.name})})},requestKeySystemAccess:function(At){return new Promise((dt,cn)=>{Rn(At,0,dt,cn)})},reset:function(){const At=on.length;let dt;if(At!==0){const cn=function(mn){Fn(mn),on.length===0&&(It?(It.removeEventListener("encrypted",Hn),It.setMediaKeys(null).then(function(){Ft.trigger(wt.TEARDOWN_COMPLETE)})):Ft.trigger(wt.TEARDOWN_COMPLETE))};for(let mn=0;mn<At;mn++)dt=on[mn],function(On){Dn(dt),cn(On)}(dt)}else Ft.trigger(wt.TEARDOWN_COMPLETE)},selectKeySystem:function(At){return new Promise((dt,cn)=>{At.nativeMediaKeySystemAccessObject.createMediaKeys().then(mn=>(jt=At.keySystem,Ot=mn,It?It.setMediaKeys(Ot):Promise.resolve())).then(()=>{dt(jt)}).catch(function(){cn({error:"Error selecting keys system ("+At.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(At){It!==At&&(It&&(It.removeEventListener("encrypted",Hn),It.setMediaKeys&&It.setMediaKeys(null)),It=At,It&&(It.addEventListener("encrypted",Hn),It.setMediaKeys&&Ot&&It.setMediaKeys(Ot)))},setServerCertificate:function(At){return new Promise((dt,cn)=>{Ot.setServerCertificate(At).then(function(){kt.info("DRM: License server certificate successfully updated."),Ft.trigger(wt.SERVER_CERTIFICATE_UPDATED),dt()}).catch(mn=>{cn(mn),Ft.trigger(wt.SERVER_CERTIFICATE_UPDATED,{error:new E.default(p.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,p.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+mn.name)})})})},stop:function(){let At;for(let dt=0;dt<on.length;dt++)At=on[dt],At.getUsable()||(Dn(At),Fn(At))},updateKeySession:function(At,dt){const cn=At.session;Wt.isClearKey(jt)&&(dt=dt.toJWK()),cn.update(dt).then(()=>{Ft.trigger(wt.KEY_SESSION_UPDATED)}).catch(function(mn){Ft.trigger(wt.KEY_ERROR,{error:new E.default(p.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+mn.name,At)})})}},kt=nn.getLogger(We),jt=null,It=null,Ot=null,on=[],Wt=qe(Ht).getInstance(),Hn={handleEvent:function(At){if(At.type==="encrypted"&&At.initData){let dt=ArrayBuffer.isView(At.initData)?At.initData.buffer:At.initData;Ft.trigger(wt.NEED_KEY,{key:new Ge(dt,At.initDataType)})}}},We}ct[r.default.PLAYREADY_KEYSTEM_STRING]=[r.default.PLAYREADY_KEYSTEM_STRING,r.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],ct[r.default.WIDEVINE_KEYSTEM_STRING]=[r.default.WIDEVINE_KEYSTEM_STRING],ct[r.default.CLEARKEY_KEYSTEM_STRING]=[r.default.CLEARKEY_KEYSTEM_STRING],Mt.__dashjs_factory_name="DefaultProtectionModel";var yn=te.default.getClassFactory(Mt);function tn(Jt){Jt=Jt||{};const Ht=this.context,Ft=Jt.eventBus,wt=Jt.events,nn=Jt.debug,We=Jt.api;let kt,jt,It,Ot,on,Hn,Wt,Rn,Bn;function Dn(){try{for(let bn=0;bn<Wt.length;bn++)Fn(Wt[bn]);It&&It.removeEventListener(We.needkey,Rn),Ft.trigger(wt.TEARDOWN_COMPLETE)}catch(bn){Ft.trigger(wt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+bn.message})}}function Fn(bn){const At=bn.session;At.removeEventListener(We.error,bn),At.removeEventListener(We.message,bn),At.removeEventListener(We.ready,bn),At.removeEventListener(We.close,bn);for(let dt=0;dt<Wt.length;dt++)if(Wt[dt]===bn){Wt.splice(dt,1);break}At[We.release]()}function Kn(){let bn=null;const At=function(){It.removeEventListener("loadedmetadata",bn),It[We.setMediaKeys](on),Ft.trigger(wt.VIDEO_ELEMENT_SELECTED)};It.readyState>=1?At():(bn=At.bind(this),It.addEventListener("loadedmetadata",bn))}return kt={getAllInitData:function(){const bn=[];for(let At=0;At<Wt.length;At++)bn.push(Wt[At].initData);return bn},getSessionTokens:function(){return Wt},requestKeySystemAccess:function(bn){return new Promise((At,dt)=>{let cn=!1;for(let mn=0;mn<bn.length;mn++){const On=bn[mn].ks.systemString,ra=bn[mn].configs;let ga=null,sa=null;for(let ba=0;ba<ra.length;ba++){const Na=ra[ba].audioCapabilities,Da=ra[ba].videoCapabilities;if(Na&&Na.length!==0){ga=[];for(let ui=0;ui<Na.length;ui++)window[We.MediaKeys].isTypeSupported(On,Na[ui].contentType)&&ga.push(Na[ui])}if(Da&&Da.length!==0){sa=[];for(let ui=0;ui<Da.length;ui++)window[We.MediaKeys].isTypeSupported(On,Da[ui].contentType)&&sa.push(Da[ui])}if(!ga&&!sa||ga&&ga.length===0||sa&&sa.length===0)continue;cn=!0;const gi=new h(ga,sa),Ra=Bn.getKeySystemBySystemString(On),pr=new Et(Ra,gi);Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{data:pr}),At({data:pr});break}}if(!cn){const mn="Key system access denied! -- No valid audio/video content configurations detected!";Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{error:mn}),dt({error:mn})}})},selectKeySystem:function(bn){return new Promise((At,dt)=>{try{on=bn.mediaKeys=new window[We.MediaKeys](bn.keySystem.systemString),Ot=bn.keySystem,Hn=bn,It&&Kn(),At(Ot)}catch{dt({error:"Error selecting keys system ("+Ot.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(bn){It!==bn&&(It&&It.removeEventListener(We.needkey,Rn),It=bn,It&&(It.addEventListener(We.needkey,Rn),on&&Kn()))},createKeySession:function(bn){if(!Ot||!on||!Hn)throw new Error("Can not create sessions until you have selected a key system");let At=null;if(Hn.ksConfiguration.videoCapabilities&&Hn.ksConfiguration.videoCapabilities.length>0&&(At=Hn.ksConfiguration.videoCapabilities[0]),At===null&&Hn.ksConfiguration.audioCapabilities&&Hn.ksConfiguration.audioCapabilities.length>0&&(At=Hn.ksConfiguration.audioCapabilities[0]),At===null)throw new Error("Can not create sessions for unknown content types.");const dt=At.contentType,cn=on.createSession(dt,new Uint8Array(bn.initData),bn.cdmData?new Uint8Array(bn.cdmData):null),mn=function(On,ra){return{session:On,keyId:ra.keyId,normalizedKeyId:ra&&ra.keyId&&typeof ra.keyId=="string"?ra.keyId.replace(/-/g,"").toLowerCase():"",initData:ra.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(ga){switch(ga.type){case We.error:let sa="KeyError";Ft.trigger(wt.KEY_ERROR,{error:new E.default(p.default.MEDIA_KEYERR_CODE,sa,this)});break;case We.message:let ba=ArrayBuffer.isView(ga.message)?ga.message.buffer:ga.message;Ft.trigger(wt.INTERNAL_KEY_MESSAGE,{data:new Je(this,ba,ga.destinationURL)});break;case We.ready:jt.debug("DRM: Key added."),Ft.trigger(wt.KEY_ADDED);break;case We.close:jt.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ft.trigger(wt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(cn,bn);cn.addEventListener(We.error,mn),cn.addEventListener(We.message,mn),cn.addEventListener(We.ready,mn),cn.addEventListener(We.close,mn),Wt.push(mn),jt.debug("DRM: Session created.  SessionID = "+mn.getSessionId()),Ft.trigger(wt.KEY_SESSION_CREATED,{data:mn})},updateKeySession:function(bn,At){const dt=bn.session;Bn.isClearKey(Ot)?dt.update(new Uint8Array(At.toJWK())):dt.update(new Uint8Array(At)),Ft.trigger(wt.KEY_SESSION_UPDATED)},closeKeySession:Fn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Dn,reset:Dn},jt=nn.getLogger(kt),It=null,Ot=null,on=null,Hn=null,Wt=[],Bn=qe(Ht).getInstance(),Rn={handleEvent:function(bn){if(bn.type===We.needkey&&bn.initData){const At=ArrayBuffer.isView(bn.initData)?bn.initData.buffer:bn.initData;Ft.trigger(wt.NEED_KEY,{key:new Ge(At,r.default.INITIALIZATION_DATA_TYPE_CENC)})}}},kt}tn.__dashjs_factory_name="ProtectionModel_3Feb2014";var fn=te.default.getClassFactory(tn);function Bt(Jt){Jt=Jt||{};const Ht=this.context,Ft=Jt.eventBus,wt=Jt.events,nn=Jt.debug,We=Jt.api,kt=Jt.errHandler;let jt,It,Ot,on,Hn,Wt,Rn,Bn,Dn;function Fn(){Ot&&At();for(let dt=0;dt<Rn.length;dt++)Kn(Rn[dt]);Ft.trigger(wt.TEARDOWN_COMPLETE)}function Kn(dt){try{Ot[We.cancelKeyRequest](on.systemString,dt.sessionId)}catch(cn){Ft.trigger(wt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+dt.sessionId+") "+cn.message})}}function bn(dt,cn){if(cn&&dt){const mn=dt.length;for(let On=0;On<mn;On++)if(dt[On].sessionId==cn)return dt[On];return null}return null}function At(){Ot.removeEventListener(We.keyerror,Dn),Ot.removeEventListener(We.needkey,Dn),Ot.removeEventListener(We.keymessage,Dn),Ot.removeEventListener(We.keyadded,Dn)}return jt={getAllInitData:function(){const dt=[];for(let cn=0;cn<Wt.length;cn++)dt.push(Wt[cn].initData);for(let cn=0;cn<Rn.length;cn++)dt.push(Rn[cn].initData);return dt},getSessionTokens:function(){return Rn.concat(Wt)},requestKeySystemAccess:function(dt){return new Promise((cn,mn)=>{let On=Ot;On||(On=document.createElement("video"));let ra=!1;for(let ga=0;ga<dt.length;ga++){const sa=dt[ga].ks.systemString,ba=dt[ga].configs;let Na=null,Da=null;for(let gi=0;gi<ba.length;gi++){const Ra=ba[gi].videoCapabilities;if(Ra&&Ra.length!==0){Da=[];for(let $a=0;$a<Ra.length;$a++)On.canPlayType(Ra[$a].contentType,sa)!==""&&Da.push(Ra[$a])}if(!Da||Na||Da&&Da.length===0)continue;ra=!0;const pr=new h(Na,Da),ui=Hn.getKeySystemBySystemString(sa),Ka=new Et(ui,pr);Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{data:Ka}),cn({data:Ka});break}}if(!ra){const ga="Key system access denied! -- No valid audio/video content configurations detected!";Ft.trigger(wt.KEY_SYSTEM_ACCESS_COMPLETE,{error:ga}),mn({error:ga})}})},selectKeySystem:function(dt){return on=dt.keySystem,Promise.resolve(on)},setMediaElement:function(dt){if(Ot!==dt){if(Ot){At();for(var cn=0;cn<Rn.length;cn++)Kn(Rn[cn]);Rn=[]}Ot=dt,Ot&&(Ot.addEventListener(We.keyerror,Dn),Ot.addEventListener(We.needkey,Dn),Ot.addEventListener(We.keymessage,Dn),Ot.addEventListener(We.keyadded,Dn),Ft.trigger(wt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(dt){if(!on)throw new Error("Can not create sessions until you have selected a key system");if(Bn||Rn.length===0){const cn={sessionId:null,keyId:dt.keyId,normalizedKeyId:dt&&dt.keyId&&typeof dt.keyId=="string"?dt.keyId.replace(/-/g,"").toLowerCase():"",initData:dt.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return Wt.push(cn),Ot[We.generateKeyRequest](on.systemString,new Uint8Array(dt.initData)),cn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(dt,cn){const mn=dt.sessionId;if(Hn.isClearKey(on))for(let On=0;On<cn.keyPairs.length;On++)Ot[We.addKey](on.systemString,cn.keyPairs[On].key,cn.keyPairs[On].keyID,mn);else Ot[We.addKey](on.systemString,new Uint8Array(cn),new Uint8Array(dt.initData),mn);Ft.trigger(wt.KEY_SESSION_UPDATED)},closeKeySession:Kn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Fn,reset:Fn},It=nn.getLogger(jt),Ot=null,on=null,Wt=[],Rn=[],Hn=qe(Ht).getInstance(),Dn={handleEvent:function(dt){let cn=null;switch(dt.type){case We.needkey:let mn=ArrayBuffer.isView(dt.initData)?dt.initData.buffer:dt.initData;Ft.trigger(wt.NEED_KEY,{key:new Ge(mn,r.default.INITIALIZATION_DATA_TYPE_CENC)});break;case We.keyerror:if(cn=bn(Rn,dt.sessionId),cn||(cn=bn(Wt,dt.sessionId)),cn){let On=p.default.MEDIA_KEYERR_CODE,ra="";switch(dt.errorCode.code){case 1:On=p.default.MEDIA_KEYERR_UNKNOWN_CODE,ra+="MEDIA_KEYERR_UNKNOWN - "+p.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:On=p.default.MEDIA_KEYERR_CLIENT_CODE,ra+="MEDIA_KEYERR_CLIENT - "+p.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:On=p.default.MEDIA_KEYERR_SERVICE_CODE,ra+="MEDIA_KEYERR_SERVICE - "+p.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:On=p.default.MEDIA_KEYERR_OUTPUT_CODE,ra+="MEDIA_KEYERR_OUTPUT - "+p.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:On=p.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,ra+="MEDIA_KEYERR_HARDWARECHANGE - "+p.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:On=p.default.MEDIA_KEYERR_DOMAIN_CODE,ra+="MEDIA_KEYERR_DOMAIN - "+p.default.MEDIA_KEYERR_DOMAIN_MESSAGE}ra+="  System Code = "+dt.systemCode,Ft.trigger(wt.KEY_ERROR,{error:new E.default(On,ra,cn)})}else It.error("No session token found for key error");break;case We.keyadded:cn=bn(Rn,dt.sessionId),cn||(cn=bn(Wt,dt.sessionId)),cn?(It.debug("DRM: Key added."),Ft.trigger(wt.KEY_ADDED,{data:cn})):It.debug("No session token found for key added");break;case We.keymessage:if(Bn=dt.sessionId!==null&&dt.sessionId!==void 0,Bn?(cn=bn(Rn,dt.sessionId),!cn&&Wt.length>0&&(cn=Wt.shift(),Rn.push(cn),cn.sessionId=dt.sessionId,Ft.trigger(wt.KEY_SESSION_CREATED,{data:cn}))):Wt.length>0&&(cn=Wt.shift(),Rn.push(cn),Wt.length!==0&&kt.error(new E.default(p.default.MEDIA_KEY_MESSAGE_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),cn){let On=ArrayBuffer.isView(dt.message)?dt.message.buffer:dt.message;cn.keyMessage=On,Ft.trigger(wt.INTERNAL_KEY_MESSAGE,{data:new Je(cn,On,dt.defaultURL)})}else It.warn("No session token found for key message")}}},jt}Bt.__dashjs_factory_name="ProtectionModel_01b";var kn=te.default.getClassFactory(Bt);const Wn=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],ta=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ha(){let Jt;const Ht=this.context;function Ft(wt,nn){for(let We=0;We<nn.length;We++){const kt=nn[We];if(typeof wt[kt[Object.keys(kt)[0]]]=="function")return kt}return null}return Jt={createProtectionSystem:function(wt){let nn=null;const We=qe(Ht).getInstance();We.setConfig({debug:wt.debug,BASE64:wt.BASE64,settings:wt.settings}),We.initialize();let kt=function(jt){const It=jt.debug,Ot=It.getLogger(Jt),on=jt.eventBus,Hn=jt.errHandler,Wt=jt.videoModel?jt.videoModel.getElement():null;return Wt&&Wt.onencrypted===void 0||Wt&&Wt.mediaKeys===void 0?Ft(Wt,ta)?(Ot.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),fn(Ht).create({debug:It,eventBus:on,events:jt.events,api:Ft(Wt,ta)})):Ft(Wt,Wn)?(Ot.info("EME detected on this user agent! (ProtectionModel_01b)"),kn(Ht).create({debug:It,eventBus:on,errHandler:Hn,events:jt.events,api:Ft(Wt,Wn)})):(Ot.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Ot.info("EME detected on this user agent! (DefaultProtectionModel"),yn(Ht).create({debug:It,eventBus:on,events:jt.events}))}(wt);return kt&&(nn=fe(Ht).create({BASE64:wt.BASE64,cmcdModel:wt.cmcdModel,constants:wt.constants,customParametersModel:wt.customParametersModel,debug:wt.debug,eventBus:wt.eventBus,events:wt.events,protectionKeyController:We,protectionModel:kt,settings:wt.settings}),wt.capabilities.setEncryptedMediaSupported(!0)),nn}},Jt}Ha.__dashjs_factory_name="Protection";const La=dashjs.FactoryMaker.getClassFactory(Ha);La.events=$e.default,La.errors=p.default,dashjs.FactoryMaker.updateClassFactory(Ha.__dashjs_factory_name,La);var qa=La},445:function(f,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let o=new r;e.default=o},1923:function(f,e,t){t.r(e);var n=t(8748);class r extends n.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let o=new r;e.default=o},559:function(f,e,t){t.r(e),t.d(e,{supportsMediaSource:function(){return g}});var n=t(138),r=t(5212),o=t(2861),u=t(7393),d=t(649);function g(){let p="ManagedMediaSource"in window,E="WebKitMediaSource"in window,b="MediaSource"in window;return p||E||b}function h(){let p,E,b,A,T,C;const O=this.context,te=(0,u.default)(O).getInstance();function de(q,k){let ee;k===r.default.VIDEO?ee=function(P){const xe={video:{}};return P&&(P.width&&(xe.video.width=P.width),P.height&&(xe.video.height=P.height),P.framerate&&(xe.video.framerate=parseFloat(P.framerate)),P.hdrMetadataType&&(xe.video.hdrMetadataType=P.hdrMetadataType),P.colorGamut&&(xe.video.colorGamut=P.colorGamut),P.transferFunction&&(xe.video.transferFunction=P.transferFunction)),xe}(q):k===r.default.AUDIO&&(ee=function(P){const xe={audio:{}};return P.samplerate&&(xe.audio.samplerate=P.samplerate),xe}(q)),ee[k].contentType=q.codec,ee[k].bitrate=parseInt(q.bitrate),ee.type="media-source";let Ee=q.codec;return q.width&&q.height&&(Ee+=';width="'+q.width+'";height="'+q.height+'"'),ee.mediaSourceCodecString=Ee,function(P,xe,Ve){return xe&&xe.keySystemsMetadata&&xe.keySystemsMetadata.length!==0?xe.keySystemsMetadata.map(be=>{const _t={...P};if(be.ks){_t.keySystemConfiguration={},be.ks.systemString&&(_t.keySystemConfiguration.keySystem=be.ks.systemString);let Ye="";be.ks.systemString===o.default.WIDEVINE_KEYSTEM_STRING&&(Ye=o.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const _e=be.protData,He=_e&&_e.audioRobustness&&_e.audioRobustness.length>0?_e.audioRobustness:Ye,nt=_e&&_e.videoRobustness&&_e.videoRobustness.length>0?_e.videoRobustness:Ye;Ve===r.default.AUDIO?_t.keySystemConfiguration[Ve]={robustness:He}:Ve===r.default.VIDEO&&(_t.keySystemConfiguration[Ve]={robustness:nt})}return _t}):[P]}(ee,q,k)}function fe(q){if(A&&A.length!==0&&q)return A.find(k=>{const ee=De(q,k,r.default.AUDIO),Ee=De(q,k,r.default.VIDEO),P=De(q,k,"keySystemConfiguration");return ee&&Ee&&P})}function De(q,k,ee){return!q[ee]&&!k[ee]||!(!q[ee]||!k[ee])&&te.areEqual(q[ee],k[ee])}function Oe(q,k){return(q=q.filter(ee=>!(ee.schemeIdUri&&k.some(Ee=>Ee.schemeIdUri===ee.schemeIdUri)))).push(...k),q}return p={areKeyIdsExpired:function(q){return!!(b&&q&&q.normalizedKeyIds&&q.normalizedKeyIds.size!==0)&&b.areKeyIdsExpired(q.normalizedKeyIds)},areKeyIdsUsable:function(q){return!(b&&q&&q.normalizedKeyIds&&q.normalizedKeyIds.size!==0)||b.areKeyIdsUsable(q.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(q,k){if(!q||!q.codec||q.isSupported===!1)return!1;const ee=de(q,k).map(Ee=>fe(Ee)).filter(Ee=>Ee!=null);return!(ee&&ee.length>0)||function(Ee){return Ee.some(P=>P&&P.decodingInfo&&P.decodingInfo.supported)}(ee)},isProtectionCompatible:function(q,k){return!k||!(!q.isEncrypted&&k.isEncrypted)},runCodecSupportCheck:function(q,k){if(k!==r.default.AUDIO&&k!==r.default.VIDEO)return Promise.resolve();const ee=de(q,k);return function(Ee,P){return E.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(Ee.codec&&P===r.default.AUDIO||P===r.default.VIDEO&&Ee.codec&&Ee.width&&Ee.height&&Ee.bitrate&&Ee.framerate)}(q,k)?function(Ee){return new Promise(P=>{if(!Ee||Ee.length===0)return void P();const xe=Ee.map(Ve=>function(be){return new Promise(_t=>{fe(be)?_t():navigator.mediaCapabilities.decodingInfo(be).then(Ye=>{be.decodingInfo=Ye,A.push(be),_t()}).catch(Ye=>{be.decodingInfo={supported:!1},A.push(be),C.error(Ye),_t()})})}(Ve));Promise.allSettled(xe).then(()=>{P()}).catch(Ve=>{C.error(Ve),P()})})}(ee):(function(Ee){if(!Ee||!Ee.length)return;const P=Ee[0];if(fe(P))return;let xe={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(P.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(P.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(P.mediaSourceCodecString))&&(xe.supported=!0),P.decodingInfo=xe,A.push(P)}(ee),Promise.resolve())},setConfig:function(q){q&&(q.settings&&(E=q.settings),q.protectionController&&(b=q.protectionController))},setEncryptedMediaSupported:function(q){T=q},setProtectionController:function(q){b=q},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return T},supportsEssentialProperty:function(q){let k=E.get().streaming.capabilities.supportedEssentialProperties;E.get().streaming.capabilities.useMediaCapabilitiesApi&&E.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(k=Oe(k,[{schemeIdUri:r.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:r.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:r.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),E.get().streaming.capabilities.useMediaCapabilitiesApi&&E.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(k=Oe(k,[{schemeIdUri:r.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return q.inArray(k)}catch{return!0}},supportsMediaSource:g},T=!1,A=[],C=(0,d.default)(O).getInstance().getLogger(p),p}h.__dashjs_factory_name="Capabilities",e.default=n.default.getSingletonFactory(h)},7377:function(f,e,t){t.r(e);var n=t(138),r=t(656);function o(){return{customTimeRangeArray:[],length:0,add:function(u,d){let g;for(g=0;g<this.customTimeRangeArray.length&&u>this.customTimeRangeArray[g].start;g++);for(this.customTimeRangeArray.splice(g,0,{start:u,end:d}),g=0;g<this.customTimeRangeArray.length-1;g++)this.mergeRanges(g,g+1)&&g--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(u,d){for(let g=0;g<this.customTimeRangeArray.length;g++)if(u<=this.customTimeRangeArray[g].start&&d>=this.customTimeRangeArray[g].end)this.customTimeRangeArray.splice(g,1),g--;else{if(u>this.customTimeRangeArray[g].start&&d<this.customTimeRangeArray[g].end){this.customTimeRangeArray.splice(g+1,0,{start:d,end:this.customTimeRangeArray[g].end}),this.customTimeRangeArray[g].end=u;break}u>this.customTimeRangeArray[g].start&&u<this.customTimeRangeArray[g].end?this.customTimeRangeArray[g].end=u:d>this.customTimeRangeArray[g].start&&d<this.customTimeRangeArray[g].end&&(this.customTimeRangeArray[g].start=d)}this.length=this.customTimeRangeArray.length},mergeRanges:function(u,d){let g=this.customTimeRangeArray[u],h=this.customTimeRangeArray[d];return g.start<=h.start&&h.start<=g.end&&g.end<=h.end?(g.end=h.end,this.customTimeRangeArray.splice(d,1),!0):h.start<=g.start&&g.start<=h.end&&h.end<=g.end?(g.start=h.start,this.customTimeRangeArray.splice(d,1),!0):h.start<=g.start&&g.start<=h.end&&g.end<=h.end?(this.customTimeRangeArray.splice(u,1),!0):g.start<=h.start&&h.start<=g.end&&h.end<=g.end&&(this.customTimeRangeArray.splice(d,1),!0)},start:function(u){return(0,r.checkInteger)(u),u>=this.customTimeRangeArray.length||u<0?NaN:this.customTimeRangeArray[u].start},end:function(u){return(0,r.checkInteger)(u),u>=this.customTimeRangeArray.length||u<0?NaN:this.customTimeRangeArray[u].end}}}o.__dashjs_factory_name="CustomTimeRanges",e.default=n.default.getClassFactory(o)},7393:function(f,e,t){t.r(e);var n=t(138),r=t(7316);function o(){let u;return u={areEqual:function(d,g){return r(d,g)}},u}o.__dashjs_factory_name="ObjectUtils",e.default=n.default.getSingletonFactory(o)},656:function(f,e,t){t.r(e),t.d(e,{checkInteger:function(){return o},checkIsVideoOrAudioType:function(){return d},checkParameterType:function(){return r},checkRange:function(){return u}});var n=t(5212);function r(g,h){if(typeof g!==h)throw n.default.BAD_ARGUMENT_ERROR}function o(g){if(g===null||isNaN(g)||g%1!=0)throw n.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function u(g,h,p){if(g<h||g>p)throw n.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function d(g){if(typeof g!="string"||g!==n.default.AUDIO&&g!==n.default.VIDEO)throw n.default.BAD_ARGUMENT_ERROR}},1944:function(f,e,t){t.r(e),e.default=class{constructor(n,r,o){this.code=n||null,this.message=r||null,this.data=o||null}}},7568:function(f,e,t){t.r(e),t.d(e,{HTTPRequest:function(){return n},HTTPRequestTrace:function(){return r}});class n{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class r{constructor(){this.s=null,this.d=null,this.b=[]}}n.GET="GET",n.HEAD="HEAD",n.MPD_TYPE="MPD",n.XLINK_EXPANSION_TYPE="XLinkExpansion",n.INIT_SEGMENT_TYPE="InitializationSegment",n.INDEX_SEGMENT_TYPE="IndexSegment",n.MEDIA_SEGMENT_TYPE="MediaSegment",n.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",n.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",n.DVB_REPORTING_TYPE="DVBReporting",n.LICENSE="license",n.CONTENT_STEERING_TYPE="ContentSteering",n.OTHER_TYPE="other"}},NE={};function Ni(f){var e=NE[f];if(e!==void 0)return e.exports;var t=NE[f]={exports:{}};return RR[f].call(t.exports,t,t.exports,Ni),t.exports}Ni.amdO={},Ni.d=function(f,e){for(var t in e)Ni.o(e,t)&&!Ni.o(f,t)&&Object.defineProperty(f,t,{enumerable:!0,get:e[t]})},Ni.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ni.o=function(f,e){return Object.prototype.hasOwnProperty.call(f,e)},Ni.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var Wr={};Ni.r(Wr),Ni.d(Wr,{Constants:function(){return d0.default},Debug:function(){return c0.default},MediaPlayer:function(){return IR.MediaPlayer},MediaPlayerFactory:function(){return u0},MetricsReporting:function(){return l0.default},Protection:function(){return o0.default},default:function(){return wR},supportsMediaSource:function(){return f0.supportsMediaSource}});var IR=Ni(5393),l0=Ni(4469),o0=Ni(3888),xR=Ni(255);let ME,xh=function(){const f="application/dash+xml";let e;function t(r,o,u){if(!r||!/^VIDEO$/i.test(r.nodeName))return null;if(r._dashjs_player)return r._dashjs_player;let d,g=r.id||r.name||"video element";if(!(o=o||[].slice.call(r.querySelectorAll("source")).filter(function(h){return h.type==f})[0])&&r.src)(o=document.createElement("source")).src=r.src;else if(!o&&!r.src)return null;return u=u||{},d=(0,xR.default)(u).create(),d.initialize(r,o.src,r.autoplay),e||(e=d.getDebug().getLogger()),e.debug("Converted "+g+" to dash.js player and added content: "+o.src),r._dashjs_player=d,d}function n(r){return/^VIDEO$/i.test(r.nodeName)?r:n(r.parentNode)}return{create:t,createAll:function(r,o){let u=[];r=r||"[data-dashjs-player]";let d=(o=o||document).querySelectorAll(r);for(let h=0;h<d.length;h++){let p=t(d[h],null);u.push(p)}let g=o.querySelectorAll('source[type="'+f+'"]');for(let h=0;h<g.length;h++){let p=t(n(g[h]),null);u.push(p)}return u}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?xh.createAll():ME=window.setInterval(function(){window.dashjs&&(window.clearInterval(ME),xh.createAll())},500):window.addEventListener("load",function f(){window.removeEventListener("load",f),xh.createAll()}));var u0=xh,c0=Ni(649),d0=Ni(5212),f0=Ni(559);dashjs.Protection=o0.default,dashjs.MetricsReporting=l0.default,dashjs.MediaPlayerFactory=u0,dashjs.Debug=c0.default,dashjs.supportsMediaSource=f0.supportsMediaSource,dashjs.Constants=d0.default;var wR=dashjs;(Wr=Wr.default).Constants;Wr.Debug;var kR=Wr.MediaPlayer;Wr.MediaPlayerFactory;Wr.MetricsReporting;Wr.Protection;Wr.default;Wr.supportsMediaSource;class DR{hls;video;constructor(e){this.video=e,this.hls=new $s,this.hls.attachMedia(e)}load(e){$s.isSupported()?this.hls.loadSource(e):this.video.canPlayType("application/vnd.apple.mpegurl")&&(this.video.src=e)}play(){this.video.play()}pause(){this.video.pause()}destroy(){this.hls.destroy()}}class CR{dash;video;constructor(e){this.video=e,this.dash=kR().create(),this.dash.initialize(e,"",!1)}load(e){this.dash.attachSource(e)}play(){this.video.play()}pause(){this.video.pause()}destroy(){this.dash.reset()}}function LR(){return ir.jsx(ir.Fragment,{children:ir.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center p-2",children:[ir.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[" ",ir.jsx("img",{src:"logo.svg",width:100})," React Player CC Demo"]}),ir.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-4xl p-3",children:[ir.jsx("h2",{className:"text-2xl font-bold mt-8",children:"MP4 Example"}),ir.jsx(Vg,{src:"./video.mp4",subtitles:[{id:1,title:"test",link:"./sub.srt",default:!0}]}),ir.jsx("h2",{className:"text-2xl font-bold mt-8",children:"HLS Example"}),ir.jsx(Vg,{playerClass:DR,src:"./hls.m3u8",subtitles:[{id:1,title:"test",link:"./sub.srt",default:!0}]}),ir.jsx("h2",{className:"text-2xl font-bold mt-8",children:"DASH Example"}),ir.jsx(Vg,{playerClass:CR,src:"https://dash.akamaized.net/envivio/EnvivioDash3/manifest.mpd",subtitles:[{id:1,title:"test",link:"./sub.srt",default:!0}]})]})]})})}pT.createRoot(document.getElementById("root")).render(ir.jsx(Qn.StrictMode,{children:ir.jsx(LR,{})}))});export default NR();
